(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var app_1 = require("./app");
(function (StateFlags) {
    StateFlags[StateFlags["COMPLETE"] = 0] = "COMPLETE";
    StateFlags[StateFlags["MOREINFO"] = 1] = "MOREINFO";
    StateFlags[StateFlags["NORESULT"] = 2] = "NORESULT";
})(exports.StateFlags || (exports.StateFlags = {}));
var StateFlags = exports.StateFlags;
// Entry point for NLQP
function parse(queryString) {
    var preTokens = preprocessQueryString(queryString);
    var tokens = formTokens(preTokens);
    var _a = formTree(tokens), tree = _a.tree, context = _a.context;
    var query = formQuery(tree);
    // Figure out the state flags
    var flag;
    if (query.projects.length === 0 && query.terms.length === 0) {
        flag = StateFlags.NORESULT;
    }
    else if (treeComplete(tree)) {
        flag = StateFlags.COMPLETE;
    }
    else {
        flag = StateFlags.MOREINFO;
    }
    return [{ tokens: tokens, tree: tree, context: context, query: query, score: undefined, state: flag }];
}
exports.parse = parse;
// Returns false if any nodes are not marked found
// Returns true if all nodes are marked found
function treeComplete(node) {
    if (node.found === false) {
        return false;
    }
    else {
        var childrenStatus = node.children.map(treeComplete);
        return childrenStatus.every(function (child) { return child === true; });
    }
}
// Performs some transformations to the query string before tokenizing
function preprocessQueryString(queryString) {
    // Add whitespace before commas
    var processedString = queryString.replace(new RegExp(",", 'g'), " , ");
    processedString = processedString.replace(new RegExp(";", 'g'), " ; ");
    processedString = processedString.replace(new RegExp("\\+", 'g'), " + ");
    processedString = processedString.replace(new RegExp("-", 'g'), " - ");
    processedString = processedString.replace(new RegExp("\\*", 'g'), " * ");
    processedString = processedString.replace(new RegExp("/", 'g'), " / ");
    processedString = processedString.replace(new RegExp("\s\s+", 'g'), " ");
    // Get parts of speach with sentence information. It's okay if they're wrong; they 
    // will be corrected as we create the tree and match against the underlying data model
    var sentences = nlp.pos(processedString, { dont_combine: true }).sentences;
    // If no sentences were found, don't bother parsing
    if (sentences.length === 0) {
        return [];
    }
    var nlpcTokens = sentences[0].tokens;
    var preTokens = nlpcTokens.map(function (token, i) {
        return { ix: i, text: token.text, tag: token.pos.tag };
    });
    // Group quoted text here
    var quoteStarts = preTokens.filter(function (t) { return t.text.charAt(0) === "\""; });
    var quoteEnds = preTokens.filter(function (t) { return t.text.charAt(t.text.length - 1) === "\""; });
    // If we have balanced quotes, combine tokens
    if (quoteStarts.length === quoteEnds.length) {
        var end, start; // @HACK to get around block scoped variable restriction
        for (var i = 0; i < quoteStarts.length; i++) {
            start = quoteStarts[i];
            end = quoteEnds[i];
            // Get all tokens between quotes (inclusive)
            var quotedTokens = preTokens.filter(function (token) { return token.ix >= start.ix && token.ix <= end.ix; })
                .map(function (token) { return token.text; });
            var quotedText = quotedTokens.join(" ");
            // Remove quotes                           
            quotedText = quotedText.replace(new RegExp("\"", 'g'), "");
            // Create a new pretoken
            var newPreToken = { ix: start.ix, text: quotedText, tag: "NNQ" };
            preTokens.splice(preTokens.indexOf(start), quotedTokens.length, newPreToken);
        }
    }
    return preTokens;
}
exports.preprocessQueryString = preprocessQueryString;
var MajorPartsOfSpeech;
(function (MajorPartsOfSpeech) {
    MajorPartsOfSpeech[MajorPartsOfSpeech["ROOT"] = 0] = "ROOT";
    MajorPartsOfSpeech[MajorPartsOfSpeech["VERB"] = 1] = "VERB";
    MajorPartsOfSpeech[MajorPartsOfSpeech["ADJECTIVE"] = 2] = "ADJECTIVE";
    MajorPartsOfSpeech[MajorPartsOfSpeech["ADVERB"] = 3] = "ADVERB";
    MajorPartsOfSpeech[MajorPartsOfSpeech["NOUN"] = 4] = "NOUN";
    MajorPartsOfSpeech[MajorPartsOfSpeech["GLUE"] = 5] = "GLUE";
    MajorPartsOfSpeech[MajorPartsOfSpeech["WHWORD"] = 6] = "WHWORD";
    MajorPartsOfSpeech[MajorPartsOfSpeech["SYMBOL"] = 7] = "SYMBOL";
})(MajorPartsOfSpeech || (MajorPartsOfSpeech = {}));
var MinorPartsOfSpeech;
(function (MinorPartsOfSpeech) {
    MinorPartsOfSpeech[MinorPartsOfSpeech["ROOT"] = 0] = "ROOT";
    // Verb
    MinorPartsOfSpeech[MinorPartsOfSpeech["VB"] = 1] = "VB";
    MinorPartsOfSpeech[MinorPartsOfSpeech["VBD"] = 2] = "VBD";
    MinorPartsOfSpeech[MinorPartsOfSpeech["VBN"] = 3] = "VBN";
    MinorPartsOfSpeech[MinorPartsOfSpeech["VBP"] = 4] = "VBP";
    MinorPartsOfSpeech[MinorPartsOfSpeech["VBZ"] = 5] = "VBZ";
    MinorPartsOfSpeech[MinorPartsOfSpeech["VBF"] = 6] = "VBF";
    MinorPartsOfSpeech[MinorPartsOfSpeech["CP"] = 7] = "CP";
    MinorPartsOfSpeech[MinorPartsOfSpeech["VBG"] = 8] = "VBG";
    // Adjective
    MinorPartsOfSpeech[MinorPartsOfSpeech["JJ"] = 9] = "JJ";
    MinorPartsOfSpeech[MinorPartsOfSpeech["JJR"] = 10] = "JJR";
    MinorPartsOfSpeech[MinorPartsOfSpeech["JJS"] = 11] = "JJS";
    // Adverb
    MinorPartsOfSpeech[MinorPartsOfSpeech["RB"] = 12] = "RB";
    MinorPartsOfSpeech[MinorPartsOfSpeech["RBR"] = 13] = "RBR";
    MinorPartsOfSpeech[MinorPartsOfSpeech["RBS"] = 14] = "RBS";
    // Noun
    MinorPartsOfSpeech[MinorPartsOfSpeech["NN"] = 15] = "NN";
    MinorPartsOfSpeech[MinorPartsOfSpeech["NNPA"] = 16] = "NNPA";
    MinorPartsOfSpeech[MinorPartsOfSpeech["NNAB"] = 17] = "NNAB";
    MinorPartsOfSpeech[MinorPartsOfSpeech["NG"] = 18] = "NG";
    MinorPartsOfSpeech[MinorPartsOfSpeech["PRP"] = 19] = "PRP";
    MinorPartsOfSpeech[MinorPartsOfSpeech["PP"] = 20] = "PP";
    // Legacy Noun
    MinorPartsOfSpeech[MinorPartsOfSpeech["NNP"] = 21] = "NNP";
    MinorPartsOfSpeech[MinorPartsOfSpeech["NNPS"] = 22] = "NNPS";
    MinorPartsOfSpeech[MinorPartsOfSpeech["NNO"] = 23] = "NNO";
    MinorPartsOfSpeech[MinorPartsOfSpeech["NNS"] = 24] = "NNS";
    MinorPartsOfSpeech[MinorPartsOfSpeech["NNA"] = 25] = "NNA";
    MinorPartsOfSpeech[MinorPartsOfSpeech["NNQ"] = 26] = "NNQ";
    // Glue
    MinorPartsOfSpeech[MinorPartsOfSpeech["FW"] = 27] = "FW";
    MinorPartsOfSpeech[MinorPartsOfSpeech["IN"] = 28] = "IN";
    MinorPartsOfSpeech[MinorPartsOfSpeech["MD"] = 29] = "MD";
    MinorPartsOfSpeech[MinorPartsOfSpeech["CC"] = 30] = "CC";
    MinorPartsOfSpeech[MinorPartsOfSpeech["PDT"] = 31] = "PDT";
    MinorPartsOfSpeech[MinorPartsOfSpeech["DT"] = 32] = "DT";
    MinorPartsOfSpeech[MinorPartsOfSpeech["UH"] = 33] = "UH";
    MinorPartsOfSpeech[MinorPartsOfSpeech["EX"] = 34] = "EX";
    // Value
    MinorPartsOfSpeech[MinorPartsOfSpeech["CD"] = 35] = "CD";
    MinorPartsOfSpeech[MinorPartsOfSpeech["DA"] = 36] = "DA";
    MinorPartsOfSpeech[MinorPartsOfSpeech["NU"] = 37] = "NU";
    // Symbol
    MinorPartsOfSpeech[MinorPartsOfSpeech["LT"] = 38] = "LT";
    MinorPartsOfSpeech[MinorPartsOfSpeech["GT"] = 39] = "GT";
    MinorPartsOfSpeech[MinorPartsOfSpeech["GTE"] = 40] = "GTE";
    MinorPartsOfSpeech[MinorPartsOfSpeech["LTE"] = 41] = "LTE";
    MinorPartsOfSpeech[MinorPartsOfSpeech["EQ"] = 42] = "EQ";
    MinorPartsOfSpeech[MinorPartsOfSpeech["NEQ"] = 43] = "NEQ";
    MinorPartsOfSpeech[MinorPartsOfSpeech["PLUS"] = 44] = "PLUS";
    MinorPartsOfSpeech[MinorPartsOfSpeech["MINUS"] = 45] = "MINUS";
    MinorPartsOfSpeech[MinorPartsOfSpeech["DIV"] = 46] = "DIV";
    MinorPartsOfSpeech[MinorPartsOfSpeech["MUL"] = 47] = "MUL";
    MinorPartsOfSpeech[MinorPartsOfSpeech["SEP"] = 48] = "SEP";
    // Wh- word
    MinorPartsOfSpeech[MinorPartsOfSpeech["WDT"] = 49] = "WDT";
    MinorPartsOfSpeech[MinorPartsOfSpeech["WP"] = 50] = "WP";
    MinorPartsOfSpeech[MinorPartsOfSpeech["WPO"] = 51] = "WPO";
    MinorPartsOfSpeech[MinorPartsOfSpeech["WRB"] = 52] = "WRB"; // Wh-adverb (however whenever where why)
})(MinorPartsOfSpeech || (MinorPartsOfSpeech = {}));
function cloneToken(token) {
    var clone = {
        ix: token.ix,
        originalWord: token.originalWord,
        normalizedWord: token.normalizedWord,
        POS: token.POS,
        properties: [],
    };
    token.properties.map(function (property) { return clone.properties.push(property); });
    return clone;
}
function newToken(word) {
    var token = {
        ix: 0,
        originalWord: word,
        normalizedWord: word,
        POS: MinorPartsOfSpeech.NN,
        properties: [],
    };
    return token;
}
var Properties;
(function (Properties) {
    Properties[Properties["ROOT"] = 0] = "ROOT";
    Properties[Properties["ENTITY"] = 1] = "ENTITY";
    Properties[Properties["COLLECTION"] = 2] = "COLLECTION";
    Properties[Properties["ATTRIBUTE"] = 3] = "ATTRIBUTE";
    Properties[Properties["QUANTITY"] = 4] = "QUANTITY";
    Properties[Properties["PROPER"] = 5] = "PROPER";
    Properties[Properties["PLURAL"] = 6] = "PLURAL";
    Properties[Properties["POSSESSIVE"] = 7] = "POSSESSIVE";
    Properties[Properties["BACKRELATIONSHIP"] = 8] = "BACKRELATIONSHIP";
    Properties[Properties["COMPARATIVE"] = 9] = "COMPARATIVE";
    Properties[Properties["SUPERLATIVE"] = 10] = "SUPERLATIVE";
    Properties[Properties["PRONOUN"] = 11] = "PRONOUN";
    Properties[Properties["SEPARATOR"] = 12] = "SEPARATOR";
    Properties[Properties["CONJUNCTION"] = 13] = "CONJUNCTION";
    Properties[Properties["COMPOUND"] = 14] = "COMPOUND";
    Properties[Properties["QUOTED"] = 15] = "QUOTED";
    Properties[Properties["FUNCTION"] = 16] = "FUNCTION";
    Properties[Properties["GROUPING"] = 17] = "GROUPING";
    Properties[Properties["OUTPUT"] = 18] = "OUTPUT";
    Properties[Properties["INPUT"] = 19] = "INPUT";
    Properties[Properties["NEGATES"] = 20] = "NEGATES";
    Properties[Properties["IMPLICIT"] = 21] = "IMPLICIT";
    Properties[Properties["AGGREGATE"] = 22] = "AGGREGATE";
    Properties[Properties["CALCULATE"] = 23] = "CALCULATE";
    Properties[Properties["OPERATOR"] = 24] = "OPERATOR";
})(Properties || (Properties = {}));
// Finds a given property in a token
function hasProperty(token, property) {
    var found = token.properties.indexOf(property);
    if (found !== -1) {
        return true;
    }
    else {
        return false;
    }
}
// take an input string, extract tokens
function formTokens(preTokens) {
    // Form a token for each word
    var cursorPos = -2;
    var tokens = preTokens.map(function (preToken, i) {
        var word = preToken.text;
        var tag = preToken.tag;
        var token = {
            ix: i + 1,
            originalWord: word,
            normalizedWord: word,
            start: cursorPos += 2,
            end: cursorPos += word.length - 1,
            POS: MinorPartsOfSpeech[tag],
            properties: [],
        };
        var before = "";
        // Add default attribute markers to nouns
        if (getMajorPOS(token.POS) === MajorPartsOfSpeech.NOUN) {
            if (token.POS === MinorPartsOfSpeech.NNO ||
                token.POS === MinorPartsOfSpeech.PP) {
                token.properties.push(Properties.POSSESSIVE);
            }
            if (token.POS === MinorPartsOfSpeech.NNP ||
                token.POS === MinorPartsOfSpeech.NNPS ||
                token.POS === MinorPartsOfSpeech.NNPA) {
                token.properties.push(Properties.PROPER);
            }
            if (token.POS === MinorPartsOfSpeech.NNPS ||
                token.POS === MinorPartsOfSpeech.NNS) {
                token.properties.push(Properties.PLURAL);
            }
            if (token.POS === MinorPartsOfSpeech.CD ||
                token.POS === MinorPartsOfSpeech.DA ||
                token.POS === MinorPartsOfSpeech.NU) {
                token.properties.push(Properties.QUANTITY);
            }
            if (token.POS === MinorPartsOfSpeech.PP ||
                token.POS === MinorPartsOfSpeech.PRP) {
                token.properties.push(Properties.PRONOUN);
            }
            if (token.POS === MinorPartsOfSpeech.NNQ) {
                token.properties.push(Properties.PROPER);
                token.properties.push(Properties.QUOTED);
            }
        }
        // Add default properties to adjectives and adverbs
        if (token.POS === MinorPartsOfSpeech.JJR || token.POS === MinorPartsOfSpeech.RBR) {
            token.properties.push(Properties.COMPARATIVE);
        }
        else if (token.POS === MinorPartsOfSpeech.JJS || token.POS === MinorPartsOfSpeech.RBS) {
            token.properties.push(Properties.SUPERLATIVE);
        }
        // Add default properties to separators
        if (token.POS === MinorPartsOfSpeech.CC) {
            token.properties.push(Properties.CONJUNCTION);
        }
        // normalize the word with the following transformations: 
        // --- strip punctuation
        // --- get rid of possessive ending 
        // --- convert to lower case
        // --- singularize
        // If the word is quoted
        if (token.POS === MinorPartsOfSpeech.NNQ ||
            token.POS === MinorPartsOfSpeech.CD) {
            token.normalizedWord = word;
        }
        else {
            var normalizedWord = word;
            // --- strip punctuation
            normalizedWord = normalizedWord.replace(/\.|\?|\!|/g, '');
            // --- get rid of possessive ending
            before = normalizedWord;
            normalizedWord = normalizedWord.replace(/'s|'$/, '');
            // Heuristic: If the word had a possessive ending, it has to be a possessive noun of some sort      
            if (before !== normalizedWord) {
                if (getMajorPOS(token.POS) !== MajorPartsOfSpeech.NOUN) {
                    token.POS = MinorPartsOfSpeech.NN;
                }
                token.properties.push(Properties.POSSESSIVE);
            }
            // --- convert to lowercase
            before = normalizedWord;
            normalizedWord = normalizedWord.toLowerCase();
            // Heuristic: if the word is not the first word in the sentence and it had capitalization, then it is probably a proper noun
            if (before !== normalizedWord && i !== 0) {
                token.POS = MinorPartsOfSpeech.NNP;
                token.properties.push(Properties.PROPER);
            }
            // --- if the word is a (not proper) noun or verb, singularize
            if ((getMajorPOS(token.POS) === MajorPartsOfSpeech.NOUN || getMajorPOS(token.POS) === MajorPartsOfSpeech.VERB) && !hasProperty(token, Properties.PROPER)) {
                before = normalizedWord;
                normalizedWord = singularize(normalizedWord);
                // Heuristic: If the word changed after singularizing it, then it was plural to begin with
                if (before !== normalizedWord) {
                    token.properties.push(Properties.PLURAL);
                }
            }
            token.normalizedWord = normalizedWord;
        }
        // Heuristic: Special case "in" classified as an adjective. e.g. "the in crowd". This is an uncommon usage
        if (token.normalizedWord === "in" && getMajorPOS(token.POS) === MajorPartsOfSpeech.ADJECTIVE) {
            token.POS = MinorPartsOfSpeech.IN;
        }
        // Heuristic: Special case words with no ambiguous POS that NLPC misclassifies
        switch (token.normalizedWord) {
            case "of":
                token.properties.push(Properties.BACKRELATIONSHIP);
                break;
            case "per":
                token.properties.push(Properties.BACKRELATIONSHIP);
                token.properties.push(Properties.GROUPING);
                break;
            case "all":
                token.POS = MinorPartsOfSpeech.PDT;
                break;
            case "had":
                token.POS = MinorPartsOfSpeech.VBD;
                break;
            case "has":
                token.POS = MinorPartsOfSpeech.VBZ;
                break;
            case "is":
                token.POS = MinorPartsOfSpeech.CP;
                break;
            case "was":
                token.POS = MinorPartsOfSpeech.CP;
                break;
            case "as":
                token.POS = MinorPartsOfSpeech.CP;
                break;
            case "were":
                token.POS = MinorPartsOfSpeech.CP;
                break;
            case "be":
                token.POS = MinorPartsOfSpeech.CP;
                break;
            case "do":
                token.POS = MinorPartsOfSpeech.VBP;
                break;
            case "no":
                token.properties.push(Properties.NEGATES);
                break;
            case "neither":
                token.POS = MinorPartsOfSpeech.CC;
                token.properties.push(Properties.NEGATES);
                break;
            case "nor":
                token.POS = MinorPartsOfSpeech.CC;
                token.properties.push(Properties.NEGATES);
                break;
            case "except":
                token.POS = MinorPartsOfSpeech.CC;
                token.properties.push(Properties.NEGATES);
                break;
            case "without":
                token.POS = MinorPartsOfSpeech.CC;
                token.properties.push(Properties.NEGATES);
                break;
            case "not":
                token.POS = MinorPartsOfSpeech.CC;
                token.properties.push(Properties.NEGATES);
                break;
            case "average":
                token.POS = MinorPartsOfSpeech.NN;
                break;
            case "mean":
                token.POS = MinorPartsOfSpeech.NN;
                break;
            case "their":
                token.properties.push(Properties.PLURAL);
                break;
            case "most":
                token.POS = MinorPartsOfSpeech.JJS;
                token.properties.push(Properties.SUPERLATIVE);
                break;
            case "best":
                token.POS = MinorPartsOfSpeech.JJS;
                token.properties.push(Properties.SUPERLATIVE);
                break;
            case "will":
                // 'will' can be a noun
                if (getMajorPOS(token.POS) !== MajorPartsOfSpeech.NOUN) {
                    token.POS = MinorPartsOfSpeech.MD;
                }
                break;
            case "years":
                token.POS = MinorPartsOfSpeech.NN;
                token.normalizedWord = "year";
                token.properties.push(Properties.PLURAL);
                break;
        }
        // Special case symbols
        switch (token.normalizedWord) {
            case ">":
                token.POS = MinorPartsOfSpeech.GT;
                token.properties.push(Properties.COMPARATIVE);
                break;
            case ">=":
                token.POS = MinorPartsOfSpeech.GTE;
                token.properties.push(Properties.COMPARATIVE);
                break;
            case "<":
                token.POS = MinorPartsOfSpeech.LT;
                token.properties.push(Properties.COMPARATIVE);
                break;
            case "<=":
                token.POS = MinorPartsOfSpeech.LTE;
                token.properties.push(Properties.COMPARATIVE);
                break;
            case "=":
                token.POS = MinorPartsOfSpeech.EQ;
                token.properties.push(Properties.COMPARATIVE);
                break;
            case "!=":
                token.POS = MinorPartsOfSpeech.NEQ;
                token.properties.push(Properties.COMPARATIVE);
                break;
            case "+":
                token.POS = MinorPartsOfSpeech.PLUS;
                token.properties.push(Properties.OPERATOR);
                break;
            case "-":
                token.POS = MinorPartsOfSpeech.MINUS;
                token.properties.push(Properties.OPERATOR);
                break;
            case "*":
                token.POS = MinorPartsOfSpeech.MUL;
                token.properties.push(Properties.OPERATOR);
                break;
            case "/":
                token.POS = MinorPartsOfSpeech.DIV;
                token.properties.push(Properties.OPERATOR);
                break;
            case ",":
                token.POS = MinorPartsOfSpeech.SEP;
                token.properties.push(Properties.SEPARATOR);
                break;
            case ";":
                token.POS = MinorPartsOfSpeech.SEP;
                token.properties.push(Properties.SEPARATOR);
                break;
        }
        token.properties = token.properties.filter(onlyUnique);
        return token;
    });
    // Correct wh- tokens
    for (var _i = 0; _i < tokens.length; _i++) {
        var token = tokens[_i];
        if (token.normalizedWord === "that" ||
            token.normalizedWord === "whatever" ||
            token.normalizedWord === "which") {
            // determiners become wh- determiners
            if (token.POS === MinorPartsOfSpeech.DT) {
                token.POS = MinorPartsOfSpeech.WDT;
            }
            else if (token.POS === MinorPartsOfSpeech.PRP || token.POS === MinorPartsOfSpeech.PP) {
                token.POS = MinorPartsOfSpeech.WP;
            }
            continue;
        }
        // who and whom are wh- pronouns
        if (token.normalizedWord === "who" ||
            token.normalizedWord === "what" ||
            token.normalizedWord === "whom") {
            token.POS = MinorPartsOfSpeech.WP;
            continue;
        }
        // whose is the only wh- possessive pronoun
        if (token.normalizedWord === "whose") {
            token.POS = MinorPartsOfSpeech.WPO;
            token.properties.push(Properties.POSSESSIVE);
            continue;
        }
        // adverbs become wh- adverbs
        if (token.normalizedWord === "how" ||
            token.normalizedWord === "when" ||
            token.normalizedWord === "however" ||
            token.normalizedWord === "whenever" ||
            token.normalizedWord === "where" ||
            token.normalizedWord === "why") {
            token.POS = MinorPartsOfSpeech.WRB;
            continue;
        }
    }
    // Sentence-level POS corrections
    // Heuristic: If there are no verbs in the sentence, there can be no adverbs. Turn them into adjectives
    var verbs = tokens.filter(function (token) { return getMajorPOS(token.POS) === MajorPartsOfSpeech.VERB; });
    if (verbs.length === 0) {
        var adverbs = tokens.filter(function (token) { return getMajorPOS(token.POS) === MajorPartsOfSpeech.ADVERB; });
        adverbs.map(function (adverb) { return adverbToAdjective(adverb); });
    }
    else {
        // Heuristic: Adverbs are located close to verbs
        // Get the distance from each adverb to the closest verb as a percentage of the length of the sentence.
        var adverbs = tokens.filter(function (token) { return getMajorPOS(token.POS) === MajorPartsOfSpeech.ADVERB; });
        adverbs.map(function (adverb) {
            var closestVerb = tokens.length;
            verbs.map(function (verb) {
                var dist = Math.abs(adverb.ix - verb.ix);
                if (dist < closestVerb) {
                    closestVerb = dist;
                }
            });
            var distRatio = closestVerb / tokens.length;
            // Threshold the distance an adverb can be from the verb
            // if it is too far, make it an adjective instead
            if (distRatio > .25) {
                adverbToAdjective(adverb);
            }
        });
    }
    var rootToken = {
        ix: 0,
        originalWord: tokens.map(function (token) { return token.originalWord; }).join(" "),
        normalizedWord: tokens.map(function (token) { return token.normalizedWord; }).join(" "),
        POS: MinorPartsOfSpeech.ROOT,
        properties: [Properties.ROOT],
    };
    tokens = [rootToken].concat(tokens);
    // Link tokens to eachother
    for (var i = 0; i < tokens.length; i++) {
        var token = tokens[i];
        token.prev = tokens[i - 1];
        token.next = tokens[i + 1];
    }
    log(tokenArrayToString(tokens));
    return tokens;
}
function adverbToAdjective(token) {
    var word = token.normalizedWord;
    // Heuristic: Words that end in -est are superlative
    if (word.substr(word.length - 3, word.length) === "est") {
        token.POS = MinorPartsOfSpeech.JJS;
        token.properties.push(Properties.SUPERLATIVE);
    }
    else if (word.substr(word.length - 2, word.length) === "er") {
        token.POS = MinorPartsOfSpeech.JJR;
        token.properties.push(Properties.COMPARATIVE);
    }
    else {
        token.POS = MinorPartsOfSpeech.JJ;
    }
    return token;
}
function getMajorPOS(minorPartOfSpeech) {
    // ROOT
    if (minorPartOfSpeech === MinorPartsOfSpeech.ROOT) {
        return MajorPartsOfSpeech.ROOT;
    }
    // Verb
    if (minorPartOfSpeech === MinorPartsOfSpeech.VB ||
        minorPartOfSpeech === MinorPartsOfSpeech.VBD ||
        minorPartOfSpeech === MinorPartsOfSpeech.VBN ||
        minorPartOfSpeech === MinorPartsOfSpeech.VBP ||
        minorPartOfSpeech === MinorPartsOfSpeech.VBZ ||
        minorPartOfSpeech === MinorPartsOfSpeech.VBF ||
        minorPartOfSpeech === MinorPartsOfSpeech.VBG) {
        return MajorPartsOfSpeech.VERB;
    }
    // Adjective
    if (minorPartOfSpeech === MinorPartsOfSpeech.JJ ||
        minorPartOfSpeech === MinorPartsOfSpeech.JJR ||
        minorPartOfSpeech === MinorPartsOfSpeech.JJS) {
        return MajorPartsOfSpeech.ADJECTIVE;
    }
    // Adjverb
    if (minorPartOfSpeech === MinorPartsOfSpeech.RB ||
        minorPartOfSpeech === MinorPartsOfSpeech.RBR ||
        minorPartOfSpeech === MinorPartsOfSpeech.RBS) {
        return MajorPartsOfSpeech.ADVERB;
    }
    // Noun
    if (minorPartOfSpeech === MinorPartsOfSpeech.NN ||
        minorPartOfSpeech === MinorPartsOfSpeech.NNA ||
        minorPartOfSpeech === MinorPartsOfSpeech.NNPA ||
        minorPartOfSpeech === MinorPartsOfSpeech.NNAB ||
        minorPartOfSpeech === MinorPartsOfSpeech.NNP ||
        minorPartOfSpeech === MinorPartsOfSpeech.NNPS ||
        minorPartOfSpeech === MinorPartsOfSpeech.NNS ||
        minorPartOfSpeech === MinorPartsOfSpeech.NNQ ||
        minorPartOfSpeech === MinorPartsOfSpeech.CD ||
        minorPartOfSpeech === MinorPartsOfSpeech.DA ||
        minorPartOfSpeech === MinorPartsOfSpeech.NU ||
        minorPartOfSpeech === MinorPartsOfSpeech.NNO ||
        minorPartOfSpeech === MinorPartsOfSpeech.NG ||
        minorPartOfSpeech === MinorPartsOfSpeech.PRP ||
        minorPartOfSpeech === MinorPartsOfSpeech.PP) {
        return MajorPartsOfSpeech.NOUN;
    }
    // Glue
    if (minorPartOfSpeech === MinorPartsOfSpeech.FW ||
        minorPartOfSpeech === MinorPartsOfSpeech.IN ||
        minorPartOfSpeech === MinorPartsOfSpeech.CP ||
        minorPartOfSpeech === MinorPartsOfSpeech.MD ||
        minorPartOfSpeech === MinorPartsOfSpeech.CC ||
        minorPartOfSpeech === MinorPartsOfSpeech.PDT ||
        minorPartOfSpeech === MinorPartsOfSpeech.DT ||
        minorPartOfSpeech === MinorPartsOfSpeech.UH ||
        minorPartOfSpeech === MinorPartsOfSpeech.EX) {
        return MajorPartsOfSpeech.GLUE;
    }
    // Symbol
    if (minorPartOfSpeech === MinorPartsOfSpeech.LT ||
        minorPartOfSpeech === MinorPartsOfSpeech.GT ||
        minorPartOfSpeech === MinorPartsOfSpeech.GTE ||
        minorPartOfSpeech === MinorPartsOfSpeech.LTE ||
        minorPartOfSpeech === MinorPartsOfSpeech.EQ ||
        minorPartOfSpeech === MinorPartsOfSpeech.NEQ ||
        minorPartOfSpeech === MinorPartsOfSpeech.PLUS ||
        minorPartOfSpeech === MinorPartsOfSpeech.MINUS ||
        minorPartOfSpeech === MinorPartsOfSpeech.DIV ||
        minorPartOfSpeech === MinorPartsOfSpeech.MUL ||
        minorPartOfSpeech === MinorPartsOfSpeech.SEP) {
        return MajorPartsOfSpeech.SYMBOL;
    }
    // Wh-Word
    if (minorPartOfSpeech === MinorPartsOfSpeech.WDT ||
        minorPartOfSpeech === MinorPartsOfSpeech.WP ||
        minorPartOfSpeech === MinorPartsOfSpeech.WPO ||
        minorPartOfSpeech === MinorPartsOfSpeech.WRB) {
        return MajorPartsOfSpeech.WHWORD;
    }
}
// Wrap pluralize to special case certain words it gets wrong
function singularize(word) {
    var specialCases = ["his", "times", "has", "downstairs", "united states", "its"];
    for (var _i = 0; _i < specialCases.length; _i++) {
        var specialCase = specialCases[_i];
        if (specialCase === word) {
            return word;
        }
    }
    return pluralize(word, 1);
}
function cloneNode(node) {
    var token = cloneToken(node.token);
    var cloneNode = newNode(token);
    cloneNode.entity = node.entity;
    cloneNode.collection = node.collection;
    cloneNode.attribute = node.attribute;
    cloneNode.fxn = node.fxn;
    cloneNode.found = node.found;
    node.properties.map(function (property) { return cloneNode.properties.push(property); });
    return cloneNode;
}
function newNode(token) {
    var node = {
        ix: token.ix,
        name: token.normalizedWord,
        parent: undefined,
        children: [],
        token: token,
        properties: token.properties,
        found: false,
        hasProperty: hasProperty,
        toString: nodeToString,
        next: nextNode,
        prev: previousNode,
        addChild: addChild,
    };
    token.node = node;
    function hasProperty(property) {
        var found = node.properties.indexOf(property);
        if (found !== -1) {
            return true;
        }
        else {
            return false;
        }
    }
    function nextNode() {
        var token = node.token;
        var nextToken = token.next;
        if (nextToken !== undefined) {
            return nextToken.node;
        }
        return undefined;
    }
    function previousNode() {
        var token = node.token;
        var prevToken = token.prev;
        if (prevToken !== undefined) {
            return prevToken.node;
        }
        return undefined;
    }
    function addChild(newChild) {
        node.children.push(newChild);
        newChild.parent = node;
    }
    function nodeToString(depth) {
        if (depth === undefined) {
            depth = 0;
        }
        var childrenStrings = node.children.map(function (childNode) { return childNode.toString(depth + 1); }).join("\n");
        var children = childrenStrings.length > 0 ? "\n" + childrenStrings : "";
        var indent = Array(depth + 1).join(" ");
        var index = node.ix === undefined ? "+ " : node.ix + ": ";
        var properties = node.properties.length === 0 ? "" : "(" + node.properties.map(function (property) { return Properties[property]; }).join("|") + ")";
        var attribute = node.attribute === undefined ? "" : "[" + node.attribute.variable + " (" + node.attribute.value + ")] ";
        var entity = node.entity === undefined ? "" : "[" + node.entity.displayName + "] ";
        var collection = node.collection === undefined ? "" : "[" + node.collection.displayName + "] ";
        var fxn = node.fxn === undefined ? "" : "[" + node.fxn.name + "] ";
        var negated = node.hasProperty(Properties.NEGATES) ? "!" : "";
        var found = node.found ? "*" : " ";
        var entityOrProperties = found === " " ? "" + properties : "" + negated + fxn + entity + collection + attribute;
        properties = properties.length === 2 ? "" : properties;
        var nodeString = "|" + found + indent + index + node.name + " " + entityOrProperties + children;
        return nodeString;
    }
    return node;
}
//------------------------------------
// Various node manipulation functions
//------------------------------------
// Removes the node and its children from the tree, 
// and makes it a child of the target node
function reroot(node, target) {
    node.parent.children.splice(node.parent.children.indexOf(node), 1);
    target.addChild(node);
}
// Removes a node from the tree
// The node's children get added to its parent
// returns the node or undefined if the operation failed
function removeNode(node) {
    if (node.hasProperty(Properties.ROOT)) {
        return node;
    }
    if (node.parent === undefined && node.children.length === 0) {
        return node;
    }
    var parent = node.parent;
    var children = node.children;
    // Rewire
    parent.children = parent.children.concat(children);
    parent.children.sort(function (a, b) { return a.ix - b.ix; });
    children.map(function (child) { return child.parent = parent; });
    // Get rid of references on current node
    parent.children.splice(parent.children.indexOf(node), 1);
    node.parent = undefined;
    node.children = [];
    return node;
}
// Returns the first ancestor node that has been found
function previouslyMatched(node, ignoreFunctions) {
    if (ignoreFunctions === undefined) {
        ignoreFunctions = false;
    }
    if (node.parent === undefined) {
        return undefined;
    }
    else if (!ignoreFunctions && node.parent.hasProperty(Properties.FUNCTION) && !node.parent.hasProperty(Properties.CONJUNCTION)) {
        return undefined;
    }
    else if (node.parent.hasProperty(Properties.ENTITY) ||
        node.parent.hasProperty(Properties.ATTRIBUTE) ||
        node.parent.hasProperty(Properties.COLLECTION)) {
        return node.parent;
    }
    else {
        return previouslyMatched(node.parent, ignoreFunctions);
    }
}
// Inserts a node after the target, moving all of the
// target's children to the node
// Before: [Target] -> [Children]
// After:  [Target] -> [Node] -> [Children]
function insertAfterNode(node, target) {
    node.parent = target;
    node.children = target.children;
    target.children.map(function (n) { return n.parent = node; });
    target.children = [node];
}
// Find all leaf nodes stemming from a given node
function findLeafNodes(node) {
    if (node.children.length === 0) {
        return [node];
    }
    else {
        var foundLeafs = node.children.map(findLeafNodes);
        var flatLeafs = flattenNestedArray(foundLeafs);
        return flatLeafs;
    }
}
/*function moveNode(node: Node, target: Node): void {
  if (node.hasProperty(Properties.ROOT)) {
    return;
  }
  let parent = node.parent;
  parent.children.splice(parent.children.indexOf(node),1);
  parent.children = parent.children.concat(node.children);
  node.children.map((child) => child.parent = parent);
  node.children = [];
  node.parent = target;
  target.children.push(node);
}*/
// Finds a parent node with the specified property, 
// returns undefined if no node was found
function findParentWithProperty(node, property) {
    if (node.hasProperty(Properties.ROOT)) {
        return undefined;
    }
    if (node.parent.hasProperty(property)) {
        return node.parent;
    }
    else {
        return findParentWithProperty(node.parent, property);
    }
}
// Finds a parent node with the specified property, 
// returns undefined if no node was found
function findChildWithProperty(node, property) {
    if (node.children.length === 0) {
        return undefined;
    }
    if (node.hasProperty(property)) {
        return node;
    }
    else {
        var childrenWithProperty = node.children.filter(function (child) { return child.hasProperty(property); });
        if (childrenWithProperty !== undefined) {
            return childrenWithProperty[0];
        }
        else {
            var results = node.children.map(function (child) { return findChildWithProperty(child, property); }).filter(function (result) { return result !== undefined; });
            if (results.length > 0) {
                return results[0];
            }
        }
    }
}
// Finds a parent node with the specified POS, 
// returns undefined if no node was found
function findParentWithPOS(node, majorPOS) {
    if (getMajorPOS(node.token.POS) === MajorPartsOfSpeech.ROOT) {
        return undefined;
    }
    if (getMajorPOS(node.parent.token.POS) === majorPOS) {
        return node.parent;
    }
    else {
        return findParentWithPOS(node.parent, majorPOS);
    }
}
/*
// Sets node to be a sibling of its parent
// Before: [Grandparent] -> [Parent] -> [Node]
// After:  [Grandparent] -> [Parent]
//                       -> [Node]
function promoteNode(node: Node): void {
  if (node.parent.hasProperty(Properties.ROOT)) {
    return;
  }
  let newSibling = node.parent;
  let newParent = newSibling.parent;
  // Set parent
  node.parent = newParent;
  // Remove node from parent's children
  newSibling.children.splice(newSibling.children.indexOf(node),1);
  // Add node to new parent's children
  newParent.children.push(node);
}*/
// Makes the node's parent a child of the node.
// The node's grandparent is then the node's parent
// Before: [Grandparent] -> [Parent] -> [Node]
// After: [Grandparen] -> [Node] -> [Parent]
function makeParentChild(node) {
    var parent = node.parent;
    // Do not swap with root
    if (parent.hasProperty(Properties.ROOT)) {
        return;
    }
    // Set parents
    node.parent = parent.parent;
    parent.parent = node;
    // Remove node as a child from parent
    parent.children.splice(parent.children.indexOf(node), 1);
    // Set children
    node.children = node.children.concat(parent);
    node.parent.children.push(node);
    node.parent.children.splice(node.parent.children.indexOf(parent), 1);
}
// Swaps a node with its parent. The node's parent
// is then the parent's parent, and its child is the parent.
// The parent gets the node's children
function swapWithParent(node) {
    var parent = node.parent;
    var pparent = parent.parent;
    if (parent.hasProperty(Properties.ROOT)) {
        return;
    }
    parent.parent = node;
    parent.children = node.children;
    pparent.children.splice(pparent.children.indexOf(parent), 1);
    node.parent = pparent;
    node.children = [parent];
    pparent.children.push(node);
}
(function (FunctionTypes) {
    FunctionTypes[FunctionTypes["FILTER"] = 0] = "FILTER";
    FunctionTypes[FunctionTypes["AGGREGATE"] = 1] = "AGGREGATE";
    FunctionTypes[FunctionTypes["BOOLEAN"] = 2] = "BOOLEAN";
    FunctionTypes[FunctionTypes["CALCULATE"] = 3] = "CALCULATE";
})(exports.FunctionTypes || (exports.FunctionTypes = {}));
var FunctionTypes = exports.FunctionTypes;
function newContext() {
    return {
        entities: [],
        collections: [],
        attributes: [],
        fxns: [],
        groupings: [],
        relationships: [],
        maybeEntities: [],
        maybeAttributes: [],
        maybeCollections: [],
        maybeFunctions: [],
        maybeArguments: [],
    };
}
function wordToFunction(word) {
    switch (word) {
        case "taller":
            return { name: ">", type: FunctionTypes.FILTER, attribute: "height", fields: ["a", "b"], project: false };
        case "shorter":
            return { name: "<", type: FunctionTypes.FILTER, attribute: "length", fields: ["a", "b"], project: false };
        case "longer":
            return { name: ">", type: FunctionTypes.FILTER, attribute: "length", fields: ["a", "b"], project: false };
        case "younger":
            return { name: "<", type: FunctionTypes.FILTER, attribute: "age", fields: ["a", "b"], project: false };
        case "and":
            return { name: "and", type: FunctionTypes.BOOLEAN, fields: [], project: false };
        case "or":
            return { name: "or", type: FunctionTypes.BOOLEAN, fields: [], project: false };
        case "total":
        case "sum":
            return { name: "sum", type: FunctionTypes.AGGREGATE, fields: ["sum", "value"], project: true };
        case "average":
        case "avg":
        case "mean":
            return { name: "average", type: FunctionTypes.AGGREGATE, fields: ["average", "value"], project: true };
        case "plus":
        case "add":
        case "+":
            return { name: "+", type: FunctionTypes.CALCULATE, fields: ["result", "a", "b"], project: true };
        case "subtract":
        case "minus":
        case "-":
            return { name: "-", type: FunctionTypes.CALCULATE, fields: ["result", "a", "b"], project: true };
        case "times":
        case "multiply":
        case "multiplied":
        case "*":
            return { name: "*", type: FunctionTypes.CALCULATE, fields: ["result", "a", "b"], project: true };
        case "divide":
        case "divided":
        case "/":
            return { name: "/", type: FunctionTypes.CALCULATE, fields: ["result", "a", "b"], project: true };
        default:
            return undefined;
    }
}
function formTree(tokens) {
    var tree;
    var subsumedNodes = [];
    // Turn tokens into nodes
    var nodes = tokens.filter(function (token) { return token.node === undefined; }).map(newNode);
    // Do a quick pass to identify functions
    tokens.map(function (token) {
        var node = token.node;
        var fxn = wordToFunction(node.name);
        if (fxn !== undefined) {
            node.fxn = fxn;
            fxn.node = node;
            node.properties.push(Properties.FUNCTION);
            if (node.fxn.type === FunctionTypes.AGGREGATE) {
                node.properties.push(Properties.AGGREGATE);
            }
            else if (node.fxn.type === FunctionTypes.CALCULATE) {
                node.properties.push(Properties.CALCULATE);
            }
        }
    });
    // Link nodes end to end
    nodes.map(function (thisNode, i) {
        var nextNode = nodes[i + 1];
        if (nextNode !== undefined) {
            thisNode.addChild(nextNode);
        }
    });
    // At this point we should only have a single root.
    nodes = nodes.filter(function (node) { return node.parent === undefined; });
    tree = nodes.pop();
    function resolveEntities(node, context) {
        var relationship;
        loop0: while (node !== undefined) {
            context.maybeAttributes = context.maybeAttributes.filter(function (maybeAttr) { return !maybeAttr.found; });
            log("------------------------------------------");
            log(node);
            // Handle nodes that we previously found but need to get hooked up to a function
            if (node.found && node.hasProperty(Properties.ATTRIBUTE) && node.children.length === 0 && context.maybeArguments.length > 0) {
                log("Handling missing attribute");
                var argument = context.maybeArguments.shift();
                if (node.parent.hasProperty(Properties.ENTITY) || node.parent.hasProperty(Properties.COLLECTION)) {
                    var parent_1 = removeNode(node.parent);
                    argument.addChild(parent_1);
                    removeNode(node);
                    parent_1.addChild(node);
                    argument.found = true;
                    if (parent_1.collection) {
                        parent_1.collection.project = false;
                    }
                    else {
                        parent_1.entity.project = false;
                    }
                }
                break;
            }
            // Skip certain nodes
            if (node.found ||
                node.hasProperty(Properties.IMPLICIT) ||
                node.hasProperty(Properties.ROOT)) {
                log("Skipping...");
                break;
            }
            // Remove certain nodes
            if (!node.hasProperty(Properties.FUNCTION)) {
                if (node.hasProperty(Properties.SEPARATOR) ||
                    getMajorPOS(node.token.POS) === MajorPartsOfSpeech.WHWORD ||
                    getMajorPOS(node.token.POS) === MajorPartsOfSpeech.GLUE) {
                    log("Removing node \"" + node.name + "\"");
                    node = node.children[0];
                    if (node !== undefined) {
                        var rNode = removeNode(node.parent);
                        if (rNode.hasProperty(Properties.GROUPING)) {
                            node.properties.push(Properties.GROUPING);
                        }
                        if (rNode.hasProperty(Properties.NEGATES)) {
                            node.properties.push(Properties.NEGATES);
                        }
                    }
                    continue;
                }
            }
            // Handle quantities
            if (node.hasProperty(Properties.QUANTITY)) {
                log("Handling quantity...");
                if (isNumeric(node.name) === false) {
                    break;
                }
                // Create an attribute for the quantity 
                var quantityAttribute = {
                    id: node.name,
                    displayName: node.name,
                    value: "" + node.name,
                    variable: "" + node.name,
                    node: node,
                    project: false,
                };
                node.attribute = quantityAttribute;
                node.properties.push(Properties.ATTRIBUTE);
                node.found = true;
                // If there is a maybeArgument, attach the quantity to it
                if (context.maybeArguments.length > 0) {
                    var argument = context.maybeArguments.shift();
                    var qNode = node;
                    node = qNode.children[0];
                    removeNode(qNode);
                    argument.addChild(qNode);
                    argument.found = true;
                    continue;
                }
                break;
            }
            // Handle functions
            if (node.hasProperty(Properties.FUNCTION)) {
                log("Handling function...");
                // Handle comparative functions
                if (node.hasProperty(Properties.COMPARATIVE)) {
                    var attribute = node.fxn.attribute;
                    var compAttrToken = newToken(node.fxn.attribute);
                    compAttrToken.properties.push(Properties.IMPLICIT);
                    var compAttrNode = newNode(compAttrToken);
                    compAttrNode.fxn = node.fxn;
                    // Add two argument nodes
                    var argumentTokenA = newToken("a");
                    var argumentNodeA = newNode(argumentTokenA);
                    argumentNodeA.properties.push(Properties.IMPLICIT);
                    argumentNodeA.properties.push(Properties.INPUT);
                    node.addChild(argumentNodeA);
                    context.maybeArguments.push(argumentNodeA);
                    var argumentTokenB = newToken("b");
                    var argumentNodeB = newNode(argumentTokenB);
                    argumentNodeB.properties.push(Properties.IMPLICIT);
                    argumentNodeB.properties.push(Properties.INPUT);
                    node.addChild(argumentNodeB);
                    context.maybeArguments.push(argumentNodeB);
                    // Find a node for the LHS of the comaparison
                    var matchedNode_1 = previouslyMatched(node);
                    var compAttrNode1 = cloneNode(compAttrNode);
                    relationship = findRelationship(matchedNode_1, compAttrNode1, context);
                    if (relationship.type === RelationshipTypes.DIRECT) {
                        removeNode(matchedNode_1);
                        matchedNode_1.addChild(compAttrNode1);
                        compAttrNode1.attribute.project = false;
                        argumentNodeA.addChild(matchedNode_1);
                        argumentNodeA.found = true;
                        context.maybeArguments.shift();
                    }
                    // Push the RHS attribute onto the context and continue searching
                    context.maybeAttributes.push(compAttrNode);
                    node.found = true;
                }
                else if (node.hasProperty(Properties.AGGREGATE)) {
                    // Add an output token
                    var outputToken = newToken("output");
                    var outputNode = newNode(outputToken);
                    outputNode.found = true;
                    outputNode.properties.push(Properties.IMPLICIT);
                    outputNode.properties.push(Properties.OUTPUT);
                    var outputAttribute = {
                        id: outputNode.name,
                        displayName: outputNode.name,
                        value: node.fxn.name + "|" + outputNode.name,
                        variable: node.fxn.name + "|" + outputNode.name,
                        node: outputNode,
                        project: true,
                    };
                    outputNode.attribute = outputAttribute;
                    node.addChild(outputNode);
                    // Add an input node
                    var argumentToken = newToken("input");
                    var argumentNode = newNode(argumentToken);
                    argumentNode.properties.push(Properties.IMPLICIT);
                    argumentNode.properties.push(Properties.INPUT);
                    node.addChild(argumentNode);
                    context.maybeArguments.push(argumentNode);
                    node.found = true;
                }
                else if (node.hasProperty(Properties.CALCULATE)) {
                    // Create a result node
                    var resultToken = newToken(node.fxn.fields[0]);
                    var resultNode = newNode(resultToken);
                    resultNode.properties.push(Properties.OUTPUT);
                    resultNode.properties.push(Properties.IMPLICIT);
                    var resultAttribute = {
                        id: resultNode.name,
                        displayName: resultNode.name,
                        value: node.fxn.name + "|" + resultNode.name,
                        variable: node.fxn.name + "|" + resultNode.name,
                        node: resultNode,
                        project: true,
                    };
                    resultNode.attribute = resultAttribute;
                    node.addChild(resultNode);
                    resultNode.found = true;
                    // Add two argument nodes
                    var argumentTokenA = newToken("a");
                    var argumentNodeA = newNode(argumentTokenA);
                    argumentNodeA.properties.push(Properties.IMPLICIT);
                    argumentNodeA.properties.push(Properties.INPUT);
                    node.addChild(argumentNodeA);
                    var argumentTokenB = newToken("b");
                    var argumentNodeB = newNode(argumentTokenB);
                    argumentNodeB.properties.push(Properties.IMPLICIT);
                    argumentNodeB.properties.push(Properties.INPUT);
                    node.addChild(argumentNodeB);
                    // If we already found a numerical attribute, rewire it
                    var foundQuantity = findParentWithProperty(node, Properties.QUANTITY);
                    if (foundQuantity !== undefined && foundQuantity.found === true) {
                        removeNode(foundQuantity);
                        argumentNodeA.addChild(foundQuantity);
                        argumentNodeA.found = true;
                        foundQuantity.attribute.project = false;
                        // If the node has an entity, rewire it as a child of the function
                        if (foundQuantity.attribute.entity) {
                            foundQuantity.attribute.entity.project = false;
                        }
                    }
                    else {
                        context.maybeArguments.push(argumentNodeA);
                    }
                    context.maybeArguments.push(argumentNodeB);
                    node.found = true;
                }
                else if (node.hasProperty(Properties.CONJUNCTION)) {
                    node.found = true;
                }
                context.fxns.push(node.fxn);
                log(tree.toString());
                break;
            }
            // Handle pronouns
            if (node.hasProperty(Properties.PRONOUN)) {
                log("Matching pronoun with previous entity...");
                var matchedNode_2 = previouslyMatched(node, true);
                if (matchedNode_2 !== undefined) {
                    if (matchedNode_2.collection !== undefined) {
                        node.collection = matchedNode_2.collection;
                        node.properties.push(Properties.COLLECTION);
                        node.found = true;
                        log("Found: " + matchedNode_2.name);
                        break;
                    }
                    else if (matchedNode_2.entity !== undefined) {
                        node.entity = matchedNode_2.entity;
                        node.properties.push(Properties.ENTITY);
                        node.found = true;
                        log("Found: " + matchedNode_2.name);
                        break;
                    }
                }
            }
            // Find the relationship between parent and child nodes
            // Previously matched node
            var matchedNode = previouslyMatched(node);
            if (matchedNode !== undefined) {
                log("Match in context of previously matched node \"" + matchedNode.name + "\"");
                // Find relationship between previously matched node and this one
                if (matchedNode.hasProperty(Properties.POSSESSIVE)) {
                    if (matchedNode.hasProperty(Properties.ENTITY)) {
                        var found = findEntityAttribute(node, matchedNode.entity, context);
                        if (found === true) {
                            relationship = { type: RelationshipTypes.DIRECT };
                        }
                    }
                    else {
                        relationship = findRelationship(matchedNode, node, context);
                    }
                }
                else {
                    findCollectionOrEntity(node, context);
                    relationship = findRelationship(matchedNode, node, context);
                }
            }
            else {
                findCollectionOrEntity(node, context);
                for (var _i = 0, _a = context.maybeAttributes; _i < _a.length; _i++) {
                    var maybeAttr = _a[_i];
                    log("Matching previously unmatched nodes...");
                    relationship = findRelationship(maybeAttr, node, context);
                    // Rewire found attributes
                    if (maybeAttr.found === true) {
                        removeNode(maybeAttr);
                        // If the attr was an implicit attribute derived from a function,
                        // move the node to be a child of the function and reroot the rest of the query
                        if (maybeAttr.hasProperty(Properties.IMPLICIT)) {
                            maybeAttr.attribute.project = false;
                            var thisNode = node;
                            node = node.children[0];
                            if (node !== undefined) {
                                reroot(node, findParentWithProperty(node, Properties.ROOT));
                            }
                            thisNode.addChild(maybeAttr);
                            if (context.maybeArguments.length > 0) {
                                var fxnArgNode = context.maybeArguments.shift();
                                reroot(thisNode, fxnArgNode);
                                fxnArgNode.found = true;
                                continue loop0;
                            }
                        }
                        else {
                            node.addChild(maybeAttr);
                        }
                    }
                }
                ;
            }
            // Rewire node to reflect an argument of a function
            if (node.hasProperty(Properties.ATTRIBUTE) && context.maybeArguments.length > 0) {
                var argument = context.maybeArguments.shift();
                var qNode = node;
                node = qNode.children[0];
                removeNode(qNode);
                argument.addChild(qNode);
                argument.found = true;
                if (qNode.attribute.entity) {
                    qNode.attribute.entity.project = false;
                }
                continue;
            }
            // Rewire nodes to reflect found relationship
            if (relationship !== undefined && relationship.type !== RelationshipTypes.NONE) {
                // For a direct relationship, move the found node to the entity/collection
                if (relationship.type === RelationshipTypes.DIRECT) {
                    if (node.attribute) {
                        var targetNode = void 0;
                        if (node.attribute.collection && node.parent !== node.attribute.collection.node) {
                            targetNode = node.attribute.collection.node;
                        }
                        else if (node.attribute.entity && node.parent !== node.attribute.entity.node) {
                            targetNode = node.attribute.entity.node;
                        }
                        if (targetNode !== undefined) {
                            var rNode = node;
                            node = node.children[0];
                            removeNode(rNode);
                            targetNode.addChild(rNode);
                            continue;
                        }
                    }
                }
                else if (relationship.type === RelationshipTypes.ONEHOP) {
                    log(relationship);
                    if (relationship.nodes[0].collection) {
                        var collection = relationship.nodes[0].collection;
                        var linkID = relationship.links[0];
                        var nCollection = findEveCollection(linkID);
                        if (nCollection !== undefined) {
                            // Create a new link node
                            var token = newToken(nCollection.displayName);
                            var nNode = newNode(token);
                            insertAfterNode(nNode, collection.node);
                            nNode.collection = nCollection;
                            nCollection.node = nNode;
                            context.collections.push(nCollection);
                            // Build a collection attribute to link with parent
                            var collectionAttribute = {
                                id: collection.displayName,
                                displayName: collection.displayName,
                                collection: nCollection,
                                value: "" + collection.displayName,
                                variable: "" + collection.displayName,
                                node: nNode,
                                project: false,
                            };
                            nNode.properties.push(Properties.IMPLICIT);
                            nNode.properties.push(Properties.ATTRIBUTE);
                            nNode.properties.push(Properties.COLLECTION);
                            nNode.attribute = collectionAttribute;
                            context.attributes.push(collectionAttribute);
                            nNode.found = true;
                            nNode.children[0].attribute.collection = nCollection;
                        }
                    }
                    else if (relationship.nodes[0].entity) {
                        var entity = relationship.nodes[0].entity;
                        var linkID = relationship.links[0];
                        var nCollection = findEveCollection(linkID);
                        if (nCollection !== undefined) {
                            // Create a new link node
                            var token = newToken(nCollection.displayName);
                            var nNode = newNode(token);
                            insertAfterNode(nNode, entity.node);
                            nNode.collection = nCollection;
                            nCollection.node = nNode;
                            nNode.properties.push(Properties.IMPLICIT);
                            nNode.properties.push(Properties.ATTRIBUTE);
                            nNode.properties.push(Properties.COLLECTION);
                            nNode.found = true;
                            context.collections.push(nCollection);
                            // Build a collection attribute to link with parent
                            var collectionAttribute = {
                                id: undefined,
                                displayName: nCollection.displayName,
                                collection: nCollection,
                                value: "" + entity.id,
                                variable: "" + entity.displayName,
                                node: nNode,
                                project: false,
                            };
                            nNode.attribute = collectionAttribute;
                            context.attributes.push(collectionAttribute);
                            nNode.children[0].attribute.collection = nCollection;
                        }
                    }
                }
                else if (relationship.type === RelationshipTypes.INTERSECTION) {
                    var _b = relationship.nodes, nodeA = _b[0], nodeB = _b[1];
                    nodeA.collection.variable = nodeB.collection.variable;
                    nodeB.collection.project = false;
                }
            }
            // If no collection or entity has been found, do some work depending on the node
            if (node.found === false && !node.hasProperty(Properties.IMPLICIT)) {
                log("Not found");
                log(context);
                context.maybeAttributes.push(node);
            }
            break;
        }
        // Resolve entities for the children
        if (node !== undefined) {
            node.children.map(function (child) { return resolveEntities(child, context); });
        }
        return context;
    }
    log(tree.toString());
    log("Resolving entities...");
    var context = newContext();
    resolveEntities(tree, context);
    log("Entities resolved!");
    // Rewire groupings and aggregates
    // @TODO Do this in a rewire step
    var aggregate = findChildWithProperty(tree, Properties.AGGREGATE);
    if (aggregate !== undefined) {
        var grouping = findChildWithProperty(aggregate, Properties.GROUPING);
        if (grouping !== undefined) {
            removeNode(grouping);
            insertAfterNode(grouping, aggregate.parent);
        }
    }
    // Sort children to preserve argument order in functions
    function sortChildren(node) {
        node.children.sort(function (a, b) { return a.ix - b.ix; });
        node.children.map(sortChildren);
    }
    sortChildren(tree);
    // Mark root as found
    tree.found = true;
    log(tree.toString());
    return { tree: tree, context: context };
}
function cloneEntity(entity) {
    var clone = {
        id: entity.id,
        displayName: entity.displayName,
        content: entity.content,
        node: entity.node,
        entityAttribute: entity.entityAttribute,
        variable: entity.variable,
        project: entity.project,
    };
    return clone;
}
function cloneCollection(collection) {
    var clone = {
        id: collection.id,
        displayName: collection.displayName,
        count: collection.count,
        node: collection.node,
        variable: collection.variable,
        project: collection.project,
    };
    return clone;
}
// Returns the entity with the given display name.
// If the entity is not found, returns undefined
// Two error modes here: 
// 1) the name is not found in "display name"
// 2) the name is found in "display name" but not found in "entity"
// can 2) ever happen?
// Returns the collection with the given display name.
function findEveEntity(search) {
    log("Searching for entity: " + search);
    var foundEntity;
    var name;
    // Try to find by display name first
    var display = app_1.eve.findOne("display name", { name: search });
    if (display !== undefined) {
        foundEntity = app_1.eve.findOne("entity", { entity: display.id });
        name = search;
    }
    else {
        foundEntity = app_1.eve.findOne("entity", { entity: search });
    }
    // Build the entity
    if (foundEntity !== undefined) {
        if (name === undefined) {
            display = app_1.eve.findOne("display name", { id: search });
            name = display.name;
        }
        var entity = {
            id: foundEntity.entity,
            displayName: name,
            content: foundEntity.content,
            variable: foundEntity.entity,
            entityAttribute: false,
            project: true,
        };
        log(" Found: " + name);
        return entity;
    }
    else {
        log(" Not found: " + search);
        return undefined;
    }
}
exports.findEveEntity = findEveEntity;
// Returns the collection with the given display name.
function findEveCollection(search) {
    log("Searching for collection: " + search);
    var foundCollection;
    var name;
    // Try to find by display name first
    var display = app_1.eve.findOne("display name", { name: search });
    if (display !== undefined) {
        foundCollection = app_1.eve.findOne("collection", { collection: display.id });
        name = search;
    }
    else {
        foundCollection = app_1.eve.findOne("collection", { collection: search });
    }
    // Build the collection
    if (foundCollection !== undefined) {
        if (name === undefined) {
            display = app_1.eve.findOne("display name", { id: search });
            name = display.name;
        }
        var collection = {
            id: foundCollection.collection,
            displayName: name,
            count: foundCollection.count,
            variable: name,
            project: true,
        };
        log(" Found: " + name);
        return collection;
    }
    else {
        log(" Not found: " + search);
        return undefined;
    }
}
// Returns the attribute with the given display name attached to the given entity
// If the entity does not have that attribute, or the entity does not exist, returns undefined
function findEveAttribute(name, entity) {
    log("Searching for attribute: " + name);
    log(" Entity: " + entity.displayName);
    var foundAttribute = app_1.eve.findOne("entity eavs", { entity: entity.id, attribute: name });
    if (foundAttribute !== undefined) {
        var attribute = {
            id: foundAttribute.attribute,
            displayName: name,
            entity: entity,
            value: foundAttribute.value,
            variable: (entity.displayName + "|" + name).replace(/ /g, ''),
            project: true,
        };
        log(" Found: " + name + " " + attribute.variable + " => " + attribute.value);
        log(attribute);
        return attribute;
    }
    log(" Not found: " + name);
    return undefined;
}
var RelationshipTypes;
(function (RelationshipTypes) {
    RelationshipTypes[RelationshipTypes["NONE"] = 0] = "NONE";
    RelationshipTypes[RelationshipTypes["DIRECT"] = 1] = "DIRECT";
    RelationshipTypes[RelationshipTypes["ONEHOP"] = 2] = "ONEHOP";
    RelationshipTypes[RelationshipTypes["TWOHOP"] = 3] = "TWOHOP";
    RelationshipTypes[RelationshipTypes["INTERSECTION"] = 4] = "INTERSECTION";
})(RelationshipTypes || (RelationshipTypes = {}));
function findRelationship(nodeA, nodeB, context) {
    log("Finding relationship between \"" + nodeA.name + "\" and \"" + nodeB.name + "\"");
    var relationship;
    // If both nodes are Collections, find their relationship
    if (nodeA.hasProperty(Properties.COLLECTION) && nodeB.hasProperty(Properties.COLLECTION)) {
        relationship = findCollectionToCollectionRelationship(nodeA.collection, nodeB.collection);
    }
    else if (nodeA.hasProperty(Properties.COLLECTION) && !(nodeB.hasProperty(Properties.COLLECTION) || nodeB.hasProperty(Properties.ENTITY))) {
        relationship = findCollectionToAttrRelationship(nodeA.collection, nodeB, context);
    }
    else if (nodeB.hasProperty(Properties.COLLECTION) && !(nodeA.hasProperty(Properties.COLLECTION) || nodeA.hasProperty(Properties.ENTITY))) {
        relationship = findCollectionToAttrRelationship(nodeB.collection, nodeA, context);
    }
    else if (nodeA.hasProperty(Properties.COLLECTION) && nodeB.hasProperty(Properties.ENTITY)) {
        relationship = findCollectionToEntRelationship(nodeA.collection, nodeB.entity);
    }
    else if (nodeB.hasProperty(Properties.COLLECTION) && nodeA.hasProperty(Properties.ENTITY)) {
        relationship = findCollectionToEntRelationship(nodeB.collection, nodeA.entity);
    }
    else if (nodeA.hasProperty(Properties.ENTITY) && !(nodeB.hasProperty(Properties.COLLECTION) || nodeB.hasProperty(Properties.ENTITY))) {
        relationship = findEntToAttrRelationship(nodeA.entity, nodeB, context);
    }
    else if (nodeB.hasProperty(Properties.ENTITY) && !(nodeA.hasProperty(Properties.COLLECTION) || nodeA.hasProperty(Properties.ENTITY))) {
        relationship = findEntToAttrRelationship(nodeB.entity, nodeA, context);
    }
    else if (nodeA.hasProperty(Properties.ATTRIBUTE) && !(nodeB.hasProperty(Properties.COLLECTION) || nodeB.hasProperty(Properties.ENTITY))) {
        relationship = findEntToAttrRelationship(nodeA.attribute.entity, nodeB, context);
    }
    else if (nodeB.hasProperty(Properties.ATTRIBUTE) && !(nodeA.hasProperty(Properties.COLLECTION) || nodeA.hasProperty(Properties.ENTITY))) {
        relationship = findEntToAttrRelationship(nodeB.attribute.entity, nodeA, context);
    }
    // If we found a relationship, add it to the context
    if (relationship !== undefined && relationship.type !== RelationshipTypes.NONE) {
        context.relationships.push(relationship);
        return relationship;
    }
    else {
        log("No relationship found :(");
        return { type: RelationshipTypes.NONE };
    }
}
// e.g. "meetings john was in"
function findCollectionToEntRelationship(coll, ent) {
    log("Finding Coll -> Ent relationship between \"" + coll.displayName + "\" and \"" + ent.displayName + "\"...");
    /*if (coll === "collections") {
      if (eve.findOne("collection entities", { entity: ent.id })) {
        return { type: RelationshipTypes.DIRECT };
      }
    }*/
    if (app_1.eve.findOne("collection entities", { collection: coll.id, entity: ent.id })) {
        log("Found Direct relationship");
        return { type: RelationshipTypes.DIRECT };
    }
    var relationship = app_1.eve.query("")
        .select("collection entities", { collection: coll.id }, "collection")
        .select("directionless links", { entity: ["collection", "entity"], link: ent.id }, "links")
        .exec();
    if (relationship.unprojected.length) {
        log("Found One-Hop Relationship");
        return { type: RelationshipTypes.ONEHOP };
    } /*
    // e.g. events with chris granger (events -> meetings -> chris granger)
    let relationships2 = eve.query(``)
      .select("collection entities", { collection: coll }, "collection")
      .select("directionless links", { entity: ["collection", "entity"] }, "links")
      .select("directionless links", { entity: ["links", "link"], link: ent }, "links2")
      .exec();
    if (relationships2.unprojected.length) {
      let entities = extractFromUnprojected(relationships2.unprojected, 1, 3);
      return { type: RelationshipTypes.TWOHOP };
    }*/
    log("No relationship found :(");
    return { type: RelationshipTypes.NONE };
}
function findEntToAttrRelationship(entity, attr, context) {
    // Check for a direct relationship
    // e.g. "Josh's age"
    var found = findEntityAttribute(attr, entity, context);
    if (found === true) {
        return { type: RelationshipTypes.DIRECT };
    }
    // Check for a one-hop relationship
    // e.g. "Salaries in engineering"
    var relationship = app_1.eve.query("")
        .select("directionless links", { entity: entity.id }, "links")
        .select("entity eavs", { entity: ["links", "link"], attribute: attr.name }, "eav")
        .exec();
    if (relationship.unprojected.length) {
        log("Found One-Hop Relationship");
        log(relationship);
        // Find the one-hop link
        var entities = extractFromUnprojected(relationship.unprojected, 0, 2);
        var collections = findCommonCollections(entities);
        var linkID;
        if (collections.length > 0) {
            // @HACK Choose the correct collection in a smart way. 
            // Largest collection other than entity or testdata?
            linkID = collections[0];
        }
        var entityAttribute = {
            id: attr.name,
            displayName: attr.name,
            value: entity.displayName + "|" + attr.name,
            variable: entity.displayName + "|" + attr.name,
            node: attr,
            project: true,
        };
        attr.attribute = entityAttribute;
        context.attributes.push(entityAttribute);
        attr.properties.push(Properties.ATTRIBUTE);
        attr.found = true;
        return { links: [linkID], type: RelationshipTypes.ONEHOP, nodes: [entity.node, attr] };
    }
    /*
    let relationships2 = eve.query(``)
      .select("directionless links", { entity: entity.id }, "links")
      .select("directionless links", { entity: ["links", "link"] }, "links2")
      .select("entity eavs", { entity: ["links2", "link"], attribute: attr }, "eav")
      .exec();
    if (relationships2.unprojected.length) {
      let entities = extractFromUnprojected(relationships2.unprojected, 0, 3);
      let entities2 = extractFromUnprojected(relationships2.unprojected, 1, 3);
      //return { distance: 2, type: RelationshipTypes.ENTITY_ATTRIBUTE, nodes: [findCommonCollections(entities), findCommonCollections(entities2)] };
    }*/
    log("No relationship found :(");
    return { type: RelationshipTypes.NONE };
}
function findCollectionToCollectionRelationship(collA, collB) {
    log("Finding Coll -> Coll relationship between \"" + collA.displayName + "\" and \"" + collB.displayName + "\"...");
    // are there things in both sets?
    var intersection = app_1.eve.query(collA.displayName + "->" + collB.displayName)
        .select("collection entities", { collection: collA.id }, "collA")
        .select("collection entities", { collection: collB.id, entity: ["collA", "entity"] }, "collB")
        .exec();
    // is there a relationship between things in both sets
    var relationships = app_1.eve.query("relationships between " + collA.displayName + " and " + collB.displayName)
        .select("collection entities", { collection: collA.id }, "collA")
        .select("directionless links", { entity: ["collA", "entity"] }, "links")
        .select("collection entities", { collection: collB.id, entity: ["links", "link"] }, "collB")
        .group([["links", "link"]])
        .aggregate("count", {}, "count")
        .project({ type: ["links", "link"], count: ["count", "count"] })
        .exec();
    var maxRel = { count: 0 };
    for (var _i = 0, _a = relationships.results; _i < _a.length; _i++) {
        var result = _a[_i];
        if (result.count > maxRel.count)
            maxRel = result;
    }
    // we divide by two because unprojected results pack rows next to eachother
    // and we have two selects.
    var intersectionSize = intersection.unprojected.length / 2;
    if (maxRel.count > intersectionSize) {
        // @TODO
        return { type: RelationshipTypes.NONE };
    }
    else if (intersectionSize > maxRel.count) {
        return { type: RelationshipTypes.INTERSECTION, nodes: [collA.node, collB.node] };
    }
    else if (maxRel.count === 0 && intersectionSize === 0) {
        return { type: RelationshipTypes.NONE };
    }
    else {
        // @TODO
        return { type: RelationshipTypes.NONE };
    }
}
exports.findCollectionToCollectionRelationship = findCollectionToCollectionRelationship;
function findCollectionToAttrRelationship(coll, attr, context) {
    // Finds a direct relationship between collection and attribute
    // e.g. "pets' lengths"" => pet -> length
    log("Finding Coll -> Attr relationship between \"" + coll.displayName + "\" and \"" + attr.name + "\"...");
    var relationship = app_1.eve.query("")
        .select("collection entities", { collection: coll.id }, "collection")
        .select("entity eavs", { entity: ["collection", "entity"], attribute: attr.name }, "eav")
        .exec();
    if (relationship.unprojected.length > 0) {
        log("Found Direct Relationship");
        var collectionAttribute = {
            id: attr.name,
            displayName: attr.name,
            collection: coll,
            value: coll.displayName + "|" + attr.name,
            variable: coll.displayName + "|" + attr.name,
            node: attr,
            project: true,
        };
        attr.attribute = collectionAttribute;
        context.attributes.push(collectionAttribute);
        attr.properties.push(Properties.ATTRIBUTE);
        attr.found = true;
        return { type: RelationshipTypes.DIRECT, nodes: [coll.node, attr] };
    }
    // Finds a one hop relationship
    // e.g. "department salaries" => department -> employee -> salary
    relationship = app_1.eve.query("")
        .select("collection entities", { collection: coll.id }, "collection")
        .select("directionless links", { entity: ["collection", "entity"] }, "links")
        .select("entity eavs", { entity: ["links", "link"], attribute: attr.name }, "eav")
        .exec();
    if (relationship.unprojected.length > 0) {
        log("Found One-Hop Relationship");
        log(relationship);
        // Find the one-hop link
        var entities = extractFromUnprojected(relationship.unprojected, 1, 3);
        var collections = findCommonCollections(entities);
        var linkID;
        if (collections.length > 0) {
            // @HACK Choose the correct collection in a smart way. 
            // Largest collection other than entity or testdata?
            linkID = collections[0];
        }
        // Build an attribute for the node
        var attribute = {
            id: attr.name,
            displayName: attr.name,
            collection: coll,
            value: coll.displayName + "|" + attr.name,
            variable: coll.displayName + "|" + attr.name,
            node: attr,
            project: true,
        };
        attr.attribute = attribute;
        context.attributes.push(attribute);
        attr.properties.push(Properties.ATTRIBUTE);
        attr.found = true;
        return { links: [linkID], type: RelationshipTypes.ONEHOP, nodes: [coll.node, attr] };
    }
    // Not sure if this one works... using the entity table, a 2 hop link can
    // be found almost anywhere, yielding results like
    // e.g. "Pets heights" => pets -> snake -> entity -> corey -> height
    /*relationship = eve.query(``)
      .select("collection entities", { collection: coll.id }, "collection")
      .select("directionless links", { entity: ["collection", "entity"] }, "links")
      .select("directionless links", { entity: ["links", "link"] }, "links2")
      .select("entity eavs", { entity: ["links2", "link"], attribute: attr }, "eav")
      .exec();
    if (relationship.unprojected.length > 0) {
      return true;
    }*/
    log("No relationship found :(");
    return { type: RelationshipTypes.NONE };
}
// Extracts entities from unprojected results
function extractFromUnprojected(coll, ix, size) {
    var results = [];
    for (var i = 0, len = coll.length; i < len; i += size) {
        results.push(coll[i + ix]["link"]);
    }
    return results;
}
// Find collections that entities have in common
function findCommonCollections(entities) {
    var intersection = entityTocollectionsArray(entities[0]);
    intersection.sort();
    for (var _i = 0, _a = entities.slice(1); _i < _a.length; _i++) {
        var entId = _a[_i];
        var cur = entityTocollectionsArray(entId);
        cur.sort();
        arrayIntersect(intersection, cur);
    }
    intersection.sort(function (a, b) {
        return app_1.eve.findOne("collection", { collection: a })["count"] - app_1.eve.findOne("collection", { collection: b })["count"];
    });
    return intersection;
}
function entityTocollectionsArray(entity) {
    var entities = app_1.eve.find("collection entities", { entity: entity });
    return entities.map(function (a) { return a["collection"]; });
}
function findCollectionAttribute(node, collection, context, relationship) {
    // The attribute is an attribute of members of the collection
    if (relationship.type === RelationshipTypes.DIRECT) {
        var collectionAttribute = {
            id: node.name,
            displayName: node.name,
            collection: collection,
            value: collection.displayName + "|" + node.name,
            variable: collection.displayName + "|" + node.name,
            node: node,
            project: true,
        };
        node.attribute = collectionAttribute;
        context.attributes.push(collectionAttribute);
        node.found = true;
        return true;
    }
    else if (relationship.type === RelationshipTypes.ONEHOP) {
        var linkID = relationship.links[0];
        var nCollection = findEveCollection(linkID);
        if (nCollection !== undefined) {
            // Create a new link node
            var token = {
                ix: 0,
                originalWord: nCollection.displayName,
                normalizedWord: nCollection.displayName,
                POS: MinorPartsOfSpeech.NN,
                properties: [],
            };
            var nNode = newNode(token);
            insertAfterNode(nNode, collection.node);
            nNode.collection = nCollection;
            nCollection.node = nNode;
            context.collections.push(nCollection);
            // Build a collection attribute to link with parent
            var collectionAttribute = {
                id: collection.displayName,
                displayName: collection.displayName,
                collection: nCollection,
                value: "" + collection.displayName,
                variable: "" + collection.displayName,
                node: nNode,
                project: false,
            };
            nNode.attribute = collectionAttribute;
            context.attributes.push(collectionAttribute);
            nNode.found = true;
            // Build an attribute for the referenced node
            var attribute = {
                id: node.name,
                displayName: node.name,
                collection: nCollection,
                value: nCollection.displayName + "|" + node.name,
                variable: nCollection.displayName + "|" + node.name,
                node: node,
                project: true,
            };
            node.attribute = attribute;
            context.attributes.push(attribute);
            node.found = true;
            return true;
        }
        else {
            var entity = findEveEntity(linkID);
            if (entity !== undefined) {
            }
        }
    }
    return false;
}
function findEntityAttribute(node, entity, context) {
    var attribute = findEveAttribute(node.name, entity);
    if (attribute !== undefined) {
        if (isNumeric(attribute.value)) {
            node.properties.push(Properties.QUANTITY);
        }
        context.attributes.push(attribute);
        node.attribute = attribute;
        node.properties.push(Properties.ATTRIBUTE);
        attribute.node = node;
        // If the node is possessive, check to see if it is an entity
        if (node.hasProperty(Properties.POSSESSIVE) || node.hasProperty(Properties.BACKRELATIONSHIP)) {
            var entity_1 = findEveEntity("" + attribute.value);
            if (entity_1 !== undefined) {
                node.entity = entity_1;
                entity_1.variable = attribute.variable;
                entity_1.entityAttribute = true;
                entity_1.node = node;
                node.parent.entity.project = false;
                attribute.project = false;
                context.entities.push(entity_1);
                node.properties.push(Properties.ENTITY);
            }
        }
        node.found = true;
        var entityNode = entity.node;
        return true;
    }
    return false;
}
// searches for a collection first, then tries to find an entity
function findCollectionOrEntity(node, context) {
    var foundCollection = findCollection(node, context);
    if (foundCollection === true) {
        return true;
    }
    else {
        var foundEntity = findEntity(node, context);
        if (foundEntity === true) {
            return true;
        }
    }
    return false;
}
// searches for a collection first, then tries to find an entity
function findEntityOrCollection(node, context) {
    var foundEntity = findEntity(node, context);
    if (foundEntity === true) {
        return true;
    }
    else {
        var foundCollection = findCollection(node, context);
        if (foundCollection === true) {
            return true;
        }
    }
    return false;
}
function findCollection(node, context) {
    var collection = findEveCollection(node.name);
    if (collection !== undefined) {
        context.collections.push(collection);
        collection.node = node;
        node.collection = collection;
        node.found = true;
        node.properties.push(Properties.COLLECTION);
        if (node.hasProperty(Properties.GROUPING)) {
            context.groupings.push(node);
        }
        return true;
    }
    return false;
}
function findEntity(node, context) {
    var entity = findEveEntity(node.name);
    if (entity !== undefined) {
        context.entities.push(entity);
        entity.node = node;
        node.entity = entity;
        node.found = true;
        node.properties.push(Properties.ENTITY);
        if (node.hasProperty(Properties.GROUPING)) {
            context.groupings.push(node);
        }
        return true;
    }
    return false;
}
function negateTerm(term) {
    var negate = newQuery([term]);
    negate.type = "negate";
    return negate;
}
function newQuery(terms, subqueries, projects) {
    if (terms === undefined) {
        terms = [];
    }
    if (subqueries === undefined) {
        subqueries = [];
    }
    if (projects === undefined) {
        projects = [];
    }
    // Dedupe terms
    var termStrings = terms.map(termToString);
    var uniqueTerms = termStrings.map(function (value, index, self) {
        return self.indexOf(value) === index;
    });
    terms = terms.filter(function (term, index) { return uniqueTerms[index]; });
    var query = {
        type: "query",
        terms: terms,
        subqueries: subqueries,
        projects: projects,
        toString: queryToString,
    };
    function queryToString(depth) {
        if (query.terms.length === 0 && query.projects.length === 0) {
            return "";
        }
        if (depth === undefined) {
            depth = 0;
        }
        var indent = Array(depth + 1).join("\t");
        var queryString = indent + "(";
        // Map each term/subquery/project to a string
        var typeString = query.type;
        var termString = query.terms.map(function (term) { return termToString(term, depth + 1); }).join("\n");
        var subqueriesString = query.subqueries.map(function (query) { return query.toString(depth + 1); }).join("\n");
        var projectsString = query.projects.map(function (term) { return termToString(term, depth + 1); }).join("\n");
        // Now compose the query string
        queryString += typeString;
        queryString += termString === "" ? "" : "\n" + termString;
        queryString += subqueriesString === "" ? "" : "\n" + subqueriesString;
        queryString += projectsString === "" ? "" : "\n" + projectsString;
        // Close out the query
        queryString += "\n" + indent + ")";
        return queryString;
    }
    function termToString(term, depth) {
        if (depth === undefined) {
            depth = 0;
        }
        var indent = Array(depth + 1).join("\t");
        var termString = indent + "(";
        termString += term.type + " ";
        termString += "" + (term.table === undefined ? "" : "\"" + term.table + "\" ");
        termString += term.fields.map(function (field) { return (":" + field.name + " " + (field.variable ? field.value : "\"" + field.value + "\"")); }).join(" ");
        termString += ")";
        return termString;
    }
    return query;
}
exports.newQuery = newQuery;
function formQuery(node) {
    var query = newQuery();
    var projectFields = [];
    // Handle the child nodes
    var childQueries = node.children.map(formQuery);
    // Subsume child queries
    var combinedProjectFields = [];
    for (var _i = 0; _i < childQueries.length; _i++) {
        var cQuery = childQueries[_i];
        query.terms = query.terms.concat(cQuery.terms);
        query.subqueries = query.subqueries.concat(cQuery.subqueries);
        // Combine unnamed projects
        for (var _a = 0, _b = cQuery.projects; _a < _b.length; _a++) {
            var project_1 = _b[_a];
            if (project_1.table === undefined) {
                combinedProjectFields = combinedProjectFields.concat(project_1.fields);
            }
        }
    }
    if (combinedProjectFields.length > 0) {
        var project_2 = {
            type: "project!",
            fields: combinedProjectFields,
        };
        query.projects.push(project_2);
    }
    // If the node is a grouping node, stuff the query into a subquery
    // and take its projects
    if (node.hasProperty(Properties.GROUPING)) {
        var subquery = query;
        query = newQuery();
        query.projects = query.projects.concat(subquery.projects);
        subquery.projects = [];
        query.subqueries.push(subquery);
    }
    // Handle the current node
    // Just return at the root
    if (node.hasProperty(Properties.ROOT)) {
        // Reverse the order of fields in the projects
        for (var _c = 0, _d = query.projects; _c < _d.length; _c++) {
            var project_3 = _d[_c];
            project_3.fields = project_3.fields.reverse();
        }
        return query;
    }
    // Handle functions -------------------------------
    if (node.fxn !== undefined) {
        // Skip functions with no arguments
        if (node.fxn.fields.length === 0) {
            return query;
        }
        // Collection all input and output nodes which were found
        var nestedArgs = node.children.filter(function (child) { return (child.hasProperty(Properties.INPUT) || child.hasProperty(Properties.OUTPUT))
            && child.found === true; })
            .map(findLeafNodes);
        var args = flattenNestedArray(nestedArgs);
        // If we have the right number of arguments, proceed
        // @TODO surface an error if the arguments are wrong
        var output;
        if (args.length === node.fxn.fields.length) {
            var fields = args.map(function (arg, i) {
                return { name: "" + node.fxn.fields[i],
                    value: "" + arg.attribute.variable,
                    variable: true };
            });
            var term = {
                type: "select",
                table: node.fxn.name,
                fields: fields,
            };
            // If an aggregate is grouped, we have to push the aggregate into a subquery
            if (node.fxn.type === FunctionTypes.AGGREGATE && query.subqueries.length > 0) {
                var subquery = query.subqueries[0];
                if (subquery !== undefined) {
                    subquery.terms.push(term);
                }
            }
            else {
                query.terms.push(term);
            }
            // project output if necessary
            if (node.fxn.project === true) {
                var outputFields = args.filter(function (arg) { return arg.hasProperty(Properties.OUTPUT); })
                    .map(function (arg) {
                    return { name: "" + node.fxn.name,
                        value: "" + arg.attribute.variable,
                        variable: true };
                });
                projectFields = projectFields.concat(outputFields);
                query.projects = [];
            }
        }
    }
    // Handle attributes -------------------------------
    if (node.attribute !== undefined) {
        var attr = node.attribute;
        var entity = attr.entity;
        var collection = attr.collection;
        var fields = [];
        var entityField;
        // Entity
        if (entity !== undefined) {
            entityField = { name: "entity",
                value: "" + (attr.entity.entityAttribute ? attr.entity.variable : attr.entity.id),
                variable: attr.entity.entityAttribute };
        }
        else if (collection !== undefined) {
            entityField = { name: "entity",
                value: "" + attr.collection.displayName,
                variable: true };
        }
        else {
            return query;
        }
        fields.push(entityField);
        // Attribute
        if (attr.id !== undefined) {
            var attrField = { name: "attribute",
                value: attr.id,
                variable: false };
            fields.push(attrField);
        }
        // Value
        var valueField = { name: "value",
            value: attr.id === undefined ? attr.value : attr.variable,
            variable: attr.id !== undefined };
        fields.push(valueField);
        var term = {
            type: "select",
            table: "entity eavs",
            fields: fields,
        };
        query.terms.push(term);
        // project if necessary
        if (node.attribute.project === true && !node.hasProperty(Properties.NEGATES)) {
            var attributeField = { name: "" + node.attribute.id,
                value: node.attribute.variable,
                variable: true };
            projectFields.push(attributeField);
        }
    }
    // Handle collections -------------------------------
    if (node.collection !== undefined && !node.hasProperty(Properties.PRONOUN)) {
        var entityField = { name: "entity",
            value: node.collection.variable,
            variable: true };
        var collectionField = { name: "collection",
            value: node.collection.id,
            variable: false };
        var term = {
            type: "select",
            table: "is a attributes",
            fields: [entityField, collectionField],
        };
        query.terms.push(term);
        // project if necessary
        if (node.collection.project === true && !node.hasProperty(Properties.NEGATES)) {
            var collectionField_1 = { name: "" + node.collection.displayName.replace(new RegExp(" ", 'g'), ""),
                value: "" + node.collection.variable,
                variable: true };
            projectFields.push(collectionField_1);
        }
    }
    // Handle entities -------------------------------
    if (node.entity !== undefined && !node.hasProperty(Properties.PRONOUN)) {
        // project if necessary
        if (node.entity.project === true) {
            var entityField = { name: "" + node.entity.displayName.replace(new RegExp(" ", 'g'), ""),
                value: "" + (node.entity.entityAttribute ? node.entity.variable : node.entity.id),
                variable: node.entity.entityAttribute };
            projectFields.push(entityField);
        }
    }
    var project = {
        type: "project!",
        fields: projectFields,
    };
    if (node.hasProperty(Properties.NEGATES)) {
        var negatedTerm = query.terms.pop();
        var negatedQuery = negateTerm(negatedTerm);
        query.subqueries.push(negatedQuery);
    }
    query.projects.push(project);
    return query;
}
// ----------------------------------------------------------------------------
// Debug utility functions
// ---------------------------------------------------------------------------- 
var divider = "--------------------------------------------------------------------------------";
exports.debug = false;
function log(x) {
    if (exports.debug) {
        console.log(x);
    }
}
function nodeArrayToString(nodes) {
    var nodeArrayString = nodes.map(function (node) { return node.toString(); }).join("\n" + divider + "\n");
    return divider + "\n" + nodeArrayString + "\n" + divider;
}
exports.nodeArrayToString = nodeArrayToString;
function tokenToString(token) {
    var properties = "(" + token.properties.map(function (property) { return Properties[property]; }).join("|") + ")";
    properties = properties.length === 2 ? "" : properties;
    var tokenSpan = token.start === undefined ? " " : " [" + token.start + "-" + token.end + "] ";
    var tokenString = token.ix + ": " + token.originalWord + " | " + token.normalizedWord + " | " + MajorPartsOfSpeech[getMajorPOS(token.POS)] + " | " + MinorPartsOfSpeech[token.POS] + " | " + properties;
    return tokenString;
}
exports.tokenToString = tokenToString;
function tokenArrayToString(tokens) {
    var tokenArrayString = tokens.map(function (token) { return tokenToString(token); }).join("\n");
    return divider + "\n" + tokenArrayString + "\n" + divider;
}
exports.tokenArrayToString = tokenArrayToString;
// ----------------------------------------------------------------------------
// Utility functions
// ----------------------------------------------------------------------------
function flattenNestedArray(nestedArray) {
    var flattened = [].concat.apply([], nestedArray);
    return flattened;
}
function onlyUnique(value, index, self) {
    return self.indexOf(value) === index;
}
function arrayIntersect(a, b) {
    var ai = 0;
    var bi = 0;
    var result = [];
    while (ai < a.length && bi < b.length) {
        if (a[ai] < b[bi])
            ai++;
        else if (a[ai] > b[bi])
            bi++;
        else {
            result.push(a[ai]);
            ai++;
            bi++;
        }
    }
    return result;
}
function isNumeric(n) {
    return !isNaN(parseFloat(n)) && isFinite(n);
}
window["NLQP"] = exports;

},{"./app":2}],2:[function(require,module,exports){
/// <reference path="microReact.ts" />
/// <reference path="../vendor/marked.d.ts" />
var microReact = require("./microReact");
var runtime = require("./runtime");
var uiRenderer_1 = require("./uiRenderer");
var utils_1 = require("./utils");
exports.syncedTables = ["manual eav", "view", "action", "action source", "action mapping", "action mapping constant", "action mapping sorted", "action mapping limit", "add collection action", "add eav action", "add bit action"];
exports.eveLocalStorageKey = "eve";
//---------------------------------------------------------
// Renderer
//---------------------------------------------------------
var perfStats;
var perfStatsUi;
var updateStat = 0;
function initRenderer() {
    exports.renderer = new microReact.Renderer();
    exports.uiRenderer = new uiRenderer_1.UIRenderer(exports.eve);
    document.body.appendChild(exports.renderer.content);
    window.addEventListener("resize", render);
    perfStatsUi = document.createElement("div");
    perfStatsUi.id = "perfStats";
    document.body.appendChild(perfStatsUi);
}
if (utils_1.ENV === "browser")
    var performance = window["performance"] || { now: function () { return (new Date()).getTime(); } };
exports.renderRoots = {};
function render() {
    if (!exports.renderer || exports.renderer.queued)
        return;
    exports.renderer.queued = true;
    requestAnimationFrame(function () {
        var stats = {};
        var start = performance.now();
        var trees = [];
        for (var root in exports.renderRoots) {
            trees.push(exports.renderRoots[root]());
        }
        stats.root = (performance.now() - start).toFixed(2);
        if (+stats.root > 10)
            console.info("Slow root: " + stats.root);
        start = performance.now();
        var dynamicUI = exports.eve.find("system ui").map(function (ui) { return ui["template"]; });
        if (utils_1.DEBUG && utils_1.DEBUG.UI_COMPILE) {
            console.info("compiling", dynamicUI);
            console.info("*", exports.uiRenderer.compile(dynamicUI));
        }
        trees.push.apply(trees, exports.uiRenderer.compile(dynamicUI));
        stats.uiCompile = (performance.now() - start).toFixed(2);
        if (+stats.uiCompile > 10)
            console.info("Slow ui compile: " + stats.uiCompile);
        start = performance.now();
        exports.renderer.render(trees);
        stats.render = (performance.now() - start).toFixed(2);
        stats.update = updateStat.toFixed(2);
        perfStatsUi.textContent = "";
        perfStatsUi.textContent += "root: " + stats.root;
        perfStatsUi.textContent += " | ui compile: " + stats.uiCompile;
        perfStatsUi.textContent += " | render: " + stats.render;
        perfStatsUi.textContent += " | update: " + stats.update;
        perfStats = stats;
        exports.renderer.queued = false;
    });
}
exports.render = render;
var storeQueued = false;
function storeLocally() {
    if (storeQueued)
        return;
    storeQueued = true;
    setTimeout(function () {
        var serialized = exports.eve.serialize(true);
        if (exports.eveLocalStorageKey === "eve") {
            for (var _i = 0; _i < exports.syncedTables.length; _i++) {
                var synced = exports.syncedTables[_i];
                delete serialized[synced];
            }
        }
        delete serialized["provenance"];
        localStorage[exports.eveLocalStorageKey] = JSON.stringify(serialized);
        storeQueued = false;
    }, 1000);
}
//---------------------------------------------------------
// Dispatch
//---------------------------------------------------------
var dispatches = {};
function handle(event, func) {
    if (dispatches[event]) {
        console.error("Overwriting handler for '" + event + "'");
    }
    dispatches[event] = func;
}
exports.handle = handle;
function dispatch(event, info, dispatchInfo) {
    var result = dispatchInfo;
    if (!result) {
        result = exports.eve.diff();
        result.meta.render = true;
        result.meta.store = true;
    }
    result.dispatch = function (event, info) {
        return dispatch(event, info, result);
    };
    result.commit = function () {
        var start = performance.now();
        // result.remove("builtin entity", {entity: "render performance statistics"});
        // result.add("builtin entity", {entity: "render performance statistics", content: `
        // # Render performance statistics ({is a: system})
        // root: {root: ${perfStats.root}}
        // ui compile: {ui compile: ${perfStats.uiCompile}}
        // render: {render: ${perfStats.render}}
        // update: {update: ${perfStats.update}}
        // Horrible hack, disregard this: {perf stats: render performance statistics}
        // `});
        if (!runtime.INCREMENTAL) {
            exports.eve.applyDiff(result);
        }
        else {
            exports.eve.applyDiffIncremental(result);
        }
        if (result.meta.render) {
            render();
        }
        if (result.meta.store) {
            storeLocally();
            if (exports.eveLocalStorageKey === "eve") {
                sendChangeSet(result);
            }
        }
        updateStat = performance.now() - start;
    };
    if (!event)
        return result;
    var func = dispatches[event];
    if (!func) {
        console.error("No dispatches for '" + event + "' with " + JSON.stringify(info));
    }
    else {
        func(result, info);
    }
    return result;
}
exports.dispatch = dispatch;
//---------------------------------------------------------
// State
//---------------------------------------------------------
exports.eve = runtime.indexer();
exports.initializers = {};
exports.activeSearches = {};
function init(name, func) {
    exports.initializers[name] = func;
}
exports.init = init;
function executeInitializers() {
    for (var initName in exports.initializers) {
        exports.initializers[initName]();
    }
}
//---------------------------------------------------------
// Websocket
//---------------------------------------------------------
var me = utils_1.uuid();
if (this.localStorage) {
    if (localStorage["me"])
        me = localStorage["me"];
    else
        localStorage["me"] = me;
}
function connectToServer() {
    exports.socket = new WebSocket("ws://" + (window.location.hostname || "localhost") + ":8080");
    exports.socket.onerror = function () {
        console.error("Failed to connect to server, falling back to local storage");
        exports.eveLocalStorageKey = "local-eve";
        executeInitializers();
        render();
    };
    exports.socket.onopen = function () {
        sendServer("connect", me);
    };
    exports.socket.onmessage = function (data) {
        var parsed = JSON.parse(data.data);
        console.log("WS MESSAGE:", parsed);
        if (parsed.kind === "load") {
            exports.eve.load(parsed.data);
            executeInitializers();
            render();
        }
        else if (parsed.kind === "changeset") {
            var diff = exports.eve.diff();
            diff.tables = parsed.data;
            exports.eve.applyDiff(diff);
            render();
        }
    };
}
function sendServer(messageKind, data) {
    if (!exports.socket)
        return;
    exports.socket.send(JSON.stringify({ kind: messageKind, me: me, time: (new Date).getTime(), data: data }));
}
function sendChangeSet(changeset) {
    if (!exports.socket)
        return;
    var changes = {};
    var send = false;
    for (var _i = 0; _i < exports.syncedTables.length; _i++) {
        var table = exports.syncedTables[_i];
        if (changeset.tables[table]) {
            send = true;
            changes[table] = changeset.tables[table];
        }
    }
    if (send)
        sendServer("changeset", changes);
}
//---------------------------------------------------------
// Go
//---------------------------------------------------------
if (utils_1.ENV === "browser") {
    document.addEventListener("DOMContentLoaded", function (event) {
        initRenderer();
        connectToServer();
        render();
    });
}
init("load data", function () {
    var stored = localStorage[exports.eveLocalStorageKey];
    if (stored) {
        exports.eve.load(stored);
    }
});
if (utils_1.ENV === "browser")
    window["app"] = exports;

},{"./microReact":4,"./runtime":6,"./uiRenderer":7,"./utils":8}],3:[function(require,module,exports){
var utils_1 = require("./utils");
var runtime = require("./runtime");
var app = require("./app");
var app_1 = require("./app");
var parser_1 = require("./parser");
var uiRenderer_1 = require("./uiRenderer");
exports.ixer = app_1.eve;
//-----------------------------------------------------------------------------
// Utilities
//-----------------------------------------------------------------------------
// export function UIFromDSL(str:string):UI {
//   function processElem(data:UIElem):UI {
//     let elem = new UI(data.id || uuid());
//     if(data.binding) elem.bind(data.bindingKind === "query" ? parseDSL(data.binding);
//     if(data.embedded) elem.embed(data.embedded);
//     if(data.attributes) elem.attributes(data.attributes);
//     if(data.events) elem.events(data.events);
//     if(data.children) {
//       for(let child of data.children) elem.child(processElem(child));
//     }
//     return elem;
//   }
//   return processElem(parseUI(str));
// }
var BSPhase = (function () {
    function BSPhase(ixer, changeset) {
        if (changeset === void 0) { changeset = ixer.diff(); }
        this.ixer = ixer;
        this.changeset = changeset;
        this._views = {};
        this._viewFields = {};
        this._entities = [];
        this._uis = {};
        this._queries = {};
        this._names = {};
    }
    BSPhase.prototype.viewKind = function (view) {
        return this._views[view];
    };
    BSPhase.prototype.viewFields = function (view) {
        return this._viewFields[view];
    };
    BSPhase.prototype.apply = function (nukeExisting) {
        for (var view in this._views) {
            if (this._views[view] === "table")
                exports.ixer.addTable(view, this._viewFields[view]);
        }
        if (nukeExisting) {
            for (var view in this._views) {
                if (this._views[view] !== "table")
                    this.changeset.merge(runtime.Query.remove(view, this.ixer));
            }
            for (var _i = 0, _a = this._entities; _i < _a.length; _i++) {
                var entity = _a[_i];
                this.changeset.remove("builtin entity", { entity: entity });
            }
            for (var ui in this._uis)
                this.changeset.merge(uiRenderer_1.UI.remove(ui, this.ixer));
        }
        exports.ixer.applyDiff(this.changeset);
    };
    //-----------------------------------------------------------------------------
    // Macros
    //-----------------------------------------------------------------------------
    BSPhase.prototype.addFact = function (table, fact) {
        this.changeset.add(table, fact);
        return this;
    };
    BSPhase.prototype.addEntity = function (entity, name, kinds, attributes, extraContent) {
        entity = utils_1.builtinId(entity);
        this._names[name] = entity;
        this._entities.push(entity);
        this.addFact("display name", { id: entity, name: name });
        var isAs = [];
        for (var _i = 0; _i < kinds.length; _i++) {
            var kind = kinds[_i];
            var sourceId = entity + ",is a," + kind;
            isAs.push("{" + kind + "|rep=link; eav source = " + sourceId + "}");
            var collEntity = utils_1.builtinId(kind);
            this.addFact("display name", { id: collEntity, name: kind });
            this.addFact("sourced eav", { entity: entity, attribute: "is a", value: collEntity, source: sourceId });
        }
        var collectionsText = "";
        if (isAs.length)
            collectionsText = utils_1.titlecase(name) + " is a " + isAs.slice(0, -1).join(", ") + " " + (isAs.length > 1 ? "and" : "") + " " + isAs[isAs.length - 1] + ".";
        var content = (_a = ["\n      #", "\n      ", "\n    "], _a.raw = ["\n      #", "\n      ", "\n    "], utils_1.unpad(6)(_a, name, collectionsText));
        if (attributes) {
            content += "\n##Attributes\n";
            for (var attr in attributes) {
                var sourceId = entity + "," + attr + "," + attributes[attr];
                var query = name + "'s " + attr;
                var queryId = query.replace(" ", "-");
                content += attr + ": {" + query + "|rep=CSV; field=" + attr + "; eav source = " + sourceId + "}\n";
                var value = this._names[attributes[attr]] || attributes[attr];
                this.addFact("sourced eav", { entity: entity, attribute: attr, value: value, source: sourceId });
                this.addArtifacts(parser_1.parseDSL("(query :$$view \"" + queryId + "\"\n                                     (entity-eavs :entity \"" + entity + "\" :attribute \"" + attr + "\" :value v)\n                                     (project! :entity \"" + entity + "\" :" + attr + " v))"));
                this.addFact("query to id", { query: query, id: queryId });
            }
        }
        if (extraContent)
            content += "\n" + extraContent;
        var page = entity + "|root";
        this.addFact("page content", { page: page, content: content });
        this.addFact("entity page", { entity: entity, page: page });
        return this;
        var _a;
    };
    BSPhase.prototype.addView = function (view, kind, fields) {
        this._views[view] = kind;
        this._viewFields[view] = fields;
        this.addFact("view", { view: view, kind: kind });
        for (var _i = 0; _i < fields.length; _i++) {
            var field = fields[_i];
            this.addFact("field", { view: view, field: field });
        }
        var entity = view + " view";
        this.addEntity(entity, entity, ["system", kind], undefined, (_a = ["\n      ## Fields\n      ", "\n    "], _a.raw = ["\n      ## Fields\n      ", "\n    "], utils_1.unpad(6)(_a, fields.map(function (field) { return ("* " + field); }).join("\n      "))));
        return this;
        var _a;
    };
    BSPhase.prototype.addTable = function (view, fields) {
        this.addView(view, "table", fields);
        return this;
    };
    BSPhase.prototype.addUnion = function (view, fields, builtin) {
        if (builtin === void 0) { builtin = true; }
        this.addView(view, "union", fields);
        if (builtin) {
            var table = "builtin " + view;
            this.addTable(table, fields);
            this.addUnionMember(view, table);
        }
        return this;
    };
    BSPhase.prototype.addUnionMember = function (union, member, mapping) {
        // apply the natural mapping.
        if (!mapping) {
            if (this.viewKind(union) !== "union")
                throw new Error("Union '" + union + "' must be added before adding members");
            mapping = {};
            for (var _i = 0, _a = this.viewFields(union); _i < _a.length; _i++) {
                var field = _a[_i];
                mapping[field] = field;
            }
        }
        var action = union + " <-- " + member + " <-- " + JSON.stringify(mapping);
        this.addFact("action", { view: union, action: action, kind: "union", ix: 0 })
            .addFact("action source", { action: action, "source view": member });
        for (var field in mapping) {
            var mapped = mapping[field];
            if (mapped.constructor === Array) {
                this.addFact("action mapping constant", { action: action, from: field, "value": mapped[0] });
            }
            else {
                this.addFact("action mapping", { action: action, from: field, "to source": member, "to field": mapped });
            }
        }
        return this;
    };
    BSPhase.prototype.addQuery = function (view, query) {
        query.name = view;
        this._queries[view] = query;
        this.addView(view, "query", Object.keys(query.projectionMap || {}));
        this.changeset.merge(query.changeset(this.ixer));
        return this;
    };
    BSPhase.prototype.addArtifacts = function (artifacts) {
        var views = artifacts.views;
        for (var id in views)
            this.changeset.merge(views[id].changeset(app_1.eve));
        return this;
    };
    BSPhase.prototype.addUI = function (id, ui) {
        ui.id = id;
        this._uis[id] = ui;
        this.addEntity(id, id, ["system", "ui"]);
        this.changeset.merge(ui.changeset(this.ixer));
        return this;
    };
    return BSPhase;
})();
//-----------------------------------------------------------------------------
// Runtime Setup
//-----------------------------------------------------------------------------
app.init("bootstrap", function bootstrap() {
    //-----------------------------------------------------------------------------
    // Entity System
    //-----------------------------------------------------------------------------
    var phase = new BSPhase(app_1.eve);
    phase.addTable("manual entity", ["entity", "content"]);
    phase.addTable("sourced eav", ["entity", "attribute", "value", "source"]);
    phase.addTable("page content", ["page", "content"]);
    phase.addTable("entity page", ["entity", "page"]);
    phase.addTable("action entity", ["entity", "content", "source"]);
    phase
        .addEntity("entity", "entity", ["system"])
        .addEntity("collection", "collection", ["system"])
        .addEntity("system", "system", ["system", "collection"])
        .addEntity("union", "union", ["system", "collection"])
        .addEntity("query", "query", ["system", "collection"])
        .addEntity("table", "table", ["system", "collection"])
        .addEntity("ui", "ui", ["system", "collection"])
        .addEntity("home", "home", ["system"], undefined, (_a = ["\n      # Directory\n      {entity|rep = directory}\n    "], _a.raw = ["\n      # Directory\n      {entity|rep = directory}\n    "], utils_1.unpad(6)(_a)));
    phase.addUnion("entity eavs", ["entity", "attribute", "value"], true)
        .addUnionMember("entity eavs", "generated eav", { entity: "entity", attribute: "attribute", value: "value" })
        .addUnionMember("entity eavs", "sourced eav", { entity: "entity", attribute: "attribute", value: "value" })
        .addUnionMember("entity eavs", "added eavs");
    phase.addUnion("entity links", ["entity", "link", "type"])
        .addUnionMember("entity links", "eav entity links")
        .addUnionMember("entity links", "is a attributes", { entity: "entity", link: "collection", type: ["is a"] });
    phase.addUnion("directionless links", ["entity", "link"])
        .addUnionMember("directionless links", "entity links")
        .addUnionMember("directionless links", "entity links", { entity: "link", link: "entity" });
    phase.addUnion("collection entities", ["entity", "collection"])
        .addUnionMember("collection entities", "is a attributes");
    phase.addArtifacts(parser_1.parseDSL("\n    (query :$$view \"bs: entity\"\n      (entity-page :entity entity :page page)\n      (page-content :page page :content content)\n      (project! \"entity\" :entity entity :content content))\n  "));
    phase.addArtifacts(parser_1.parseDSL("\n    (query :$$view \"bs: unmodified added bits\"\n      (added-bits :entity entity :content content)\n      (negate (manual-entity :entity entity))\n      (project! \"unmodified added bits\" :entity entity :content content))\n  "));
    phase.addArtifacts(parser_1.parseDSL("\n    (query :$$view \"bs: is a attributes\"\n      (entity-eavs :attribute \"is a\" :entity entity :value value)\n      (project! \"is a attributes\" :collection value :entity entity))\n  "));
    // @HACK: this view is required because you can't currently join a select on the result of a function.
    // so we create a version of the eavs table that already has everything lowercased.
    phase.addArtifacts(parser_1.parseDSL("\n    (query :$$view \"bs: lowercase eavs\"\n      (entity-eavs :entity entity :attribute attribute :value value)\n      (lowercase :text value :result lowercased)\n      (project! \"lowercase eavs\" :entity entity :attribute attribute :value lowercased))\n  "));
    phase.addArtifacts(parser_1.parseDSL("\n    (query :$$view \"bs: eav entity links\"\n      (entity-eavs :entity entity :attribute attribute :value value)\n      (entity :entity value)\n      (project! \"eav entity links\" :entity entity :type attribute :link value))\n  "));
    phase.addArtifacts(parser_1.parseDSL("\n    (query :$$view \"bs: collection\"\n      (is-a-attributes :collection entity)\n      (query :$$view \"bs: collection count\"\n        (is-a-attributes :collection entity :entity child)\n        (count :count childCount))\n      (project! \"collection\" :collection entity :count childCount))\n  "));
    phase.addTable("ui pane", ["pane", "contains", "kind"]);
    if (app_1.eve.find("ui pane").length === 0)
        phase.addFact("ui pane", { pane: "p1", contains: "pet", kind: 0 });
    phase.apply(true);
    //-----------------------------------------------------------------------------
    // New Entity Logic
    //-----------------------------------------------------------------------------
    phase = new BSPhase(app_1.eve);
    phase.addEntity("entity", "entity", ["system"]);
    phase.addEntity("collection", "collection", ["system"]);
    phase.addArtifacts(parser_1.parseDSL((_b = ["\n    (query :$$view \"bs: entity eavs from entities\"\n      (entity :entity entity)\n      (project! \"entity eavs\" :entity entity :attribute \"is a\" :value \"", "\"))\n  "], _b.raw = ["\n    (query :$$view \"bs: entity eavs from entities\"\n      (entity :entity entity)\n      (project! \"entity eavs\" :entity entity :attribute \"is a\" :value \"", "\"))\n  "], utils_1.unpad(4)(_b, utils_1.builtinId("entity")))));
    phase.addArtifacts(parser_1.parseDSL((_c = ["\n    (query :$$view \"bs: entity eavs from collections\"\n      (is-a-attributes :collection coll)\n      (project! \"entity eavs\" :entity coll :attribute \"is a\" :value \"", "\"))\n  "], _c.raw = ["\n    (query :$$view \"bs: entity eavs from collections\"\n      (is-a-attributes :collection coll)\n      (project! \"entity eavs\" :entity coll :attribute \"is a\" :value \"", "\"))\n  "], utils_1.unpad(4)(_c, utils_1.builtinId("collection")))));
    /*  phase.addArtifacts(parseDSL(unpad(4) `
        (query
          (entity :entity entity)
          (negate (query
            (directionless-links :entity entity :link link)
            (!= link "AUTOGENERATED entity THIS SHOULDN'T SHOW UP ANYWHERE")
            (!= link "AUTOGENERATED orphaned THIS SHOULDN'T SHOW UP ANYWHERE")
            ))
          (project! "entity eavs" :entity coll :attribute "is a" :value "AUTOGENERATED collection THIS SHOULDN'T SHOW UP ANYWHERE"))
    `));*/
    phase.apply(true);
    //-----------------------------------------------------------------------------
    // UI
    //-----------------------------------------------------------------------------
    phase = new BSPhase(app_1.eve);
    // @FIXME: These should probably be unionized.
    function resolve(table, fields) {
        return fields.map(function (field) { return (table + ": " + field); });
    }
    phase.addTable("ui template", resolve("ui template", ["template", "parent", "ix"]));
    phase.addTable("ui template binding", resolve("ui template binding", ["template", "query"]));
    phase.addTable("ui embed", resolve("ui embed", ["embed", "template", "parent", "ix"]));
    phase.addTable("ui embed scope", resolve("ui embed scope", ["embed", "key", "value"]));
    phase.addTable("ui embed scope binding", resolve("ui embed scope binding", ["embed", "key", "source", "alias"]));
    phase.addTable("ui attribute", resolve("ui attribute", ["template", "property", "value"]));
    phase.addTable("ui attribute binding", resolve("ui attribute binding", ["template", "property", "source", "alias"]));
    phase.addTable("ui event", resolve("ui event", ["template", "event"]));
    phase.addTable("ui event state", resolve("ui event state", ["template", "event", "key", "value"]));
    phase.addTable("ui event state binding", resolve("ui event state binding", ["template", "event", "key", "source", "alias"]));
    phase.addTable("system ui", ["template"]);
    phase.apply(true);
    //-----------------------------------------------------------------------------
    // Testing
    //-----------------------------------------------------------------------------
    phase = new BSPhase(app_1.eve);
    var testData = {
        "test data": [],
        pet: [],
        exotic: [],
        dangerous: [],
        cat: ["pet"],
        dog: ["pet"],
        fish: ["pet"],
        snake: ["pet", "exotic"],
        koala: ["pet", "exotic"],
        sloth: ["pet", "exotic"],
        kangaroo: ["exotic"],
        giraffe: ["exotic"],
        gorilla: ["exotic", "dangerous"],
        company: [],
        kodowa: ["company"],
        department: [],
        engineering: ["department"],
        operations: ["department"],
        magic: ["department"],
        employee: [],
        josh: ["employee"],
        corey: ["employee"],
        chris: ["employee"],
        rob: ["employee"],
        eric: ["employee"],
    };
    var testAttrs = {
        cat: { length: 4 },
        dog: { length: 3 },
        fish: { length: 1 },
        snake: { length: 4 },
        koala: { length: 3 },
        sloth: { length: 3 },
        engineering: { company: "kodowa" },
        operations: { company: "kodowa" },
        magic: { company: "kodowa" },
        josh: { department: "engineering", salary: 7 },
        corey: { department: "engineering", salary: 10 },
        chris: { department: "engineering", salary: 10 },
        eric: { department: "engineering", salary: 7 },
        rob: { department: "operations", salary: 10 },
    };
    for (var entity in testData)
        phase.addEntity(entity, entity, ["test data"].concat(testData[entity]), testAttrs[entity], "");
    // phase.addTable("department", ["department"])
    //   .addFact("department", {department: "engineering"})
    //   .addFact("department", {department: "operations"})
    //   .addFact("department", {department: "magic"});
    // phase.addTable("employee", ["department", "employee", "salary"])
    //   .addFact("employee", {department: "engineering", employee: "josh", salary: 10})
    //   .addFact("employee", {department: "engineering", employee: "corey", salary: 11})
    //   .addFact("employee", {department: "engineering", employee: "chris", salary: 7})
    //   .addFact("employee", {department: "operations", employee: "rob", salary: 7});
    phase.apply(true);
    window["p"] = phase;
    var _a, _b, _c;
});
window["bootstrap"] = exports;

},{"./app":2,"./parser":5,"./runtime":6,"./uiRenderer":7,"./utils":8}],4:[function(require,module,exports){
function now() {
    if (window.performance) {
        return window.performance.now();
    }
    return (new Date()).getTime();
}
function shallowEquals(a, b) {
    if (a === b)
        return true;
    if (!a || !b)
        return false;
    for (var k in a) {
        if (a[k] !== b[k])
            return false;
    }
    for (var k in b) {
        if (b[k] !== a[k])
            return false;
    }
    return true;
}
function postAnimationRemove(elements) {
    for (var _i = 0; _i < elements.length; _i++) {
        var elem = elements[_i];
        if (elem.parentNode)
            elem.parentNode.removeChild(elem);
    }
}
var Renderer = (function () {
    function Renderer() {
        this.content = document.createElement("div");
        this.content.className = "__root";
        this.elementCache = { "__root": this.content };
        this.prevTree = {};
        this.tree = {};
        this.postRenders = [];
        this.lastDiff = { adds: [], updates: {} };
        var self = this;
        this.handleEvent = function handleEvent(e) {
            var id = (e.currentTarget || e.target)["_id"];
            var elem = self.tree[id];
            if (!elem)
                return;
            var handler = elem[e.type];
            if (handler) {
                handler(e, elem);
            }
        };
    }
    Renderer.compile = function (elem) {
        if (!elem.id)
            throw new Error("Cannot compile element with id " + elem.id);
        var renderer = Renderer._compileRenderer[elem.id];
        if (!renderer)
            renderer = Renderer._compileRenderer[elem.id] = new Renderer();
        renderer.render([elem]);
        return renderer.elementCache[elem.id];
    };
    Renderer.prototype.reset = function () {
        this.prevTree = this.tree;
        this.tree = {};
        this.postRenders = [];
    };
    Renderer.prototype.domify = function () {
        var fakePrev = {}; //create an empty object once instead of every instance of the loop
        var elements = this.tree;
        var prevElements = this.prevTree;
        var diff = this.lastDiff;
        var adds = diff.adds;
        var updates = diff.updates;
        var elemKeys = Object.keys(updates);
        var elementCache = this.elementCache;
        var tempTween = {};
        //Create all the new elements to ensure that they're there when they need to be
        //parented
        for (var i = 0, len = adds.length; i < len; i++) {
            var id = adds[i];
            var cur = elements[id];
            var div;
            if (cur.svg) {
                div = document.createElementNS("http://www.w3.org/2000/svg", cur.t || "rect");
            }
            else {
                div = document.createElement(cur.t || "div");
            }
            div._id = id;
            elementCache[id] = div;
            if (cur.enter) {
                if (cur.enter.delay) {
                    cur.enter.display = "auto";
                    div.style.display = "none";
                }
                Velocity(div, cur.enter, cur.enter);
            }
        }
        for (var i = 0, len = elemKeys.length; i < len; i++) {
            var id = elemKeys[i];
            var cur = elements[id];
            var prev = prevElements[id] || fakePrev;
            var type = updates[id];
            var div;
            if (type === "replaced") {
                var me = elementCache[id];
                if (me.parentNode)
                    me.parentNode.removeChild(me);
                if (cur.svg) {
                    div = document.createElementNS("http://www.w3.org/2000/svg", cur.t || "rect");
                }
                else {
                    div = document.createElement(cur.t || "div");
                }
                div._id = id;
                elementCache[id] = div;
            }
            else if (type === "removed") {
                //NOTE: Batching the removes such that you only remove the parent
                //didn't actually make this faster surprisingly. Given that this
                //strategy is much simpler and there's no noticable perf difference
                //we'll just do the dumb thing and remove all the children one by one.
                var me = elementCache[id];
                if (prev.leave) {
                    prev.leave.complete = postAnimationRemove;
                    if (prev.leave.absolute) {
                        me.style.position = "absolute";
                    }
                    Velocity(me, prev.leave, prev.leave);
                }
                else if (me.parentNode)
                    me.parentNode.removeChild(me);
                elementCache[id] = null;
                continue;
            }
            else {
                div = elementCache[id];
            }
            var style = div.style;
            if (cur.c !== prev.c)
                div.className = cur.c;
            if (cur.draggable !== prev.draggable)
                div.draggable = cur.draggable === undefined ? null : "true";
            if (cur.contentEditable !== prev.contentEditable)
                div.contentEditable = cur.contentEditable || "inherit";
            if (cur.colspan !== prev.colspan)
                div.colSpan = cur.colspan;
            if (cur.placeholder !== prev.placeholder)
                div.placeholder = cur.placeholder;
            if (cur.selected !== prev.selected)
                div.selected = cur.selected;
            if (cur.value !== prev.value)
                div.value = cur.value;
            if (cur.t === "input" && cur.type !== prev.type)
                div.type = cur.type;
            if (cur.t === "input" && cur.checked !== prev.checked)
                div.checked = cur.checked;
            if ((cur.text !== prev.text || cur.strictText) && div.textContent !== cur.text)
                div.textContent = cur.text === undefined ? "" : cur.text;
            if (cur.tabindex !== prev.tabindex)
                div.setAttribute("tabindex", cur.tabindex);
            if (cur.href !== prev.href)
                div.setAttribute("href", cur.href);
            if (cur.src !== prev.src)
                div.setAttribute("src", cur.src);
            if (cur.data !== prev.data)
                div.setAttribute("data", cur.data);
            if (cur.download !== prev.download)
                div.setAttribute("download", cur.download);
            if (cur.allowfullscreen !== prev.allowfullscreen)
                div.setAttribute("allowfullscreen", cur.allowfullscreen);
            // animateable properties
            var tween = cur.tween || tempTween;
            if (cur.flex !== prev.flex) {
                if (tween.flex)
                    tempTween.flex = cur.flex;
                else
                    style.flex = cur.flex === undefined ? "" : cur.flex;
            }
            if (cur.left !== prev.left) {
                if (tween.left)
                    tempTween.left = cur.left;
                else
                    style.left = cur.left === undefined ? "" : cur.left;
            }
            if (cur.top !== prev.top) {
                if (tween.top)
                    tempTween.top = cur.top;
                else
                    style.top = cur.top === undefined ? "" : cur.top;
            }
            if (cur.height !== prev.height) {
                if (tween.height)
                    tempTween.height = cur.height;
                else
                    style.height = cur.height === undefined ? "auto" : cur.height;
            }
            if (cur.width !== prev.width) {
                if (tween.width)
                    tempTween.width = cur.width;
                else
                    style.width = cur.width === undefined ? "auto" : cur.width;
            }
            if (cur.zIndex !== prev.zIndex) {
                if (tween.zIndex)
                    tempTween.zIndex = cur.zIndex;
                else
                    style.zIndex = cur.zIndex;
            }
            if (cur.backgroundColor !== prev.backgroundColor) {
                if (tween.backgroundColor)
                    tempTween.backgroundColor = cur.backgroundColor;
                else
                    style.backgroundColor = cur.backgroundColor || "transparent";
            }
            if (cur.borderColor !== prev.borderColor) {
                if (tween.borderColor)
                    tempTween.borderColor = cur.borderColor;
                else
                    style.borderColor = cur.borderColor || "none";
            }
            if (cur.borderWidth !== prev.borderWidth) {
                if (tween.borderWidth)
                    tempTween.borderWidth = cur.borderWidth;
                else
                    style.borderWidth = cur.borderWidth || 0;
            }
            if (cur.borderRadius !== prev.borderRadius) {
                if (tween.borderRadius)
                    tempTween.borderRadius = cur.borderRadius;
                else
                    style.borderRadius = (cur.borderRadius || 0) + "px";
            }
            if (cur.opacity !== prev.opacity) {
                if (tween.opacity)
                    tempTween.opacity = cur.opacity;
                else
                    style.opacity = cur.opacity === undefined ? 1 : cur.opacity;
            }
            if (cur.fontSize !== prev.fontSize) {
                if (tween.fontSize)
                    tempTween.fontSize = cur.fontSize;
                else
                    style.fontSize = cur.fontSize;
            }
            if (cur.color !== prev.color) {
                if (tween.color)
                    tempTween.color = cur.color;
                else
                    style.color = cur.color || "inherit";
            }
            var animKeys = Object.keys(tempTween);
            if (animKeys.length) {
                Velocity(div, tempTween, tween);
                tempTween = {};
            }
            // non-animation style properties
            if (cur.backgroundImage !== prev.backgroundImage)
                style.backgroundImage = "url('" + cur.backgroundImage + "')";
            if (cur.border !== prev.border)
                style.border = cur.border || "none";
            if (cur.textAlign !== prev.textAlign) {
                style.alignItems = cur.textAlign;
                if (cur.textAlign === "center") {
                    style.textAlign = "center";
                }
                else if (cur.textAlign === "flex-end") {
                    style.textAlign = "right";
                }
                else {
                    style.textAlign = "left";
                }
            }
            if (cur.verticalAlign !== prev.verticalAlign)
                style.justifyContent = cur.verticalAlign;
            if (cur.fontFamily !== prev.fontFamily)
                style.fontFamily = cur.fontFamily || "inherit";
            if (cur.transform !== prev.transform)
                style.transform = cur.transform || "none";
            if (cur.style !== prev.style)
                div.setAttribute("style", cur.style);
            if (cur.dangerouslySetInnerHTML !== prev.dangerouslySetInnerHTML)
                div.innerHTML = cur.dangerouslySetInnerHTML;
            // debug/programmatic properties
            if (cur.semantic !== prev.semantic)
                div.setAttribute("data-semantic", cur.semantic);
            if (cur.debug !== prev.debug)
                div.setAttribute("data-debug", cur.debug);
            // SVG properties
            if (cur.svg) {
                if (cur.fill !== prev.fill)
                    div.setAttributeNS(null, "fill", cur.fill);
                if (cur.stroke !== prev.stroke)
                    div.setAttributeNS(null, "stroke", cur.stroke);
                if (cur.strokeWidth !== prev.strokeWidth)
                    div.setAttributeNS(null, "stroke-width", cur.strokeWidth);
                if (cur.d !== prev.d)
                    div.setAttributeNS(null, "d", cur.d);
                if (cur.c !== prev.c)
                    div.setAttributeNS(null, "class", cur.c);
                if (cur.x !== prev.x)
                    div.setAttributeNS(null, "x", cur.x);
                if (cur.y !== prev.y)
                    div.setAttributeNS(null, "y", cur.y);
                if (cur.dx !== prev.dx)
                    div.setAttributeNS(null, "dx", cur.dx);
                if (cur.dy !== prev.dy)
                    div.setAttributeNS(null, "dy", cur.dy);
                if (cur.cx !== prev.cx)
                    div.setAttributeNS(null, "cx", cur.cx);
                if (cur.cy !== prev.cy)
                    div.setAttributeNS(null, "cy", cur.cy);
                if (cur.r !== prev.r)
                    div.setAttributeNS(null, "r", cur.r);
                if (cur.height !== prev.height)
                    div.setAttributeNS(null, "height", cur.height);
                if (cur.width !== prev.width)
                    div.setAttributeNS(null, "width", cur.width);
                if (cur.xlinkhref !== prev.xlinkhref)
                    div.setAttributeNS('http://www.w3.org/1999/xlink', "href", cur.xlinkhref);
                if (cur.startOffset !== prev.startOffset)
                    div.setAttributeNS(null, "startOffset", cur.startOffset);
                if (cur.id !== prev.id)
                    div.setAttributeNS(null, "id", cur.id);
                if (cur.viewBox !== prev.viewBox)
                    div.setAttributeNS(null, "viewBox", cur.viewBox);
                if (cur.transform !== prev.transform)
                    div.setAttributeNS(null, "transform", cur.transform);
                if (cur.draggable !== prev.draggable)
                    div.setAttributeNS(null, "draggable", cur.draggable);
                if (cur.textAnchor !== prev.textAnchor)
                    div.setAttributeNS(null, "text-anchor", cur.textAnchor);
            }
            //events
            if (cur.dblclick !== prev.dblclick)
                div.ondblclick = cur.dblclick !== undefined ? this.handleEvent : undefined;
            if (cur.click !== prev.click)
                div.onclick = cur.click !== undefined ? this.handleEvent : undefined;
            if (cur.contextmenu !== prev.contextmenu)
                div.oncontextmenu = cur.contextmenu !== undefined ? this.handleEvent : undefined;
            if (cur.mousedown !== prev.mousedown)
                div.onmousedown = cur.mousedown !== undefined ? this.handleEvent : undefined;
            if (cur.mousemove !== prev.mousemove)
                div.onmousemove = cur.mousemove !== undefined ? this.handleEvent : undefined;
            if (cur.mouseup !== prev.mouseup)
                div.onmouseup = cur.mouseup !== undefined ? this.handleEvent : undefined;
            if (cur.mouseover !== prev.mouseover)
                div.onmouseover = cur.mouseover !== undefined ? this.handleEvent : undefined;
            if (cur.mouseout !== prev.mouseout)
                div.onmouseout = cur.mouseout !== undefined ? this.handleEvent : undefined;
            if (cur.mouseleave !== prev.mouseleave)
                div.onmouseleave = cur.mouseleave !== undefined ? this.handleEvent : undefined;
            if (cur.mousewheel !== prev.mousewheel)
                div.onmouseheel = cur.mousewheel !== undefined ? this.handleEvent : undefined;
            if (cur.dragover !== prev.dragover)
                div.ondragover = cur.dragover !== undefined ? this.handleEvent : undefined;
            if (cur.dragstart !== prev.dragstart)
                div.ondragstart = cur.dragstart !== undefined ? this.handleEvent : undefined;
            if (cur.dragend !== prev.dragend)
                div.ondragend = cur.dragend !== undefined ? this.handleEvent : undefined;
            if (cur.drag !== prev.drag)
                div.ondrag = cur.drag !== undefined ? this.handleEvent : undefined;
            if (cur.drop !== prev.drop)
                div.ondrop = cur.drop !== undefined ? this.handleEvent : undefined;
            if (cur.scroll !== prev.scroll)
                div.onscroll = cur.scroll !== undefined ? this.handleEvent : undefined;
            if (cur.focus !== prev.focus)
                div.onfocus = cur.focus !== undefined ? this.handleEvent : undefined;
            if (cur.blur !== prev.blur)
                div.onblur = cur.blur !== undefined ? this.handleEvent : undefined;
            if (cur.input !== prev.input)
                div.oninput = cur.input !== undefined ? this.handleEvent : undefined;
            if (cur.change !== prev.change)
                div.onchange = cur.change !== undefined ? this.handleEvent : undefined;
            if (cur.keyup !== prev.keyup)
                div.onkeyup = cur.keyup !== undefined ? this.handleEvent : undefined;
            if (cur.keydown !== prev.keydown)
                div.onkeydown = cur.keydown !== undefined ? this.handleEvent : undefined;
            if (type === "added" || type === "replaced" || type === "moved") {
                var parentEl = elementCache[cur.parent];
                if (parentEl) {
                    if (cur.ix >= parentEl.children.length) {
                        parentEl.appendChild(div);
                    }
                    else {
                        parentEl.insertBefore(div, parentEl.children[cur.ix]);
                    }
                }
            }
        }
    };
    Renderer.prototype.diff = function () {
        var a = this.prevTree;
        var b = this.tree;
        var as = Object.keys(a);
        var bs = Object.keys(b);
        var updated = {};
        var adds = [];
        for (var i = 0, len = as.length; i < len; i++) {
            var id = as[i];
            var curA = a[id];
            var curB = b[id];
            if (curB === undefined) {
                updated[id] = "removed";
                continue;
            }
            if (curA.t !== curB.t) {
                updated[id] = "replaced";
                continue;
            }
            if (curA.ix !== curB.ix || curA.parent !== curB.parent) {
                updated[id] = "moved";
                continue;
            }
            if (!curB.dirty
                && curA.c === curB.c
                && curA.key === curB.key
                && curA.dangerouslySetInnerHTML === curB.dangerouslySetInnerHTML
                && curA.tabindex === curB.tabindex
                && curA.href === curB.href
                && curA.src === curB.src
                && curA.data === curB.data
                && curA.download === curB.download
                && curA.allowfullscreen === curB.allowfullscreen
                && curA.placeholder === curB.placeholder
                && curA.selected === curB.selected
                && curA.draggable === curB.draggable
                && curA.contentEditable === curB.contentEditable
                && curA.value === curB.value
                && curA.type === curB.type
                && curA.checked === curB.checked
                && curA.text === curB.text
                && curA.top === curB.top
                && curA.flex === curB.flex
                && curA.left === curB.left
                && curA.width === curB.width
                && curA.height === curB.height
                && curA.zIndex === curB.zIndex
                && curA.backgroundColor === curB.backgroundColor
                && curA.backgroundImage === curB.backgroundImage
                && curA.color === curB.color
                && curA.colspan === curB.colspan
                && curA.border === curB.border
                && curA.borderColor === curB.borderColor
                && curA.borderWidth === curB.borderWidth
                && curA.borderRadius === curB.borderRadius
                && curA.opacity === curB.opacity
                && curA.fontFamily === curB.fontFamily
                && curA.fontSize === curB.fontSize
                && curA.textAlign === curB.textAlign
                && curA.transform === curB.transform
                && curA.verticalAlign === curB.verticalAlign
                && curA.semantic === curB.semantic
                && curA.debug === curB.debug
                && curA.style === curB.style
                && (curB.svg === undefined || (curA.x === curB.x
                    && curA.y === curB.y
                    && curA.dx === curB.dx
                    && curA.dy === curB.dy
                    && curA.cx === curB.cx
                    && curA.cy === curB.cy
                    && curA.r === curB.r
                    && curA.d === curB.d
                    && curA.fill === curB.fill
                    && curA.stroke === curB.stroke
                    && curA.strokeWidth === curB.strokeWidth
                    && curA.startOffset === curB.startOffset
                    && curA.textAnchor === curB.textAnchor
                    && curA.viewBox === curB.viewBox
                    && curA.xlinkhref === curB.xlinkhref))) {
                continue;
            }
            updated[id] = "updated";
        }
        for (var i = 0, len = bs.length; i < len; i++) {
            var id = bs[i];
            var curA = a[id];
            if (curA === undefined) {
                adds.push(id);
                updated[id] = "added";
                continue;
            }
        }
        this.lastDiff = { adds: adds, updates: updated };
        return this.lastDiff;
    };
    Renderer.prototype.prepare = function (root) {
        var elemLen = 1;
        var tree = this.tree;
        var elements = [root];
        var elem;
        for (var elemIx = 0; elemIx < elemLen; elemIx++) {
            elem = elements[elemIx];
            if (elem.parent === undefined)
                elem.parent = "__root";
            if (elem.id === undefined)
                elem.id = "__root__" + elemIx;
            tree[elem.id] = elem;
            if (elem.postRender !== undefined) {
                this.postRenders.push(elem);
            }
            var children = elem.children;
            if (children !== undefined) {
                for (var childIx = 0, len = children.length; childIx < len; childIx++) {
                    var child = children[childIx];
                    if (child === undefined)
                        continue;
                    if (child.id === undefined) {
                        child.id = elem.id + "__" + childIx;
                    }
                    if (child.ix === undefined) {
                        child.ix = childIx;
                    }
                    if (child.parent === undefined) {
                        child.parent = elem.id;
                    }
                    elements.push(child);
                    elemLen++;
                }
            }
        }
        return tree;
    };
    Renderer.prototype.postDomify = function () {
        var postRenders = this.postRenders;
        var diff = this.lastDiff.updates;
        var elementCache = this.elementCache;
        for (var i = 0, len = postRenders.length; i < len; i++) {
            var elem = postRenders[i];
            var id = elem.id;
            if (diff[id] === "updated" || diff[id] === "added" || diff[id] === "replaced" || elem.dirty || diff[id] === "moved") {
                elem.postRender(elementCache[elem.id], elem);
            }
        }
    };
    Renderer.prototype.render = function (elems) {
        this.reset();
        // We sort elements by depth to allow them to be self referential.
        elems.sort(function (a, b) { return (a.parent ? a.parent.split("__").length : 0) - (b.parent ? b.parent.split("__").length : 0); });
        var start = now();
        for (var _i = 0; _i < elems.length; _i++) {
            var elem = elems[_i];
            var post = this.prepare(elem);
        }
        var prepare = now();
        var d = this.diff();
        var diff = now();
        this.domify();
        var domify = now();
        this.postDomify();
        var postDomify = now();
        var time = now() - start;
        if (time > 5) {
            console.log("slow render (> 5ms): ", time, {
                prepare: prepare - start,
                diff: diff - prepare,
                domify: domify - diff,
                postDomify: postDomify - domify
            });
        }
    };
    // @TODO: A more performant implementation would have a way of rendering subtrees and just have a lambda Renderer to compile into
    Renderer._compileRenderer = {};
    return Renderer;
})();
exports.Renderer = Renderer;

},{}],5:[function(require,module,exports){
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var utils_1 = require("./utils");
var runtime = require("./runtime");
var app_1 = require("./app");
var ParseError = (function (_super) {
    __extends(ParseError, _super);
    function ParseError(message, line, lineIx, charIx, length) {
        if (charIx === void 0) { charIx = 0; }
        if (length === void 0) { length = line && (line.length - charIx); }
        _super.call(this, message);
        this.message = message;
        this.line = line;
        this.lineIx = lineIx;
        this.charIx = charIx;
        this.length = length;
        this.name = "Parse Error";
    }
    ParseError.prototype.toString = function () {
        return (_a = ["\n      ", ": ", "\n      ", "\n      ", "\n      ", "\n    "], _a.raw = ["\n      ", ": ", "\n      ", "\n      ", "\n      ", "\n    "], utils_1.unpad(6)(_a, this.name, this.message, this.lineIx !== undefined ? "On line " + (this.lineIx + 1) + ":" + this.charIx : "", this.line, utils_1.underline(this.charIx, this.length)));
        var _a;
    };
    return ParseError;
})(Error);
function readWhile(str, pattern, startIx) {
    var endIx = startIx;
    while (str[endIx] !== undefined && str[endIx].match(pattern))
        endIx++;
    return str.slice(startIx, endIx);
}
function readUntil(str, sentinel, startIx, unsatisfiedErr) {
    var endIx = str.indexOf(sentinel, startIx);
    if (endIx === -1) {
        if (unsatisfiedErr)
            return unsatisfiedErr;
        return str.slice(startIx);
    }
    return str.slice(startIx, endIx);
}
function readUntilAny(str, sentinels, startIx, unsatisfiedErr) {
    var endIx = -1;
    for (var _i = 0; _i < sentinels.length; _i++) {
        var sentinel = sentinels[_i];
        var ix = str.indexOf(sentinel, startIx);
        if (ix === -1 || endIx !== -1 && ix > endIx)
            continue;
        endIx = ix;
    }
    if (endIx === -1) {
        if (unsatisfiedErr)
            return unsatisfiedErr;
        return str.slice(startIx);
    }
    return str.slice(startIx, endIx);
}
// export function parseUI(str:string):UIElem {
//   let root:UIElem = {};
//   let errors = [];
//   let lineIx = 0;
//   let lines = str.split("\n");
//   let stack:{indent: number, elem: UIElem}[] = [{indent: -2, elem: root}];
//   // @FIXME: Chunk into element chunks instead of lines to enable in-argument continuation.
//   for(let line of lines) {
//     let charIx = 0;
//     while(line[charIx] === " ") charIx++;
//     let indent = charIx;
//     if(line[charIx] === undefined)  continue;
//     let parent:UIElem;
//     for(let stackIx = stack.length - 1; stackIx >= 0; stackIx--) {
//       if(indent > stack[stackIx].indent) {
//         parent = stack[stackIx].elem;
//         break;
//       } else stack.pop();
//     }
//     let keyword = readUntil(line, " ", charIx);
//     charIx += keyword.length;
//     if(keyword[0] === "~" || keyword[0] === "%") { // Handle binding
//       charIx -= keyword.length - 1;
//       let kind = keyword[0] === "~" ? "plan" : "query";
//       if(!parent.binding) {
//         parent.binding = line.slice(charIx);
//         parent.bindingKind = kind;
//       } else if(kind === parent.bindingKind) parent.binding += "\n" + line.slice(charIx);
//       else {
//         errors.push(new ParseError(`UI must be bound to a single type of query.`, line, lineIx));
//         continue;
//       }
//       charIx = line.length;
//     } else if(keyword[0] === "@") { // Handle event
//       charIx -= keyword.length - 1;
//       let err;
//       while(line[charIx] === " ") charIx++;
//       let lastIx = charIx;
//       let eventRaw = readUntil(line, "{", charIx);
//       charIx += eventRaw.length;
//       let event = eventRaw.trim();
//       if(!event) err = new ParseError(`UI event must specify a valid event name`, line, lineIx, lastIx, eventRaw.length);
//       let state;
//       [state, charIx] = getMapArgs(line, lineIx, charIx);
//       if(state instanceof Error && !err) err = state;
//       if(err) {
//         errors.push(err);
//         lineIx++;
//         continue;
//       }
//       if(!parent.events) parent.events = {};
//       parent.events[event] = state;
//     } else if(keyword[0] === ">") { // Handle embed
//       charIx -= keyword.length - 1;
//       let err;
//       while(line[charIx] === " ") charIx++;
//       let lastIx = charIx;
//       let embedIdRaw = readUntil(line, "{", charIx);
//       charIx += embedIdRaw.length;
//       let embedId = embedIdRaw.trim();
//       if(!embedId) err = new ParseError(`UI embed must specify a valid element id`, line, lineIx, lastIx, embedIdRaw.length);
//       let scope;
//       [scope = {}, charIx] = getMapArgs(line, lineIx, charIx);
//       if(scope instanceof Error && !err) err = scope;
//       if(err) {
//         errors.push(err);
//         lineIx++;
//         continue;
//       }
//       let elem = {embedded: scope, id: embedId};
//       if(!parent.children) parent.children = [];
//       parent.children.push(elem);
//       stack.push({indent, elem});
//     } else { // Handle element
//       let err;
//       if(!keyword) err = new ParseError(`UI element must specify a valid tag name`, line, lineIx, charIx, 0);
//       while(line[charIx] === " ") charIx++;
//       let classesRaw = readUntil(line, "{", charIx);
//       charIx += classesRaw.length;
//       let classes = classesRaw.trim();
//       let attributes;
//       [attributes = {}, charIx] = getMapArgs(line, lineIx, charIx);
//       if(attributes instanceof Error && !err) err = attributes;
//       if(err) {
//         errors.push(err);
//         lineIx++;
//         continue;
//       }
//       attributes["t"] = keyword;
//       if(classes) attributes["c"] = classes;
//       let elem:UIElem = {id: attributes["id"], attributes};
//       if(!parent.children) parent.children = [];
//       parent.children.push(elem);
//       stack.push({indent, elem});
//     }
//     lineIx++;
//   }
//   if(errors.length) {
//     for(let err of errors) {
//       console.error(err);
//     }
//   }
//   return root;
// }
//-----------------------------------------------------------------------------
// Eve DSL Parser
//-----------------------------------------------------------------------------
var TOKEN_TYPE;
(function (TOKEN_TYPE) {
    TOKEN_TYPE[TOKEN_TYPE["EXPR"] = 0] = "EXPR";
    TOKEN_TYPE[TOKEN_TYPE["IDENTIFIER"] = 1] = "IDENTIFIER";
    TOKEN_TYPE[TOKEN_TYPE["KEYWORD"] = 2] = "KEYWORD";
    TOKEN_TYPE[TOKEN_TYPE["STRING"] = 3] = "STRING";
    TOKEN_TYPE[TOKEN_TYPE["LITERAL"] = 4] = "LITERAL";
})(TOKEN_TYPE || (TOKEN_TYPE = {}));
;
var Token = (function () {
    function Token(type, value, lineIx, charIx) {
        this.type = type;
        this.value = value;
        this.lineIx = lineIx;
        this.charIx = charIx;
    }
    Token.identifier = function (value, lineIx, charIx) {
        return new Token(Token.TYPE.IDENTIFIER, value, lineIx, charIx);
    };
    Token.keyword = function (value, lineIx, charIx) {
        return new Token(Token.TYPE.KEYWORD, value, lineIx, charIx);
    };
    Token.string = function (value, lineIx, charIx) {
        return new Token(Token.TYPE.STRING, value, lineIx, charIx);
    };
    Token.literal = function (value, lineIx, charIx) {
        return new Token(Token.TYPE.LITERAL, value, lineIx, charIx);
    };
    Token.prototype.toString = function () {
        if (this.type === Token.TYPE.KEYWORD)
            return ":" + this.value;
        else if (this.type === Token.TYPE.STRING)
            return "\"" + this.value + "\"";
        else
            return this.value.toString();
    };
    Token.TYPE = TOKEN_TYPE;
    return Token;
})();
exports.Token = Token;
var Sexpr = (function () {
    function Sexpr(val, lineIx, charIx, syntax) {
        if (syntax === void 0) { syntax = "expr"; }
        this.lineIx = lineIx;
        this.charIx = charIx;
        this.syntax = syntax;
        this.type = Token.TYPE.EXPR;
        if (val)
            this.value = val.slice();
    }
    Sexpr.list = function (value, lineIx, charIx, syntax) {
        if (value === void 0) { value = []; }
        value = value.slice();
        value.unshift(Token.identifier("list", lineIx, charIx ? charIx + 1 : undefined));
        return new Sexpr(value, lineIx, charIx, syntax ? "list" : undefined);
    };
    Sexpr.hash = function (value, lineIx, charIx, syntax) {
        if (value === void 0) { value = []; }
        value = value.slice();
        value.unshift(Token.identifier("hash", lineIx, charIx ? charIx + 1 : undefined));
        return new Sexpr(value, lineIx, charIx, syntax ? "hash" : undefined);
    };
    Sexpr.asSexprs = function (values) {
        for (var _i = 0; _i < values.length; _i++) {
            var raw = values[_i];
            if (!(raw instanceof Sexpr))
                throw new ParseError("All top level entries must be expressions (got " + raw + ")", undefined, raw.lineIx, raw.charIx);
            else {
                var op = raw.operator;
                if (op.type !== Token.TYPE.IDENTIFIER)
                    throw new ParseError("All expressions must begin with an identifier", undefined, raw.lineIx, raw.charIx);
            }
        }
        return values;
    };
    Sexpr.prototype.toString = function () {
        var content = this.value && this.value.map(function (token) { return token.toString(); }).join(" ");
        var argsContent = this.value && this.arguments.map(function (token) { return token.toString(); }).join(" ");
        if (this.syntax === "hash")
            return "{" + argsContent + "}";
        else if (this.syntax === "list")
            return "[" + argsContent + "]";
        else
            return "(" + content + ")";
    };
    Sexpr.prototype.push = function (val) {
        this.value = this.value || [];
        return this.value.push(val);
    };
    Sexpr.prototype.nth = function (n, val) {
        if (val) {
            this.value = this.value || [];
            return this.value[n] = val;
        }
        return this.value && this.value[n];
    };
    Object.defineProperty(Sexpr.prototype, "operator", {
        get: function () {
            return this.value && this.value[0];
        },
        set: function (op) {
            this.value = this.value || [];
            this.value[0] = op;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Sexpr.prototype, "arguments", {
        get: function () {
            return this.value && this.value.slice(1);
        },
        set: function (args) {
            this.value = this.value || [];
            this.value.length = 1;
            this.value.push.apply(this.value, args);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Sexpr.prototype, "length", {
        get: function () {
            return this.value && this.value.length;
        },
        enumerable: true,
        configurable: true
    });
    return Sexpr;
})();
exports.Sexpr = Sexpr;
var TOKEN_TO_TYPE = {
    "(": "expr",
    ")": "expr",
    "[": "list",
    "]": "list",
    "{": "hash",
    "}": "hash"
};
var hygienicSymbolCounter = 0;
function readSexprs(text) {
    var root = Sexpr.list();
    var token;
    var sexpr = root;
    var sexprs = [root];
    var lines = text.split("\n");
    var lineIx = 0;
    var mode;
    for (var _i = 0; _i < lines.length; _i++) {
        var line = lines[_i];
        var line_1 = lines[lineIx];
        var charIx = 0;
        if (mode === "string")
            token.value += "\n";
        while (charIx < line_1.length) {
            if (mode === "string") {
                if (line_1[charIx] === "\"" && line_1[charIx - 1] !== "\\") {
                    sexpr.push(token);
                    token = mode = undefined;
                    charIx++;
                }
                else
                    token.value += line_1[charIx++];
                continue;
            }
            var padding = readWhile(line_1, /\s/, charIx);
            charIx += padding.length;
            if (padding.length) {
                if (token)
                    sexpr.push(token);
                token = undefined;
            }
            if (charIx >= line_1.length)
                continue;
            if (line_1[charIx] === ";") {
                charIx = line_1.length;
            }
            else if (line_1[charIx] === "\"") {
                if (!sexpr.length)
                    throw new ParseError("Literal must be an argument in a sexpr.", line_1, lineIx, charIx);
                mode = "string";
                token = Token.string("", lineIx, charIx);
                charIx++;
            }
            else if (line_1[charIx] === ":") {
                if (!sexpr.length)
                    throw new ParseError("Literal must be an argument in a sexpr.", line_1, lineIx, charIx);
                var keyword = readUntilAny(line_1, [" ", ")", "]", "}"], ++charIx);
                sexpr.push(Token.keyword(keyword, lineIx, charIx - 1));
                charIx += keyword.length;
            }
            else if (line_1[charIx] === "(" || line_1[charIx] === "[" || line_1[charIx] === "{") {
                if (token)
                    throw new ParseError("Sexpr arguments must be space separated.", line_1, lineIx, charIx);
                var type = TOKEN_TO_TYPE[line_1[charIx]];
                if (type === "hash")
                    sexpr = Sexpr.hash(undefined, lineIx, charIx);
                else if (type === "list")
                    sexpr = Sexpr.list(undefined, lineIx, charIx);
                else
                    sexpr = new Sexpr(undefined, lineIx, charIx);
                sexpr.syntax = type;
                sexprs.push(sexpr);
                charIx++;
            }
            else if (line_1[charIx] === ")" || line_1[charIx] === "]" || line_1[charIx] === "}") {
                var child = sexprs.pop();
                var type = TOKEN_TO_TYPE[line_1[charIx]];
                if (child.syntax !== type)
                    throw new ParseError("Must terminate " + child.syntax + " before terminating " + type, line_1, lineIx, charIx);
                sexpr = sexprs[sexprs.length - 1];
                if (!sexpr)
                    throw new ParseError("Too many closing parens", line_1, lineIx, charIx);
                sexpr.push(child);
                charIx++;
            }
            else {
                var literal = readUntilAny(line_1, [" ", ")", "]", "}"], charIx);
                var length_1 = literal.length;
                literal = utils_1.coerceInput(literal);
                var type = typeof literal === "string" ? "identifier" : "literal";
                if (!sexpr.length && type !== "identifier")
                    throw new ParseError("Expr must begin with identifier.", line_1, lineIx, charIx);
                if (type === "identifier") {
                    var dotIx = literal.indexOf(".");
                    if (dotIx !== -1) {
                        var child = new Sexpr([
                            Token.identifier("get", lineIx, charIx + 1),
                            Token.identifier(literal.slice(0, dotIx), lineIx, charIx + 3),
                            Token.string(literal.slice(dotIx + 1), lineIx, charIx + 5 + dotIx)
                        ], lineIx, charIx);
                        sexpr.push(child);
                    }
                    else
                        sexpr.push(Token.identifier(literal, lineIx, charIx));
                }
                else
                    sexpr.push(Token.literal(literal, lineIx, charIx));
                charIx += length_1;
            }
        }
        lineIx++;
    }
    if (token)
        throw new ParseError("Unterminated " + TOKEN_TYPE[token.type] + " token", lines[lineIx - 1], lineIx - 1);
    var lastIx = lines.length - 1;
    if (sexprs.length > 1)
        throw new ParseError("Too few closing parens", lines[lastIx], lastIx, lines[lastIx].length);
    return root;
}
exports.readSexprs = readSexprs;
function macroexpandDSL(sexpr) {
    // @TODO: Implement me.
    var op = sexpr.operator;
    if (op.value === "eav") {
        throw new Error("@TODO: Implement me!");
    }
    else if (op.value === "one-of") {
        // (one-of (query ...body) (query ...body) ...) =>
        // (union
        //   (def q1 (query ...body1))
        //   (def q2 (query (negate q1) ...body2)))
        throw new Error("@TODO: Implement me!");
    }
    else if (op.value === "negate") {
        if (sexpr.length > 2)
            throw new ParseError("Negate only takes a single body", undefined, sexpr.lineIx, sexpr.charIx);
        var select = macroexpandDSL(Sexpr.asSexprs(sexpr.arguments)[0]);
        select.push(Token.keyword("$$negated"));
        select.push(Token.literal(true));
        return select;
    }
    else if (["hash", "list", "get", "def", "query", "union", "select", "member", "project!", "insert!", "remove!", "load!"].indexOf(op.value) === -1) {
        // (foo-bar :a 5) => (select "foo bar" :a 5)
        var source = op;
        source.type = Token.TYPE.STRING;
        source.value = source.value.replace(/(.?)-(.)/g, "$1 $2");
        var args = sexpr.arguments;
        args.unshift(source);
        sexpr.arguments = args;
        sexpr.operator = Token.identifier("select");
    }
    return sexpr;
}
exports.macroexpandDSL = macroexpandDSL;
var VALUE;
(function (VALUE) {
    VALUE[VALUE["NULL"] = 0] = "NULL";
    VALUE[VALUE["SCALAR"] = 1] = "SCALAR";
    VALUE[VALUE["SET"] = 2] = "SET";
    VALUE[VALUE["VIEW"] = 3] = "VIEW";
})(VALUE || (VALUE = {}));
;
function parseDSL(text) {
    var artifacts = { views: {} };
    var lines = text.split("\n");
    var root = readSexprs(text);
    for (var _i = 0, _a = Sexpr.asSexprs(root.arguments); _i < _a.length; _i++) {
        var raw = _a[_i];
        parseDSLSexpr(raw, artifacts);
    }
    return artifacts;
}
exports.parseDSL = parseDSL;
function parseDSLSexpr(raw, artifacts, context, parent, resultVariable) {
    if (parent instanceof runtime.Query)
        var query = parent;
    else
        var union = parent;
    var sexpr = macroexpandDSL(raw);
    var op = sexpr.operator;
    if (op.type !== Token.TYPE.IDENTIFIER)
        throw new ParseError("Evaluated sexpr must begin with an identifier ('" + op + "' is a " + Token.TYPE[op.type] + ")", "", raw.lineIx, raw.charIx);
    if (op.value === "list") {
        var $$body = parseArguments(sexpr, undefined, "$$body").$$body;
        return { type: VALUE.SCALAR, value: $$body.map(function (token, ix) { return resolveTokenValue("list item " + ix, token, context); }) };
    }
    if (op.value === "hash") {
        var args = parseArguments(sexpr);
        for (var arg in args)
            args[arg] = resolveTokenValue("hash item " + arg, args[arg], context);
        return { type: VALUE.SET, value: args };
    }
    if (op.value === "insert!") {
        var changeset = artifacts.changeset || app_1.eve.diff();
        for (var _i = 0, _a = sexpr.arguments; _i < _a.length; _i++) {
            var arg = _a[_i];
            var table = arg.value[0];
            var fact = {};
            for (var ix = 1; ix < arg.value.length; ix += 2) {
                var key = arg.value[ix];
                var value = arg.value[ix + 1];
                fact[key.value] = value.value;
            }
            changeset.add(table.value, fact);
        }
        artifacts.changeset = changeset;
        return;
    }
    if (op.value === "remove!") {
        var changeset = artifacts.changeset || app_1.eve.diff();
        for (var _b = 0, _c = sexpr.arguments; _b < _c.length; _b++) {
            var arg = _c[_b];
            var table = arg.value[0];
            var fact = {};
            for (var ix = 1; ix < arg.value.length; ix += 2) {
                var key = arg.value[ix];
                var value = arg.value[ix + 1];
                fact[key.value] = value.value;
            }
            changeset.remove(table.value, fact);
        }
        artifacts.changeset = changeset;
        return;
    }
    if (op.value === "load!") {
        throw new Error("(load! ..) has not been implemented yet");
    }
    if (op.value === "query") {
        var neueContext = [];
        var _d = parseArguments(sexpr, undefined, "$$body"), $$view = _d.$$view, $$negated = _d.$$negated, $$body = _d.$$body;
        var queryId = $$view ? resolveTokenValue("view", $$view, context, VALUE.SCALAR) : utils_1.uuid();
        var neue = new runtime.Query(app_1.eve, queryId);
        neue["displayName"] = sexpr.toString();
        if (utils_1.DEBUG.instrumentQuery)
            instrumentQuery(neue, utils_1.DEBUG.instrumentQuery);
        artifacts.views[queryId] = neue;
        var aggregated = false;
        for (var _e = 0, _f = Sexpr.asSexprs($$body); _e < _f.length; _e++) {
            var raw_1 = _f[_e];
            var state = parseDSLSexpr(raw_1, artifacts, neueContext, neue);
            if (state && state.aggregated)
                aggregated = true;
        }
        var projectionMap = neue.projectionMap;
        var projected = true;
        if (!projectionMap) {
            projectionMap = {};
            projected = false;
            for (var _g = 0; _g < neueContext.length; _g++) {
                var variable = neueContext[_g];
                projectionMap[variable.name] = variable.value;
            }
        }
        if (Object.keys(projectionMap).length)
            neue.project(projectionMap);
        // Join subquery to parent.
        if (parent) {
            var select = new Sexpr([Token.identifier(query ? "select" : "member"), Token.string(queryId)], raw.lineIx, raw.charIx);
            var groups = [];
            for (var _h = 0; _h < neueContext.length; _h++) {
                var variable = neueContext[_h];
                if (projected && !variable.projection)
                    continue;
                var field = variable.projection || variable.name;
                select.push(Token.keyword(field));
                if (query)
                    select.push(Token.identifier(variable.name));
                else
                    select.push(Sexpr.list([Token.string(field)]));
                if (context) {
                    for (var _j = 0; _j < context.length; _j++) {
                        var parentVar = context[_j];
                        if (parentVar.name === variable.name)
                            groups.push(variable.value);
                    }
                }
            }
            if ($$negated) {
                select.push(Token.keyword("$$negated"));
                select.push($$negated);
            }
            if (groups.length && aggregated)
                neue.group(groups);
            parseDSLSexpr(select, artifacts, context, parent);
        }
        return { value: queryId, type: VALUE.VIEW, projected: projected, context: neueContext };
    }
    if (op.value === "union") {
        var _k = parseArguments(sexpr, undefined, "$$body"), $$view = _k.$$view, $$body = _k.$$body, $$negated = _k.$$negated;
        var unionId = $$view ? resolveTokenValue("view", $$view, context, VALUE.SCALAR) : utils_1.uuid();
        var neue = new runtime.Union(app_1.eve, unionId);
        if (utils_1.DEBUG.instrumentQuery)
            instrumentQuery(neue, utils_1.DEBUG.instrumentQuery);
        artifacts.views[unionId] = neue;
        var mappings = {};
        for (var _l = 0, _m = Sexpr.asSexprs($$body); _l < _m.length; _l++) {
            var raw_2 = _m[_l];
            var child = macroexpandDSL(raw_2);
            if (child.operator.value !== "query" && child.operator.value !== "union")
                throw new ParseError("Unions may only contain queries", "", raw_2.lineIx, raw_2.charIx);
            var res = parseDSLSexpr(child, artifacts, context, neue);
            for (var _o = 0, _p = res.context; _o < _p.length; _o++) {
                var variable = _p[_o];
                if (res.projected && !variable.projection)
                    continue;
                var field = variable.projection || variable.name;
                if (!mappings[field])
                    mappings[field] = {};
                mappings[field][variable.name] = true;
            }
        }
        // Join subunion to parent
        if (parent) {
            var select = new Sexpr([Token.identifier(query ? "select" : "member"), Token.string(unionId)], raw.lineIx, raw.charIx);
            for (var field in mappings) {
                var mappingVariables = Object.keys(mappings[field]);
                if (mappingVariables.length > 1)
                    throw new ParseError("All variables projected to a single union field must have the same name. Field '" + field + "' has " + mappingVariables.length + " fields (" + mappingVariables.join(", ") + ")", "", raw.lineIx, raw.charIx);
                select.push(Token.keyword(field));
                select.push(Token.identifier(mappingVariables[0]));
            }
            console.log("union select", select.toString());
            parseDSLSexpr(select, artifacts, context, parent);
        }
        return { type: VALUE.VIEW, value: unionId, mappings: mappings };
    }
    if (op.value === "member") {
        if (!union)
            throw new ParseError("Cannot add member to non-union parent", "", raw.lineIx, raw.charIx);
        var args = parseArguments(sexpr, ["$$view"]);
        var $$view = args.$$view, $$negated = args.$$negated;
        var view = resolveTokenValue("view", $$view, context, VALUE.SCALAR);
        if (view === undefined)
            throw new ParseError("Must specify a view to be unioned", "", raw.lineIx, raw.charIx);
        var join = {};
        for (var arg in args) {
            if (arg === "$$view" || arg === "$$negated")
                continue;
            join[arg] = resolveTokenValue("member field", args[arg], context);
        }
        if (runtime.QueryFunctions[view])
            throw new ParseError("Cannot union primitive view '" + view + "'", "", raw.lineIx, raw.charIx);
        union.union(view, join);
        return;
    }
    if (!parent)
        throw new ParseError("Non-query or union sexprs must be contained within a query or union", "", raw.lineIx, raw.charIx);
    if (op.value === "select") {
        if (!query)
            throw new ParseError("Cannot add select to non-query parent", "", raw.lineIx, raw.charIx);
        var selectId = utils_1.uuid();
        var $$view = getArgument(sexpr, "$$view", ["$$view"]);
        var view = resolveTokenValue("view", $$view, context, VALUE.SCALAR);
        if (view === undefined)
            throw new ParseError("Must specify a view to be selected", "", raw.lineIx, raw.charIx);
        var primitive = runtime.QueryFunctions[view];
        //@TODO: Move this to an eve table to allow user defined defaults
        var args = parseArguments(sexpr, ["$$view"].concat(getDefaults(view)));
        var $$negated = args.$$negated;
        var join = {};
        for (var arg in args) {
            var value = args[arg];
            var variable = void 0;
            if (arg === "$$view" || arg === "$$negated")
                continue;
            if (value instanceof Token && value.type !== Token.TYPE.IDENTIFIER) {
                join[arg] = args[arg].value;
                continue;
            }
            if (value instanceof Sexpr) {
                var result = parseDSLSexpr(value, artifacts, context, parent, "$$temp-" + hygienicSymbolCounter++ + "-" + arg);
                if (!result || result.type === VALUE.NULL)
                    throw new Error("Cannot set parameter '" + arg + "' to null value '" + value.toString() + "'");
                if (result.type === VALUE.VIEW) {
                    var view_1 = result.value;
                    var resultField_1 = getResult(view_1);
                    if (!resultField_1)
                        throw new Error("Cannot set parameter '" + arg + "' to select without default result field");
                    for (var _q = 0; _q < context.length; _q++) {
                        var curVar = context[_q];
                        for (var _r = 0, _s = curVar.constraints; _r < _s.length; _r++) {
                            var constraint = _s[_r];
                            if (constraint[0] === view_1 && constraint[1] === resultField_1) {
                                variable = curVar;
                                break;
                            }
                        }
                    }
                }
            }
            else
                variable = getDSLVariable(value.value, context);
            if (variable) {
                join[arg] = variable.value;
                variable.constraints.push([view, arg]);
            }
            else if ($$negated && $$negated.value)
                throw new ParseError("Cannot bind field in negated select to undefined variable '" + value.value + "'", "", raw.lineIx, raw.charIx);
            else
                context.push({ name: value.value, type: VALUE.SCALAR, value: [selectId, arg], constraints: [[view, arg]] }); // @TODO: does this not need to add to the join map?
        }
        var resultField = getResult(view);
        if (resultVariable && resultField && !join[resultField]) {
            join[resultField] = [selectId, resultField];
            context.push({ name: resultVariable, type: VALUE.SCALAR, value: [selectId, resultField], constraints: [[view, resultField]] });
        }
        if (primitive) {
            if ($$negated) {
                if (primitive.inverse)
                    view = primitive.inverse;
                else
                    throw new ParseError("Cannot invert primitive calculation '" + view + "'", "", raw.lineIx, raw.charIx);
            }
            if (primitive.aggregate)
                query.aggregate(view, join, selectId);
            else
                query.calculate(view, join, selectId);
        }
        else if ($$negated)
            query.deselect(view, join);
        else
            query.select(view, join, selectId);
        return {
            type: VALUE.VIEW,
            value: view,
            aggregated: primitive && primitive.aggregate
        };
    }
    if (op.value === "project!") {
        var args = parseArguments(sexpr, ["$$view"]);
        var $$view = args.$$view, $$negated = args.$$negated;
        var projectionMap = {};
        for (var arg in args) {
            var value = args[arg];
            if (arg === "$$view" || arg === "$$negated")
                continue;
            if (value.type !== Token.TYPE.IDENTIFIER) {
                projectionMap[arg] = args[arg].value;
                continue;
            }
            var variable = getDSLVariable(value.value, context);
            if (variable) {
                if (variable.static)
                    projectionMap[arg] = variable.value;
                else if (!$$view) {
                    variable.projection = arg;
                    projectionMap[arg] = variable.value;
                }
                else
                    projectionMap[arg] = [variable.name];
            }
            else
                throw new ParseError("Cannot bind projected field to undefined variable '" + value.value + "'", "", raw.lineIx, raw.charIx);
        }
        var view = resolveTokenValue("view", $$view, context, VALUE.SCALAR);
        if (view === undefined) {
            if (query.projectionMap)
                throw new ParseError("Query can only self-project once", "", raw.lineIx, raw.charIx);
            if ($$negated && $$negated.value)
                throw new ParseError("Cannot negate self-projection", "", raw.lineIx, raw.charIx);
            // Project self
            query.project(projectionMap);
        }
        else {
            var union_1 = artifacts.views[view] || new runtime.Union(app_1.eve, view);
            if (utils_1.DEBUG.instrumentQuery && !artifacts.views[view])
                instrumentQuery(union_1, utils_1.DEBUG.instrumentQuery);
            artifacts.views[view] = union_1;
            // if($$negated && $$negated.value) union.ununion(queryId, projectionMap);
            if ($$negated && $$negated.value)
                throw new ParseError("Union projections may not be negated in the current runtime", "", raw.lineIx, raw.charIx);
            else
                union_1.union(query.name, projectionMap);
        }
        return;
    }
    throw new ParseError("Unknown DSL operator '" + op.value + "'", "", raw.lineIx, raw.charIx);
}
function resolveTokenValue(name, token, context, type) {
    if (!token)
        return;
    if (token instanceof Sexpr)
        return parseDSLSexpr(token, undefined, context);
    if (token instanceof Token && token.type === Token.TYPE.IDENTIFIER) {
        var variable = getDSLVariable(token.value, context, VALUE.SCALAR);
        if (!variable)
            throw new Error("Cannot bind " + name + " to undefined variable '" + token.value + "'");
        if (!variable.static)
            throw new Error("Cannot bind " + name + " to dynamic variable '" + token.value + "'");
        return variable.value;
    }
    return token.value;
}
function getDSLVariable(name, context, type) {
    if (!context)
        return;
    for (var _i = 0; _i < context.length; _i++) {
        var variable = context[_i];
        if (variable.name === name) {
            if (variable.static === false)
                throw new Error("Cannot statically look up dynamic variable '" + name + "'");
            if (type !== undefined && variable.type !== type)
                throw new Error("Expected variable '" + name + "' to have type '" + type + "', but instead has type '" + variable.type + "'");
            return variable;
        }
    }
}
function getDefaults(view) {
    return (runtime.QueryFunctions[view] && runtime.QueryFunctions[view].params) || [];
}
function getResult(view) {
    return runtime.QueryFunctions[view] && runtime.QueryFunctions[view].result;
}
function getArgument(root, param, defaults) {
    var ix = 1;
    var defaultIx = 0;
    for (var ix_1 = 1, cur = root.nth(ix_1); ix_1 < root.length; ix_1++) {
        if (cur.type === Token.TYPE.KEYWORD) {
            if (cur.value === param)
                return root.nth(ix_1 + 1);
            else
                ix_1 + 1;
        }
        else {
            if (defaults && defaultIx < defaults.length) {
                var keyword = defaults[defaultIx++];
                if (keyword === param)
                    return cur;
                else
                    ix_1 + 1;
            }
            throw new Error("Param '" + param + "' not in sexpr " + root.toString());
        }
    }
    throw new Error("Param '" + param + "' not in sexpr " + root.toString());
}
exports.getArgument = getArgument;
function parseArguments(root, defaults, rest) {
    var args = {};
    var defaultIx = 0;
    var keyword;
    var kwarg = false;
    for (var _i = 0, _a = root.arguments; _i < _a.length; _i++) {
        var raw = _a[_i];
        if (raw.type === Token.TYPE.KEYWORD) {
            if (keyword)
                throw new Error("Keywords may not be values '" + raw + "'");
            else
                keyword = raw.value;
        }
        else if (keyword) {
            if (args[keyword] === undefined) {
                args[keyword] = raw;
            }
            else {
                if (!(args[keyword] instanceof Array))
                    args[keyword] = [args[keyword]];
                args[keyword].push(raw);
            }
            keyword = undefined;
            defaultIx = defaults ? defaults.length : 0;
            kwarg = true;
        }
        else if (defaults && defaultIx < defaults.length) {
            args[defaults[defaultIx++]] = raw;
        }
        else if (rest) {
            args[rest] = args[rest] || [];
            args[rest].push(raw);
        }
        else {
            if (kwarg)
                throw new Error("Cannot specify an arg after a kwarg");
            else if (defaultIx)
                throw new Error("Too many args, expected: " + defaults.length + ", got: " + (defaultIx + 1));
            else
                throw new Error("Cannot specify an arg without default keys specified");
        }
    }
    return args;
}
exports.parseArguments = parseArguments;
if (utils_1.ENV === "browser")
    window["parser"] = exports;
function instrumentQuery(q, instrument) {
    var instrumentation = instrument;
    if (!instrument || instrument === true)
        instrumentation = function (fn, args) { return console.log("*", fn, ":", args); };
    var keys = [];
    for (var key in q)
        keys.push(key);
    keys.forEach(function (fn) {
        if (!q.constructor.prototype.hasOwnProperty(fn) || typeof q[fn] !== "function")
            return;
        var old = q[fn];
        q[fn] = function () {
            instrumentation(fn, arguments);
            return old.apply(this, arguments);
        };
    });
    return q;
}
exports.instrumentQuery = instrumentQuery;
function asDiff(ixer, artifacts) {
    var views = artifacts.views;
    var diff = ixer.diff();
    for (var id in views)
        diff.merge(views[id].changeset(app_1.eve));
    return diff;
}
exports.asDiff = asDiff;
function applyAsDiffs(artifacts) {
    var views = artifacts.views;
    for (var id in views)
        app_1.eve.applyDiff(views[id].changeset(app_1.eve));
    console.log("Applied diffs for:");
    for (var id in views)
        console.log("  * ", views[id] instanceof runtime.Query ? "Query" : "Union", views[id].name);
    return artifacts;
}
exports.applyAsDiffs = applyAsDiffs;
function logArtifacts(artifacts) {
    for (var view in artifacts.views)
        console.log(view, "\n", app_1.eve.find(view));
}
exports.logArtifacts = logArtifacts;

},{"./app":2,"./runtime":6,"./utils":8}],6:[function(require,module,exports){
var utils_1 = require("./utils");
var runtime = exports;
exports.MAX_NUMBER = 9007199254740991;
exports.INCREMENTAL = false;
function objectsIdentical(a, b) {
    var aKeys = Object.keys(a);
    for (var _i = 0; _i < aKeys.length; _i++) {
        var key = aKeys[_i];
        //TODO: handle non-scalar values
        if (a[key] !== b[key])
            return false;
    }
    return true;
}
function indexOfFact(haystack, needle) {
    var ix = 0;
    for (var _i = 0; _i < haystack.length; _i++) {
        var fact = haystack[_i];
        if (fact.__id === needle.__id) {
            return ix;
        }
        ix++;
    }
    return -1;
}
function removeFact(haystack, needle) {
    var ix = indexOfFact(haystack, needle);
    if (ix > -1)
        haystack.splice(ix, 1);
    return haystack;
}
exports.removeFact = removeFact;
function diffAddsAndRemoves(adds, removes) {
    var localHash = {};
    var hashToFact = {};
    var hashes = [];
    for (var _i = 0; _i < adds.length; _i++) {
        var add = adds[_i];
        var hash = add.__id;
        if (localHash[hash] === undefined) {
            localHash[hash] = 1;
            hashToFact[hash] = add;
            hashes.push(hash);
        }
        else {
            localHash[hash]++;
        }
        add.__id = hash;
    }
    for (var _a = 0; _a < removes.length; _a++) {
        var remove = removes[_a];
        var hash = remove.__id;
        if (localHash[hash] === undefined) {
            localHash[hash] = -1;
            hashToFact[hash] = remove;
            hashes.push(hash);
        }
        else {
            localHash[hash]--;
        }
        remove.__id = hash;
    }
    var realAdds = [];
    var realRemoves = [];
    for (var _b = 0; _b < hashes.length; _b++) {
        var hash = hashes[_b];
        var count = localHash[hash];
        if (count > 0) {
            var fact = hashToFact[hash];
            realAdds.push(fact);
        }
        else if (count < 0) {
            var fact = hashToFact[hash];
            realRemoves.push(fact);
        }
    }
    return { adds: realAdds, removes: realRemoves };
}
function generateEqualityFn(keys) {
    return new Function("a", "b", "return " + keys.map(function (key, ix) {
        if (key.constructor === Array) {
            return "a['" + key[0] + "']['" + key[1] + "'] === b['" + key[0] + "']['" + key[1] + "']";
        }
        else {
            return "a[\"" + key + "\"] === b[\"" + key + "\"]";
        }
    }).join(" && ") + ";");
}
function generateStringFn(keys) {
    var keyStrings = [];
    for (var _i = 0; _i < keys.length; _i++) {
        var key = keys[_i];
        if (key.constructor === Array) {
            keyStrings.push("a['" + key[0] + "']['" + key[1] + "']");
        }
        else {
            keyStrings.push("a['" + key + "']");
        }
    }
    var final = keyStrings.join(' + "|" + ');
    return new Function("a", "return " + final + ";");
}
function generateUnprojectedSorterCode(unprojectedSize, sorts) {
    var conditions = [];
    var path = [];
    var distance = unprojectedSize;
    for (var _i = 0; _i < sorts.length; _i++) {
        var sort = sorts[_i];
        var condition = "";
        for (var _a = 0; _a < path.length; _a++) {
            var prev = path[_a];
            var table_1 = prev[0], key_1 = prev[1];
            condition += "unprojected[j-" + (distance - table_1) + "]['" + key_1 + "'] === item" + table_1 + "['" + key_1 + "'] && ";
        }
        var table = sort[0], key = sort[1], dir = sort[2];
        var op = ">";
        if (dir === "descending") {
            op = "<";
        }
        condition += "unprojected[j-" + (distance - table) + "]['" + key + "'] " + op + " item" + table + "['" + key + "']";
        conditions.push(condition);
        path.push(sort);
    }
    var items = [];
    var repositioned = [];
    var itemAssignments = [];
    for (var ix = 0; ix < distance; ix++) {
        items.push("item" + ix + " = unprojected[j+" + ix + "]");
        repositioned.push("unprojected[j+" + ix + "] = unprojected[j - " + (distance - ix) + "]");
        itemAssignments.push(("unprojected[j+" + ix + "] = item" + ix));
    }
    return "for (var i = 0, len = unprojected.length; i < len; i += " + distance + ") {\n      var j = i, " + items.join(", ") + ";\n      for(; j > " + (distance - 1) + " && (" + conditions.join(" || ") + "); j -= " + distance + ") {\n        " + repositioned.join(";\n") + "\n      }\n      " + itemAssignments.join(";\n") + "\n  }";
}
function generateCollector(keys) {
    var code = "var runtime = this;\n";
    var ix = 0;
    var checks = "";
    var removes = "var cur = index";
    for (var _i = 0; _i < keys.length; _i++) {
        var key = keys[_i];
        if (key.constructor === Array) {
            removes += "[remove['" + key[0] + "']['" + key[1] + "']]";
        }
        else {
            removes += "[remove['" + key + "']]";
        }
    }
    removes += ";\nruntime.removeFact(cur, remove);";
    for (var _a = 0; _a < keys.length; _a++) {
        var key = keys[_a];
        ix++;
        if (key.constructor === Array) {
            checks += "value = add['" + key[0] + "']['" + key[1] + "']\n";
        }
        else {
            checks += "value = add['" + key + "']\n";
        }
        var path = "cursor[value]";
        checks += "if(!" + path + ") " + path + " = ";
        if (ix === keys.length) {
            checks += "[]\n";
        }
        else {
            checks += "{}\n";
        }
        checks += "cursor = " + path + "\n";
    }
    code += "\nfor(var ix = 0, len = removes.length; ix < len; ix++) {\nvar remove = removes[ix];\n" + removes + "\n}\nfor(var ix = 0, len = adds.length; ix < len; ix++) {\nvar add = adds[ix];\nvar cursor = index;\nvar value;\n" + checks + "  cursor.push(add);\n}\nreturn index;";
    return (new Function("index", "adds", "removes", code)).bind(runtime);
}
function generateCollector2(keys) {
    var hashParts = [];
    for (var _i = 0; _i < keys.length; _i++) {
        var key = keys[_i];
        if (key.constructor === Array) {
            hashParts.push("add['" + key[0] + "']['" + key[1] + "']");
        }
        else {
            hashParts.push("add['" + key + "']");
        }
    }
    var code = "\n    var ixCache = cache.ix;\n    var idCache = cache.id;\n    for(var ix = 0, len = removes.length; ix < len; ix++) {\n      var remove = removes[ix];\n      var id = remove.__id;\n      var key = idCache[id];\n      var factIx = ixCache[id];\n      var facts = index[key];\n      //swap the last fact with this one to prevent holes\n      var lastFact = facts.pop();\n      if(lastFact && lastFact.__id !== remove.__id) {\n        facts[factIx] = lastFact;\n        ixCache[lastFact.__id] = factIx;\n      } else if(facts.length === 0) {\n        delete index[key];\n      }\n      delete idCache[id];\n      delete ixCache[id];\n    }\n    for(var ix = 0, len = adds.length; ix < len; ix++) {\n      var add = adds[ix];\n      var id = add.__id;\n      var key = idCache[id] = " + hashParts.join(" + '|' + ") + ";\n      if(index[key] === undefined) index[key] = [];\n      var arr = index[key];\n      ixCache[id] = arr.length;\n      arr.push(add);\n    }\n    return index;";
    return new Function("index", "adds", "removes", "cache", code);
}
function mergeArrays(as, bs) {
    var ix = as.length;
    var start = ix;
    for (var _i = 0; _i < bs.length; _i++) {
        var b = bs[_i];
        as[ix] = bs[ix - start];
        ix++;
    }
    return as;
}
var Diff = (function () {
    function Diff(ixer) {
        this.ixer = ixer;
        this.tables = {};
        this.length = 0;
        this.meta = {};
    }
    Diff.prototype.ensureTable = function (table) {
        var tableDiff = this.tables[table];
        if (!tableDiff) {
            tableDiff = this.tables[table] = { adds: [], removes: [] };
        }
        return tableDiff;
    };
    Diff.prototype.add = function (table, obj) {
        var tableDiff = this.ensureTable(table);
        this.length++;
        tableDiff.adds.push(obj);
        return this;
    };
    Diff.prototype.addMany = function (table, objs) {
        var tableDiff = this.ensureTable(table);
        this.length += objs.length;
        mergeArrays(tableDiff.adds, objs);
        return this;
    };
    Diff.prototype.removeFacts = function (table, objs) {
        var tableDiff = this.ensureTable(table);
        this.length += objs.length;
        mergeArrays(tableDiff.removes, objs);
        return this;
    };
    Diff.prototype.remove = function (table, query) {
        var tableDiff = this.ensureTable(table);
        var found = this.ixer.find(table, query);
        this.length += found.length;
        mergeArrays(tableDiff.removes, found);
        return this;
    };
    Diff.prototype.merge = function (diff) {
        for (var table in diff.tables) {
            var tableDiff = diff.tables[table];
            this.addMany(table, tableDiff.adds);
            this.removeFacts(table, tableDiff.removes);
        }
        return this;
    };
    Diff.prototype.reverse = function () {
        var reversed = new Diff(this.ixer);
        for (var table in this.tables) {
            var diff = this.tables[table];
            reversed.addMany(table, diff.removes);
            reversed.removeFacts(table, diff.adds);
        }
        return reversed;
    };
    return Diff;
})();
exports.Diff = Diff;
var Indexer = (function () {
    function Indexer() {
        this.tables = {};
        this.globalCount = 0;
        this.edbTables = {};
    }
    Indexer.prototype.addTable = function (name, keys) {
        if (keys === void 0) { keys = []; }
        var table = this.tables[name];
        keys = keys.filter(function (key) { return key !== "__id"; });
        if (table && keys.length) {
            table.fields = keys;
            table.stringify = generateStringFn(keys);
        }
        else {
            table = this.tables[name] = { table: [], hashToIx: {}, factHash: {}, indexes: {}, triggers: {}, fields: keys, stringify: generateStringFn(keys), keyLookup: {} };
            this.edbTables[name] = true;
        }
        for (var _i = 0; _i < keys.length; _i++) {
            var key = keys[_i];
            if (key.constructor === Array) {
                table.keyLookup[key[0]] = key;
            }
            else {
                table.keyLookup[key] = key;
            }
        }
        return table;
    };
    Indexer.prototype.clearTable = function (name) {
        var table = this.tables[name];
        if (!table)
            return;
        table.table = [];
        table.factHash = {};
        for (var indexName in table.indexes) {
            table.indexes[indexName].index = {};
            table.indexes[indexName].cache = { id: {}, ix: {} };
        }
    };
    Indexer.prototype.updateTable = function (tableId, adds, removes) {
        var table = this.tables[tableId];
        if (!table || !table.fields.length) {
            var example = adds[0] || removes[0];
            table = this.addTable(tableId, Object.keys(example));
        }
        var stringify = table.stringify;
        var facts = table.table;
        var factHash = table.factHash;
        var hashToIx = table.hashToIx;
        var localHash = {};
        var hashToFact = {};
        var hashes = [];
        for (var _i = 0; _i < adds.length; _i++) {
            var add = adds[_i];
            var hash = add.__id || stringify(add);
            if (localHash[hash] === undefined) {
                localHash[hash] = 1;
                hashToFact[hash] = add;
                hashes.push(hash);
            }
            else {
                localHash[hash]++;
            }
            add.__id = hash;
        }
        for (var _a = 0; _a < removes.length; _a++) {
            var remove = removes[_a];
            var hash = remove.__id || stringify(remove);
            if (localHash[hash] === undefined) {
                localHash[hash] = -1;
                hashToFact[hash] = remove;
                hashes.push(hash);
            }
            else {
                localHash[hash]--;
            }
            remove.__id = hash;
        }
        var realAdds = [];
        var realRemoves = [];
        for (var _b = 0; _b < hashes.length; _b++) {
            var hash = hashes[_b];
            var count = localHash[hash];
            if (count > 0 && !factHash[hash]) {
                var fact = hashToFact[hash];
                realAdds.push(fact);
                facts.push(fact);
                factHash[hash] = fact;
                hashToIx[hash] = facts.length - 1;
            }
            else if (count < 0 && factHash[hash]) {
                var fact = hashToFact[hash];
                var ix = hashToIx[hash];
                //swap the last fact with this one to prevent holes
                var lastFact = facts.pop();
                if (lastFact && lastFact.__id !== fact.__id) {
                    facts[ix] = lastFact;
                    hashToIx[lastFact.__id] = ix;
                }
                realRemoves.push(fact);
                delete factHash[hash];
                delete hashToIx[hash];
            }
        }
        return { adds: realAdds, removes: realRemoves };
    };
    Indexer.prototype.collector = function (keys) {
        return {
            index: {},
            cache: { id: {}, ix: {} },
            hasher: generateStringFn(keys),
            collect: generateCollector2(keys),
        };
    };
    Indexer.prototype.factToIndex = function (table, fact) {
        var keys = Object.keys(fact);
        if (!keys.length)
            return table.table.slice();
        var index = this.index(table, keys);
        var result = index.index[index.hasher(fact)];
        if (result) {
            return result.slice();
        }
        return [];
    };
    Indexer.prototype.execDiff = function (diff) {
        var triggers = {};
        var realDiffs = {};
        var tableIds = Object.keys(diff.tables);
        for (var _i = 0; _i < tableIds.length; _i++) {
            var tableId = tableIds[_i];
            var tableDiff = diff.tables[tableId];
            if (tableDiff.adds.length === 0 && tableDiff.removes.length === 0)
                continue;
            var realDiff = this.updateTable(tableId, tableDiff.adds, tableDiff.removes);
            // go through all the indexes and update them.
            var table = this.tables[tableId];
            var indexes = Object.keys(table.indexes);
            for (var _a = 0; _a < indexes.length; _a++) {
                var indexName = indexes[_a];
                var index = table.indexes[indexName];
                index.collect(index.index, realDiff.adds, realDiff.removes, index.cache);
            }
            var curTriggers = Object.keys(table.triggers);
            for (var _b = 0; _b < curTriggers.length; _b++) {
                var triggerName = curTriggers[_b];
                var trigger = table.triggers[triggerName];
                triggers[triggerName] = trigger;
            }
            realDiffs[tableId] = realDiff;
        }
        return { triggers: triggers, realDiffs: realDiffs };
    };
    Indexer.prototype.execTrigger = function (trigger) {
        var table = this.table(trigger.name);
        // since views might be changed during the triggering process, we want to favor
        // just using the view itself as the trigger if it is one. Otherwise, we use the
        // trigger's exec function. This ensures that if a view is recompiled and added
        // that any already queued triggers will use the updated version of the view instead
        // of the old queued one.
        var _a = (table.view ? table.view.exec() : trigger.exec(this)) || {}, _b = _a.results, results = _b === void 0 ? undefined : _b, _c = _a.unprojected, unprojected = _c === void 0 ? undefined : _c;
        if (!results)
            return;
        var prevResults = table.factHash;
        var prevHashes = Object.keys(prevResults);
        table.unprojected = unprojected;
        if (results) {
            var diff = new Diff(this);
            this.clearTable(trigger.name);
            diff.addMany(trigger.name, results);
            var triggers = this.execDiff(diff).triggers;
            var newHashes = table.factHash;
            if (prevHashes.length === Object.keys(newHashes).length) {
                var same = true;
                for (var _i = 0; _i < prevHashes.length; _i++) {
                    var hash = prevHashes[_i];
                    if (!newHashes[hash]) {
                        same = false;
                        break;
                    }
                }
                return same ? undefined : triggers;
            }
            else {
                return triggers;
            }
        }
        return;
    };
    Indexer.prototype.transitivelyClearTriggers = function (startingTriggers) {
        var cleared = {};
        var remaining = Object.keys(startingTriggers);
        for (var ix = 0; ix < remaining.length; ix++) {
            var trigger = remaining[ix];
            if (cleared[trigger])
                continue;
            this.clearTable(trigger);
            cleared[trigger] = true;
            remaining.push.apply(remaining, Object.keys(this.table(trigger).triggers));
        }
        return cleared;
    };
    Indexer.prototype.execTriggers = function (triggers) {
        var newTriggers = {};
        var retrigger = false;
        for (var triggerName in triggers) {
            // console.log("Calling:", triggerName);
            var trigger = triggers[triggerName];
            var nextRound = this.execTrigger(trigger);
            if (nextRound) {
                retrigger = true;
                for (var trigger_1 in nextRound) {
                    // console.log("Queuing:", trigger);
                    newTriggers[trigger_1] = nextRound[trigger_1];
                }
            }
        }
        if (retrigger) {
            return newTriggers;
        }
    };
    //---------------------------------------------------------
    // Indexer Public API
    //---------------------------------------------------------
    Indexer.prototype.serialize = function (asObject) {
        var dump = {};
        for (var tableName in this.tables) {
            var table = this.tables[tableName];
            if (!table.isView) {
                dump[tableName] = table.table;
            }
        }
        if (asObject) {
            return dump;
        }
        return JSON.stringify(dump);
    };
    Indexer.prototype.load = function (serialized) {
        var dump = JSON.parse(serialized);
        var diff = this.diff();
        for (var tableName in dump) {
            diff.addMany(tableName, dump[tableName]);
        }
        if (exports.INCREMENTAL) {
            this.applyDiffIncremental(diff);
        }
        else {
            this.applyDiff(diff);
        }
    };
    Indexer.prototype.diff = function () {
        return new Diff(this);
    };
    Indexer.prototype.applyDiff = function (diff) {
        if (exports.INCREMENTAL) {
            return this.applyDiffIncremental(diff);
        }
        var _a = this.execDiff(diff), triggers = _a.triggers, realDiffs = _a.realDiffs;
        var cleared;
        var round = 0;
        if (triggers)
            cleared = this.transitivelyClearTriggers(triggers);
        while (triggers) {
            for (var trigger in triggers) {
                cleared[trigger] = false;
            }
            // console.group(`ROUND ${round}`);
            triggers = this.execTriggers(triggers);
            round++;
        }
        for (var _i = 0, _b = Object.keys(cleared); _i < _b.length; _i++) {
            var trigger = _b[_i];
            if (!cleared[trigger])
                continue;
            var view = this.table(trigger).view;
            if (view) {
                this.execTrigger(view);
            }
        }
    };
    Indexer.prototype.table = function (tableId) {
        var table = this.tables[tableId];
        if (table)
            return table;
        return this.addTable(tableId);
    };
    Indexer.prototype.index = function (tableOrId, keys) {
        var table;
        if (typeof tableOrId === "string")
            table = this.table(tableOrId);
        else
            table = tableOrId;
        keys.sort();
        var indexName = keys.filter(function (key) { return key !== "__id"; }).join("|");
        var index = table.indexes[indexName];
        if (!index) {
            var tableKeys = [];
            for (var _i = 0; _i < keys.length; _i++) {
                var key = keys[_i];
                tableKeys.push(table.keyLookup[key] || key);
            }
            index = table.indexes[indexName] = this.collector(tableKeys);
            index.collect(index.index, table.table, [], index.cache);
        }
        return index;
    };
    Indexer.prototype.find = function (tableId, query) {
        var table = this.tables[tableId];
        if (!table) {
            return [];
        }
        else if (!query) {
            return table.table.slice();
        }
        else {
            return this.factToIndex(table, query);
        }
    };
    Indexer.prototype.findOne = function (tableId, query) {
        return this.find(tableId, query)[0];
    };
    Indexer.prototype.query = function (name) {
        if (name === void 0) { name = "unknown"; }
        return new Query(this, name);
    };
    Indexer.prototype.union = function (name) {
        return new Union(this, name);
    };
    Indexer.prototype.trigger = function (name, table, exec, execIncremental) {
        var tables = (typeof table === "string") ? [table] : table;
        var trigger = { name: name, tables: tables, exec: exec, execIncremental: execIncremental };
        for (var _i = 0; _i < tables.length; _i++) {
            var tableId = tables[_i];
            var table_2 = this.table(tableId);
            table_2.triggers[name] = trigger;
        }
        if (!exports.INCREMENTAL) {
            var nextRound = this.execTrigger(trigger);
            while (nextRound) {
                nextRound = this.execTriggers(nextRound);
            }
            ;
        }
        else {
            if (!tables.length) {
                return exec(this);
            }
            var initial = (_a = {}, _a[tables[0]] = { adds: this.tables[tables[0]].table, removes: [] }, _a);
            var _b = this.execTriggerIncremental(trigger, initial), triggers = _b.triggers, changes = _b.changes;
            while (triggers) {
                var results = this.execTriggersIncremental(triggers, changes);
                if (!results)
                    break;
                triggers = results.triggers;
                changes = results.changes;
            }
        }
        var _a;
    };
    Indexer.prototype.asView = function (query) {
        var name = query.name;
        if (this.tables[name]) {
            this.removeView(name);
        }
        var view = this.table(name);
        this.edbTables[name] = false;
        view.view = query;
        view.isView = true;
        this.trigger(name, query.tables, query.exec.bind(query), query.execIncremental.bind(query));
    };
    Indexer.prototype.removeView = function (id) {
        for (var _i = 0, _a = this.tables; _i < _a.length; _i++) {
            var table = _a[_i];
            delete table.triggers[id];
        }
    };
    Indexer.prototype.totalFacts = function () {
        var total = 0;
        for (var tableName in this.tables) {
            total += this.tables[tableName].table.length;
        }
        return total;
    };
    Indexer.prototype.factsPerTable = function () {
        var info = {};
        for (var tableName in this.tables) {
            info[tableName] = this.tables[tableName].table.length;
        }
        return info;
    };
    Indexer.prototype.applyDiffIncremental = function (diff) {
        if (diff.length === 0)
            return;
        // console.log("DIFF SIZE: ", diff.length, diff);
        var _a = this.execDiff(diff), triggers = _a.triggers, realDiffs = _a.realDiffs;
        var round = 0;
        var changes = realDiffs;
        while (triggers) {
            // console.group(`ROUND ${round}`);
            // console.log("CHANGES: ", changes);
            var results = this.execTriggersIncremental(triggers, changes);
            // console.groupEnd();
            if (!results)
                break;
            triggers = results.triggers;
            changes = results.changes;
            round++;
        }
    };
    Indexer.prototype.execTriggerIncremental = function (trigger, changes) {
        var table = this.table(trigger.name);
        var adds, provenance, removes, info;
        if (trigger.execIncremental) {
            info = trigger.execIncremental(changes, table) || {};
            adds = info.adds;
            removes = info.removes;
        }
        else {
            trigger.exec();
            return;
        }
        var diff = new runtime.Diff(this);
        if (adds.length) {
            diff.addMany(trigger.name, adds);
        }
        if (removes.length) {
            diff.removeFacts(trigger.name, removes);
        }
        var updated = this.execDiff(diff);
        var realDiffs = updated.realDiffs;
        if (realDiffs[trigger.name] && (realDiffs[trigger.name].adds.length || realDiffs[trigger.name].removes)) {
            return { changes: realDiffs[trigger.name], triggers: updated.triggers };
        }
        else {
            return {};
        }
    };
    Indexer.prototype.execTriggersIncremental = function (triggers, changes) {
        var newTriggers = {};
        var nextChanges = {};
        var retrigger = false;
        var triggerKeys = Object.keys(triggers);
        for (var _i = 0; _i < triggerKeys.length; _i++) {
            var triggerName = triggerKeys[_i];
            // console.log("Calling:", triggerName);
            var trigger = triggers[triggerName];
            var nextRound = this.execTriggerIncremental(trigger, changes);
            if (nextRound && nextRound.changes) {
                nextChanges[triggerName] = nextRound.changes;
                if (nextRound.triggers) {
                    var nextRoundKeys = Object.keys(nextRound.triggers);
                    for (var _a = 0; _a < nextRoundKeys.length; _a++) {
                        var trigger_2 = nextRoundKeys[_a];
                        if (trigger_2 && nextRound.triggers[trigger_2]) {
                            retrigger = true;
                            // console.log("Queuing:", trigger);
                            newTriggers[trigger_2] = nextRound.triggers[trigger_2];
                        }
                    }
                }
            }
        }
        if (retrigger) {
            return { changes: nextChanges, triggers: newTriggers };
        }
    };
    return Indexer;
})();
exports.Indexer = Indexer;
function addProvenanceTable(ixer) {
    var table = ixer.addTable("provenance", ["table", ["row", "__id"], "row instance", "source", ["source row", "__id"]]);
    // generate some indexes that we know we're going to need upfront
    ixer.index("provenance", ["table", "row"]);
    ixer.index("provenance", ["table", "row instance"]);
    ixer.index("provenance", ["table", "source", "source row"]);
    ixer.index("provenance", ["table"]);
    return ixer;
}
exports.addProvenanceTable = addProvenanceTable;
function mappingToDiff(diff, action, mapping, aliases, reverseLookup) {
    for (var from in mapping) {
        var to = mapping[from];
        if (to.constructor === Array) {
            var source = to[0];
            if (typeof source === "number") {
                source = aliases[reverseLookup[source]];
            }
            else {
                source = aliases[source];
            }
            diff.add("action mapping", { action: action, from: from, "to source": source, "to field": to[1] });
        }
        else {
            diff.add("action mapping constant", { action: action, from: from, value: to });
        }
    }
    return diff;
}
exports.QueryFunctions = {};
var STRIP_COMMENTS = /((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg;
var ARGUMENT_NAMES = /([^\s,]+)/g;
function getParamNames(func) {
    var fnStr = func.toString().replace(STRIP_COMMENTS, '');
    var result = fnStr.slice(fnStr.indexOf('(') + 1, fnStr.indexOf(')')).match(ARGUMENT_NAMES);
    if (result === null)
        result = [];
    return result;
}
function define(name, opts, func) {
    var params = getParamNames(func);
    opts.name = name;
    opts.params = params;
    opts.func = func;
    exports.QueryFunctions[name] = opts;
}
exports.define = define;
var Query = (function () {
    function Query(ixer, name) {
        if (name === void 0) { name = "unknown"; }
        this.name = name;
        this.ixer = ixer;
        this.dirty = true;
        this.tables = [];
        this.joins = [];
        this.aliases = {};
        this.funcs = [];
        this.aggregates = [];
        this.unprojectedSize = 0;
        this.hasOrdinal = false;
    }
    Query.remove = function (view, ixer) {
        var diff = ixer.diff();
        diff.remove("view", { view: view });
        for (var _i = 0, _a = ixer.find("action", { view: view }); _i < _a.length; _i++) {
            var actionItem = _a[_i];
            var action = actionItem.action;
            diff.remove("action", { action: action });
            diff.remove("action source", { action: action });
            diff.remove("action mapping", { action: action });
            diff.remove("action mapping constant", { action: action });
            diff.remove("action mapping sorted", { action: action });
            diff.remove("action mapping limit", { action: action });
        }
        return diff;
    };
    Query.prototype.changeset = function (ixer) {
        var diff = ixer.diff();
        var aliases = {};
        var reverseLookup = {};
        for (var alias in this.aliases) {
            reverseLookup[this.aliases[alias]] = alias;
        }
        var view = this.name;
        diff.add("view", { view: view, kind: "query" });
        //joins
        for (var _i = 0, _a = this.joins; _i < _a.length; _i++) {
            var join = _a[_i];
            var action = utils_1.uuid();
            aliases[join.as] = action;
            if (!join.negated) {
                diff.add("action", { view: view, action: action, kind: "select", ix: join.ix });
            }
            else {
                diff.add("action", { view: view, action: action, kind: "deselect", ix: join.ix });
            }
            diff.add("action source", { action: action, "source view": join.table });
            mappingToDiff(diff, action, join.join, aliases, reverseLookup);
        }
        //functions
        for (var _b = 0, _c = this.funcs; _b < _c.length; _b++) {
            var func = _c[_b];
            var action = utils_1.uuid();
            aliases[func.as] = action;
            diff.add("action", { view: view, action: action, kind: "calculate", ix: func.ix });
            diff.add("action source", { action: action, "source view": func.name });
            mappingToDiff(diff, action, func.args, aliases, reverseLookup);
        }
        //aggregates
        for (var _d = 0, _e = this.aggregates; _d < _e.length; _d++) {
            var agg = _e[_d];
            var action = utils_1.uuid();
            aliases[agg.as] = action;
            diff.add("action", { view: view, action: action, kind: "aggregate", ix: agg.ix });
            diff.add("action source", { action: action, "source view": agg.name });
            mappingToDiff(diff, action, agg.args, aliases, reverseLookup);
        }
        //sort
        if (this.sorts) {
            var action = utils_1.uuid();
            diff.add("action", { view: view, action: action, kind: "sort", ix: exports.MAX_NUMBER });
            var ix = 0;
            for (var _f = 0, _g = this.sorts; _f < _g.length; _f++) {
                var sort = _g[_f];
                var source = sort[0], field = sort[1], direction = sort[2];
                if (typeof source === "number") {
                    source = aliases[reverseLookup[source]];
                }
                else {
                    source = aliases[source];
                }
                diff.add("action mapping sorted", { action: action, ix: ix, source: source, field: field, direction: direction });
                ix++;
            }
        }
        //group
        if (this.groups) {
            var action = utils_1.uuid();
            diff.add("action", { view: view, action: action, kind: "group", ix: exports.MAX_NUMBER });
            var ix = 0;
            for (var _h = 0, _j = this.groups; _h < _j.length; _h++) {
                var group = _j[_h];
                var source = group[0], field = group[1];
                if (typeof source === "number") {
                    source = aliases[reverseLookup[source]];
                }
                else {
                    source = aliases[source];
                }
                diff.add("action mapping sorted", { action: action, ix: ix, source: source, field: field, direction: "ascending" });
                ix++;
            }
        }
        //limit
        if (this.limitInfo) {
            var action = utils_1.uuid();
            diff.add("action", { view: view, action: action, kind: "limit", ix: exports.MAX_NUMBER });
            for (var limitType in this.limitInfo) {
                diff.add("action mapping limit", { action: action, "limit type": limitType, value: this.limitInfo[limitType] });
            }
        }
        //projection
        if (this.projectionMap) {
            var action = utils_1.uuid();
            diff.add("action", { view: view, action: action, kind: "project", ix: exports.MAX_NUMBER });
            mappingToDiff(diff, action, this.projectionMap, aliases, reverseLookup);
        }
        return diff;
    };
    Query.prototype.validateFields = function (tableName, joinObject) {
        var table = this.ixer.table(tableName);
        for (var field in joinObject) {
            if (table.fields.length && !table.keyLookup[field]) {
                throw new Error("Table '" + tableName + "' doesn't have a field '" + field + "'.\n\nAvailable fields: " + table.fields.join(", "));
            }
            var joinInfo = joinObject[field];
            if (joinInfo.constructor === Array) {
                var joinNumber = joinInfo[0], referencedField = joinInfo[1];
                if (typeof joinNumber !== "number") {
                    joinNumber = this.aliases[joinNumber];
                }
                var join = this.joins[joinNumber];
                if (join && join.ix === joinNumber) {
                    var referencedTable = this.ixer.table(join.table);
                    if (!referencedTable.fields.length)
                        continue;
                    if (!referencedTable.keyLookup[referencedField]) {
                        throw new Error("Table '" + join.table + "' doesn't have a field '" + referencedField + "'.\n\nAvailable fields: " + referencedTable.fields.join(", "));
                    }
                }
            }
        }
    };
    Query.prototype.select = function (table, join, as) {
        this.dirty = true;
        if (as) {
            this.aliases[as] = Object.keys(this.aliases).length;
        }
        this.unprojectedSize++;
        this.tables.push(table);
        this.validateFields(table, join);
        this.joins.push({ negated: false, table: table, join: join, as: as, ix: this.aliases[as] });
        return this;
    };
    Query.prototype.deselect = function (table, join) {
        this.dirty = true;
        this.tables.push(table);
        this.validateFields(table, join);
        this.joins.push({ negated: true, table: table, join: join, ix: this.joins.length * 1000 });
        return this;
    };
    Query.prototype.calculate = function (funcName, args, as) {
        this.dirty = true;
        if (as) {
            this.aliases[as] = Object.keys(this.aliases).length;
        }
        if (!exports.QueryFunctions[funcName].filter) {
            this.unprojectedSize++;
        }
        this.funcs.push({ name: funcName, args: args, as: as, ix: this.aliases[as] });
        return this;
    };
    Query.prototype.project = function (projectionMap) {
        this.projectionMap = projectionMap;
        this.validateFields(undefined, projectionMap);
        return this;
    };
    Query.prototype.group = function (groups) {
        this.dirty = true;
        if (groups[0] && groups[0].constructor === Array) {
            this.groups = groups;
        }
        else {
            if (!this.groups)
                this.groups = [];
            this.groups.push(groups);
        }
        return this;
    };
    Query.prototype.sort = function (sorts) {
        this.dirty = true;
        if (sorts[0] && sorts[0].constructor === Array) {
            this.sorts = sorts;
        }
        else {
            if (!this.sorts)
                this.sorts = [];
            this.sorts.push(sorts);
        }
        return this;
    };
    Query.prototype.limit = function (limitInfo) {
        this.dirty = true;
        if (!this.limitInfo) {
            this.limitInfo = {};
        }
        for (var key in limitInfo) {
            this.limitInfo[key] = limitInfo[key];
        }
        return this;
    };
    Query.prototype.aggregate = function (funcName, args, as) {
        this.dirty = true;
        if (as) {
            this.aliases[as] = Object.keys(this.aliases).length;
        }
        this.unprojectedSize++;
        this.aggregates.push({ name: funcName, args: args, as: as, ix: this.aliases[as] });
        return this;
    };
    Query.prototype.ordinal = function () {
        this.dirty = true;
        this.hasOrdinal = true;
        this.unprojectedSize++;
        return this;
    };
    Query.prototype.applyAliases = function (joinMap) {
        for (var field in joinMap) {
            var joinInfo = joinMap[field];
            if (joinInfo.constructor !== Array || typeof joinInfo[0] === "number")
                continue;
            var joinTable = joinInfo[0];
            if (joinTable === "ordinal") {
                joinInfo[0] = this.unprojectedSize - 1;
            }
            else if (this.aliases[joinTable] !== undefined) {
                joinInfo[0] = this.aliases[joinTable];
            }
            else {
                throw new Error("Invalid alias used: " + joinTable);
            }
        }
    };
    Query.prototype.toAST = function () {
        var cursor = { type: "query",
            children: [] };
        var root = cursor;
        var results = [];
        // by default the only thing we return are the unprojected results
        var returns = ["unprojected", "provenance"];
        // we need an array to store our unprojected results
        root.children.push({ type: "declaration", var: "unprojected", value: "[]" });
        root.children.push({ type: "declaration", var: "provenance", value: "[]" });
        root.children.push({ type: "declaration", var: "projected", value: "{}" });
        // run through each table nested in the order they were given doing pairwise
        // joins along the way.
        for (var _i = 0, _a = this.joins; _i < _a.length; _i++) {
            var join = _a[_i];
            var table = join.table, ix = join.ix, negated = join.negated;
            var cur = {
                type: "select",
                table: table,
                passed: ix === 0,
                ix: ix,
                negated: negated,
                children: [],
                join: false,
            };
            // we only want to eat the cost of dealing with indexes
            // if we are actually joining on something
            var joinMap = join.join;
            this.applyAliases(joinMap);
            if (joinMap && Object.keys(joinMap).length !== 0) {
                root.children.unshift({ type: "declaration", var: "query" + ix, value: "{}" });
                cur.join = joinMap;
            }
            cursor.children.push(cur);
            if (!negated) {
                results.push({ type: "select", ix: ix });
            }
            cursor = cur;
        }
        // at the bottom of the joins, we calculate all the functions based on the values
        // collected
        for (var _b = 0, _c = this.funcs; _b < _c.length; _b++) {
            var func = _c[_b];
            var args = func.args, name_1 = func.name, ix = func.ix;
            var funcInfo = exports.QueryFunctions[name_1];
            this.applyAliases(args);
            root.children.unshift({ type: "functionDeclaration", ix: ix, info: funcInfo });
            if (funcInfo.multi || funcInfo.filter) {
                var node = { type: "functionCallMultiReturn", ix: ix, args: args, info: funcInfo, children: [] };
                cursor.children.push(node);
                cursor = node;
            }
            else {
                cursor.children.push({ type: "functionCall", ix: ix, args: args, info: funcInfo, children: [] });
            }
            if (!funcInfo.noReturn && !funcInfo.filter) {
                results.push({ type: "function", ix: ix });
            }
        }
        // now that we're at the bottom of the join, store the unprojected result
        cursor.children.push({ type: "result", results: results });
        //Aggregation
        //sort the unprojected results based on groupings and the given sorts
        var sorts = [];
        var alreadySorted = {};
        if (this.groups) {
            this.applyAliases(this.groups);
            for (var _d = 0, _e = this.groups; _d < _e.length; _d++) {
                var group = _e[_d];
                var table = group[0], field = group[1];
                sorts.push(group);
                alreadySorted[(table + "|" + field)] = true;
            }
        }
        if (this.sorts) {
            this.applyAliases(this.sorts);
            for (var _f = 0, _g = this.sorts; _f < _g.length; _f++) {
                var sort = _g[_f];
                var table = sort[0], field = sort[1];
                if (!alreadySorted[(table + "|" + field)]) {
                    sorts.push(sort);
                }
            }
        }
        var size = this.unprojectedSize;
        if (sorts.length) {
            root.children.push({ type: "sort", sorts: sorts, size: size, children: [] });
        }
        //then we need to run through the sorted items and do the aggregate as a fold.
        if (this.aggregates.length || sorts.length || this.limitInfo || this.hasOrdinal) {
            // we need to store group info for post processing of the unprojected results
            // this will indicate what group number, if any, that each unprojected result belongs to
            root.children.unshift({ type: "declaration", var: "groupInfo", value: "[]" });
            returns.push("groupInfo");
            var aggregateChildren = [];
            for (var _h = 0, _j = this.aggregates; _h < _j.length; _h++) {
                var func = _j[_h];
                var args = func.args, name_2 = func.name, ix = func.ix;
                var funcInfo = exports.QueryFunctions[name_2];
                this.applyAliases(args);
                root.children.unshift({ type: "functionDeclaration", ix: ix, info: funcInfo });
                aggregateChildren.push({ type: "functionCall", ix: ix, resultsIx: results.length, args: args, info: funcInfo, unprojected: true, children: [] });
                results.push({ type: "placeholder" });
            }
            if (this.hasOrdinal === true) {
                aggregateChildren.push({ type: "ordinal" });
                results.push({ type: "placeholder" });
            }
            var aggregate = { type: "aggregate loop", groups: this.groups, limit: this.limitInfo, size: size, children: aggregateChildren };
            root.children.push(aggregate);
            cursor = aggregate;
        }
        if (this.projectionMap) {
            this.applyAliases(this.projectionMap);
            root.children.unshift({ type: "declaration", var: "results", value: "[]" });
            if (exports.INCREMENTAL) {
                cursor.children.push({ type: "provenance" });
            }
            cursor.children.push({ type: "projection", projectionMap: this.projectionMap, unprojected: this.aggregates.length });
            returns.push("results");
        }
        root.children.push({ type: "return", vars: returns });
        return root;
    };
    Query.prototype.compileParamString = function (funcInfo, args, unprojected) {
        if (unprojected === void 0) { unprojected = false; }
        var code = "";
        var params = funcInfo.params;
        if (unprojected)
            params = params.slice(1);
        for (var _i = 0; _i < params.length; _i++) {
            var param = params[_i];
            var arg = args[param];
            var argCode = void 0;
            if (arg.constructor === Array) {
                var property = "";
                if (arg[1]) {
                    property = "['" + arg[1] + "']";
                }
                if (!unprojected) {
                    argCode = "row" + arg[0] + property;
                }
                else {
                    argCode = "unprojected[ix + " + arg[0] + "]" + property;
                }
            }
            else {
                argCode = JSON.stringify(arg);
            }
            code += argCode + ", ";
        }
        return code.substring(0, code.length - 2);
    };
    Query.prototype.compileAST = function (root) {
        var code = "";
        var type = root.type;
        switch (type) {
            case "query":
                for (var _i = 0, _a = root.children; _i < _a.length; _i++) {
                    var child = _a[_i];
                    code += this.compileAST(child);
                }
                break;
            case "declaration":
                code += "var " + root.var + " = " + root.value + ";\n";
                break;
            case "functionDeclaration":
                code += "var func" + root.ix + " = QueryFunctions['" + root.info.name + "'].func;\n";
                break;
            case "functionCall":
                var ix = root.ix;
                var prev = "";
                if (root.unprojected) {
                    prev = "row" + ix;
                    if (root.info.params.length > 1)
                        prev += ",";
                }
                code += "var row" + ix + " = func" + ix + "(" + prev + this.compileParamString(root.info, root.args, root.unprojected) + ");\n";
                break;
            case "functionCallMultiReturn":
                var ix = root.ix;
                code += "var rows" + ix + " = func" + ix + "(" + this.compileParamString(root.info, root.args) + ");\n";
                code += "for(var funcResultIx" + ix + " = 0, funcLen" + ix + " = rows" + ix + ".length; funcResultIx" + ix + " < funcLen" + ix + "; funcResultIx" + ix + "++) {\n";
                code += "var row" + ix + " = rows" + ix + "[funcResultIx" + ix + "];\n";
                for (var _b = 0, _c = root.children; _b < _c.length; _b++) {
                    var child = _c[_b];
                    code += this.compileAST(child);
                }
                code += "}\n";
                break;
            case "select":
                var ix = root.ix;
                if (root.passed) {
                    code += "var rows" + ix + " = rootRows;\n";
                }
                else if (root.join) {
                    for (var key in root.join) {
                        var mapping = root.join[key];
                        if (mapping.constructor === Array) {
                            var tableIx = mapping[0], value = mapping[1];
                            code += "query" + ix + "['" + key + "'] = row" + tableIx + "['" + value + "'];\n";
                        }
                        else {
                            code += "query" + ix + "['" + key + "'] = " + JSON.stringify(mapping) + ";\n";
                        }
                    }
                    code += "var rows" + ix + " = ixer.factToIndex(ixer.table('" + root.table + "'), query" + ix + ");\n";
                }
                else {
                    code += "var rows" + ix + " = ixer.table('" + root.table + "').table;\n";
                }
                if (!root.negated) {
                    code += "for(var rowIx" + ix + " = 0, rowsLen" + ix + " = rows" + ix + ".length; rowIx" + ix + " < rowsLen" + ix + "; rowIx" + ix + "++) {\n";
                    code += "var row" + ix + " = rows" + ix + "[rowIx" + ix + "];\n";
                }
                else {
                    code += "if(!rows" + ix + ".length) {\n";
                }
                for (var _d = 0, _e = root.children; _d < _e.length; _d++) {
                    var child = _e[_d];
                    code += this.compileAST(child);
                }
                code += "}\n";
                break;
            case "result":
                var results = [];
                for (var _f = 0, _g = root.results; _f < _g.length; _f++) {
                    var result = _g[_f];
                    if (result.type === "placeholder") {
                        results.push("undefined");
                    }
                    else {
                        var ix_1 = result.ix;
                        results.push("row" + ix_1);
                    }
                }
                code += "unprojected.push(" + results.join(", ") + ");\n";
                break;
            case "sort":
                code += generateUnprojectedSorterCode(root.size, root.sorts) + "\n";
                break;
            case "aggregate loop":
                var projection = "";
                var aggregateCalls = [];
                var aggregateStates = [];
                var aggregateResets = [];
                var unprojected = {};
                var ordinal = false;
                var provenanceCode;
                for (var _h = 0, _j = root.children; _h < _j.length; _h++) {
                    var agg = _j[_h];
                    if (agg.type === "functionCall") {
                        unprojected[agg.ix] = true;
                        var compiled = this.compileAST(agg);
                        compiled += "\nunprojected[ix + " + agg.resultsIx + "] = row" + agg.ix + ";\n";
                        aggregateCalls.push(compiled);
                        aggregateStates.push("var row" + agg.ix + " = {};");
                        aggregateResets.push("row" + agg.ix + " = {};");
                    }
                    else if (agg.type === "projection") {
                        agg.unprojected = unprojected;
                        projection = this.compileAST(agg);
                    }
                    else if (agg.type === "ordinal") {
                        ordinal = "unprojected[ix+" + (this.unprojectedSize - 1) + "] = resultCount;\n";
                    }
                    else if (agg.type === "provenance") {
                        provenanceCode = this.compileAST(agg);
                    }
                }
                var aggregateCallsCode = aggregateCalls.join("");
                var differentGroupChecks = [];
                var groupCheck = "false";
                if (root.groups) {
                    for (var _k = 0, _l = root.groups; _k < _l.length; _k++) {
                        var group = _l[_k];
                        var table = group[0], field = group[1];
                        differentGroupChecks.push("unprojected[nextIx + " + table + "]['" + field + "'] !== unprojected[ix + " + table + "]['" + field + "']");
                    }
                    groupCheck = "(" + differentGroupChecks.join(" || ") + ")";
                }
                var resultsCheck = "";
                if (root.limit && root.limit.results) {
                    var limitValue = root.limit.results;
                    var offset = root.limit.offset;
                    if (offset) {
                        limitValue += offset;
                        projection = "if(resultCount >= " + offset + ") {\n              " + projection + "\n            }";
                    }
                    resultsCheck = "if(resultCount === " + limitValue + ") break;";
                }
                var groupLimitCheck = "";
                if (root.limit && root.limit.perGroup && root.groups) {
                    var limitValue = root.limit.perGroup;
                    var offset = root.limit.offset;
                    if (offset) {
                        limitValue += offset;
                        aggregateCallsCode = "if(perGroupCount >= " + offset + ") {\n              " + aggregateCallsCode + "\n            }";
                    }
                    groupLimitCheck = "if(perGroupCount === " + limitValue + ") {\n            while(!differentGroup) {\n              nextIx += " + root.size + ";\n              if(nextIx >= len) break;\n              groupInfo[nextIx] = undefined;\n              differentGroup = " + groupCheck + ";\n            }\n          }";
                }
                var groupDifference = "";
                var groupInfo = "";
                if (this.groups) {
                    groupInfo = "groupInfo[ix] = resultCount;";
                    var groupProjection = projection + "resultCount++;";
                    if (root.limit && root.limit.offset) {
                        groupProjection = "if(perGroupCount > " + root.limit.offset + ") {\n              " + groupProjection + "\n            }";
                        groupInfo = "if(perGroupCount >= " + root.limit.offset + ") {\n              " + groupInfo + "\n            }";
                    }
                    groupDifference = "\n          perGroupCount++\n          var differentGroup = " + groupCheck + ";\n          " + groupLimitCheck + "\n          if(differentGroup) {\n            " + groupProjection + "\n            " + aggregateResets.join("\n") + "\n            perGroupCount = 0;\n          }\n";
                }
                else {
                    groupDifference = "resultCount++;\n";
                    groupInfo = "groupInfo[ix] = 0;";
                }
                // if there are neither aggregates to calculate nor groups to build,
                // then we just need to worry about limiting
                if (!this.groups && aggregateCalls.length === 0) {
                    code = "var ix = 0;\n                  var resultCount = 0;\n                  var len = unprojected.length;\n                  while(ix < len) {\n                    " + resultsCheck + "\n                    " + (ordinal || "") + "\n                    " + provenanceCode + "\n                    " + projection + "\n                    groupInfo[ix] = resultCount;\n                    resultCount++;\n                    ix += " + root.size + ";\n                  }\n";
                    break;
                }
                code = "var resultCount = 0;\n                var perGroupCount = 0;\n                var ix = 0;\n                var nextIx = 0;\n                var len = unprojected.length;\n                " + aggregateStates.join("\n") + "\n                while(ix < len) {\n                  " + aggregateCallsCode + "\n                  " + groupInfo + "\n                  " + (ordinal || "") + "\n                  " + provenanceCode + "\n                  if(ix + " + root.size + " === len) {\n                    " + projection + "\n                    break;\n                  }\n                  nextIx += " + root.size + ";\n                  " + groupDifference + "\n                  " + resultsCheck + "\n                  ix = nextIx;\n                }\n";
                break;
            case "projection":
                var projectedVars = [];
                var idStringParts = [];
                for (var newField in root.projectionMap) {
                    var mapping = root.projectionMap[newField];
                    var value = "";
                    if (mapping.constructor === Array) {
                        if (mapping[1] === undefined) {
                            value = "unprojected[ix + " + mapping[0] + "]";
                        }
                        else if (!root.unprojected || root.unprojected[mapping[0]]) {
                            value = "row" + mapping[0] + "['" + mapping[1] + "']";
                        }
                        else {
                            value = "unprojected[ix + " + mapping[0] + "]['" + mapping[1] + "']";
                        }
                    }
                    else {
                        value = JSON.stringify(mapping);
                    }
                    projectedVars.push("projected['" + newField.replace(/'/g, "\\'") + "'] = " + value);
                    idStringParts.push(value);
                }
                code += projectedVars.join(";\n") + "\n";
                code += "projected.__id = " + idStringParts.join(" + \"|\" + ") + ";\n";
                code += "results.push(projected);\n";
                code += "projected = {};\n";
                break;
            case "provenance":
                var provenance = "var provenance__id = '';\n";
                var ids = [];
                for (var _m = 0, _o = this.joins; _m < _o.length; _m++) {
                    var join = _o[_m];
                    if (join.negated)
                        continue;
                    provenance += "provenance__id = tableId + '|' + projected.__id + '|' + rowInstance + '|" + join.table + "|' + row" + join.ix + ".__id; \n";
                    provenance += "provenance.push({table: tableId, row: projected, \"row instance\": rowInstance, source: \"" + join.table + "\", \"source row\": row" + join.ix + "});\n";
                    ids.push("row" + join.ix + ".__id");
                }
                code = "var rowInstance = " + ids.join(" + '|' + ") + ";\n        " + provenance;
                break;
            case "return":
                var returns = [];
                for (var _p = 0, _q = root.vars; _p < _q.length; _p++) {
                    var curVar = _q[_p];
                    returns.push(curVar + ": " + curVar);
                }
                code += "return {" + returns.join(", ") + "};";
                break;
        }
        return code;
    };
    // given a set of changes and a join order, determine the root facts that need
    // to be joined again to cover all the adds
    Query.prototype.reverseJoin = function (joins) {
        var changed = joins[0];
        var reverseJoinMap = {};
        // collect all the constraints and reverse them
        for (var _i = 0; _i < joins.length; _i++) {
            var join = joins[_i];
            for (var key in join.join) {
                var _a = join.join[key], source = _a[0], field = _a[1];
                if (source <= changed.ix) {
                    if (!reverseJoinMap[source]) {
                        reverseJoinMap[source] = {};
                    }
                    if (!reverseJoinMap[source][field])
                        reverseJoinMap[source][field] = [join.ix, key];
                }
            }
        }
        var recurse = function (joins, joinIx) {
            var code = "";
            if (joinIx >= joins.length) {
                return "others.push(row0)";
            }
            var _a = joins[joinIx], table = _a.table, ix = _a.ix, negated = _a.negated;
            var joinMap = joins[joinIx].join;
            // we only care about this guy if he's joined with at least one thing
            if (!reverseJoinMap[ix] && joinIx < joins.length - 1)
                return recurse(joins, joinIx + 1);
            else if (!reverseJoinMap)
                return "";
            var mappings = [];
            for (var key in reverseJoinMap[ix]) {
                var _b = reverseJoinMap[ix][key], sourceIx = _b[0], field = _b[1];
                if (sourceIx === changed.ix || reverseJoinMap[sourceIx] !== undefined) {
                    mappings.push("'" + key + "': row" + sourceIx + "['" + field + "']");
                }
            }
            for (var key in joinMap) {
                var value = joinMap[key];
                if (value.constructor !== Array) {
                    mappings.push("'" + key + "': " + JSON.stringify(value));
                }
            }
            if (negated) {
            }
            code += "\n            var rows" + ix + " = eve.find('" + table + "', {" + mappings.join(", ") + "});\n            for(var rowsIx" + ix + " = 0, rowsLen" + ix + " = rows" + ix + ".length; rowsIx" + ix + " < rowsLen" + ix + "; rowsIx" + ix + "++) {\n                var row" + ix + " = rows" + ix + "[rowsIx" + ix + "];\n                " + recurse(joins, joinIx + 1) + "\n            }\n            ";
            return code;
        };
        return recurse(joins, 1);
    };
    Query.prototype.compileIncrementalRowFinderCode = function () {
        var code = "var others = [];\n";
        var reversed = this.joins.slice().reverse();
        var checks = [];
        var ix = 0;
        for (var _i = 0; _i < reversed.length; _i++) {
            var join = reversed[_i];
            // we don't want to do this for the root
            if (ix === reversed.length - 1)
                break;
            checks.push("\n\t\t\tif(changes[\"" + join.table + "\"] && changes[\"" + join.table + "\"].adds) {\n                var curChanges" + join.ix + " = changes[\"" + join.table + "\"].adds;\n                for(var changeIx" + join.ix + " = 0, changeLen" + join.ix + " = curChanges" + join.ix + ".length; changeIx" + join.ix + " < changeLen" + join.ix + "; changeIx" + join.ix + "++) {\n                    var row" + join.ix + " = curChanges" + join.ix + "[changeIx" + join.ix + "];\n\t\t\t\t\t" + this.reverseJoin(reversed.slice(ix)) + "\n\t\t\t\t}\n\t\t\t}");
            ix++;
        }
        code += checks.join(" else");
        var last = reversed[ix];
        code += "\n\t\t\tif(changes[\"" + last.table + "\"] && changes[\"" + last.table + "\"].adds) {\n                var curChanges = changes[\"" + last.table + "\"].adds;\n\t\t\t\tfor(var changeIx = 0, changeLen = curChanges.length; changeIx < changeLen; changeIx++) {\n\t\t\t\t\tothers.push(curChanges[changeIx]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn others;";
        return code;
    };
    Query.prototype.incrementalRemove = function (changes) {
        var ixer = this.ixer;
        var rowsToPostCheck = [];
        var provenanceDiff = this.ixer.diff();
        var removes = [];
        var indexes = ixer.table("provenance").indexes;
        var sourceRowLookup = indexes["source|source row|table"].index;
        var rowInstanceLookup = indexes["row instance|table"].index;
        var tableRowLookup = indexes["row|table"].index;
        var provenanceRemoves = [];
        var visited = {};
        for (var _i = 0, _a = this.joins; _i < _a.length; _i++) {
            var join = _a[_i];
            var change = changes[join.table];
            if (!visited[join.table] && change && change.removes.length) {
                visited[join.table] = true;
                for (var _b = 0, _c = change.removes; _b < _c.length; _b++) {
                    var remove = _c[_b];
                    var provenances = sourceRowLookup[join.table + '|' + remove.__id + '|' + this.name];
                    if (provenances) {
                        for (var _d = 0; _d < provenances.length; _d++) {
                            var provenance = provenances[_d];
                            if (!visited[provenance["row instance"]]) {
                                visited[provenance["row instance"]] = true;
                                var relatedProvenance = rowInstanceLookup[provenance["row instance"] + '|' + provenance.table];
                                for (var _e = 0; _e < relatedProvenance.length; _e++) {
                                    var related = relatedProvenance[_e];
                                    provenanceRemoves.push(related);
                                }
                            }
                            rowsToPostCheck.push(provenance);
                        }
                    }
                }
            }
        }
        provenanceDiff.removeFacts("provenance", provenanceRemoves);
        ixer.applyDiffIncremental(provenanceDiff);
        var isEdb = ixer.edbTables;
        for (var _f = 0; _f < rowsToPostCheck.length; _f++) {
            var row = rowsToPostCheck[_f];
            var supports = tableRowLookup[row.row.__id + '|' + row.table];
            if (!supports || supports.length === 0) {
                removes.push(row.row);
            }
        }
        return removes;
    };
    Query.prototype.canBeIncremental = function () {
        if (this.aggregates.length)
            return false;
        if (this.sorts)
            return false;
        if (this.groups)
            return false;
        if (this.limitInfo)
            return false;
        for (var _i = 0, _a = this.joins; _i < _a.length; _i++) {
            var join = _a[_i];
            if (join.negated)
                return false;
        }
        if (!this.joins.length)
            return false;
        return true;
    };
    Query.prototype.compile = function () {
        var ast = this.toAST();
        var code = this.compileAST(ast);
        this.compiled = new Function("ixer", "QueryFunctions", "tableId", "rootRows", code);
        if (this.canBeIncremental()) {
            this.incrementalRowFinder = new Function("changes", this.compileIncrementalRowFinderCode());
        }
        else {
            this.incrementalRowFinder = undefined;
        }
        this.dirty = false;
        return this;
    };
    Query.prototype.exec = function () {
        if (this.dirty) {
            this.compile();
        }
        var root = this.joins[0];
        var rows;
        if (root) {
            rows = this.ixer.find(root.table, root.join);
        }
        else {
            rows = [];
        }
        return this.compiled(this.ixer, exports.QueryFunctions, this.name, rows);
    };
    Query.prototype.execIncremental = function (changes, table) {
        if (this.dirty) {
            this.compile();
        }
        if (this.incrementalRowFinder) {
            var potentialRows = this.incrementalRowFinder(changes);
            // if the root select has some constant filters, then
            // the above rows need to be filtered down to only those that
            // match.
            var rows = [];
            var root = this.joins[0];
            var rootKeys = Object.keys(root.join);
            if (rootKeys.length > 0) {
                rowLoop: for (var _i = 0; _i < potentialRows.length; _i++) {
                    var row = potentialRows[_i];
                    for (var _a = 0; _a < rootKeys.length; _a++) {
                        var key = rootKeys[_a];
                        if (row[key] !== root.join[key])
                            continue rowLoop;
                    }
                    rows.push(row);
                }
            }
            else {
                rows = potentialRows;
            }
            var results = this.compiled(this.ixer, exports.QueryFunctions, this.name, rows);
            var adds = [];
            var prevHashes = table.factHash;
            var prevKeys = Object.keys(prevHashes);
            var suggestedRemoves = this.incrementalRemove(changes);
            var realDiff = diffAddsAndRemoves(results.results, suggestedRemoves);
            for (var _b = 0, _c = realDiff.adds; _b < _c.length; _b++) {
                var result = _c[_b];
                var id = result.__id;
                if (prevHashes[id] === undefined) {
                    adds.push(result);
                }
            }
            var diff = this.ixer.diff();
            diff.addMany("provenance", results.provenance);
            this.ixer.applyDiffIncremental(diff);
            // console.log("INC PROV DIFF", this.name, diff.length);
            return { provenance: results.provenance, adds: adds, removes: realDiff.removes };
        }
        else {
            var results = this.exec();
            var adds = [];
            var removes = [];
            var prevHashes = table.factHash;
            var prevKeys = Object.keys(prevHashes);
            var newHashes = {};
            for (var _d = 0, _e = results.results; _d < _e.length; _d++) {
                var result = _e[_d];
                var id = result.__id;
                newHashes[id] = result;
                if (prevHashes[id] === undefined) {
                    adds.push(result);
                }
            }
            for (var _f = 0; _f < prevKeys.length; _f++) {
                var hash = prevKeys[_f];
                var value = newHashes[hash];
                if (value === undefined) {
                    removes.push(prevHashes[hash]);
                }
            }
            var realDiff = diffAddsAndRemoves(adds, removes);
            var diff = this.ixer.diff();
            diff.remove("provenance", { table: this.name });
            diff.addMany("provenance", results.provenance);
            this.ixer.applyDiffIncremental(diff);
            // console.log("FULL PROV SIZE", this.name, diff.length);
            return { provenance: results.provenance, adds: realDiff.adds, removes: realDiff.removes };
        }
    };
    Query.prototype.debug = function () {
        console.log(this.compileAST(this.toAST()));
        console.time("exec");
        var results = this.exec();
        console.timeEnd("exec");
        console.log(results);
        return results;
    };
    return Query;
})();
exports.Query = Query;
var Union = (function () {
    function Union(ixer, name) {
        if (name === void 0) { name = "unknown"; }
        this.name = name;
        this.ixer = ixer;
        this.tables = [];
        this.sources = [];
        this.isStateful = false;
        this.prev = { results: [], hashes: {} };
        this.dirty = true;
    }
    Union.prototype.changeset = function (ixer) {
        var diff = ixer.diff();
        diff.add("view", { view: this.name, kind: "union" });
        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {
            var source = _a[_i];
            if (source.type === "+") {
                var action = utils_1.uuid();
                diff.add("action", { view: this.name, action: action, kind: "union", ix: 0 });
                diff.add("action source", { action: action, "source view": source.table });
                for (var field in source.mapping) {
                    var mapped = source.mapping[field];
                    if (mapped.constructor === Array)
                        diff.add("action mapping", { action: action, from: field, "to source": source.table, "to field": mapped[0] });
                    else
                        diff.add("action mapping constant", { action: action, from: field, value: mapped });
                }
            }
            else
                throw new Error("Unknown source type: '" + source.type + "'");
        }
        return diff;
    };
    Union.prototype.ensureHasher = function (mapping) {
        if (!this.hasher) {
            this.hasher = generateStringFn(Object.keys(mapping));
        }
    };
    Union.prototype.union = function (tableName, mapping) {
        this.dirty = true;
        this.ensureHasher(mapping);
        this.tables.push(tableName);
        this.sources.push({ type: "+", table: tableName, mapping: mapping });
        return this;
    };
    Union.prototype.toAST = function () {
        var root = { type: "union", children: [] };
        root.children.push({ type: "declaration", var: "results", value: "[]" });
        root.children.push({ type: "declaration", var: "provenance", value: "[]" });
        var hashesValue = "{}";
        if (this.isStateful) {
            hashesValue = "prevHashes";
        }
        root.children.push({ type: "declaration", var: "hashes", value: hashesValue });
        var ix = 0;
        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {
            var source = _a[_i];
            var action = void 0;
            if (source.type === "+") {
                action = { type: "result", ix: ix, children: [{ type: "provenance", source: source, ix: ix }] };
            }
            root.children.push({
                type: "source",
                ix: ix,
                table: source.table,
                mapping: source.mapping,
                children: [action],
            });
            ix++;
        }
        root.children.push({ type: "hashesToResults" });
        root.children.push({ type: "return", vars: ["results", "hashes", "provenance"] });
        return root;
    };
    Union.prototype.compileAST = function (root) {
        var code = "";
        var type = root.type;
        switch (type) {
            case "union":
                for (var _i = 0, _a = root.children; _i < _a.length; _i++) {
                    var child = _a[_i];
                    code += this.compileAST(child);
                }
                break;
            case "declaration":
                code += "var " + root.var + " = " + root.value + ";\n";
                break;
            case "source":
                var ix = root.ix;
                var mappingItems = [];
                for (var key in root.mapping) {
                    var mapping = root.mapping[key];
                    var value = void 0;
                    if (mapping.constructor === Array && mapping.length === 1) {
                        var field = mapping[0];
                        value = "sourceRow" + ix + "['" + field + "']";
                    }
                    else if (mapping.constructor === Array && mapping.length === 2) {
                        var _ = mapping[0], field = mapping[1];
                        value = "sourceRow" + ix + "['" + field + "']";
                    }
                    else {
                        value = JSON.stringify(mapping);
                    }
                    mappingItems.push("'" + key + "': " + value);
                }
                code += "var sourceRows" + ix + " = changes['" + root.table.replace(/'/g, "\\'") + "'];\n";
                code += "for(var rowIx" + ix + " = 0, rowsLen" + ix + " = sourceRows" + ix + ".length; rowIx" + ix + " < rowsLen" + ix + "; rowIx" + ix + "++) {\n";
                code += "var sourceRow" + ix + " = sourceRows" + ix + "[rowIx" + ix + "];\n";
                code += "var mappedRow" + ix + " = {" + mappingItems.join(", ") + "};\n";
                for (var _b = 0, _c = root.children; _b < _c.length; _b++) {
                    var child = _c[_b];
                    code += this.compileAST(child);
                }
                code += "}\n";
                break;
            case "result":
                var ix = root.ix;
                code += "var hash" + ix + " = hasher(mappedRow" + ix + ");\n";
                code += "mappedRow" + ix + ".__id = hash" + ix + ";\n";
                code += "hashes[hash" + ix + "] = mappedRow" + ix + ";\n";
                for (var _d = 0, _e = root.children; _d < _e.length; _d++) {
                    var child = _e[_d];
                    code += this.compileAST(child);
                }
                break;
            case "removeResult":
                var ix = root.ix;
                code += "hashes[hasher(mappedRow" + ix + ")] = false;\n";
                break;
            case "hashesToResults":
                code += "var hashKeys = Object.keys(hashes);\n";
                code += "for(var hashKeyIx = 0, hashKeyLen = hashKeys.length; hashKeyIx < hashKeyLen; hashKeyIx++) {\n";
                code += "var curHashKey = hashKeys[hashKeyIx];";
                code += "var value = hashes[curHashKey];\n";
                code += "if(value !== false) {\n";
                code += "value.__id = curHashKey;\n";
                code += "results.push(value);\n";
                code += "}\n";
                code += "}\n";
                break;
            case "provenance":
                var source = root.source.table;
                var ix = root.ix;
                var provenance = "var provenance__id = '';\n";
                provenance += "provenance__id = '" + this.name.replace(/'/g, "\\'") + "|' + mappedRow" + ix + ".__id + '|' + rowInstance + '|" + source.replace(/'/g, "\\'") + "|' + sourceRow" + ix + ".__id; \n";
                provenance += "provenance.push({table: '" + this.name.replace(/'/g, "\\'") + "', row: mappedRow" + ix + ", \"row instance\": rowInstance, source: \"" + source.replace(/'/g, "\\'") + "\", \"source row\": sourceRow" + ix + "});\n";
                code = "var rowInstance = \"" + source.replace(/'/g, "\\'") + "|\" + mappedRow" + ix + ".__id;\n        " + provenance;
                break;
            case "return":
                code += "return {" + root.vars.map(function (name) { return (name + ": " + name); }).join(", ") + "};";
                break;
        }
        return code;
    };
    Union.prototype.compile = function () {
        var ast = this.toAST();
        var code = this.compileAST(ast);
        this.compiled = new Function("ixer", "hasher", "changes", code);
        this.dirty = false;
        return this;
    };
    Union.prototype.debug = function () {
        var code = this.compileAST(this.toAST());
        console.log(code);
        return code;
    };
    Union.prototype.exec = function () {
        if (this.dirty) {
            this.compile();
        }
        var changes = {};
        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {
            var source = _a[_i];
            changes[source.table] = this.ixer.table(source.table).table;
        }
        var results = this.compiled(this.ixer, this.hasher, changes);
        return results;
    };
    Union.prototype.incrementalRemove = function (changes) {
        var ixer = this.ixer;
        var rowsToPostCheck = [];
        var provenanceDiff = this.ixer.diff();
        var removes = [];
        var indexes = ixer.table("provenance").indexes;
        var sourceRowLookup = indexes["source|source row|table"].index;
        var rowInstanceLookup = indexes["row instance|table"].index;
        var tableRowLookup = indexes["row|table"].index;
        var provenanceRemoves = [];
        var visited = {};
        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {
            var source = _a[_i];
            var change = changes[source.table];
            if (!visited[source.table] && change && change.removes.length) {
                visited[source.table] = true;
                for (var _b = 0, _c = change.removes; _b < _c.length; _b++) {
                    var remove = _c[_b];
                    var provenances = sourceRowLookup[source.table + '|' + remove.__id + '|' + this.name];
                    if (provenances) {
                        for (var _d = 0; _d < provenances.length; _d++) {
                            var provenance = provenances[_d];
                            if (!visited[provenance["row instance"]]) {
                                visited[provenance["row instance"]] = true;
                                var relatedProvenance = rowInstanceLookup[provenance["row instance"] + '|' + provenance.table];
                                for (var _e = 0; _e < relatedProvenance.length; _e++) {
                                    var related = relatedProvenance[_e];
                                    provenanceRemoves.push(related);
                                }
                            }
                            rowsToPostCheck.push(provenance);
                        }
                    }
                }
            }
        }
        provenanceDiff.removeFacts("provenance", provenanceRemoves);
        ixer.applyDiffIncremental(provenanceDiff);
        var isEdb = ixer.edbTables;
        for (var _f = 0; _f < rowsToPostCheck.length; _f++) {
            var row = rowsToPostCheck[_f];
            var supports = tableRowLookup[row.row.__id + '|' + row.table];
            if (!supports || supports.length === 0) {
                removes.push(row.row);
            }
            else if (this.sources.length > 2) {
                var supportsToRemove = [];
                // otherwise if there are supports, then we need to walk the support
                // graph backwards and make sure every supporting row terminates at an
                // edb value. If not, then that support also needs to be removed
                for (var _g = 0; _g < supports.length; _g++) {
                    var support = supports[_g];
                    // if the support is already an edb, we're good to go.
                    if (isEdb[support.source])
                        continue;
                    if (!tableRowLookup[support["source row"].__id + '|' + support.source]) {
                        supportsToRemove.push(support);
                        continue;
                    }
                    // get all the supports for this support
                    var nodes = tableRowLookup[support["source row"].__id + '|' + support.source].slice();
                    var nodeIx = 0;
                    // iterate through all the nodes, if they have further supports then
                    // assume this node is ok and add those supports to the list of nodes to
                    // check. If we run into a node with no supports it must either be an edb
                    // or it's unsupported and this row instance needs to be removed.
                    while (nodeIx < nodes.length) {
                        var node = nodes[nodeIx];
                        if (isEdb[node.source]) {
                            nodeIx++;
                            continue;
                        }
                        var nodeSupports = tableRowLookup[node["source row"].__id + '|' + node.source];
                        if (!nodeSupports || nodeSupports.length === 0) {
                            supportsToRemove.push(support);
                            break;
                        }
                        else {
                            for (var _h = 0; _h < nodeSupports.length; _h++) {
                                var nodeSupport = nodeSupports[_h];
                                nodes.push(nodeSupport);
                            }
                            nodeIx++;
                        }
                    }
                }
                if (supportsToRemove.length) {
                    // we need to remove all the supports
                    var provenanceRemoves_1 = [];
                    for (var _j = 0; _j < supportsToRemove.length; _j++) {
                        var support = supportsToRemove[_j];
                        var relatedProvenance = rowInstanceLookup[support["row instance"] + '|' + support.table];
                        for (var _k = 0; _k < relatedProvenance.length; _k++) {
                            var related = relatedProvenance[_k];
                            provenanceRemoves_1.push(related);
                        }
                    }
                    var diff = ixer.diff();
                    diff.removeFacts("provenance", provenanceRemoves_1);
                    ixer.applyDiffIncremental(diff);
                    // now that all the unsupported provenances have been removed, check if there's anything
                    // left.
                    if (!tableRowLookup[row.row.__id + '|' + row.table] || tableRowLookup[row.row.__id + '|' + row.table].length === 0) {
                        removes.push(row.row);
                    }
                }
            }
        }
        return removes;
    };
    Union.prototype.execIncremental = function (changes, table) {
        if (this.dirty) {
            this.compile();
        }
        var sourceChanges = {};
        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {
            var source = _a[_i];
            var value = void 0;
            if (!changes[source.table]) {
                value = [];
            }
            else {
                value = changes[source.table].adds;
            }
            sourceChanges[source.table] = value;
        }
        var results = this.compiled(this.ixer, this.hasher, sourceChanges);
        var adds = [];
        var prevHashes = table.factHash;
        var prevKeys = Object.keys(prevHashes);
        var suggestedRemoves = this.incrementalRemove(changes);
        var realDiff = diffAddsAndRemoves(results.results, suggestedRemoves);
        for (var _b = 0, _c = realDiff.adds; _b < _c.length; _b++) {
            var result = _c[_b];
            var id = result.__id;
            if (prevHashes[id] === undefined) {
                adds.push(result);
            }
        }
        var diff = this.ixer.diff();
        diff.addMany("provenance", results.provenance);
        this.ixer.applyDiffIncremental(diff);
        return { provenance: results.provenance, adds: adds, removes: realDiff.removes };
    };
    return Union;
})();
exports.Union = Union;
//---------------------------------------------------------
// Builtin Primitives
//---------------------------------------------------------
runtime.define("count", { aggregate: true, result: "count" }, function (prev) {
    if (!prev.count) {
        prev.count = 0;
    }
    prev.count++;
    return prev;
});
runtime.define("sum", { aggregate: true, result: "sum" }, function (prev, value) {
    if (!prev.sum) {
        prev.sum = 0;
    }
    prev.sum += value;
    return prev;
});
runtime.define("average", { aggregate: true, result: "average" }, function (prev, value) {
    if (!prev.sum) {
        prev.sum = 0;
        prev.count = 0;
    }
    prev.count++;
    prev.sum += value;
    prev.average = prev.sum / prev.count;
    return prev;
});
runtime.define("lowercase", { result: "lowercase" }, function (text) {
    if (typeof text === "string") {
        return { result: text.toLowerCase() };
    }
    return { result: text };
});
runtime.define("=", { filter: true, inverse: "!=" }, function (a, b) {
    return a === b ? runtime.SUCCEED : runtime.FAIL;
});
runtime.define("!=", { filter: true, inverse: "=" }, function (a, b) {
    return a !== b ? runtime.SUCCEED : runtime.FAIL;
});
runtime.define(">", { filter: true, inverse: "<=" }, function (a, b) {
    return a > b ? runtime.SUCCEED : runtime.FAIL;
});
runtime.define("<", { filter: true, inverse: ">=" }, function (a, b) {
    return a < b ? runtime.SUCCEED : runtime.FAIL;
});
runtime.define(">=", { filter: true, inverse: "<" }, function (a, b) {
    return a >= b ? runtime.SUCCEED : runtime.FAIL;
});
runtime.define("<=", { filter: true, inverse: ">" }, function (a, b) {
    return a <= b ? runtime.SUCCEED : runtime.FAIL;
});
runtime.define("+", { result: "result" }, function (a, b) {
    return { result: a + b };
});
runtime.define("-", { result: "result" }, function (a, b) {
    return { result: a - b };
});
runtime.define("*", { result: "result" }, function (a, b) {
    return { result: a * b };
});
runtime.define("/", { result: "result" }, function (a, b) {
    return { result: a / b };
});
//---------------------------------------------------------
// AST and compiler
//---------------------------------------------------------
// view: view, kind[union|query|table]
// action: view, action, kind[select|calculate|project|union|ununion|stateful|limit|sort|group|aggregate], ix
// action source: action, source view
// action mapping: action, from, to source, to field
// action mapping constant: action, from, value
function addRecompileTriggers(eve) {
    var recompileTrigger = {
        exec: function (ixer) {
            for (var _i = 0, _a = ixer.find("view"); _i < _a.length; _i++) {
                var view = _a[_i];
                if (view.kind === "table")
                    continue;
                try {
                    var query = compile(ixer, view.view);
                    ixer.asView(query);
                }
                catch (e) {
                    console.error("BAD QUERY IN THE DB :(");
                    console.error("View Id: " + view.view);
                    console.log(e.stack);
                    ixer.applyDiff(Query.remove(view.view, ixer));
                }
            }
            return {};
        }
    };
    eve.addTable("view", ["view", "kind"]);
    eve.addTable("action", ["view", "action", "kind", "ix"]);
    eve.addTable("action source", ["action", "source view"]);
    eve.addTable("action mapping", ["action", "from", "to source", "to field"]);
    eve.addTable("action mapping constant", ["action", "from", "value"]);
    eve.addTable("action mapping sorted", ["action", "ix", "source", "field", "direction"]);
    eve.addTable("action mapping limit", ["action", "limit type", "value"]);
    eve.table("view").triggers["recompile"] = recompileTrigger;
    eve.table("action").triggers["recompile"] = recompileTrigger;
    eve.table("action source").triggers["recompile"] = recompileTrigger;
    eve.table("action mapping").triggers["recompile"] = recompileTrigger;
    eve.table("action mapping constant").triggers["recompile"] = recompileTrigger;
    eve.table("action mapping sorted").triggers["recompile"] = recompileTrigger;
    eve.table("action mapping limit").triggers["recompile"] = recompileTrigger;
    return eve;
}
function compile(ixer, viewId) {
    var view = ixer.findOne("view", { view: viewId });
    if (!view) {
        throw new Error("No view found for " + viewId + ".");
    }
    var compiled = ixer[view.kind](viewId);
    var actions = ixer.find("action", { view: viewId });
    if (!actions) {
        throw new Error("View " + viewId + " has no actions.");
    }
    // sort actions by ix
    actions.sort(function (a, b) { return a.ix - b.ix; });
    for (var _i = 0; _i < actions.length; _i++) {
        var action = actions[_i];
        var actionKind = action.kind;
        if (actionKind === "limit") {
            var limit = {};
            for (var _a = 0, _b = ixer.find("action mapping limit", { action: action.action }); _a < _b.length; _a++) {
                var limitMapping = _b[_a];
                limit[limitMapping["limit type"]] = limitMapping["value"];
            }
            compiled.limit(limit);
        }
        else if (actionKind === "sort" || actionKind === "group") {
            var sorted = [];
            var mappings = ixer.find("action mapping sorted", { action: action.action });
            mappings.sort(function (a, b) { return a.ix - b.ix; });
            for (var _c = 0; _c < mappings.length; _c++) {
                var mapping = mappings[_c];
                sorted.push([mapping["source"], mapping["field"], mapping["direction"]]);
            }
            if (sorted.length) {
                compiled[actionKind](sorted);
            }
            else {
                throw new Error(actionKind + " without any mappings: " + action.action);
            }
        }
        else {
            var mappings = ixer.find("action mapping", { action: action.action });
            var mappingObject = {};
            for (var _d = 0; _d < mappings.length; _d++) {
                var mapping = mappings[_d];
                var source_1 = mapping["to source"];
                var field = mapping["to field"];
                if (actionKind === "union" || actionKind === "ununion") {
                    mappingObject[mapping.from] = [field];
                }
                else {
                    mappingObject[mapping.from] = [source_1, field];
                }
            }
            var constants = ixer.find("action mapping constant", { action: action.action });
            for (var _e = 0; _e < constants.length; _e++) {
                var constant = constants[_e];
                mappingObject[constant.from] = constant.value;
            }
            var source = ixer.findOne("action source", { action: action.action });
            if (!source && actionKind !== "project") {
                throw new Error(actionKind + " action without a source in '" + viewId + "'");
            }
            if (actionKind !== "project") {
                compiled[actionKind](source["source view"], mappingObject, action.action);
            }
            else {
                compiled[actionKind](mappingObject);
            }
        }
    }
    return compiled;
}
exports.compile = compile;
//---------------------------------------------------------
// Public API
//---------------------------------------------------------
exports.SUCCEED = [{ success: true }];
exports.FAIL = [];
function indexer() {
    var ixer = new Indexer();
    addProvenanceTable(ixer);
    addRecompileTriggers(ixer);
    return ixer;
}
exports.indexer = indexer;
if (utils_1.ENV === "browser")
    window["runtime"] = exports;

},{"./utils":8}],7:[function(require,module,exports){
var utils_1 = require("./utils");
var runtime_1 = require("./runtime");
function resolve(table, fact) {
    var neue = {};
    for (var field in fact)
        neue[(table + ": " + field)] = fact[field];
    return neue;
}
function humanize(table, fact) {
    var neue = {};
    for (var field in fact)
        neue[field.slice(table.length + 2)] = fact[field];
    return neue;
}
function resolvedAdd(changeset, table, fact) {
    return changeset.add(table, resolve(table, fact));
}
function resolvedRemove(changeset, table, fact) {
    return changeset.remove(table, resolve(table, fact));
}
function humanizedFind(ixer, table, query) {
    var results = [];
    for (var _i = 0, _a = ixer.find(table, resolve(table, query)); _i < _a.length; _i++) {
        var fact = _a[_i];
        results.push(humanize(table, fact));
    }
    var diag = {};
    for (var table_1 in ixer.tables)
        diag[table_1] = ixer.tables[table_1].table.length;
    return results;
}
var UI = (function () {
    function UI(id) {
        this.id = id;
        this._children = [];
        this._attributes = {};
        this._events = {};
    }
    UI.remove = function (template, ixer) {
        var changeset = ixer.diff();
        resolvedRemove(changeset, "ui template", { template: template });
        resolvedRemove(changeset, "ui template binding", { template: template });
        var bindings = humanizedFind(ixer, "ui template binding", { template: template });
        for (var _i = 0; _i < bindings.length; _i++) {
            var binding = bindings[_i];
            changeset.merge(runtime_1.Query.remove(binding.binding, ixer));
        }
        resolvedRemove(changeset, "ui embed", { template: template });
        var embeds = humanizedFind(ixer, "ui embed", { template: template });
        for (var _a = 0; _a < embeds.length; _a++) {
            var embed = embeds[_a];
            resolvedRemove(changeset, "ui embed scope", { template: template, embed: embed.embed });
            resolvedRemove(changeset, "ui embed scope binding", { template: template, embed: embed.embed });
        }
        resolvedRemove(changeset, "ui attribute", { template: template });
        resolvedRemove(changeset, "ui attribute binding", { template: template });
        resolvedRemove(changeset, "ui event", { template: template });
        var events = humanizedFind(ixer, "ui event", { template: template });
        for (var _b = 0; _b < events.length; _b++) {
            var event_1 = events[_b];
            resolvedRemove(changeset, "ui event state", { template: template, event: event_1.event });
            resolvedRemove(changeset, "ui event state binding", { template: template, event: event_1.event });
        }
        for (var _c = 0, _d = humanizedFind(ixer, "ui template", { parent: template }); _c < _d.length; _c++) {
            var child = _d[_c];
            changeset.merge(UI.remove(child.template, ixer));
        }
        return changeset;
    };
    UI.prototype.copy = function () {
        var neue = new UI(this.id);
        neue._binding = this._binding;
        neue._embedded = this._embedded;
        neue._children = this._children;
        neue._attributes = this._attributes;
        neue._events = this._events;
        neue._parent = this._parent;
        return neue;
    };
    UI.prototype.changeset = function (ixer) {
        var changeset = ixer.diff();
        var parent = this._attributes["parent"] || (this._parent && this._parent.id) || "";
        var ix = this._attributes["ix"];
        if (ix === undefined)
            ix = (this._parent && this._parent._children.indexOf(this));
        if (ix === -1 || ix === undefined)
            ix = "";
        if (this._embedded)
            parent = "";
        resolvedAdd(changeset, "ui template", { template: this.id, parent: parent, ix: ix });
        if (this._binding) {
            if (!this._binding.name || this._binding.name === "unknown")
                this._binding.name = "bound view " + this.id;
            changeset.merge(this._binding.changeset(ixer));
            resolvedAdd(changeset, "ui template binding", { template: this.id, binding: this._binding.name });
        }
        if (this._embedded) {
            var embed = utils_1.uuid();
            resolvedAdd(changeset, "ui embed", { embed: embed, template: this.id, parent: (this._parent || {}).id, ix: ix });
            for (var key in this._embedded) {
                var value = this._attributes[key];
                if (value instanceof Array)
                    resolvedAdd(changeset, "ui embed scope binding", { embed: embed, key: key, source: value[0], alias: value[1] });
                else
                    resolvedAdd(changeset, "ui embed scope", { embed: embed, key: key, value: value });
            }
        }
        for (var property in this._attributes) {
            var value = this._attributes[property];
            if (value instanceof Array)
                resolvedAdd(changeset, "ui attribute binding", { template: this.id, property: property, source: value[0], alias: value[1] });
            else
                resolvedAdd(changeset, "ui attribute", { template: this.id, property: property, value: value });
        }
        for (var event_2 in this._events) {
            resolvedAdd(changeset, "ui event", { template: this.id, event: event_2 });
            var state = this._events[event_2];
            for (var key in state) {
                var value = state[key];
                if (value instanceof Array)
                    resolvedAdd(changeset, "ui event state binding", { template: this.id, event: event_2, key: key, source: value[0], alias: value[1] });
                else
                    resolvedAdd(changeset, "ui event state", { template: this.id, event: event_2, key: key, value: value });
            }
        }
        for (var _i = 0, _a = this._children; _i < _a.length; _i++) {
            var child = _a[_i];
            changeset.merge(child.changeset(ixer));
        }
        return changeset;
    };
    UI.prototype.load = function (template, ixer, parent) {
        var fact = humanizedFind(ixer, "ui template", { template: template })[0];
        if (!fact)
            return this;
        if (parent || fact.parent)
            this._parent = parent || new UI(this._parent);
        var binding = humanizedFind(ixer, "ui template binding", { template: template })[0];
        if (binding)
            this.bind((new runtime_1.Query(ixer, binding.binding)));
        var embed = humanizedFind(ixer, "ui embed", { template: template, parent: this._parent ? this._parent.id : "" })[0];
        if (embed) {
            var scope = {};
            for (var _i = 0, _a = humanizedFind(ixer, "ui embed scope", { embed: embed.embed }); _i < _a.length; _i++) {
                var attr = _a[_i];
                scope[attr.key] = attr.value;
            }
            for (var _b = 0, _c = humanizedFind(ixer, "ui embed scope binding", { embed: embed.embed }); _b < _c.length; _b++) {
                var attr = _c[_b];
                scope[attr.key] = [attr.source, attr.alias];
            }
            this.embed(scope);
        }
        for (var _d = 0, _e = humanizedFind(ixer, "ui attribute", { template: template }); _d < _e.length; _d++) {
            var attr = _e[_d];
            this.attribute(attr.property, attr.value);
        }
        for (var _f = 0, _g = humanizedFind(ixer, "ui attribute binding", { template: template }); _f < _g.length; _f++) {
            var attr = _g[_f];
            this.attribute(attr.property, [attr.source, attr.alias]);
        }
        for (var _h = 0, _j = humanizedFind(ixer, "ui event", { template: template }); _h < _j.length; _h++) {
            var event_3 = _j[_h];
            var state = {};
            for (var _k = 0, _l = humanizedFind(ixer, "ui event state", { template: template, event: event_3.event }); _k < _l.length; _k++) {
                var attr = _l[_k];
                state[event_3.key] = event_3.value;
            }
            for (var _m = 0, _o = humanizedFind(ixer, "ui event state binding", { template: template, event: event_3.event }); _m < _o.length; _m++) {
                var attr = _o[_m];
                state[event_3.key] = [event_3.source, event_3.alias];
            }
            this.event(event_3.event, state);
        }
        for (var _p = 0, _q = humanizedFind(ixer, "ui template", { parent: template }); _p < _q.length; _p++) {
            var child = _q[_p];
            this.child((new UI(child.template)).load(child.template, ixer, this));
        }
        return this;
    };
    UI.prototype.children = function (neue, append) {
        if (append === void 0) { append = false; }
        if (!neue)
            return this._children;
        if (!append)
            this._children.length = 0;
        for (var _i = 0; _i < neue.length; _i++) {
            var child = neue[_i];
            var copied = child.copy();
            copied._parent = this;
            this._children.push(copied);
        }
        return this._children;
    };
    UI.prototype.child = function (child, ix, embed) {
        child = child.copy();
        child._parent = this;
        if (embed)
            child.embed(embed);
        if (!ix)
            this._children.push(child);
        else
            this._children.splice(ix, 0, child);
        return child;
    };
    UI.prototype.removeChild = function (ix) {
        return this._children.splice(ix, 1);
    };
    UI.prototype.attributes = function (properties, merge) {
        if (merge === void 0) { merge = false; }
        if (!properties)
            return this._attributes;
        if (!merge) {
            for (var prop in this._attributes)
                delete this._attributes[prop];
        }
        for (var prop in properties)
            this._attributes[prop] = properties[prop];
        return this;
    };
    UI.prototype.attribute = function (property, value) {
        if (value === undefined)
            return this._attributes[property];
        this._attributes[property] = value;
        return this;
    };
    UI.prototype.removeAttribute = function (property) {
        delete this._attributes[property];
        return this;
    };
    UI.prototype.events = function (events, merge) {
        if (merge === void 0) { merge = false; }
        if (!events)
            return this._events;
        if (!merge) {
            for (var event_4 in this._events)
                delete this._events[event_4];
        }
        for (var event_5 in events)
            this._events[event_5] = events[event_5];
        return this;
    };
    UI.prototype.event = function (event, state) {
        if (state === undefined)
            return this._events[event];
        this._attributes[event] = state;
        return this;
    };
    UI.prototype.removeEvent = function (event) {
        delete this._events[event];
        return this;
    };
    UI.prototype.embed = function (scope) {
        if (scope === void 0) { scope = {}; }
        if (!scope) {
            this._embedded = undefined;
            return this;
        }
        if (scope === true)
            scope = {};
        this._embedded = scope;
        return this;
    };
    UI.prototype.bind = function (binding) {
        this._binding = binding;
        return this;
    };
    return UI;
})();
exports.UI = UI;
// @TODO: Finish reference impl.
// @TODO: Then build bit-generating version
var UIRenderer = (function () {
    function UIRenderer(ixer) {
        this.ixer = ixer;
        this.compiled = 0;
        this._tagCompilers = {};
        this._handlers = [];
    }
    UIRenderer.prototype.compile = function (roots) {
        if (utils_1.DEBUG.RENDERER)
            console.group("ui compile");
        var compiledElems = [];
        for (var _i = 0; _i < roots.length; _i++) {
            var root = roots[_i];
            // @TODO: reparent dynamic roots if needed.
            if (typeof root === "string") {
                var elems = this._compileWrapper(root, compiledElems.length);
                compiledElems.push.apply(compiledElems, elems);
                var base = this.ixer.findOne("ui template", { "ui template: template": root });
                if (!base)
                    continue;
                var parent_1 = base["ui template: parent"];
                if (parent_1) {
                    for (var _a = 0; _a < elems.length; _a++) {
                        var elem = elems[_a];
                        elem.parent = parent_1;
                    }
                }
            }
            else {
                if (!root.ix)
                    root.ix = compiledElems.length;
                compiledElems.push(root);
            }
        }
        if (utils_1.DEBUG.RENDERER)
            console.groupEnd();
        return compiledElems;
    };
    UIRenderer.prototype._compileWrapper = function (template, baseIx, constraints, bindingStack, depth) {
        if (constraints === void 0) { constraints = {}; }
        if (bindingStack === void 0) { bindingStack = []; }
        if (depth === void 0) { depth = 0; }
        var elems = [];
        var binding = this.ixer.findOne("ui template binding", { "ui template binding: template": template });
        if (!binding) {
            var elem = this._compileElement(template, bindingStack, depth);
            if (elem)
                elems[0] = elem;
        }
        else {
            var boundQuery = binding["ui template binding: binding"];
            var facts = this.getBoundFacts(boundQuery, constraints);
            var ix = 0;
            for (var _i = 0; _i < facts.length; _i++) {
                var fact = facts[_i];
                bindingStack.push(fact);
                var elem = this._compileElement(template, bindingStack, depth);
                bindingStack.pop();
                if (elem)
                    elems.push(elem);
            }
        }
        elems.sort(function (a, b) { return a.ix - b.ix; });
        var prevIx = undefined;
        for (var _a = 0; _a < elems.length; _a++) {
            var elem = elems[_a];
            elem.ix = elem.ix ? elem.ix + baseIx : baseIx;
            if (elem.ix === prevIx)
                elem.ix++;
            prevIx = elem.ix;
        }
        return elems;
    };
    UIRenderer.prototype._compileElement = function (template, bindingStack, depth) {
        if (utils_1.DEBUG.RENDERER)
            console.log(utils_1.repeat("  ", depth) + "* compile", template);
        var elementToChildren = this.ixer.index("ui template", ["ui template: parent"]);
        var elementToEmbeds = this.ixer.index("ui embed", ["ui embed: parent"]);
        var embedToScope = this.ixer.index("ui embed scope", ["ui embed scope: embed"]);
        var embedToScopeBinding = this.ixer.index("ui embed scope binding", ["ui embed scope binding: embed"]);
        var elementToAttrs = this.ixer.index("ui attribute", ["ui attribute: template"]);
        var elementToAttrBindings = this.ixer.index("ui attribute binding", ["ui attribute binding: template"]);
        var elementToEvents = this.ixer.index("ui event", ["ui event: template"]);
        this.compiled++;
        var base = this.ixer.findOne("ui template", { "ui template: template": template });
        if (!base) {
            console.warn("ui template " + template + " does not exist. Ignoring.");
            return undefined;
        }
        var attrs = elementToAttrs[template];
        var boundAttrs = elementToAttrBindings[template];
        var events = elementToEvents[template];
        // Handle meta properties
        var elem = { _template: template, ix: base["ui template: ix"] };
        // Handle static properties
        if (attrs) {
            for (var _i = 0; _i < attrs.length; _i++) {
                var _a = attrs[_i], prop = _a["ui attribute: property"], val = _a["ui attribute: value"];
                elem[prop] = val;
            }
        }
        // Handle bound properties
        if (boundAttrs) {
            // @FIXME: What do with source?
            for (var _b = 0; _b < boundAttrs.length; _b++) {
                var _c = boundAttrs[_b], prop = _c["ui attribute binding: property"], source = _c["ui attribute binding: source"], alias = _c["ui attribute binding: alias"];
                elem[prop] = this.getBoundValue(source, alias, bindingStack);
            }
        }
        // Attach event handlers
        if (events) {
            for (var _d = 0; _d < events.length; _d++) {
                var event_6 = events[_d]["ui event: event"];
                elem[event_6] = this.generateEventHandler(elem, event_6, bindingStack);
            }
        }
        // Compile children
        var children = elementToChildren[template] || [];
        var embeds = elementToEmbeds[template] || [];
        if (children.length || embeds.length) {
            elem.children = [];
            var childIx = 0, embedIx = 0;
            while (childIx < children.length || embedIx < embeds.length) {
                var child = children[childIx];
                var embed = embeds[embedIx];
                var add = void 0, constraints = {}, childBindingStack = bindingStack;
                if (!embed || child && child.ix <= embed.ix) {
                    add = children[childIx++]["ui template: template"];
                    // Resolve bound aliases into constraints
                    constraints = this.getBoundScope(bindingStack);
                }
                else {
                    add = embeds[embedIx++]["ui embed: template"];
                    for (var _e = 0, _f = embedToScope[embed["ui embed: embed"]] || []; _e < _f.length; _e++) {
                        var scope = _f[_e];
                        constraints[scope["ui embed scope: key"]] = scope["ui embed scope: value"];
                    }
                    for (var _g = 0, _h = embedToScopeBinding[embed["ui embed: embed"]] || []; _g < _h.length; _g++) {
                        var scope = _h[_g];
                        // @FIXME: What do about source?
                        var key = scope["ui embed scope binding: key"], source = scope["ui embed scope binding: source"], alias = scope["ui embed scope binding: alias"];
                        constraints[key] = this.getBoundValue(source, alias, bindingStack);
                    }
                    childBindingStack = [constraints];
                }
                elem.children.push.apply(elem.children, this._compileWrapper(add, elem.children.length, constraints, childBindingStack, depth + 1));
            }
        }
        if (this._tagCompilers[elem.t]) {
            try {
                this._tagCompilers[elem.t](elem);
            }
            catch (err) {
                console.warn("Failed to compile template: '" + template + "' due to '" + err + "' for element '" + JSON.stringify(elem) + "'");
                elem.t = "ui-error";
            }
        }
        return elem;
    };
    UIRenderer.prototype.getBoundFacts = function (query, constraints) {
        return this.ixer.find(query, constraints);
    };
    UIRenderer.prototype.getBoundScope = function (bindingStack) {
        var scope = {};
        for (var _i = 0; _i < bindingStack.length; _i++) {
            var fact = bindingStack[_i];
            for (var alias in fact)
                scope[alias] = fact[alias];
        }
        return scope;
    };
    //@FIXME: What do about source?
    UIRenderer.prototype.getBoundValue = function (source, alias, bindingStack) {
        for (var ix = bindingStack.length - 1; ix >= 0; ix--) {
            var fact = bindingStack[ix];
            if (source in fact && fact[alias])
                return fact[alias];
        }
    };
    UIRenderer.prototype.generateEventHandler = function (elem, event, bindingStack) {
        var template = elem["_template"];
        var memoKey = template + "::" + event;
        var attrKey = event + "::state";
        elem[attrKey] = this.getEventState(template, event, bindingStack);
        if (this._handlers[memoKey])
            return this._handlers[memoKey];
        var self = this;
        if (event === "change" || event === "input") {
            this._handlers[memoKey] = function (evt, elem) {
                var props = {};
                if (elem.t === "select" || elem.t === "input" || elem.t === "textarea")
                    props.value = evt.target.value;
                if (elem.type === "checkbox")
                    props.value = evt.target.checked;
                self.handleEvent(template, event, evt, elem, props);
            };
        }
        else {
            this._handlers[memoKey] = function (evt, elem) {
                self.handleEvent(template, event, evt, elem, {});
            };
        }
        return this._handlers[memoKey];
    };
    UIRenderer.prototype.handleEvent = function (template, eventName, event, elem, eventProps) {
        var attrKey = eventName + "::state";
        var state = elem[attrKey];
        var content = (_a = ["\n      # ", " ({is a: event})\n      ## Meta\n      event target: {event target: ", "}\n      event template: {event template: ", "}\n      event type: {event type: ", "}\n\n      ## State\n    "], _a.raw = ["\n      # ", " ({is a: event})\n      ## Meta\n      event target: {event target: ", "}\n      event template: {event template: ", "}\n      event type: {event type: ", "}\n\n      ## State\n    "], utils_1.unpad(6)(_a, eventName, elem.id, template, eventName));
        if (state["*event*"]) {
            for (var prop in state["*event*"])
                content += prop + ": {" + prop + ": " + eventProps[state["*event*"][prop]] + "}\n";
        }
        for (var prop in state) {
            if (prop === "*event*")
                continue;
            content += prop + ": {" + prop + ": " + state[prop] + "}\n";
        }
        var changeset = this.ixer.diff();
        var raw = utils_1.uuid();
        var entity = eventName + " event " + raw.slice(-12);
        changeset.add("builtin entity", { entity: entity, content: content });
        this.ixer.applyDiff(changeset);
        console.log(entity);
        var _a;
    };
    UIRenderer.prototype.getEventState = function (template, event, bindingStack) {
        var state = {};
        var staticAttrs = this.ixer.find("ui event state", { "ui event state: template": template, "ui event state: event": event });
        for (var _i = 0; _i < staticAttrs.length; _i++) {
            var _a = staticAttrs[_i], key = _a["ui event state: key"], val = _a["ui event state: value"];
            state[key] = val;
        }
        var boundAttrs = this.ixer.find("ui event state binding", { "ui event state binding: template": template, "ui event state binding: event": event });
        for (var _b = 0; _b < boundAttrs.length; _b++) {
            var _c = boundAttrs[_b], key = _c["ui event state binding: key"], source = _c["ui event state binding: source"], alias = _c["ui event state binding: alias"];
            if (source === "*event*") {
                state["*event*"] = state["*event*"] || {};
                state["*event*"][key] = alias;
            }
            else {
                state[key] = this.getBoundValue(source, alias, bindingStack);
            }
        }
        return state;
    };
    return UIRenderer;
})();
exports.UIRenderer = UIRenderer;
if (this.window)
    window["uiRenderer"] = exports;

},{"./runtime":6,"./utils":8}],8:[function(require,module,exports){
var uuid_1 = require("../vendor/uuid");
exports.uuid = uuid_1.v4;
exports.ENV = "browser";
try {
    window;
    window["utils"] = exports;
}
catch (err) {
    exports.ENV = "node";
}
exports.DEBUG = {};
if (exports.ENV === "browser")
    window["DEBUG"] = exports.DEBUG;
function builtinId(name) {
    return "AUTOGENERATED " + name + " THIS SHOULDN'T SHOW UP ANYWHERE";
}
exports.builtinId = builtinId;
exports.unpad = function (indent) {
    if (exports.unpad.memo[indent])
        return exports.unpad.memo[indent];
    return exports.unpad.memo[indent] = function (strings) {
        var values = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            values[_i - 1] = arguments[_i];
        }
        if (!strings.length)
            return;
        var res = "";
        var ix = 0;
        for (var _a = 0; _a < strings.length; _a++) {
            var str = strings[_a];
            res += str + (values.length > ix ? values[ix++] : "");
        }
        if (res[0] === "\n")
            res = res.slice(1);
        var charIx = 0;
        while (true) {
            res = res.slice(0, charIx) + res.slice(charIx + indent);
            charIx = res.indexOf("\n", charIx) + 1;
            if (!charIx)
                break;
        }
        return res;
    };
};
exports.unpad.memo = {};
function repeat(str, length) {
    var len = length / str.length;
    var res = "";
    for (var ix = 0; ix < len; ix++)
        res += str;
    return (res.length > length) ? res.slice(0, length) : res;
}
exports.repeat = repeat;
function underline(startIx, length) {
    return repeat(" ", startIx) + "^" + repeat("~", length - 1);
}
exports.underline = underline;
function capitalize(word) {
    return word[0].toUpperCase() + word.slice(1);
}
exports.capitalize = capitalize;
function titlecase(name) {
    return name.split(" ").map(capitalize).join(" ");
}
exports.titlecase = titlecase;
exports.string = {
    unpad: exports.unpad,
    repeat: repeat,
    underline: underline,
    capitalize: capitalize,
    titlecase: titlecase
};
function tail(arr) {
    return arr[arr.length - 1];
}
exports.tail = tail;
exports.array = {
    tail: tail
};
function coerceInput(input) {
    // http://jsperf.com/regex-vs-plus-coercion
    if (!isNaN(+input))
        return +input;
    else if (input === "true")
        return true;
    else if (input === "false")
        return false;
    return input;
}
exports.coerceInput = coerceInput;
// Shallow copy the given object.
function copy(obj) {
    if (!obj || typeof obj !== "object")
        return obj;
    if (obj instanceof Array)
        return obj.slice();
    var res = {};
    for (var key in obj)
        res[key] = obj[key];
    return res;
}
exports.copy = copy;
function mergeObject(root, obj) {
    for (var key in obj) {
        root[key] = obj[key];
    }
    return root;
}
exports.mergeObject = mergeObject;
function autoFocus(node, elem) {
    if (!node.focused) {
        node.focused = true;
        node.focus();
    }
}
exports.autoFocus = autoFocus;
exports.KEYS = {
    ESC: 27,
    ENTER: 13,
    UP: 38,
    DOWN: 40,
    BACKSPACE: 8,
    "]": 221,
};
// FROM: http://stackoverflow.com/questions/1125292/how-to-move-cursor-to-end-of-contenteditable-entity/3866442#3866442
function setEndOfContentEditable(contentEditableElement) {
    var range, selection;
    if (document.createRange) {
        range = document.createRange(); //Create a range (a range is a like the selection but invisible)
        range.selectNodeContents(contentEditableElement); //Select the entire contents of the element with the range
        range.collapse(false); //collapse the range to the end point. false means collapse to end rather than the start
        selection = window.getSelection(); //get the selection object (allows you to change selection)
        selection.removeAllRanges(); //remove any selections already made
        selection.addRange(range); //make the range you have just created the visible selection
    }
}
exports.setEndOfContentEditable = setEndOfContentEditable;
// LCG courtesy of <https://gist.github.com/Protonk/5389384>
function srand(z) {
    var m = Math.pow(2, 24), a = 16598013, c = 12820163;
    return function () { return z = (a * z + c) % m / m; };
}
exports.srand = srand;
// Shuffle courtesy of <http://stackoverflow.com/a/6274381>
function shuffle(o, rand) {
    if (rand === void 0) { rand = Math.random; }
    for (var j, x, i = o.length; i; j = Math.floor(rand() * i), x = o[--i], o[i] = o[j], o[j] = x)
        ;
    return o;
}
exports.shuffle = shuffle;
function sortByField(field) {
    return function (a, b) {
        return (a[field] === b[field]) ? 0 :
            (a[field] > b[field]) ? -1 :
                (a[field] < b[field]) ? 1 :
                    (a[field] === undefined) ? 1 : -1;
    };
}
exports.sortByField = sortByField;
function sortByLookup(lookup) {
    return function (a, b) {
        return (lookup[a] === lookup[b]) ? 0 :
            (lookup[a] > lookup[b]) ? -1 :
                (lookup[a] < lookup[b]) ? 1 :
                    (lookup[a] === undefined) ? 1 : -1;
    };
}
exports.sortByLookup = sortByLookup;

},{"../vendor/uuid":11}],9:[function(require,module,exports){
var app = require("../src/app");
var nlqp = require("../src/NLQueryParser");
var bootstrap = require("../src/bootstrap");
var dslparser = require("../src/parser");
var app_1 = require("../src/app");
// @HACK needed because browserify is being too clever by
// optimizing away unused code
var boostrapIxer = bootstrap.ixer;
app.renderRoots["nlqp"];
nlqp.debug = true;
function parseTest(queryString, n) {
    var parseResult;
    var avgTime = 0;
    var maxTime = 0;
    var minTime;
    var preTags = nlqp.preprocessQueryString(queryString);
    var pretagsToString = preTags.map(function (pt) { return ("(" + pt.text + "|" + pt.tag + ")"); }).join("");
    // Parse string and measure how long it takes
    for (var i = 0; i < n; i++) {
        var start = performance.now();
        parseResult = nlqp.parse(queryString)[0];
        var stop = performance.now();
        avgTime += stop - start;
        if (stop - start > maxTime) {
            maxTime = stop - start;
        }
        if (minTime === undefined) {
            minTime = stop - start;
        }
        else if (stop - start < minTime) {
            minTime = stop - start;
        }
    }
    // Display result
    var tokenStrings = nlqp.tokenArrayToString(parseResult.tokens);
    var timingDisplay = "Timing (avg, max, min): " + (avgTime / n).toFixed(2) + " | " + maxTime.toFixed(2) + " | " + minTime.toFixed(2) + " ";
    console.log(queryString);
    console.log(pretagsToString);
    console.log("State: " + nlqp.StateFlags[parseResult.state]);
    console.log(parseResult.context);
    console.log("-------------------------------------------------------------------------------------------");
    console.log("Tokens");
    console.log(tokenStrings);
    console.log("-------------------------------------------------------------------------------------------");
    console.log("Tree");
    console.log(parseResult.tree.toString());
    console.log("-------------------------------------------------------------------------------------------");
    console.log("Query");
    console.log("-------------------------------------------------------------------------------------------");
    console.log("Result");
    console.log(queryString);
    console.log(executeQuery(parseResult.query).join("\n"));
    console.log("-------------------------------------------------------------------------------------------");
    console.log(timingDisplay);
    console.log("===========================================================================================");
    return parseResult.state;
}
function executeQuery(query) {
    var resultsString = [];
    if (query.projects.length !== 0) {
        var queryString = query.toString();
        console.log(queryString);
        var artifacts = dslparser.parseDSL(queryString);
        var changeset = app_1.eve.diff();
        var results = [];
        for (var id in artifacts.views) {
            app_1.eve.asView(artifacts.views[id]);
        }
        for (var id in artifacts.views) {
            results.push(artifacts.views[id].exec());
        }
        console.log(results);
        results.forEach(function (result) {
            var projected = result.results;
            if (projected.length === 0) {
                return;
            }
            // Get each cell as a string
            var colWidths = [];
            var keys = Object.keys(projected[0]);
            keys.forEach(function (key) { colWidths.push(key.length); });
            var rows = projected.map(function (row) {
                var rowstring = keys.map(function (key, i) {
                    if (key === "__id") {
                        return "";
                    }
                    var value = "" + row[key];
                    var display = app_1.eve.findOne("display name", { id: value });
                    if (display !== undefined) {
                        value = display.name;
                    }
                    // Get the width of each row
                    if (colWidths[i] < value.length) {
                        colWidths[i] = value.length;
                    }
                    return value;
                });
                return rowstring;
            });
            // Turn rows into row strings
            var rowStrings = rows.map(function (row) {
                row = row.map(function (cell, i) {
                    var whitespace = Array(colWidths[i] - cell.length + 1).join(" ");
                    cell += whitespace;
                    return cell;
                });
                return "| " + row.join(" | ");
            });
            // Add a table header
            var tableHeader = "| " + keys.map(function (key, i) {
                if (key === "__id") {
                    return "";
                }
                var whitespace = Array(colWidths[i] - key.length + 1).join(" ");
                return key.toUpperCase() + whitespace;
            }).join(" | ");
            var divider = Array(tableHeader.length).join("-");
            var resultTable = divider += "\n" + tableHeader + "\n" + divider + "\n" + rowStrings.join("\n") + "\n" + divider;
            resultsString.push(resultTable);
        });
    }
    return resultsString;
}
var n = 1;
var phrases = [
    // -------------------------------
    // These are queries that we had problems with in the past
    // make sure they always work
    // -------------------------------
    //"sum of employee salaries",
    "+ 1 3"
];
/*
let siriphrases = [
  "Find videos I took at Iva's birthday party",
  "Find pics from my trip to Aspen in 2014",
  "Find a table for four people tonight in Chicago",
  "Find a table for four tonight in Chicago",
  "How is the weather tomorrow?",
  "Wake me up at 7AM tomorrow",
  "Move my 2PM meeting to 2:30",
  "Do I have any new texts from Rick?",
  "Show my selfies from New Year's Eve",
  "Call Dad at work",
  "Aiesha Turner is my mom",
  "Read my latest email",
  "Text peet 'See you soon smiley exlamation point'",
  "What is trending on Twitter?",
  "Call back my last missed call.",
  "Where is Brian?",
  "Find tweets with the hashtag BayBridge",
  "Read my last message from Andrew",
  "Do I have any new voicemail?",
  "FaceTime Sarah",
  "Redial that last number",
  "Play the last voicemail from Aaron",
  "When did Ingrid call me?",
  "Get my call history",
  "Mark the third one complete",
  "Add Greg to my 2:30 meeting on Thursday",
  "Remind me about this email Friday at noon", // noon should be a quantity
  "Create a new list called Groceries", // why isn't a|DT includeded in "a new list"
  "Where is my next meeting?", // How can we make meeting a noun?
  "Set an alarm for 9 AM every Friday", // AM needs to be special cased to attach to 9
  "Cancel my meetings on Friday", // Cancel needs to be a verb
  "Turn off all my alarms",
  "Add brussels sprouts to my grocery list",
  "Remind me to pay Noah back tomorrow morning",
  // Sports
  "When is the next Mavericks home game?",
  "Who is the quarterback for Dallas?",
  "Who has the most RBIs",
  "Who won the NBA finals?",
  "Where is Wrigley Field?",
  "How many regular-season games does each NBA team play?",
  "When is the LA Galaxy's next home game?",
  "Who do the Chicago Cubs play on September 21?", // 21 needs to merge with September
  "When does the football season start?",
  "What hockey teams play today?",
  "Did the Chicago cubs win on Thursday?",
  // Entertainment
  "Play Third Eye Blind's new album",
  "Play more like this",
  "Play the number one song right now", // Needs help with noun grouping tag accuracy
  "What song is playing right now?", // right now is problematic
  "What movies are playing today?",
  "Where is Unbroken playing around here?", // playing around here is problematic
  "I like this song",
  "What are some PG movies playing this afternoon",
  "Who sings this?", // tags are all wrong, heuristics don't help it
  "I want to hear the live version of this song",
  "Play only songs by Nicki Minaj",
  "What won best picture in 2000?",
  "How are the ratings for The Boxtrolls?",
  "Who directed A Perfect World?",
  "Do people like The Theory of Everything?",
  // Out and about (aka Foursquare queries)
  "Where is a good Indian place around here?", // "place around here" is tagged wrong, heuristics don't help
  "I am running low on gas",
  "What time does Whole Foods close?",
  "Give me public transit direction to the De Young Museum", // Public is tagged a verb
  "Where is a good inexpensive place to eat around here?", // "To eat aroung here" is not recognized
  "Make a reservation at a romantic restaurant tonight at 7PM",
  "Find a happy hour nearby", // nearby should be an adverb?
  "Find coffee near me",
  "What planes are flying above me?", // Tags are all wrong: planes is a verb, flying is an adverb
  "I need some aspirin",
  "How are the reviews for Long Bridge Pizza in San Francisco?",
  "Where is a good hair salon?",
  "What's the best retaurant in San Francisco?",
  "I need a good electrician",
  "Where am I?",
  "What is my ETA?",
  // Homekit
  "Turn the lights blue",
  "Turn off the radio", // "off" should be a particle
  "Turn off the printer in the office", // "off" should be a particle
  "Lock the front door", // front is classified a noun, should be an adhective
  "Set the brightness of the downstairs lights to 50%",
  "Set the Tahoe house to 72 degrees", // house is a verb
  "Turn off Chloe's light", // "off" should be a particle
  "Turn the living room lights all the way up", // lights is a verb
  "Turn on the bathroom heater",
  // Getting answers
  "Do I need an umbrella today?",
  "How is the Nikkei doing?",
  "When is daylight saving time?",
  "What is the definition of pragmatic?", // "pragmatic is an adjective"
  "What's the latest in San Francisco?",
  "Did the groundhog see its shadow?",
  "When is sunset in Paris", // sunset should be a noun
  "What is the population of Jamaica?",
  "What is the square root of 128?",
  "What is 40 degrees Farenheit in Celsius", // Here is an example where the proper noun combining heuristic fails
  "What is the temperature outside?", // outside is a preposition
  "What time is it in Berlin",
  "When was Abraham Lincoln born?", // This will get Abraham Lincoln, but we need to use "when" and "born" to figure out a date is expected
  "Show me the Orion constellation",
  "What's the high for Anchorage on Thursday?", // This breaks noun combining heuristic
  "How many dollars is 45 Euros",
  "What day is it?",
  "How many calories in a bagel?",
  "What is Apple's P/E ratio?",
  "Compare AAPL and NASDAQ",
  "How humid is it in New York right now", // Heuristics mess up tagging, "is" is a noun in order to use "humid" as an adjective
  "What's an 18% tip on $85?",
  "What is the UV index outside?",
  "How many cups in a liter",
  "Is it going to snow next week?",
];
*/
app.init("nlqp", function () {
    console.log("Running " + phrases.length + " tests...");
    console.log("===========================================================================================");
    var queryStates = phrases.map(function (phrase) { return parseTest(phrase, n); });
    var complete = queryStates.filter(function (state) { return state === nlqp.StateFlags.COMPLETE; }).length;
    var moreinfo = queryStates.filter(function (state) { return state === nlqp.StateFlags.MOREINFO; }).length;
    var noresult = queryStates.filter(function (state) { return state === nlqp.StateFlags.NORESULT; }).length;
    console.log("===========================================================================================");
    console.log("Total Queries: " + phrases.length + " | Complete: " + complete + " | MoreInfo: " + moreinfo + " | NoResult: " + noresult);
    console.log("===========================================================================================");
});

},{"../src/NLQueryParser":1,"../src/app":2,"../src/bootstrap":3,"../src/parser":5}],10:[function(require,module,exports){

},{}],11:[function(require,module,exports){
//     uuid.js
//
//     Copyright (c) 2010-2012 Robert Kieffer
//     MIT License - http://opensource.org/licenses/mit-license.php

(function() {
  var _global = this;

  // Unique ID creation requires a high quality random # generator.  We feature
  // detect to determine the best RNG source, normalizing to a function that
  // returns 128-bits of randomness, since that's what's usually required
  var _rng;

  // Node.js crypto-based RNG - http://nodejs.org/docs/v0.6.2/api/crypto.html
  //
  // Moderately fast, high quality
  if (typeof(_global.require) == 'function') {
    try {
      var _rb = _global.require('crypto').randomBytes;
      _rng = _rb && function() {return _rb(16);};
    } catch(e) {}
  }

  if (!_rng && _global.crypto && crypto.getRandomValues) {
    // WHATWG crypto-based RNG - http://wiki.whatwg.org/wiki/Crypto
    //
    // Moderately fast, high quality
    var _rnds8 = new Uint8Array(16);
    _rng = function whatwgRNG() {
      crypto.getRandomValues(_rnds8);
      return _rnds8;
    };
  }

  if (!_rng) {
    // Math.random()-based (RNG)
    //
    // If all else fails, use Math.random().  It's fast, but is of unspecified
    // quality.
    var  _rnds = new Array(16);
    _rng = function() {
      for (var i = 0, r; i < 16; i++) {
        if ((i & 0x03) === 0) r = Math.random() * 0x100000000;
        _rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;
      }

      return _rnds;
    };
  }

  // Buffer class to use
  var BufferClass = typeof(_global.Buffer) == 'function' ? _global.Buffer : Array;

  // Maps for number <-> hex string conversion
  var _byteToHex = [];
  var _hexToByte = {};
  for (var i = 0; i < 256; i++) {
    _byteToHex[i] = (i + 0x100).toString(16).substr(1);
    _hexToByte[_byteToHex[i]] = i;
  }

  // **`parse()` - Parse a UUID into it's component bytes**
  function parse(s, buf, offset) {
    var i = (buf && offset) || 0, ii = 0;

    buf = buf || [];
    s.toLowerCase().replace(/[0-9a-f]{2}/g, function(oct) {
      if (ii < 16) { // Don't overflow!
        buf[i + ii++] = _hexToByte[oct];
      }
    });

    // Zero out remaining bytes if string was short
    while (ii < 16) {
      buf[i + ii++] = 0;
    }

    return buf;
  }

  // **`unparse()` - Convert UUID byte array (ala parse()) into a string**
  function unparse(buf, offset) {
    var i = offset || 0, bth = _byteToHex;
    return  bth[buf[i++]] + bth[buf[i++]] +
            bth[buf[i++]] + bth[buf[i++]] + '-' +
            bth[buf[i++]] + bth[buf[i++]] + '-' +
            bth[buf[i++]] + bth[buf[i++]] + '-' +
            bth[buf[i++]] + bth[buf[i++]] + '-' +
            bth[buf[i++]] + bth[buf[i++]] +
            bth[buf[i++]] + bth[buf[i++]] +
            bth[buf[i++]] + bth[buf[i++]];
  }

  // **`v1()` - Generate time-based UUID**
  //
  // Inspired by https://github.com/LiosK/UUID.js
  // and http://docs.python.org/library/uuid.html

  // random #'s we need to init node and clockseq
  var _seedBytes = _rng();

  // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)
  var _nodeId = [
    _seedBytes[0] | 0x01,
    _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]
  ];

  // Per 4.2.2, randomize (14 bit) clockseq
  var _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;

  // Previous uuid creation time
  var _lastMSecs = 0, _lastNSecs = 0;

  // See https://github.com/broofa/node-uuid for API details
  function v1(options, buf, offset) {
    var i = buf && offset || 0;
    var b = buf || [];

    options = options || {};

    var clockseq = options.clockseq != null ? options.clockseq : _clockseq;

    // UUID timestamps are 100 nano-second units since the Gregorian epoch,
    // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so
    // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'
    // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.
    var msecs = options.msecs != null ? options.msecs : new Date().getTime();

    // Per 4.2.1.2, use count of uuid's generated during the current clock
    // cycle to simulate higher resolution clock
    var nsecs = options.nsecs != null ? options.nsecs : _lastNSecs + 1;

    // Time since last uuid creation (in msecs)
    var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;

    // Per 4.2.1.2, Bump clockseq on clock regression
    if (dt < 0 && options.clockseq == null) {
      clockseq = clockseq + 1 & 0x3fff;
    }

    // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new
    // time interval
    if ((dt < 0 || msecs > _lastMSecs) && options.nsecs == null) {
      nsecs = 0;
    }

    // Per 4.2.1.2 Throw error if too many uuids are requested
    if (nsecs >= 10000) {
      throw new Error('uuid.v1(): Can\'t create more than 10M uuids/sec');
    }

    _lastMSecs = msecs;
    _lastNSecs = nsecs;
    _clockseq = clockseq;

    // Per 4.1.4 - Convert from unix epoch to Gregorian epoch
    msecs += 12219292800000;

    // `time_low`
    var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;
    b[i++] = tl >>> 24 & 0xff;
    b[i++] = tl >>> 16 & 0xff;
    b[i++] = tl >>> 8 & 0xff;
    b[i++] = tl & 0xff;

    // `time_mid`
    var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;
    b[i++] = tmh >>> 8 & 0xff;
    b[i++] = tmh & 0xff;

    // `time_high_and_version`
    b[i++] = tmh >>> 24 & 0xf | 0x10; // include version
    b[i++] = tmh >>> 16 & 0xff;

    // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)
    b[i++] = clockseq >>> 8 | 0x80;

    // `clock_seq_low`
    b[i++] = clockseq & 0xff;

    // `node`
    var node = options.node || _nodeId;
    for (var n = 0; n < 6; n++) {
      b[i + n] = node[n];
    }

    return buf ? buf : unparse(b);
  }

  // **`v4()` - Generate random UUID**

  // See https://github.com/broofa/node-uuid for API details
  function v4(options, buf, offset) {
    // Deprecated - 'format' argument, as supported in v1.2
    var i = buf && offset || 0;

    if (typeof(options) == 'string') {
      buf = options == 'binary' ? new BufferClass(16) : null;
      options = null;
    }
    options = options || {};

    var rnds = options.random || (options.rng || _rng)();

    // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`
    rnds[6] = (rnds[6] & 0x0f) | 0x40;
    rnds[8] = (rnds[8] & 0x3f) | 0x80;

    // Copy bytes to buffer, if provided
    if (buf) {
      for (var ii = 0; ii < 16; ii++) {
        buf[i + ii] = rnds[ii];
      }
    }

    return buf || unparse(rnds);
  }

  // Export public API
  var uuid = v4;
  uuid.v1 = v1;
  uuid.v4 = v4;
  uuid.parse = parse;
  uuid.unparse = unparse;
  uuid.BufferClass = BufferClass;

  if (typeof define === 'function' && define.amd) {
    // Publish as AMD module
    define(function() {return uuid;});
  } else if (typeof(module) != 'undefined' && module.exports) {
    // Publish as node.js module
    module.exports = uuid;
  } else {
    // Publish as global (in browsers)
    var _previousRoot = _global.uuid;

    // **`noConflict()` - (browser only) to reset global 'uuid' var**
    uuid.noConflict = function() {
      _global.uuid = _previousRoot;
      return uuid;
    };

    _global.uuid = uuid;
  }
}).call(this);

},{}]},{},[9,10])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvTkxRdWVyeVBhcnNlci50cyIsInNyYy9hcHAudHMiLCJzcmMvYm9vdHN0cmFwLnRzIiwic3JjL21pY3JvUmVhY3QudHMiLCJzcmMvcGFyc2VyLnRzIiwic3JjL3J1bnRpbWUudHMiLCJzcmMvdWlSZW5kZXJlci50cyIsInNyYy91dGlscy50cyIsInRlc3QvTkxRUFRlc3QudHMiLCJ0eXBpbmdzL3RzZC5kLnRzIiwidmVuZG9yL3V1aWQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxvQkFBa0IsT0FBTyxDQUFDLENBQUE7QUFtQjFCLFdBQVksVUFBVTtJQUNwQixtREFBUSxDQUFBO0lBQ1IsbURBQVEsQ0FBQTtJQUNSLG1EQUFRLENBQUE7QUFDVixDQUFDLEVBSlcsa0JBQVUsS0FBVixrQkFBVSxRQUlyQjtBQUpELElBQVksVUFBVSxHQUFWLGtCQUlYLENBQUE7QUFFRCx1QkFBdUI7QUFDdkIsZUFBc0IsV0FBbUI7SUFDdkMsSUFBSSxTQUFTLEdBQUcscUJBQXFCLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDbkQsSUFBSSxNQUFNLEdBQUcsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ25DLElBQUksS0FBa0IsUUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUFqQyxJQUFJLFlBQUUsT0FBTyxhQUFvQixDQUFDO0lBQ3ZDLElBQUksS0FBSyxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM1Qiw2QkFBNkI7SUFDN0IsSUFBSSxJQUFnQixDQUFDO0lBQ3JCLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVELElBQUksR0FBRyxVQUFVLENBQUMsUUFBUSxDQUFDO0lB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TSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQztJQUNyQyxDQUFDO0lBQ0QsT0FBTztJQUNQLEVBQUUsQ0FBQyxDQUFDLGlCQUFpQixLQUFLLGtCQUFrQixDQUFDLEVBQUU7UUFDM0MsaUJBQWlCLEtBQUssa0JBQWtCLENBQUMsRUFBRTtRQUMzQyxpQkFBaUIsS0FBSyxrQkFBa0IsQ0FBQyxFQUFFO1FBQzNDLGlCQUFpQixLQUFLLGtCQUFrQixDQUFDLEVBQUU7UUFDM0MsaUJBQWlCLEtBQUssa0JBQWtCLENBQUMsRUFBRTtRQUMzQyxpQkFBaUIsS0FBSyxrQkFBa0IsQ0FBQyxHQUFHO1FBQzVDLGlCQUFpQixLQUFLLGtCQUFrQixDQUFDLEVBQUU7UUFDM0MsaUJBQWlCLEtBQUssa0JBQWtCLENBQUMsRUFBRTtRQUMzQyxpQkFBaUIsS0FBSyxrQkFBa0IsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzVDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUM7SUFDckMsQ0FBQztJQUNELFNBQVM7SUFDVCxFQUFFLENBQUMsQ0FBQyxpQkFBaUIsS0FBSyxrQkFBa0IsQ0FBQyxFQUFFO1FBQzNDLGlCQUFpQixLQUFLLGtCQUFrQixDQUFDLEVBQUU7UUFDM0MsaUJBQWlCLEtBQUssa0JBQWtCLENBQUMsR0FBRztRQUM1QyxpQkFBaUIsS0FBSyxrQkFBa0IsQ0FBQyxHQUFHO1FBQzVDLGlCQUFpQixLQUFLLGtCQUFrQixDQUFDLEVBQUU7UUFDM0MsaUJBQWlCLEtBQUssa0JBQWtCLENBQUMsR0FBRztRQUM1QyxpQkFBaUIsS0FBSyxrQkFBa0IsQ0FBQyxJQUFJO1FBQzdDLGlCQUFpQixLQUFLLGtCQUFrQixDQUFDLEtBQUs7UUFDOUMsaUJBQWlCLEtBQUssa0JBQWtCLENBQUMsR0FBRztRQUM1QyxpQkFBaUIsS0FBSyxrQkFBa0IsQ0FBQyxHQUFHO1FBQzVDLGlCQUFpQixLQUFLLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDN0MsTUFBTSxDQUFDLGtCQUFrQixDQUFDLE1BQU0s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QUN0QyxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsRUFBRSxLQUFLLFNBQVMsR0FBRyxJQUFJLEdBQU0sSUFBSSxDQUFDLEVBQUUsT0FBSSxDQUFDO1FBQzFELElBQUksVUFBVSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsTUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxVQUFDLFFBQW9CLElBQUssT0FBQSxVQUFVLENBQUMsUUFBUSxDQUFDLEVBQXBCLENBQW9CLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQUcsQ0FBQztRQUMxSSxJQUFJLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxLQUFLLFNBQVMsR0FBRyxFQUFFLEdBQUcsTUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsVUFBSyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssUUFBSyxDQUFDO1FBQzlHLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLEtBQUssU0FBUyxHQUFHLEVBQUUsR0FBRyxNQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxPQUFJLENBQUM7UUFDOUUsSUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsS0FBSyxTQUFTLEdBQUcsRUFBRSxHQUFHLE1BQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLE9BQUksQ0FBQztRQUMxRixJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxLQUFLLFNBQVMsR0FBRyxFQUFFLEdBQUcsTUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksT0FBSSxDQUFDO1FBQzlELElBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUM7UUFDOUQsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ25DLElBQUksa0JBQWtCLEdBQUcsS0FBSyxLQUFLLEdBQUcsR0FBRyxLQUFHLFVBQVksR0FBRyxLQUFHLE9BQU8sR0FBRyxHQUFHLEdBQUcsTUFBTSxHQUFHLFVBQVUsR0FBRyxTQUFXLENBQUM7UUFDaEgsVUFBVSxHQUFHLFVBQVUsQ0FBQyxNQUFNLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxVQUFVLENBQUM7UUFDdkQsSUFBSSxVQUFVLEdBQUcsTUFBSSxLQUFLLEdBQUcsTUFBTSxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxTQUFJLGtCQUFrQixHQUFHLFFBQVUsQ0FBQztRQUMzRixNQUFNLENBQUMsVUFBVSxDQUFDO0lBQ3BCLENBQUM7SUFDRCxNQUFNLENBQUMsSUFBSSxDQUFDO0FBQ2QsQ0FBQztBQUVELHNDQUFzQztBQUN0QyxzQ0FBc0M7QUFDdEMsc0NBQXNDO0FBRXRDLG9EQUFvRDtBQUNwRCwwQ0FBMEM7QUFDMUMsZ0JBQWdCLElBQVUsRUFBRSxNQUFZO0lBQ3RDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbEUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN4QixDQUFDO0FBRUQsK0JBQStCO0FBQy9CLDhDQUE4QztBQUM5Qyx3REFBd0Q7QUFDeEQsb0JBQW9CLElBQVU7SUFDNUIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLE1BQU0sQ0FBQyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBQ0QsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sS0FBSyxTQUFTLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM1RCxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUNELElBQUksTUFBTSxHQUFTLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDL0IsSUFBSSxRQUFRLEdBQWdCLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDMUMsU0FBUztJQUNULE1BQU0sQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDbkQsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBQyxDQUFDLEVBQUMsQ0FBQyxJQUFLLE9BQUEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFYLENBQVcsQ0FBQyxDQUFDO0lBQzNDLFFBQVEsQ0FBQyxHQUFHLENBQUMsVUFBQyxLQUFLLElBQUssT0FBQSxLQUFLLENBQUMsTUFBTSxHQUFHLE1BQU0sRUFBckIsQ0FBcUIsQ0FBQyxDQUFDO0lBQy9DLHdDQUF3QztJQUN4QyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQztJQUN4RCxJQUFJLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQztJQUN4QixJQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztJQUNuQixNQUFNLENBQUMsSUFBSSxDQUFDO0FBQ2QsQ0FBQztBQUdELHNEQUFzRDtBQUN0RCwyQkFBMkIsSUFBVSxFQUFFLGVBQXlCO0lBQzlELEVBQUUsQ0FBQyxDQUFDLGVBQWUsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO1FBQ2xDLGVBQWUsR0FBRyxLQUFLLENBQUM7SUFDMUIsQ0FBQztJQUNELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztRQUM5QixNQUFNLENBQUMsU0FBUyxDQUFDO0lBQ25CLENBQUM7SUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxlQUFlLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUUsQ0FBQztRQUNqSSxNQUFNLENBQUMsU0FBUyxDQUFDO0lBQ25CLENBQUM7SUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQztRQUMxQyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDO1FBQzdDLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUQsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDckIsQ0FBQztJQUFDLElBQUksQ0FBQyxDQUFDO1FBQ04sTUFBTSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUMsZUFBZSxDQUFDLENBQUM7SUFDeEQsQ0FBQztBQUNILENBQUM7QUFFRCxxREFBcUQ7QUFDckQsZ0NBQWdDO0FBQ2hDLGlDQUFpQztBQUNqQywyQ0FBMkM7QUFDM0MseUJBQXlCLElBQVUsRUFBRSxNQUFZO0lBQy9DLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0lBQ3JCLElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQztJQUNoQyxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxVQUFDLENBQUMsSUFBSyxPQUFBLENBQUMsQ0FBQyxNQUFNLEdBQUcsSUFBSSxFQUFmLENBQWUsQ0FBQyxDQUFDO0lBQzVDLE1BQU0sQ0FBQyxRQUFRLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUMzQixDQUFDO0FBRUQsaURBQWlEO0FBQ2pELHVCQUF1QixJQUFVO0lBQy9CLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDOUIsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDaEIsQ0FBQztJQUNELElBQUksQ0FBQyxDQUFDO1FBQ0osSUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDbEQsSUFBSSxTQUFTLEdBQUcsa0JBQWtCLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDL0MsTUFBTSxDQUFDLFNBQVMsQ0FBQztJQUNuQixDQUFDO0FBQ0gsQ0FBQztBQUVEOzs7Ozs7Ozs7OztHQVdHO0FBRUgsb0RBQW9EO0FBQ3BELHlDQUF5QztBQUN6QyxnQ0FBZ0MsSUFBVSxFQUFFLFFBQW9CO0lBQzlELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QyxNQUFNLENBQUMsU0FBUyxDQUFDO0lBQ25CLENBQUM7SUFDRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDckIsQ0FBQztJQUFDLElBQUksQ0FBQyxDQUFDO1FBQ04sTUFBTSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUMsUUFBUSxDQUFDLENBQUM7SUFDdEQsQ0FBQztBQUNILENBQUM7QUFFRCxvREFBb0Q7QUFDcEQseUNBQXlDO0FBQ3pDLCtCQUErQixJQUFVLEVBQUUsUUFBb0I7SUFDN0QsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvQixNQUFNLENBQUMsU0FBUyxDQUFDO0lBQ25CLENBQUM7SUFDRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvQixNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUFDLElBQUksQ0FBQyxDQUFDO1FBQ04sSUFBSSxvQkFBb0IsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFDLEtBQUssSUFBSyxPQUFBLEtBQUssQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLEVBQTNCLENBQTJCLENBQUMsQ0FBQztRQUN4RixFQUFFLENBQUMsQ0FBQyxvQkFBb0IsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ3ZDLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQyxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDTixJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxVQUFDLEtBQUssSUFBSyxPQUFBLHFCQUFxQixDQUFDLEtBQUssRUFBQyxRQUFRLENBQUMsRUFBckMsQ0FBcUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxVQUFDLE1BQU0sSUFBSyxPQUFBLE1BQU0sS0FBSyxTQUFTLEVBQXBCLENBQW9CLENBQUMsQ0FBQztZQUMzSCxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZCLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDcEIsQ0FBQztRQUNILENBQUM7SUFDSCxDQUFDO0FBQ0gsQ0FBQztBQUVELCtDQUErQztBQUMvQyx5Q0FBeUM7QUFDekMsMkJBQTJCLElBQVUsRUFBRSxRQUE0QjtJQUNqRSxFQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQzVELE1BQU0sQ0FBQyxTQUFTLENBQUM7SUFDbkIsQ0FBQztJQUNELEVBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ3BELE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLENBQUM7SUFBQyxJQUFJLENBQUMsQ0FBQztRQUNOLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2pELENBQUM7QUFDSCxDQUFDO0FBRUQ7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBaUJHO0FBRUgsK0NBQStDO0FBQy9DLG1EQUFtRDtBQUNuRCw4Q0FBOEM7QUFDOUMsNENBQTRDO0FBQzVDLHlCQUF5QixJQUFVO0lBQ2pDLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDekIsd0JBQXdCO0lBQ3hCLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN4QyxNQUFNLENBQUM7SUFDVCxDQUFDO0lBQ0QsY0FBYztJQUNkLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQTtJQUMzQixNQUFNLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztJQUNyQixxQ0FBcUM7SUFDckMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUM7SUFDeEQsZUFBZTtJQUNmLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDN0MsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2hDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEUsQ0FBQztBQUdELGtEQUFrRDtBQUNsRCw0REFBNEQ7QUFDNUQsc0NBQXNDO0FBQ3RDLHdCQUF3QixJQUFVO0lBQ2hDLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDekIsSUFBSSxPQUFPLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUM1QixFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDeEMsTUFBTSxDQUFDO0lBQ1QsQ0FBQztJQUNELE1BQU0sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO0lBQ3JCLE1BQU0sQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUNoQyxPQUFPLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQztJQUM1RCxJQUFJLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQztJQUN0QixJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDekIsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDOUIsQ0FBQztBQUVELFdBQVksYUFBYTtJQUN2QixxREFBTSxDQUFBO0lBQ04sMkRBQVMsQ0FBQTtJQUNULHVEQUFPLENBQUE7SUFDUCwyREFBUyxDQUFBO0FBQ1gsQ0FBQyxFQUxXLHFCQUFhLEtBQWIscUJBQWEsUUFLeEI7QUFMRCxJQUFZLGFBQWEsR0FBYixxQkFLWCxDQUFBO0FBMEJEO0lBQ0UsTUFBTSxDQUFDO1FBQ0wsUUFBUSxFQUFFLEVBQUU7UUFDWixXQUFXLEVBQUUsRUFBRTtRQUNmLFVBQVUsRUFBRSxFQUFFO1FBQ2QsSUFBSSxFQUFFLEVBQUU7UUFDUixTQUFTLEVBQUUsRUFBRTtRQUNiLGFBQWEsRUFBRSxFQUFFO1FBQ2pCLGFBQWEsRUFBRSxFQUFFO1FBQ2pCLGVBQWUsRUFBRSxFQUFFO1FBQ25CLGdCQUFnQixFQUFFLEVBQUU7UUFDcEIsY0FBYyxFQUFFLEVBQUU7UUFDbEIsY0FBYyxFQUFFLEVBQUU7S0FDbkIsQ0FBQztBQUNKLENBQUM7QUFFRCx3QkFBd0IsSUFBWTtJQUNsQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ2IsS0FBSyxRQUFRO1lBQ1gsTUFBTSxDQUFDLEVBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsYUFBYSxDQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLENBQUM7UUFDMUcsS0FBSyxTQUFTO1lBQ1osTUFBTSxDQUFDLEVBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsYUFBYSxDQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLENBQUM7UUFDMUcsS0FBSyxRQUFRO1lBQ1gsTUFBTSxDQUFDLEVBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsYUFBYSxDQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLENBQUM7UUFDMUcsS0FBSyxTQUFTO1lBQ1osTUFBTSxDQUFDLEVBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsYUFBYSxDQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLENBQUM7UUFDdkcsS0FBSyxLQUFLO1lBQ1IsTUFBTSxDQUFDLEVBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsYUFBYSxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsQ0FBQztRQUNoRixLQUFLLElBQUk7WUFDUCxNQUFNLENBQUMsRUFBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxhQUFhLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxDQUFDO1FBQy9FLEtBQUssT0FBTyxDQUFDO1FBQ2IsS0FBSyxLQUFLO1lBQ1IsTUFBTSxDQUFDLEVBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsYUFBYSxDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBQyxDQUFDO1FBQy9GLEtBQUssU0FBUyxDQUFDO1FBQ2YsS0FBSyxLQUFLLENBQUM7UUFDWCxLQUFLLE1BQU07WUFDVCxNQUFNLENBQUMsRUFBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxhQUFhLENBQUMsU0FBUyxFQUFFLE1BQU0sRUFBRSxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFDLENBQUM7UUFDdkcsS0FBSyxNQUFNLENBQUM7UUFDWixLQUFLLEtBQUssQ0FBQztRQUNYLEtBQUssR0FBRztZQUNOLE1BQU0sQ0FBQyxFQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLGFBQWEsQ0FBQyxTQUFTLEVBQUUsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFDLENBQUM7UUFDakcsS0FBSyxVQUFVLENBQUM7UUFDaEIsS0FBSyxPQUFPLENBQUM7UUFDYixLQUFLLEdBQUc7WUFDTixNQUFNLENBQUMsRUFBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxhQUFhLENBQUMsU0FBUyxFQUFFLE1BQU0sRUFBRSxDQUFDLFFBQVEsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBQyxDQUFDO1FBQ2pHLEtBQUssT0FBTyxDQUFDO1FBQ2IsS0FBSyxVQUFVLENBQUM7UUFDaEIsS0FBSyxZQUFZLENBQUM7UUFDbEIsS0FBSyxHQUFHO1lBQ04sTUFBTSxDQUFDLEVBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsYUFBYSxDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUMsQ0FBQztRQUNqRyxLQUFLLFFBQVEsQ0FBQztRQUNkLEtBQUssU0FBUyxDQUFDO1FBQ2YsS0FBSyxHQUFHO1lBQ04sTUFBTSxDQUFDLEVBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsYUFBYSxDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUMsQ0FBQztRQUNqRztZQUNFLE1BQU0sQ0FBQyxTQUFTLENBQUM7SUFDckIsQ0FBQztBQUNILENBQUM7QUFFRCxrQkFBa0IsTUFBb0I7SUFDcEMsSUFBSSxJQUFVLENBQUM7SUFDZixJQUFJLGFBQWEsR0FBZ0IsRUFBRSxDQUFDO0lBRXBDLHlCQUF5QjtJQUN6QixJQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLFVBQUMsS0FBSyxJQUFLLE9BQUEsS0FBSyxDQUFDLElBQUksS0FBSyxTQUFTLEVBQXhCLENBQXdCLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFNUUsd0NBQXdDO0lBQ3hDLE1BQU0sQ0FBQyxHQUFHLENBQUMsVUFBQyxLQUFLO1FBQ2YsSUFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQztRQUN0QixJQUFJLEdBQUcsR0FBRyxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3BDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ3RCLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQ2YsR0FBRyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7WUFDaEIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLGFBQWEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO2dCQUM5QyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDN0MsQ0FBQztZQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksS0FBSyxhQUFhLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztnQkFDckQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzdDLENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQyxDQUFDLENBQUM7SUFFSCx3QkFBd0I7SUFDeEIsS0FBSyxDQUFDLEdBQUcsQ0FBQyxVQUFDLFFBQVEsRUFBQyxDQUFDO1FBQ25CLElBQUksUUFBUSxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDNUIsRUFBRSxDQUFDLENBQUMsUUFBUSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDM0IsUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUM5QixDQUFDO0lBQ0gsQ0FBQyxDQUFDLENBQUE7SUFFRixtREFBbUQ7SUFDbkQsS0FBSyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsVUFBQyxJQUFJLElBQUssT0FBQSxJQUFJLENBQUMsTUFBTSxLQUFLLFNBQVMsRUFBekIsQ0FBeUIsQ0FBQyxDQUFDO0lBQzFELElBQUksR0FBRyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUM7SUFFbkIseUJBQXlCLElBQVUsRUFBRSxPQUFnQjtRQUNuRCxJQUFJLFlBQTBCLENBQUM7UUFFL0IsS0FBSyxFQUNMLE9BQU8sSUFBSSxLQUFLLFNBQVMsRUFBRSxDQUFDO1lBQzFCLE9BQU8sQ0FBQyxlQUFlLEdBQUcsT0FBTyxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsVUFBQyxTQUFTLElBQUssT0FBQSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQWhCLENBQWdCLENBQUMsQ0FBQztZQUMxRixHQUFHLENBQUMsNENBQTRDLENBQUMsQ0FBQztZQUNsRCxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFVixnRkFBZ0Y7WUFDaEYsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sS0FBSyxDQUFDLElBQUksT0FBTyxDQUFDLGNBQWMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDMUgsR0FBRyxDQUFDLDRCQUE0QixDQUFDLENBQUE7Z0JBQ2pDLElBQUksUUFBUSxHQUFHLE9BQU8sQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQzlDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNqRyxJQUFJLFFBQU0sR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO29CQUNyQyxRQUFRLENBQUMsUUFBUSxDQUFDLFFBQU0sQ0FBQyxDQUFDO29CQUMxQixVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ2pCLFFBQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ3RCLFFBQVEsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO29CQUN0QixFQUFFLENBQUMsQ0FBQyxRQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQzt3QkFDdEIsUUFBTSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO29CQUNwQyxDQUFDO29CQUFDLElBQUksQ0FBQyxDQUFDO3dCQUNOLFFBQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztvQkFDaEMsQ0FBQztnQkFDSCxDQUFDO2dCQUNELEtBQUssQ0FBQztZQUNWLENBQUM7WUFFRCxxQkFBcUI7WUFDckIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUs7Z0JBQ1YsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDO2dCQUNyQyxJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3RDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQztnQkFDbkIsS0FBSyxDQUFDO1lBQ1IsQ0FBQztZQUVELHVCQUF1QjtZQUN2QixFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDM0MsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDO29CQUN0QyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxrQkFBa0IsQ0FBQyxNQUFNO29CQUN6RCxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO29CQUM1RCxHQUFHLENBQUMscUJBQWtCLElBQUksQ0FBQyxJQUFJLE9BQUcsQ0FBQyxDQUFDO29CQUNwQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDeEIsRUFBRSxDQUFDLENBQUMsSUFBSSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7d0JBQ3ZCLElBQUksS0FBSyxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7d0JBQ3BDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQzs0QkFDM0MsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO3dCQUM1QyxDQUFDO3dCQUNELEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQzs0QkFDMUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDO3dCQUMzQyxDQUFDO29CQUNILENBQUM7b0JBQ0QsUUFBUSxDQUFDO2dCQUNYLENBQUM7WUFDSCxDQUFDO1lBRUQsb0JBQW9CO1lBQ3BCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDMUMsR0FBRyxDQUFDLHNCQUFzQixDQUFDLENBQUE7Z0JBQzNCLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQztvQkFDbkMsS0FBSyxDQUFDO2dCQUNSLENBQUM7Z0JBQ0Qsd0NBQXdDO2dCQUN4QyxJQUFJLGlCQUFpQixHQUFjO29CQUNqQyxFQUFFLEVBQUUsSUFBSSxDQUFDLElBQUk7b0JBQ2IsV0FBVyxFQUFFLElBQUksQ0FBQyxJQUFJO29CQUN0QixLQUFLLEVBQUUsS0FBRyxJQUFJLENBQUMsSUFBTTtvQkFDckIsUUFBUSxFQUFFLEtBQUcsSUFBSSxDQUFDLElBQU07b0JBQ3hCLElBQUksRUFBRSxJQUFJO29CQUNWLE9BQU8sRUFBRSxLQUFLO2lCQUNmLENBQUE7Z0JBQ0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxpQkFBaUIsQ0FBQztnQkFDbkMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDO2dCQUMzQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztnQkFDbEIseURBQXlEO2dCQUN6RCxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUN0QyxJQUFJLFFBQVEsR0FBRyxPQUFPLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSxDQUFDO29CQUM5QyxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUM7b0JBQ2pCLElBQUksR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUN6QixVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQ2xCLFFBQVEsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQ3pCLFFBQVEsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO29CQUN0QixRQUFRLENBQUM7Z0JBQ1gsQ0FBQztnQkFDRCxLQUFLLENBQUM7WUFDUixDQUFDO1lBRUQsbUJBQW1CO1lBQ25CLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDMUMsR0FBRyxDQUFDLHNCQUFzQixDQUFDLENBQUE7Z0JBRTNCLCtCQUErQjtnQkFDL0IsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUM3QyxJQUFJLFNBQVMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQztvQkFDbkMsSUFBSSxhQUFhLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUM7b0JBQ2pELGFBQWEsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztvQkFDbkQsSUFBSSxZQUFZLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO29CQUMxQyxZQUFZLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUM7b0JBQzVCLHlCQUF5QjtvQkFDekIsSUFBSSxjQUFjLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUNuQyxJQUFJLGFBQWEsR0FBRyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7b0JBQzVDLGFBQWEsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztvQkFDbkQsYUFBYSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUNoRCxJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUFDO29CQUM3QixPQUFPLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztvQkFDM0MsSUFBSSxjQUFjLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUNuQyxJQUFJLGFBQWEsR0FBRyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7b0JBQzVDLGFBQWEsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztvQkFDbkQsYUFBYSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUNoRCxJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUFDO29CQUM3QixPQUFPLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztvQkFFM0MsNkNBQTZDO29CQUM3QyxJQUFJLGFBQVcsR0FBRyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztvQkFDMUMsSUFBSSxhQUFhLEdBQUcsU0FBUyxDQUFDLFlBQVksQ0FBQyxDQUFDO29CQUM1QyxZQUFZLEdBQUcsZ0JBQWdCLENBQUMsYUFBVyxFQUFDLGFBQWEsRUFBQyxPQUFPLENBQUMsQ0FBQztvQkFDbkUsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLElBQUksS0FBSyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO3dCQUNuRCxVQUFVLENBQUMsYUFBVyxDQUFDLENBQUM7d0JBQ3hCLGFBQVcsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUM7d0JBQ3BDLGFBQWEsQ0FBQyxTQUFTLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQzt3QkFDeEMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxhQUFXLENBQUMsQ0FBQzt3QkFDcEMsYUFBYSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7d0JBQzNCLE9BQU8sQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLENBQUM7b0JBQ2pDLENBQUM7b0JBQ0QsaUVBQWlFO29CQUNqRSxPQUFPLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztvQkFDM0MsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7Z0JBRXBCLENBQUM7Z0JBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDbEQsc0JBQXNCO29CQUN0QixJQUFJLFdBQVcsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7b0JBQ3JDLElBQUksVUFBVSxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztvQkFDdEMsVUFBVSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7b0JBQ3hCLFVBQVUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztvQkFDaEQsVUFBVSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO29CQUM5QyxJQUFJLGVBQWUsR0FBYzt3QkFDL0IsRUFBRSxFQUFFLFVBQVUsQ0FBQyxJQUFJO3dCQUNuQixXQUFXLEVBQUUsVUFBVSxDQUFDLElBQUk7d0JBQzVCLEtBQUssRUFBSyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksU0FBSSxVQUFVLENBQUMsSUFBTTt3QkFDNUMsUUFBUSxFQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxTQUFJLFVBQVUsQ0FBQyxJQUFNO3dCQUMvQyxJQUFJLEVBQUUsVUFBVTt3QkFDaEIsT0FBTyxFQUFFLElBQUk7cUJBQ2QsQ0FBQTtvQkFDRCxVQUFVLENBQUMsU0FBUyxHQUFHLGVBQWUsQ0FBQztvQkFDdkMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztvQkFDMUIsb0JBQW9CO29CQUNwQixJQUFJLGFBQWEsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7b0JBQ3RDLElBQUksWUFBWSxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQztvQkFDMUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO29CQUNsRCxZQUFZLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQy9DLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUM7b0JBQzVCLE9BQU8sQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO29CQUMxQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztnQkFFcEIsQ0FBQztnQkFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNsRCx1QkFBdUI7b0JBQ3ZCLElBQUksV0FBVyxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUMvQyxJQUFJLFVBQVUsR0FBRyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7b0JBQ3RDLFVBQVUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQztvQkFDOUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO29CQUNoRCxJQUFJLGVBQWUsR0FBYzt3QkFDL0IsRUFBRSxFQUFFLFVBQVUsQ0FBQyxJQUFJO3dCQUNuQixXQUFXLEVBQUUsVUFBVSxDQUFDLElBQUk7d0JBQzVCLEtBQUssRUFBSyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksU0FBSSxVQUFVLENBQUMsSUFBTTt3QkFDNUMsUUFBUSxFQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxTQUFJLFVBQVUsQ0FBQyxJQUFNO3dCQUMvQyxJQUFJLEVBQUUsVUFBVTt3QkFDaEIsT0FBTyxFQUFFLElBQUk7cUJBQ2QsQ0FBQTtvQkFDRCxVQUFVLENBQUMsU0FBUyxHQUFHLGVBQWUsQ0FBQztvQkFDdkMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztvQkFDMUIsVUFBVSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7b0JBQ3hCLHlCQUF5QjtvQkFDekIsSUFBSSxjQUFjLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUNuQyxJQUFJLGFBQWEsR0FBRyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7b0JBQzVDLGFBQWEsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztvQkFDbkQsYUFBYSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUNoRCxJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUFDO29CQUM3QixJQUFJLGNBQWMsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQ25DLElBQUksYUFBYSxHQUFHLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQztvQkFDNUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO29CQUNuRCxhQUFhLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQ2hELElBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUM7b0JBQzdCLHVEQUF1RDtvQkFDdkQsSUFBSSxhQUFhLEdBQUcsc0JBQXNCLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztvQkFDdEUsRUFBRSxDQUFDLENBQUMsYUFBYSxLQUFLLFNBQVMsSUFBSSxhQUFhLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUM7d0JBQ2hFLFVBQVUsQ0FBQyxhQUFhLENBQUMsQ0FBQzt3QkFDMUIsYUFBYSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsQ0FBQzt3QkFDdEMsYUFBYSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7d0JBQzNCLGFBQWEsQ0FBQyxTQUFTLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQzt3QkFDeEMsa0VBQWtFO3dCQUNsRSxFQUFFLENBQUMsQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7NEJBQ25DLGFBQWEsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7d0JBQ2pELENBQUM7b0JBQ0gsQ0FBQztvQkFBQyxJQUFJLENBQUMsQ0FBQzt3QkFDTixPQUFPLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztvQkFDN0MsQ0FBQztvQkFDRCxPQUFPLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztvQkFDM0MsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7Z0JBQ3BCLENBQUM7Z0JBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDcEQsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7Z0JBQ3BCLENBQUM7Z0JBQ0QsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUM1QixHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7Z0JBQ3JCLEtBQUssQ0FBQztZQUNSLENBQUM7WUFFRCxrQkFBa0I7WUFDbEIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUN6QyxHQUFHLENBQUMsMENBQTBDLENBQUMsQ0FBQztnQkFDaEQsSUFBSSxhQUFXLEdBQUcsaUJBQWlCLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUNoRCxFQUFFLENBQUMsQ0FBQyxhQUFXLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztvQkFDOUIsRUFBRSxDQUFDLENBQUMsYUFBVyxDQUFDLFVBQVUsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO3dCQUN6QyxJQUFJLENBQUMsVUFBVSxHQUFHLGFBQVcsQ0FBQyxVQUFVLENBQUM7d0JBQ3pDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQzt3QkFDNUMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7d0JBQ2xCLEdBQUcsQ0FBQyxZQUFVLGFBQVcsQ0FBQyxJQUFNLENBQUMsQ0FBQzt3QkFDbEMsS0FBSyxDQUFDO29CQUNSLENBQUM7b0JBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLGFBQVcsQ0FBQyxNQUFNLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQzt3QkFDNUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxhQUFXLENBQUMsTUFBTSxDQUFBO3dCQUNoQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7d0JBQ3hDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO3dCQUNsQixHQUFHLENBQUMsWUFBVSxhQUFXLENBQUMsSUFBTSxDQUFDLENBQUM7d0JBQ2xDLEtBQUssQ0FBQztvQkFDUixDQUFDO2dCQUNILENBQUM7WUFDSCxDQUFDO1lBRUQsdURBQXVEO1lBQ3ZELDBCQUEwQjtZQUMxQixJQUFJLFdBQVcsR0FBRyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMxQyxFQUFFLENBQUMsQ0FBQyxXQUFXLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztnQkFDOUIsR0FBRyxDQUFDLG1EQUFnRCxXQUFXLENBQUMsSUFBSSxPQUFHLENBQUMsQ0FBQztnQkFDekUsaUVBQWlFO2dCQUNqRSxFQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ25ELEVBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDL0MsSUFBSSxLQUFLLEdBQUcsbUJBQW1CLENBQUMsSUFBSSxFQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUMsT0FBTyxDQUFDLENBQUM7d0JBQ2pFLEVBQUUsQ0FBQyxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDOzRCQUNuQixZQUFZLEdBQUcsRUFBQyxJQUFJLEVBQUUsaUJBQWlCLENBQUMsTUFBTSxFQUFDLENBQUM7d0JBQ2xELENBQUM7b0JBQ0gsQ0FBQztvQkFBQyxJQUFJLENBQUMsQ0FBQzt3QkFDTixZQUFZLEdBQUcsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztvQkFDOUQsQ0FBQztnQkFDSCxDQUFDO2dCQUFDLElBQUksQ0FBQyxDQUFDO29CQUNOLHNCQUFzQixDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztvQkFDdEMsWUFBWSxHQUFHLGdCQUFnQixDQUFDLFdBQVcsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQzlELENBQUM7WUFFSCxDQUFDO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ04sc0JBQXNCLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUN0QyxHQUFHLENBQUMsQ0FBa0IsVUFBdUIsRUFBdkIsS0FBQSxPQUFPLENBQUMsZUFBZSxFQUF4QyxjQUFhLEVBQWIsSUFBd0MsQ0FBQztvQkFBekMsSUFBSSxTQUFTLFNBQUE7b0JBQ2hCLEdBQUcsQ0FBQyx3Q0FBd0MsQ0FBQyxDQUFDO29CQUM5QyxZQUFZLEdBQUcsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztvQkFDMUQsMEJBQTBCO29CQUMxQixFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUM7d0JBQzdCLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQzt3QkFDdEIsaUVBQWlFO3dCQUNqRSwrRUFBK0U7d0JBQy9FLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQzs0QkFDL0MsU0FBUyxDQUFDLFNBQVMsQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDOzRCQUNwQyxJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUM7NEJBQ3BCLElBQUksR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDOzRCQUN4QixFQUFFLENBQUMsQ0FBQyxJQUFJLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztnQ0FDdkIsTUFBTSxDQUFDLElBQUksRUFBQyxzQkFBc0IsQ0FBQyxJQUFJLEVBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7NEJBQzVELENBQUM7NEJBQ0QsUUFBUSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQzs0QkFDN0IsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQ0FDdEMsSUFBSSxVQUFVLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztnQ0FDaEQsTUFBTSxDQUFDLFFBQVEsRUFBRSxVQUFVLENBQUMsQ0FBQztnQ0FDN0IsVUFBVSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7Z0NBQ3hCLFFBQVEsQ0FBQyxLQUFLLENBQUM7NEJBQ2pCLENBQUM7d0JBQ0gsQ0FBQzt3QkFBQyxJQUFJLENBQUMsQ0FBQzs0QkFDTixJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDO3dCQUMzQixDQUFDO29CQUNILENBQUM7aUJBQ0Y7Z0JBQUEsQ0FBQztZQUNKLENBQUM7WUFFRCxtREFBbUQ7WUFDbkQsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLElBQUksT0FBTyxDQUFDLGNBQWMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDOUUsSUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztnQkFDOUMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDO2dCQUNqQixJQUFJLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDekIsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNsQixRQUFRLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUN6QixRQUFRLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztnQkFDdEIsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO29CQUMzQixLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO2dCQUN6QyxDQUFDO2dCQUNELFFBQVEsQ0FBQztZQUNiLENBQUM7WUFFRCw2Q0FBNkM7WUFDN0MsRUFBRSxDQUFDLENBQUMsWUFBWSxLQUFLLFNBQVMsSUFBSSxZQUFZLENBQUMsSUFBSSxLQUFLLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQy9FLDBFQUEwRTtnQkFDMUUsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLElBQUksS0FBSyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO29CQUNuRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQzt3QkFDbkIsSUFBSSxVQUFVLFNBQU0sQ0FBQzt3QkFDckIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDOzRCQUNoRixVQUFVLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDO3dCQUM5QyxDQUFDO3dCQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsTUFBTSxLQUFLLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7NEJBQy9FLFVBQVUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7d0JBQzFDLENBQUM7d0JBQ0QsRUFBRSxDQUFDLENBQUMsVUFBVSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7NEJBQzdCLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQzs0QkFDakIsSUFBSSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7NEJBQ3hCLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQzs0QkFDbEIsVUFBVSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQzs0QkFDM0IsUUFBUSxDQUFDO3dCQUNYLENBQUM7b0JBQ0gsQ0FBQztnQkFFSCxDQUFDO2dCQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsSUFBSSxLQUFLLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7b0JBQzFELEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQTtvQkFDakIsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO3dCQUNyQyxJQUFJLFVBQVUsR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQzt3QkFDbEQsSUFBSSxNQUFNLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDbkMsSUFBSSxXQUFXLEdBQUcsaUJBQWlCLENBQUMsTUFBTSxDQUFDLENBQUM7d0JBQzVDLEVBQUUsQ0FBQyxDQUFDLFdBQVcsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDOzRCQUM5Qix5QkFBeUI7NEJBQ3pCLElBQUksS0FBSyxHQUFHLFFBQVEsQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLENBQUM7NEJBQzlDLElBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQzs0QkFDM0IsZUFBZSxDQUFDLEtBQUssRUFBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7NEJBQ3ZDLEtBQUssQ0FBQyxVQUFVLEdBQUcsV0FBVyxDQUFDOzRCQUMvQixXQUFXLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQzs0QkFDekIsT0FBTyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7NEJBQ3RDLG1EQUFtRDs0QkFDbkQsSUFBSSxtQkFBbUIsR0FBYztnQ0FDakMsRUFBRSxFQUFFLFVBQVUsQ0FBQyxXQUFXO2dDQUMxQixXQUFXLEVBQUUsVUFBVSxDQUFDLFdBQVc7Z0NBQ25DLFVBQVUsRUFBRSxXQUFXO2dDQUN2QixLQUFLLEVBQUUsS0FBRyxVQUFVLENBQUMsV0FBYTtnQ0FDbEMsUUFBUSxFQUFFLEtBQUcsVUFBVSxDQUFDLFdBQWE7Z0NBQ3JDLElBQUksRUFBRSxLQUFLO2dDQUNYLE9BQU8sRUFBRSxLQUFLOzZCQUNqQixDQUFDOzRCQUNGLEtBQUssQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQzs0QkFDM0MsS0FBSyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDOzRCQUM1QyxLQUFLLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUM7NEJBQzdDLEtBQUssQ0FBQyxTQUFTLEdBQUcsbUJBQW1CLENBQUM7NEJBQ3RDLE9BQU8sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUM7NEJBQzdDLEtBQUssQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDOzRCQUNuQixLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLEdBQUcsV0FBVyxDQUFDO3dCQUN2RCxDQUFDO29CQUNILENBQUM7b0JBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQzt3QkFDeEMsSUFBSSxNQUFNLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7d0JBQzFDLElBQUksTUFBTSxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQ25DLElBQUksV0FBVyxHQUFHLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO3dCQUM1QyxFQUFFLENBQUMsQ0FBQyxXQUFXLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQzs0QkFDOUIseUJBQXlCOzRCQUN6QixJQUFJLEtBQUssR0FBRyxRQUFRLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDOzRCQUM5QyxJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7NEJBQzNCLGVBQWUsQ0FBQyxLQUFLLEVBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDOzRCQUNuQyxLQUFLLENBQUMsVUFBVSxHQUFHLFdBQVcsQ0FBQzs0QkFDL0IsV0FBVyxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7NEJBQ3pCLEtBQUssQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQzs0QkFDM0MsS0FBSyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDOzRCQUM1QyxLQUFLLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUM7NEJBQzdDLEtBQUssQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDOzRCQUNuQixPQUFPLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQzs0QkFDdEMsbURBQW1EOzRCQUNuRCxJQUFJLG1CQUFtQixHQUFjO2dDQUNqQyxFQUFFLEVBQUUsU0FBUztnQ0FDYixXQUFXLEVBQUUsV0FBVyxDQUFDLFdBQVc7Z0NBQ3BDLFVBQVUsRUFBRSxXQUFXO2dDQUN2QixLQUFLLEVBQUUsS0FBRyxNQUFNLENBQUMsRUFBSTtnQ0FDckIsUUFBUSxFQUFFLEtBQUcsTUFBTSxDQUFDLFdBQWE7Z0NBQ2pDLElBQUksRUFBRSxLQUFLO2dDQUNYLE9BQU8sRUFBRSxLQUFLOzZCQUNqQixDQUFDOzRCQUNGLEtBQUssQ0FBQyxTQUFTLEdBQUcsbUJBQW1CLENBQUM7NEJBQ3RDLE9BQU8sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUM7NEJBQzdDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBRyxXQUFXLENBQUM7d0JBQ3ZELENBQUM7b0JBQ0gsQ0FBQztnQkFFSCxDQUFDO2dCQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsSUFBSSxLQUFLLGlCQUFpQixDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7b0JBQ2hFLElBQUksS0FBaUIsWUFBWSxDQUFDLEtBQUssRUFBbEMsS0FBSyxVQUFFLEtBQUssUUFBc0IsQ0FBQztvQkFDeEMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUM7b0JBQ3RELEtBQUssQ0FBQyxVQUFVLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztnQkFDbkMsQ0FBQztZQUNILENBQUM7WUFFRCxnRkFBZ0Y7WUFDaEYsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssS0FBSyxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ25FLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQztnQkFDakIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFBO2dCQUNaLE9BQU8sQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3JDLENBQUM7WUFDRCxLQUFLLENBQUM7UUFDUixDQUFDO1FBRUQsb0NBQW9DO1FBQ3BDLEVBQUUsQ0FBQyxDQUFDLElBQUksS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFVBQUMsS0FBSyxJQUFLLE9BQUEsZUFBZSxDQUFDLEtBQUssRUFBQyxPQUFPLENBQUMsRUFBOUIsQ0FBOEIsQ0FBQyxDQUFDO1FBQy9ELENBQUM7UUFFRCxNQUFNLENBQUMsT0FBTyxDQUFDO0lBQ2pCLENBQUM7SUFFRCxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7SUFDckIsR0FBRyxDQUFDLHVCQUF1QixDQUFDLENBQUM7SUFDN0IsSUFBSSxPQUFPLEdBQUcsVUFBVSxFQUFFLENBQUM7SUFDM0IsZUFBZSxDQUFDLElBQUksRUFBQyxPQUFPLENBQUMsQ0FBQztJQUM5QixHQUFHLENBQUMsb0JBQW9CLENBQUMsQ0FBQztJQUcxQixrQ0FBa0M7SUFDbEMsaUNBQWlDO0lBQ2pDLElBQUksU0FBUyxHQUFHLHFCQUFxQixDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDbEUsRUFBRSxDQUFDLENBQUMsU0FBUyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDNUIsSUFBSSxRQUFRLEdBQUcscUJBQXFCLENBQUMsU0FBUyxFQUFFLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNuRSxFQUFFLENBQUMsQ0FBQyxRQUFRLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztZQUM3QixVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDckIsZUFBZSxDQUFDLFFBQVEsRUFBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDN0MsQ0FBQztJQUNILENBQUM7SUFFRCx3REFBd0Q7SUFDeEQsc0JBQXNCLElBQVU7UUFDOUIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBQyxDQUFDLEVBQUMsQ0FBQyxJQUFLLE9BQUEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFYLENBQVcsQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ2xDLENBQUM7SUFDRCxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7SUFFbkIscUJBQXFCO0lBQ3JCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO0lBQ2xCLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztJQUNyQixNQUFNLENBQUMsRUFBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUMsQ0FBQztBQUN4QyxDQUFDO0FBY0QscUJBQXFCLE1BQWM7SUFDakMsSUFBSSxLQUFLLEdBQVc7UUFDbEIsRUFBRSxFQUFFLE1BQU0sQ0FBQyxFQUFFO1FBQ2IsV0FBVyxFQUFFLE1BQU0sQ0FBQyxXQUFXO1FBQy9CLE9BQU8sRUFBRSxNQUFNLENBQUMsT0FBTztRQUN2QixJQUFJLEVBQUUsTUFBTSxDQUFDLElBQUk7UUFDakIsZUFBZSxFQUFFLE1BQU0sQ0FBQyxlQUFlO1FBQ3ZDLFFBQVEsRUFBRSxNQUFNLENBQUMsUUFBUTtRQUN6QixPQUFPLEVBQUUsTUFBTSxDQUFDLE9BQU87S0FDeEIsQ0FBQTtJQUNELE1BQU0sQ0FBQyxLQUFLLENBQUM7QUFDZixDQUFDO0FBV0QseUJBQXlCLFVBQXNCO0lBQzdDLElBQUksS0FBSyxHQUFlO1FBQ3RCLEVBQUUsRUFBRSxVQUFVLENBQUMsRUFBRTtRQUNqQixXQUFXLEVBQUUsVUFBVSxDQUFDLFdBQVc7UUFDbkMsS0FBSyxFQUFFLFVBQVUsQ0FBQyxLQUFLO1FBQ3ZCLElBQUksRUFBRSxVQUFVLENBQUMsSUFBSTtRQUNyQixRQUFRLEVBQUUsVUFBVSxDQUFDLFFBQVE7UUFDN0IsT0FBTyxFQUFFLFVBQVUsQ0FBQyxPQUFPO0tBQzVCLENBQUE7SUFDRCxNQUFNLENBQUMsS0FBSyxDQUFDO0FBQ2YsQ0FBQztBQWFELGtEQUFrRDtBQUNsRCxnREFBZ0Q7QUFDaEQseUJBQXlCO0FBQ3pCLDZDQUE2QztBQUM3QyxtRUFBbUU7QUFDbkUsc0JBQXNCO0FBQ3RCLHNEQUFzRDtBQUN0RCx1QkFBOEIsTUFBYztJQUMxQyxHQUFHLENBQUMsd0JBQXdCLEdBQUcsTUFBTSxDQUFDLENBQUM7SUFDdkMsSUFBSSxXQUFXLENBQUM7SUFDaEIsSUFBSSxJQUFZLENBQUM7SUFDakIsb0NBQW9DO0lBQ3BDLElBQUksT0FBTyxHQUFHLFNBQUcsQ0FBQyxPQUFPLENBQUMsY0FBYyxFQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7SUFDM0QsRUFBRSxDQUFDLENBQUMsT0FBTyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDMUIsV0FBVyxHQUFHLFNBQUcsQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQzVELElBQUksR0FBRyxNQUFNLENBQUM7SUFFaEIsQ0FBQztJQUFDLElBQUksQ0FBQyxDQUFDO1FBQ04sV0FBVyxHQUFHLFNBQUcsQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7SUFDMUQsQ0FBQztJQUNELG1CQUFtQjtJQUNuQixFQUFFLENBQUMsQ0FBQyxXQUFXLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztRQUM5QixFQUFFLENBQUMsQ0FBQyxJQUFJLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztZQUN2QixPQUFPLEdBQUcsU0FBRyxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUMsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztZQUNyRCxJQUFJLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQztRQUN0QixDQUFDO1FBQ0QsSUFBSSxNQUFNLEdBQVc7WUFDbkIsRUFBRSxFQUFFLFdBQVcsQ0FBQyxNQUFNO1lBQ3RCLFdBQVcsRUFBRSxJQUFJO1lBQ2pCLE9BQU8sRUFBRSxXQUFXLENBQUMsT0FBTztZQUM1QixRQUFRLEVBQUUsV0FBVyxDQUFDLE1BQU07WUFDNUIsZUFBZSxFQUFFLEtBQUs7WUFDdEIsT0FBTyxFQUFFLElBQUk7U0FDZCxDQUFBO1FBQ0QsR0FBRyxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsQ0FBQztRQUN2QixNQUFNLENBQUMsTUFBTSxDQUFDO0lBQ2hCLENBQUM7SUFBQyxJQUFJLENBQUMsQ0FBQztRQUNOLEdBQUcsQ0FBQyxjQUFjLEdBQUcsTUFBTSxDQUFDLENBQUM7UUFDN0IsTUFBTSxDQUFDLFNBQVMsQ0FBQztJQUNuQixDQUFDO0FBQ0gsQ0FBQztBQWpDZSxxQkFBYSxnQkFpQzVCLENBQUE7QUFDRCxzREFBc0Q7QUFDdEQsMkJBQTJCLE1BQWM7SUFDdkMsR0FBRyxDQUFDLDRCQUE0QixHQUFHLE1BQU0sQ0FBQyxDQUFDO0lBQzNDLElBQUksZUFBZSxDQUFDO0lBQ3BCLElBQUksSUFBWSxDQUFDO0lBQ2pCLG9DQUFvQztJQUNwQyxJQUFJLE9BQU8sR0FBRyxTQUFHLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBQyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDO0lBQzNELEVBQUUsQ0FBQyxDQUFDLE9BQU8sS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO1FBQzFCLGVBQWUsR0FBRyxTQUFHLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxFQUFFLFVBQVUsRUFBRSxPQUFPLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUN4RSxJQUFJLEdBQUcsTUFBTSxDQUFDO0lBRWhCLENBQUM7SUFBQyxJQUFJLENBQUMsQ0FBQztRQUNOLGVBQWUsR0FBRyxTQUFHLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDO0lBQ3RFLENBQUM7SUFDRCx1QkFBdUI7SUFDdkIsRUFBRSxDQUFDLENBQUMsZUFBZSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDbEMsRUFBRSxDQUFDLENBQUMsSUFBSSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDdkIsT0FBTyxHQUFHLFNBQUcsQ0FBQyxPQUFPLENBQUMsY0FBYyxFQUFDLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7WUFDckQsSUFBSSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUM7UUFDdEIsQ0FBQztRQUNELElBQUksVUFBVSxHQUFlO1lBQzNCLEVBQUUsRUFBRSxlQUFlLENBQUMsVUFBVTtZQUM5QixXQUFXLEVBQUUsSUFBSTtZQUNqQixLQUFLLEVBQUUsZUFBZSxDQUFDLEtBQUs7WUFDNUIsUUFBUSxFQUFFLElBQUk7WUFDZCxPQUFPLEVBQUUsSUFBSTtTQUNkLENBQUE7UUFDRCxHQUFHLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxDQUFDO1FBQ3ZCLE1BQU0sQ0FBQyxVQUFVLENBQUM7SUFDcEIsQ0FBQztJQUFDLElBQUksQ0FBQyxDQUFDO1FBQ04sR0FBRyxDQUFDLGNBQWMsR0FBRyxNQUFNLENBQUMsQ0FBQztRQUM3QixNQUFNLENBQUMsU0FBUyxDQUFDO0lBQ25CLENBQUM7QUFDSCxDQUFDO0FBRUQsaUZBQWlGO0FBQ2pGLDhGQUE4RjtBQUM5RiwwQkFBMEIsSUFBWSxFQUFFLE1BQWM7SUFDcEQsR0FBRyxDQUFDLDJCQUEyQixHQUFHLElBQUksQ0FBQyxDQUFDO0lBQ3hDLEdBQUcsQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ3RDLElBQUksY0FBYyxHQUFHLFNBQUcsQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7SUFDeEYsRUFBRSxDQUFDLENBQUMsY0FBYyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDakMsSUFBSSxTQUFTLEdBQWM7WUFDekIsRUFBRSxFQUFFLGNBQWMsQ0FBQyxTQUFTO1lBQzVCLFdBQVcsRUFBRSxJQUFJO1lBQ2pCLE1BQU0sRUFBRSxNQUFNO1lBQ2QsS0FBSyxFQUFFLGNBQWMsQ0FBQyxLQUFLO1lBQzNCLFFBQVEsRUFBRSxDQUFHLE1BQU0sQ0FBQyxXQUFXLFNBQUksSUFBSSxDQUFFLENBQUMsT0FBTyxDQUFDLElBQUksRUFBQyxFQUFFLENBQUM7WUFDMUQsT0FBTyxFQUFFLElBQUk7U0FDZCxDQUFBO1FBQ0QsR0FBRyxDQUFDLGFBQVcsSUFBSSxTQUFJLFNBQVMsQ0FBQyxRQUFRLFlBQU8sU0FBUyxDQUFDLEtBQU8sQ0FBQyxDQUFDO1FBQ25FLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNmLE1BQU0sQ0FBQyxTQUFTLENBQUM7SUFDbkIsQ0FBQztJQUNELEdBQUcsQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLENBQUM7SUFDM0IsTUFBTSxDQUFDLFNBQVMsQ0FBQztBQUNuQixDQUFDO0FBRUQsSUFBSyxpQkFNSjtBQU5ELFdBQUssaUJBQWlCO0lBQ3BCLHlEQUFJLENBQUE7SUFDSiw2REFBTSxDQUFBO0lBQ04sNkRBQU0sQ0FBQTtJQUNOLDZEQUFNLENBQUE7SUFDTix5RUFBWSxDQUFBO0FBQ2QsQ0FBQyxFQU5JLGlCQUFpQixLQUFqQixpQkFBaUIsUUFNckI7QUFRRCwwQkFBMEIsS0FBVyxFQUFFLEtBQVcsRUFBRSxPQUFnQjtJQUNsRSxHQUFHLENBQUMsb0NBQWlDLEtBQUssQ0FBQyxJQUFJLGlCQUFVLEtBQUssQ0FBQyxJQUFJLE9BQUcsQ0FBQyxDQUFDO0lBQ3hFLElBQUksWUFBMEIsQ0FBQztJQUMvQix5REFBeUQ7SUFDekQsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLElBQUksS0FBSyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3pGLFlBQVksR0FBRyxzQ0FBc0MsQ0FBQyxLQUFLLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUU1RixDQUFDO0lBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsSUFBRyxLQUFLLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMxSSxZQUFZLEdBQUcsZ0NBQWdDLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDcEYsQ0FBQztJQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLElBQUksS0FBSyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0ksWUFBWSxHQUFHLGdDQUFnQyxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBRXBGLENBQUM7SUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLElBQUksS0FBSyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVGLFlBQVksR0FBRywrQkFBK0IsQ0FBQyxLQUFLLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNqRixDQUFDO0lBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEtBQUssQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM1RixZQUFZLEdBQUcsK0JBQStCLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFakYsQ0FBQztJQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLElBQUksS0FBSyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkksWUFBWSxHQUFHLHlCQUF5QixDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3pFLENBQUM7SUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEtBQUssQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZJLFlBQVksR0FBRyx5QkFBeUIsQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztJQUV6RSxDQUFDO0lBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsSUFBSSxLQUFLLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMxSSxZQUFZLEdBQUcseUJBQXlCLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ25GLENBQUM7SUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEtBQUssQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFJLFlBQVksR0FBRyx5QkFBeUIsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDbkYsQ0FBQztJQUNELG9EQUFvRDtJQUNwRCxFQUFFLENBQUMsQ0FBQyxZQUFZLEtBQUssU0FBUyxJQUFJLFlBQVksQ0FBQyxJQUFJLEtBQUssaUJBQWlCLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUMvRSxPQUFPLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUN6QyxNQUFNLENBQUMsWUFBWSxDQUFDO0lBQ3RCLENBQUM7SUFBQyxJQUFJLENBQUMsQ0FBQztRQUNOLEdBQUcsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO1FBQ2hDLE1BQU0sQ0FBQyxFQUFDLElBQUksRUFBRSxpQkFBaUIsQ0FBQyxJQUFJLEVBQUMsQ0FBQztJQUN4QyxDQUFDO0FBQ0gsQ0FBQztBQUVELDhCQUE4QjtBQUM5Qix5Q0FBeUMsSUFBZ0IsRUFBRSxHQUFXO0lBQ3BFLEdBQUcsQ0FBQyxnREFBNkMsSUFBSSxDQUFDLFdBQVcsaUJBQVUsR0FBRyxDQUFDLFdBQVcsVUFBTSxDQUFDLENBQUM7SUFDbEc7Ozs7T0FJRztJQUNILEVBQUUsQ0FBQyxDQUFDLFNBQUcsQ0FBQyxPQUFPLENBQUMscUJBQXFCLEVBQUUsRUFBRSxVQUFVLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2hGLEdBQUcsQ0FBQywyQkFBMkIsQ0FBQyxDQUFBO1FBQ2hDLE1BQU0sQ0FBQyxFQUFFLElBQUksRUFBRSxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUM1QyxDQUFDO0lBRUQsSUFBSSxZQUFZLEdBQUcsU0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7U0FDN0IsTUFBTSxDQUFDLHFCQUFxQixFQUFFLEVBQUUsVUFBVSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxZQUFZLENBQUM7U0FDcEUsTUFBTSxDQUFDLHFCQUFxQixFQUFFLEVBQUUsTUFBTSxFQUFFLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxFQUFFLElBQUksRUFBRSxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsT0FBTyxDQUFDO1NBQzFGLElBQUksRUFBRSxDQUFDO0lBQ1YsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLEdBQUcsQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO1FBQ2xDLE1BQU0sQ0FBQyxFQUFFLElBQUksRUFBRSxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUM1QyxDQUFDLENBQUE7Ozs7Ozs7Ozs7T0FVRTtJQUNILEdBQUcsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0lBQ2hDLE1BQU0sQ0FBQyxFQUFFLElBQUksRUFBRSxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMxQyxDQUFDO0FBRUQsbUNBQW1DLE1BQWMsRUFBRSxJQUFVLEVBQUUsT0FBZ0I7SUFDN0Usa0NBQWtDO0lBQ2xDLG9CQUFvQjtJQUNwQixJQUFJLEtBQUssR0FBRyxtQkFBbUIsQ0FBQyxJQUFJLEVBQUMsTUFBTSxFQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3JELEVBQUUsQ0FBQyxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ25CLE1BQU0sQ0FBQyxFQUFFLElBQUksRUFBRSxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUM1QyxDQUFDO0lBQ0QsbUNBQW1DO0lBQ25DLGlDQUFpQztJQUNqQyxJQUFJLFlBQVksR0FBRyxTQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztTQUM3QixNQUFNLENBQUMscUJBQXFCLEVBQUUsRUFBRSxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRSxFQUFFLE9BQU8sQ0FBQztTQUM3RCxNQUFNLENBQUMsYUFBYSxFQUFFLEVBQUUsTUFBTSxFQUFFLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxFQUFFLFNBQVMsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLEVBQUUsS0FBSyxDQUFDO1NBQ2pGLElBQUksRUFBRSxDQUFDO0lBQ1YsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLEdBQUcsQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO1FBQ2xDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNsQix3QkFBd0I7UUFDeEIsSUFBSSxRQUFRLEdBQUcsc0JBQXNCLENBQUMsWUFBWSxDQUFDLFdBQVcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDdEUsSUFBSSxXQUFXLEdBQUcscUJBQXFCLENBQUMsUUFBUSxDQUFDLENBQUE7UUFDakQsSUFBSSxNQUFNLENBQUM7UUFDWCxFQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDM0IsdURBQXVEO1lBQ3ZELG9EQUFvRDtZQUNwRCxNQUFNLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFCLENBQUM7UUFDRCxJQUFJLGVBQWUsR0FBYztZQUMvQixFQUFFLEVBQUUsSUFBSSxDQUFDLElBQUk7WUFDYixXQUFXLEVBQUUsSUFBSSxDQUFDLElBQUk7WUFDdEIsS0FBSyxFQUFLLE1BQU0sQ0FBQyxXQUFXLFNBQUksSUFBSSxDQUFDLElBQU07WUFDM0MsUUFBUSxFQUFLLE1BQU0sQ0FBQyxXQUFXLFNBQUksSUFBSSxDQUFDLElBQU07WUFDOUMsSUFBSSxFQUFFLElBQUk7WUFDVixPQUFPLEVBQUUsSUFBSTtTQUNkLENBQUE7UUFDRCxJQUFJLENBQUMsU0FBUyxHQUFHLGVBQWUsQ0FBQztRQUNqQyxPQUFPLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDM0MsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7UUFDbEIsTUFBTSxDQUFDLEVBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxFQUFFLGlCQUFpQixDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFDLENBQUM7SUFDdkYsQ0FBQztJQUNEOzs7Ozs7Ozs7O09BVUc7SUFDSCxHQUFHLENBQUMsMEJBQTBCLENBQUMsQ0FBQztJQUNoQyxNQUFNLENBQUMsRUFBRSxJQUFJLEVBQUUsaUJBQWlCLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDMUMsQ0FBQztBQUVELGdEQUF1RCxLQUFpQixFQUFFLEtBQWlCO0lBQ3pGLEdBQUcsQ0FBQyxpREFBOEMsS0FBSyxDQUFDLFdBQVcsaUJBQVUsS0FBSyxDQUFDLFdBQVcsVUFBTSxDQUFDLENBQUM7SUFDdEcsaUNBQWlDO0lBQ2pDLElBQUksWUFBWSxHQUFHLFNBQUcsQ0FBQyxLQUFLLENBQUksS0FBSyxDQUFDLFdBQVcsVUFBSyxLQUFLLENBQUMsV0FBYSxDQUFDO1NBQ3ZFLE1BQU0sQ0FBQyxxQkFBcUIsRUFBRSxFQUFFLFVBQVUsRUFBRSxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsT0FBTyxDQUFDO1NBQ2hFLE1BQU0sQ0FBQyxxQkFBcUIsRUFBRSxFQUFFLFVBQVUsRUFBRSxLQUFLLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsRUFBRSxFQUFFLE9BQU8sQ0FBQztTQUM3RixJQUFJLEVBQUUsQ0FBQztJQUNWLHNEQUFzRDtJQUN0RCxJQUFJLGFBQWEsR0FBRyxTQUFHLENBQUMsS0FBSyxDQUFDLDJCQUF5QixLQUFLLENBQUMsV0FBVyxhQUFRLEtBQUssQ0FBQyxXQUFhLENBQUM7U0FDakcsTUFBTSxDQUFDLHFCQUFxQixFQUFFLEVBQUUsVUFBVSxFQUFFLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxPQUFPLENBQUM7U0FDaEUsTUFBTSxDQUFDLHFCQUFxQixFQUFFLEVBQUUsTUFBTSxFQUFFLENBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDO1NBQ3ZFLE1BQU0sQ0FBQyxxQkFBcUIsRUFBRSxFQUFFLFVBQVUsRUFBRSxLQUFLLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsRUFBRSxFQUFFLE9BQU8sQ0FBQztTQUMzRixLQUFLLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDO1NBQzFCLFNBQVMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxFQUFFLE9BQU8sQ0FBQztTQUMvQixPQUFPLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUM7U0FDL0QsSUFBSSxFQUFFLENBQUM7SUFDVixJQUFJLE1BQU0sR0FBRyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQztJQUMxQixHQUFHLENBQUMsQ0FBZSxVQUFxQixFQUFyQixLQUFBLGFBQWEsQ0FBQyxPQUFPLEVBQW5DLGNBQVUsRUFBVixJQUFtQyxDQUFDO1FBQXBDLElBQUksTUFBTSxTQUFBO1FBQ2IsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDO1lBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztLQUNsRDtJQUVELDJFQUEyRTtJQUMzRSwyQkFBMkI7SUFDM0IsSUFBSSxnQkFBZ0IsR0FBRyxZQUFZLENBQUMsV0FBVyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7SUFFM0QsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7UUFDcEMsUUFBUTtRQUNSLE1BQU0sQ0FBQyxFQUFDLElBQUksRUFBRSxpQkFBaUIsQ0FBQyxJQUFJLEVBQUMsQ0FBQztJQUN4QyxDQUFDO0lBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLGdCQUFnQixHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQzNDLE1BQU0sQ0FBQyxFQUFDLElBQUksRUFBRSxpQkFBaUIsQ0FBQyxZQUFZLEVBQUUsS0FBSyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUMsQ0FBQztJQUNqRixDQUFDO0lBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEtBQUssQ0FBQyxJQUFJLGdCQUFnQixLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDeEQsTUFBTSxDQUFDLEVBQUMsSUFBSSxFQUFFLGlCQUFpQixDQUFDLElBQUksRUFBQyxDQUFDO0lBQ3hDLENBQUM7SUFBQyxJQUFJLENBQUMsQ0FBQztRQUNOLFFBQVE7UUFDUixNQUFNLENBQUMsRUFBQyxJQUFJLEVBQUUsaUJBQWlCLENBQUMsSUFBSSxFQUFDLENBQUM7SUFDeEMsQ0FBQztBQUNILENBQUM7QUFwQ2UsOENBQXNDLHlDQW9DckQsQ0FBQTtBQUVELDBDQUEwQyxJQUFnQixFQUFFLElBQVUsRUFBRSxPQUFnQjtJQUN0RiwrREFBK0Q7SUFDL0QseUNBQXlDO0lBQ3pDLEdBQUcsQ0FBQyxpREFBOEMsSUFBSSxDQUFDLFdBQVcsaUJBQVUsSUFBSSxDQUFDLElBQUksVUFBTSxDQUFDLENBQUM7SUFDN0YsSUFBSSxZQUFZLEdBQUcsU0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7U0FDN0IsTUFBTSxDQUFDLHFCQUFxQixFQUFFLEVBQUUsVUFBVSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxZQUFZLENBQUM7U0FDcEUsTUFBTSxDQUFDLGFBQWEsRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLFlBQVksRUFBRSxRQUFRLENBQUMsRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxFQUFFLEtBQUssQ0FBQztTQUN4RixJQUFJLEVBQUUsQ0FBQztJQUNWLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDeEMsR0FBRyxDQUFDLDJCQUEyQixDQUFDLENBQUM7UUFDakMsSUFBSSxtQkFBbUIsR0FBYztZQUNuQyxFQUFFLEVBQUUsSUFBSSxDQUFDLElBQUk7WUFDYixXQUFXLEVBQUUsSUFBSSxDQUFDLElBQUk7WUFDdEIsVUFBVSxFQUFFLElBQUk7WUFDaEIsS0FBSyxFQUFLLElBQUksQ0FBQyxXQUFXLFNBQUksSUFBSSxDQUFDLElBQU07WUFDekMsUUFBUSxFQUFLLElBQUksQ0FBQyxXQUFXLFNBQUksSUFBSSxDQUFDLElBQU07WUFDNUMsSUFBSSxFQUFFLElBQUk7WUFDVixPQUFPLEVBQUUsSUFBSTtTQUNkLENBQUE7UUFDRCxJQUFJLENBQUMsU0FBUyxHQUFHLG1CQUFtQixDQUFDO1FBQ3JDLE9BQU8sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUM7UUFDN0MsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzNDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLE1BQU0sQ0FBQyxFQUFDLElBQUksRUFBRSxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBQyxDQUFDO0lBQ3BFLENBQUM7SUFDRCwrQkFBK0I7SUFDL0IsaUVBQWlFO0lBQ2pFLFlBQVksR0FBRyxTQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztTQUN6QixNQUFNLENBQUMscUJBQXFCLEVBQUUsRUFBRSxVQUFVLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLFlBQVksQ0FBQztTQUNwRSxNQUFNLENBQUMscUJBQXFCLEVBQUUsRUFBRSxNQUFNLEVBQUUsQ0FBQyxZQUFZLEVBQUUsUUFBUSxDQUFDLEVBQUUsRUFBRSxPQUFPLENBQUM7U0FDNUUsTUFBTSxDQUFDLGFBQWEsRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxFQUFFLEtBQUssQ0FBQztTQUNqRixJQUFJLEVBQUUsQ0FBQztJQUNWLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDeEMsR0FBRyxDQUFDLDRCQUE0QixDQUFDLENBQUM7UUFDbEMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFBO1FBQ2pCLHdCQUF3QjtRQUN4QixJQUFJLFFBQVEsR0FBRyxzQkFBc0IsQ0FBQyxZQUFZLENBQUMsV0FBVyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN0RSxJQUFJLFdBQVcsR0FBRyxxQkFBcUIsQ0FBQyxRQUFRLENBQUMsQ0FBQTtRQUNqRCxJQUFJLE1BQU0sQ0FBQztRQUNYLEVBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMzQix1REFBdUQ7WUFDdkQsb0RBQW9EO1lBQ3BELE1BQU0sR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUIsQ0FBQztRQUNELGtDQUFrQztRQUNsQyxJQUFJLFNBQVMsR0FBYztZQUN2QixFQUFFLEVBQUUsSUFBSSxDQUFDLElBQUk7WUFDYixXQUFXLEVBQUUsSUFBSSxDQUFDLElBQUk7WUFDdEIsVUFBVSxFQUFFLElBQUk7WUFDaEIsS0FBSyxFQUFLLElBQUksQ0FBQyxXQUFXLFNBQUksSUFBSSxDQUFDLElBQU07WUFDekMsUUFBUSxFQUFLLElBQUksQ0FBQyxXQUFXLFNBQUksSUFBSSxDQUFDLElBQU07WUFDNUMsSUFBSSxFQUFFLElBQUk7WUFDVixPQUFPLEVBQUUsSUFBSTtTQUNoQixDQUFDO1FBQ0YsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7UUFDM0IsT0FBTyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDbkMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzNDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLE1BQU0sQ0FBQyxFQUFDLEtBQUssRUFBRSxDQUFDLE1BQU0sQ0FBQyxFQUFFLElBQUksRUFBRSxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBQyxDQUFDO0lBQ3JGLENBQUM7SUFDRCx5RUFBeUU7SUFDekUsa0RBQWtEO0lBQ2xELG9FQUFvRTtJQUNwRTs7Ozs7Ozs7T0FRRztJQUNILEdBQUcsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0lBQ2hDLE1BQU0sQ0FBQyxFQUFDLElBQUksRUFBRSxpQkFBaUIsQ0FBQyxJQUFJLEVBQUMsQ0FBQztBQUN4QyxDQUFDO0FBRUQsNkNBQTZDO0FBQzdDLGdDQUFnQyxJQUFJLEVBQUUsRUFBVSxFQUFFLElBQVk7SUFDNUQsSUFBSSxPQUFPLEdBQUcsRUFBRSxDQUFDO0lBQ2pCLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ3RELE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQ3JDLENBQUM7SUFDRCxNQUFNLENBQUMsT0FBTyxDQUFDO0FBQ2pCLENBQUM7QUFFRCxnREFBZ0Q7QUFDaEQsK0JBQStCLFFBQXVCO0lBQ3BELElBQUksWUFBWSxHQUFHLHdCQUF3QixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3pELFlBQVksQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNwQixHQUFHLENBQUMsQ0FBYyxVQUFpQixFQUFqQixLQUFBLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQTlCLGNBQVMsRUFBVCxJQUE4QixDQUFDO1FBQS9CLElBQUksS0FBSyxTQUFBO1FBQ1osSUFBSSxHQUFHLEdBQUcsd0JBQXdCLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDMUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ1gsY0FBYyxDQUFDLFlBQVksRUFBRSxHQUFHLENBQUMsQ0FBQztLQUNuQztJQUNELFlBQVksQ0FBQyxJQUFJLENBQUMsVUFBQyxDQUFDLEVBQUUsQ0FBQztRQUNyQixNQUFNLENBQUMsU0FBRyxDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUUsRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxTQUFHLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3ZILENBQUMsQ0FBQyxDQUFDO0lBQ0gsTUFBTSxDQUFDLFlBQVksQ0FBQztBQUN0QixDQUFDO0FBRUQsa0NBQWtDLE1BQWM7SUFDOUMsSUFBSSxRQUFRLEdBQUcsU0FBRyxDQUFDLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxFQUFFLFFBQUEsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUMzRCxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxVQUFDLENBQUMsSUFBSyxPQUFBLENBQUMsQ0FBQyxZQUFZLENBQUMsRUFBZixDQUFlLENBQUMsQ0FBQztBQUM5QyxDQUFDO0FBRUQsaUNBQWlDLElBQVUsRUFBRSxVQUFzQixFQUFFLE9BQWdCLEVBQUUsWUFBMEI7SUFFL0csNkRBQTZEO0lBQzdELEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxJQUFJLEtBQUssaUJBQWlCLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUNuRCxJQUFJLG1CQUFtQixHQUFjO1lBQ25DLEVBQUUsRUFBRSxJQUFJLENBQUMsSUFBSTtZQUNiLFdBQVcsRUFBRSxJQUFJLENBQUMsSUFBSTtZQUN0QixVQUFVLEVBQUUsVUFBVTtZQUN0QixLQUFLLEVBQUssVUFBVSxDQUFDLFdBQVcsU0FBSSxJQUFJLENBQUMsSUFBTTtZQUMvQyxRQUFRLEVBQUssVUFBVSxDQUFDLFdBQVcsU0FBSSxJQUFJLENBQUMsSUFBTTtZQUNsRCxJQUFJLEVBQUUsSUFBSTtZQUNWLE9BQU8sRUFBRSxJQUFJO1NBQ2QsQ0FBQTtRQUNELElBQUksQ0FBQyxTQUFTLEdBQUcsbUJBQW1CLENBQUM7UUFDckMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQztRQUM3QyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztRQUNsQixNQUFNLENBQUMsSUFBSSxDQUFDO0lBR2QsQ0FBQztJQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsSUFBSSxLQUFLLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDMUQsSUFBSSxNQUFNLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuQyxJQUFJLFdBQVcsR0FBRyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM1QyxFQUFFLENBQUMsQ0FBQyxXQUFXLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztZQUM5Qix5QkFBeUI7WUFDekIsSUFBSSxLQUFLLEdBQVU7Z0JBQ2pCLEVBQUUsRUFBRSxDQUFDO2dCQUNMLFlBQVksRUFBRSxXQUFXLENBQUMsV0FBVztnQkFDckMsY0FBYyxFQUFFLFdBQVcsQ0FBQyxXQUFXO2dCQUN2QyxHQUFHLEVBQUUsa0JBQWtCLENBQUMsRUFBRTtnQkFDMUIsVUFBVSxFQUFFLEVBQUU7YUFDZixDQUFDO1lBQ0YsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzNCLGVBQWUsQ0FBQyxLQUFLLEVBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3ZDLEtBQUssQ0FBQyxVQUFVLEdBQUcsV0FBVyxDQUFDO1lBQy9CLFdBQVcsQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDO1lBQ3pCLE9BQU8sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQ3RDLG1EQUFtRDtZQUNuRCxJQUFJLG1CQUFtQixHQUFjO2dCQUNuQyxFQUFFLEVBQUUsVUFBVSxDQUFDLFdBQVc7Z0JBQzFCLFdBQVcsRUFBRSxVQUFVLENBQUMsV0FBVztnQkFDbkMsVUFBVSxFQUFFLFdBQVc7Z0JBQ3ZCLEtBQUssRUFBRSxLQUFHLFVBQVUsQ0FBQyxXQUFhO2dCQUNsQyxRQUFRLEVBQUUsS0FBRyxVQUFVLENBQUMsV0FBYTtnQkFDckMsSUFBSSxFQUFFLEtBQUs7Z0JBQ1gsT0FBTyxFQUFFLEtBQUs7YUFDZixDQUFBO1lBQ0QsS0FBSyxDQUFDLFNBQVMsR0FBRyxtQkFBbUIsQ0FBQztZQUN0QyxPQUFPLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1lBQzdDLEtBQUssQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO1lBQ25CLDZDQUE2QztZQUM3QyxJQUFJLFNBQVMsR0FBYztnQkFDekIsRUFBRSxFQUFFLElBQUksQ0FBQyxJQUFJO2dCQUNiLFdBQVcsRUFBRSxJQUFJLENBQUMsSUFBSTtnQkFDdEIsVUFBVSxFQUFFLFdBQVc7Z0JBQ3ZCLEtBQUssRUFBSyxXQUFXLENBQUMsV0FBVyxTQUFJLElBQUksQ0FBQyxJQUFNO2dCQUNoRCxRQUFRLEVBQUssV0FBVyxDQUFDLFdBQVcsU0FBSSxJQUFJLENBQUMsSUFBTTtnQkFDbkQsSUFBSSxFQUFFLElBQUk7Z0JBQ1YsT0FBTyxFQUFFLElBQUk7YUFDZCxDQUFBO1lBQ0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7WUFDM0IsT0FBTyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDbkMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7WUFDbEIsTUFBTSxDQUFDLElBQUksQ0FBQztRQUNkLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNOLElBQUksTUFBTSxHQUFHLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNuQyxFQUFFLENBQUMsQ0FBQyxNQUFNLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztZQUUzQixDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUM7SUFDRCxNQUFNLENBQUMsS0FBSyxDQUFDO0FBQ2YsQ0FBQztBQUVELDZCQUE2QixJQUFVLEVBQUUsTUFBYyxFQUFFLE9BQWdCO0lBQ3ZFLElBQUksU0FBUyxHQUFHLGdCQUFnQixDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUMsTUFBTSxDQUFDLENBQUM7SUFDbkQsRUFBRSxDQUFDLENBQUMsU0FBUyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDNUIsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzVDLENBQUM7UUFDRCxPQUFPLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNuQyxJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztRQUMzQixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDM0MsU0FBUyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDdEIsNkRBQTZEO1FBQzdELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzdGLElBQUksUUFBTSxHQUFHLGFBQWEsQ0FBQyxLQUFHLFNBQVMsQ0FBQyxLQUFPLENBQUMsQ0FBQztZQUNqRCxFQUFFLENBQUMsQ0FBQyxRQUFNLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztnQkFDekIsSUFBSSxDQUFDLE1BQU0sR0FBRyxRQUFNLENBQUM7Z0JBQ3JCLFFBQU0sQ0FBQyxRQUFRLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQztnQkFDckMsUUFBTSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7Z0JBQzlCLFFBQU0sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO2dCQUNuQixJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO2dCQUNuQyxTQUFTLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztnQkFDMUIsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBTSxDQUFDLENBQUM7Z0JBQzlCLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUMxQyxDQUFDO1FBQ0gsQ0FBQztRQUNELElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLElBQUksVUFBVSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDN0IsTUFBTSxDQUFDLElBQUksQ0FBQztJQUNkLENBQUM7SUFDRCxNQUFNLENBQUMsS0FBSyxDQUFDO0FBQ2YsQ0FBQztBQUVELGdFQUFnRTtBQUNoRSxnQ0FBZ0MsSUFBVSxFQUFFLE9BQWdCO0lBQzFELElBQUksZUFBZSxHQUFHLGNBQWMsQ0FBQyxJQUFJLEVBQUMsT0FBTyxDQUFDLENBQUM7SUFDbkQsRUFBRSxDQUFDLENBQUMsZUFBZSxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDN0IsTUFBTSxDQUFDLElBQUksQ0FBQztJQUNkLENBQUM7SUFBQyxJQUFJLENBQUMsQ0FBQztRQUNOLElBQUksV0FBVyxHQUFHLFVBQVUsQ0FBQyxJQUFJLEVBQUMsT0FBTyxDQUFDLENBQUM7UUFDM0MsRUFBRSxDQUFDLENBQUMsV0FBVyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDekIsTUFBTSxDQUFDLElBQUksQ0FBQztRQUNkLENBQUM7SUFDSCxDQUFDO0lBQ0QsTUFBTSxDQUFDLEtBQUssQ0FBQztBQUNmLENBQUM7QUFFRCxnRUFBZ0U7QUFDaEUsZ0NBQWdDLElBQVUsRUFBRSxPQUFnQjtJQUMxRCxJQUFJLFdBQVcsR0FBRyxVQUFVLENBQUMsSUFBSSxFQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzNDLEVBQUUsQ0FBQyxDQUFDLFdBQVcsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ3pCLE1BQU0sQ0FBQyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBQUMsSUFBSSxDQUFDLENBQUM7UUFDTixJQUFJLGVBQWUsR0FBRyxjQUFjLENBQUMsSUFBSSxFQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ25ELEVBQUUsQ0FBQyxDQUFDLGVBQWUsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzdCLE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDZCxDQUFDO0lBQ0gsQ0FBQztJQUNELE1BQU0sQ0FBQyxLQUFLLENBQUM7QUFDZixDQUFDO0FBRUQsd0JBQXdCLElBQVUsRUFBRSxPQUFnQjtJQUNsRCxJQUFJLFVBQVUsR0FBRyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDOUMsRUFBRSxDQUFDLENBQUMsVUFBVSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDN0IsT0FBTyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDckMsVUFBVSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDdkIsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7UUFDN0IsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7UUFDbEIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzNDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMxQyxPQUFPLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMvQixDQUFDO1FBQ0QsTUFBTSxDQUFDLElBQUksQ0FBQztJQUNkLENBQUM7SUFDRCxNQUFNLENBQUMsS0FBSyxDQUFDO0FBQ2YsQ0FBQztBQUVELG9CQUFvQixJQUFVLEVBQUUsT0FBZ0I7SUFDOUMsSUFBSSxNQUFNLEdBQUcsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN0QyxFQUFFLENBQUMsQ0FBQyxNQUFNLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztRQUN6QixPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM5QixNQUFNLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNuQixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUNyQixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztRQUNsQixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUE7UUFDdkMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQy9CLENBQUM7UUFDRCxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUNELE1BQU0sQ0FBQyxLQUFLLENBQUM7QUFDZixDQUFDO0FBNEJELG9CQUFvQixJQUFVO0lBQzVCLElBQUksTUFBTSxHQUFHLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDOUIsTUFBTSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUM7SUFDdkIsTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUNoQixDQUFDO0FBRUQsa0JBQXlCLEtBQW1CLEVBQUUsVUFBeUIsRUFBRSxRQUFzQjtJQUM3RixFQUFFLENBQUMsQ0FBQyxLQUFLLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztRQUN4QixLQUFLLEdBQUcsRUFBRSxDQUFDO0lBQ2IsQ0FBQztJQUNELEVBQUUsQ0FBQyxDQUFDLFVBQVUsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO1FBQzdCLFVBQVUsR0FBRyxFQUFFLENBQUM7SUFDbEIsQ0FBQztJQUNELEVBQUUsQ0FBQyxDQUFDLFFBQVEsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO1FBQzNCLFFBQVEsR0FBRyxFQUFFLENBQUM7SUFDaEIsQ0FBQztJQUNELGVBQWU7SUFDZixJQUFJLFdBQVcsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQzFDLElBQUksV0FBVyxHQUFtQixXQUFXLENBQUMsR0FBRyxDQUFDLFVBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJO1FBQ25FLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLEtBQUssQ0FBQztJQUN2QyxDQUFDLENBQUMsQ0FBQztJQUNILEtBQUssR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLFVBQUMsSUFBSSxFQUFFLEtBQUssSUFBSyxPQUFBLFdBQVcsQ0FBQyxLQUFLLENBQUMsRUFBbEIsQ0FBa0IsQ0FBQyxDQUFDO0lBQzFELElBQUksS0FBSyxHQUFVO1FBQ2pCLElBQUksRUFBRSxPQUFPO1FBQ2IsS0FBSyxFQUFFLEtBQUs7UUFDWixVQUFVLEVBQUUsVUFBVTtRQUN0QixRQUFRLEVBQUUsUUFBUTtRQUNsQixRQUFRLEVBQUUsYUFBYTtLQUN4QixDQUFBO0lBQ0QsdUJBQXVCLEtBQWM7UUFDbkMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxJQUFJLEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUQsTUFBTSxDQUFDLEVBQUUsQ0FBQztRQUNaLENBQUM7UUFDRCxFQUFFLENBQUMsQ0FBQyxLQUFLLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztZQUN4QixLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ1osQ0FBQztRQUNELElBQUksTUFBTSxHQUFHLEtBQUssQ0FBQyxLQUFLLEdBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3ZDLElBQUksV0FBVyxHQUFHLE1BQU0sR0FBRyxHQUFHLENBQUM7UUFDL0IsNkNBQTZDO1FBQzdDLElBQUksVUFBVSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUM7UUFDNUIsSUFBSSxVQUFVLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsVUFBQyxJQUFJLElBQUssT0FBQSxZQUFZLENBQUMsSUFBSSxFQUFDLEtBQUssR0FBQyxDQUFDLENBQUMsRUFBMUIsQ0FBMEIsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNsRixJQUFJLGdCQUFnQixHQUFHLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLFVBQUMsS0FBSyxJQUFLLE9BQUEsS0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEVBQXpCLENBQXlCLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDN0YsSUFBSSxjQUFjLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsVUFBQyxJQUFJLElBQUssT0FBQSxZQUFZLENBQUMsSUFBSSxFQUFDLEtBQUssR0FBQyxDQUFDLENBQUMsRUFBMUIsQ0FBMEIsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN6RiwrQkFBK0I7UUFDL0IsV0FBVyxJQUFJLFVBQVUsQ0FBQztRQUMxQixXQUFXLElBQUksVUFBVSxLQUFLLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSSxHQUFHLFVBQVUsQ0FBQztRQUMxRCxXQUFXLElBQUksZ0JBQWdCLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLEdBQUcsZ0JBQWdCLENBQUM7UUFDdEUsV0FBVyxJQUFJLGNBQWMsS0FBSyxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksR0FBRyxjQUFjLENBQUM7UUFDbEUsc0JBQXNCO1FBQ3RCLFdBQVcsSUFBSSxJQUFJLEdBQUcsTUFBTSxHQUFHLEdBQUcsQ0FBQztRQUNuQyxNQUFNLENBQUMsV0FBVyxDQUFDO0lBQ3JCLENBQUM7SUFDRCxzQkFBc0IsSUFBVSxFQUFFLEtBQWM7UUFDOUMsRUFBRSxDQUFDLENBQUMsS0FBSyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDeEIsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUNaLENBQUM7UUFDRCxJQUFJLE1BQU0sR0FBRyxLQUFLLENBQUMsS0FBSyxHQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN2QyxJQUFJLFVBQVUsR0FBRyxNQUFNLEdBQUcsR0FBRyxDQUFDO1FBQzlCLFVBQVUsSUFBTyxJQUFJLENBQUMsSUFBSSxNQUFHLENBQUM7UUFDOUIsVUFBVSxJQUFJLE1BQUcsSUFBSSxDQUFDLEtBQUssS0FBSyxTQUFTLEdBQUcsRUFBRSxHQUFHLE9BQUksSUFBSSxDQUFDLEtBQUssUUFBSSxDQUFFLENBQUM7UUFDdEUsVUFBVSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLFVBQUMsS0FBSyxJQUFLLE9BQUEsT0FBSSxLQUFLLENBQUMsSUFBSSxVQUFJLEtBQUssQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDLEtBQUssR0FBRyxPQUFJLEtBQUssQ0FBQyxLQUFLLE9BQUcsRUFBRSxFQUFyRSxDQUFxRSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzFILFVBQVUsSUFBSSxHQUFHLENBQUM7UUFDbEIsTUFBTSxDQUFDLFVBQVUsQ0FBQztJQUNwQixDQUFDO0lBQ0QsTUFBTSxDQUFDLEtBQUssQ0FBQztBQUNmLENBQUM7QUEzRGUsZ0JBQVEsV0EyRHZCLENBQUE7QUFHRCxtQkFBbUIsSUFBVTtJQUMzQixJQUFJLEtBQUssR0FBVSxRQUFRLEVBQUUsQ0FBQztJQUM5QixJQUFJLGFBQWEsR0FBaUIsRUFBRSxDQUFDO0lBRXJDLHlCQUF5QjtJQUV6QixJQUFJLFlBQVksR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNoRCx3QkFBd0I7SUFDeEIsSUFBSSxxQkFBcUIsR0FBaUIsRUFBRSxDQUFDO0lBQzdDLEdBQUcsQ0FBQyxDQUFlLFVBQVksRUFBMUIsd0JBQVUsRUFBVixJQUEwQixDQUFDO1FBQTNCLElBQUksTUFBTSxHQUFJLFlBQVksSUFBaEI7UUFDYixLQUFLLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMvQyxLQUFLLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM5RCwyQkFBMkI7UUFDM0IsR0FBRyxDQUFDLENBQWdCLFVBQWUsRUFBZixLQUFBLE1BQU0sQ0FBQyxRQUFRLEVBQTlCLGNBQVcsRUFBWCxJQUE4QixDQUFDO1lBQS9CLElBQUksU0FBTyxTQUFBO1lBQ2QsRUFBRSxDQUFDLENBQUMsU0FBTyxDQUFDLEtBQUssS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO2dCQUNoQyxxQkFBcUIsR0FBRyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsU0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3ZFLENBQUM7U0FDRjtLQUNGO0lBQ0QsRUFBRSxDQUFDLENBQUMscUJBQXFCLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckMsSUFBSSxTQUFPLEdBQUc7WUFDWixJQUFJLEVBQUUsVUFBVTtZQUNoQixNQUFNLEVBQUUscUJBQXFCO1NBQzlCLENBQUE7UUFDRCxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxTQUFPLENBQUMsQ0FBQztJQUMvQixDQUFDO0lBQ0Qsa0VBQWtFO0lBQ2xFLHdCQUF3QjtJQUN4QixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUMsSUFBSSxRQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ3JCLEtBQUssR0FBRyxRQUFRLEVBQUUsQ0FBQztRQUNuQixLQUFLLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUMxRCxRQUFRLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztRQUN2QixLQUFLLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNsQyxDQUFDO0lBRUQsMEJBQTBCO0lBRTFCLDBCQUEwQjtJQUMxQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEMsOENBQThDO1FBQzlDLEdBQUcsQ0FBQyxDQUFnQixVQUFjLEVBQWQsS0FBQSxLQUFLLENBQUMsUUFBUSxFQUE3QixjQUFXLEVBQVgsSUFBNkIsQ0FBQztZQUE5QixJQUFJLFNBQU8sU0FBQTtZQUNkLFNBQU8sQ0FBQyxNQUFNLEdBQUcsU0FBTyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQztTQUMzQztRQUNELE1BQU0sQ0FBQyxLQUFLLENBQUM7SUFDZixDQUFDO0lBQ0QsbURBQW1EO0lBQ25ELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztRQUMzQixtQ0FBbUM7UUFDbkMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDakMsTUFBTSxDQUFDLEtBQUssQ0FBQztRQUNmLENBQUM7UUFFRCx5REFBeUQ7UUFDekQsSUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsVUFBQyxLQUFLLElBQUssT0FBQSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxJQUFJLEtBQUssQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2VBQ3pFLEtBQUssQ0FBQyxLQUFLLEtBQUssSUFBSSxFQUR4QixDQUN3QixDQUFDO2FBQzNDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUNsRCxJQUFJLElBQUksR0FBRyxrQkFBa0IsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUUxQyxvREFBb0Q7UUFDcEQsb0RBQW9EO1FBQ3BELElBQUksTUFBTSxDQUFDO1FBQ1gsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQzNDLElBQUksTUFBTSxHQUFpQixJQUFJLENBQUMsR0FBRyxDQUFDLFVBQUMsR0FBRyxFQUFDLENBQUM7Z0JBQ3hDLE1BQU0sQ0FBQyxFQUFDLElBQUksRUFBRSxLQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBRztvQkFDOUIsS0FBSyxFQUFFLEtBQUcsR0FBRyxDQUFDLFNBQVMsQ0FBQyxRQUFVO29CQUNyQyxRQUFRLEVBQUUsSUFBSSxFQUFDLENBQUM7WUFDdEIsQ0FBQyxDQUFDLENBQUM7WUFDSCxJQUFJLElBQUksR0FBUztnQkFDZixJQUFJLEVBQUUsUUFBUTtnQkFDZCxLQUFLLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJO2dCQUNwQixNQUFNLEVBQUUsTUFBTTthQUNmLENBQUE7WUFDRCw0RUFBNEU7WUFDNUUsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEtBQUssYUFBYSxDQUFDLFNBQVMsSUFBSSxLQUFLLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUM3RSxJQUFJLFFBQVEsR0FBRyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNuQyxFQUFFLENBQUMsQ0FBQyxRQUFRLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztvQkFDM0IsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQzVCLENBQUM7WUFDSCxDQUFDO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ04sS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDekIsQ0FBQztZQUNELDhCQUE4QjtZQUM5QixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUM5QixJQUFJLFlBQVksR0FBaUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFDLEdBQUcsSUFBSyxPQUFBLEdBQUcsQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxFQUFsQyxDQUFrQyxDQUFDO3FCQUNwRCxHQUFHLENBQUMsVUFBQyxHQUFHO29CQUFNLE1BQU0sQ0FBQyxFQUFDLElBQUksRUFBRSxLQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBTTt3QkFDekIsS0FBSyxFQUFFLEtBQUcsR0FBRyxDQUFDLFNBQVMsQ0FBQyxRQUFVO3dCQUNwQyxRQUFRLEVBQUUsSUFBSSxFQUFDLENBQUE7Z0JBQUEsQ0FBQyxDQUFDLENBQUM7Z0JBQzFFLGFBQWEsR0FBRyxhQUFhLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDO2dCQUNuRCxLQUFLLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztZQUN0QixDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUM7SUFDRCxvREFBb0Q7SUFDcEQsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDMUIsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUN6QixJQUFJLFVBQVUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO1FBQ2pDLElBQUksTUFBTSxHQUFpQixFQUFFLENBQUM7UUFDOUIsSUFBSSxXQUFrQixDQUFDO1FBQ3ZCLFNBQVM7UUFDVCxFQUFFLENBQUMsQ0FBQyxNQUFNLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztZQUN6QixXQUFXLEdBQUcsRUFBQyxJQUFJLEVBQUUsUUFBUTtnQkFDZixLQUFLLEVBQUUsTUFBRyxJQUFJLENBQUMsTUFBTSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBRTtnQkFDbEYsUUFBUSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsZUFBZSxFQUFDLENBQUM7UUFDcEQsQ0FBQztRQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztZQUNwQyxXQUFXLEdBQUcsRUFBQyxJQUFJLEVBQUUsUUFBUTtnQkFDZixLQUFLLEVBQUUsS0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQWE7Z0JBQzFDLFFBQVEsRUFBRSxJQUFJLEVBQUMsQ0FBQztRQUM3QixDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDTixNQUFNLENBQUMsS0FBSyxDQUFDO1FBQ2YsQ0FBQztRQUNELE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDekIsWUFBWTtRQUNaLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztZQUMxQixJQUFJLFNBQVMsR0FBVSxFQUFDLElBQUksRUFBRSxXQUFXO2dCQUN2QixLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUU7Z0JBQ2xCLFFBQVEsRUFBRSxLQUFLLEVBQUMsQ0FBQztZQUMvQixNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3pCLENBQUM7UUFDRCxRQUFRO1FBQ1IsSUFBSSxVQUFVLEdBQVUsRUFBQyxJQUFJLEVBQUUsT0FBTztZQUNkLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxLQUFLLFNBQVMsR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRO1lBQzVELFFBQVEsRUFBRSxJQUFJLENBQUMsRUFBRSxLQUFLLFNBQVMsRUFBQyxDQUFDO1FBQ3RELE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDeEIsSUFBSSxJQUFJLEdBQVM7WUFDZixJQUFJLEVBQUUsUUFBUTtZQUNkLEtBQUssRUFBRSxhQUFhO1lBQ3BCLE1BQU0sRUFBRSxNQUFNO1NBQ2YsQ0FBQTtRQUNELEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3ZCLHVCQUF1QjtRQUN2QixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sS0FBSyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDN0UsSUFBSSxjQUFjLEdBQVUsRUFBQyxJQUFJLEVBQUUsS0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUk7Z0JBQzdCLEtBQUssRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVE7Z0JBQ2pDLFFBQVEsRUFBRSxJQUFJLEVBQUMsQ0FBQztZQUN6QyxhQUFhLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ3JDLENBQUM7SUFDSCxDQUFDO0lBQ0QscURBQXFEO0lBQ3JELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLEtBQUssU0FBUyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNFLElBQUksV0FBVyxHQUFVLEVBQUMsSUFBSSxFQUFFLFFBQVE7WUFDZixLQUFLLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRO1lBQ2xDLFFBQVEsRUFBRSxJQUFJLEVBQUMsQ0FBQztRQUN0QyxJQUFJLGVBQWUsR0FBVSxFQUFDLElBQUksRUFBRSxZQUFZO1lBQ25CLEtBQUssRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFDNUIsUUFBUSxFQUFFLEtBQUssRUFBQyxDQUFDO1FBQzNDLElBQUksSUFBSSxHQUFTO1lBQ2YsSUFBSSxFQUFFLFFBQVE7WUFDZCxLQUFLLEVBQUUsaUJBQWlCO1lBQ3hCLE1BQU0sRUFBRSxDQUFDLFdBQVcsRUFBRSxlQUFlLENBQUM7U0FDdkMsQ0FBQTtRQUNELEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3ZCLHVCQUF1QjtRQUN2QixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sS0FBSyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDOUUsSUFBSSxpQkFBZSxHQUFVLEVBQUMsSUFBSSxFQUFFLEtBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLElBQUksTUFBTSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBQyxFQUFFLENBQUc7Z0JBQ3hFLEtBQUssRUFBRSxLQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBVTtnQkFDdkMsUUFBUSxFQUFFLElBQUksRUFBQyxDQUFDO1lBQzFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsaUJBQWUsQ0FBQyxDQUFDO1FBQ3RDLENBQUM7SUFDSCxDQUFDO0lBQ0Qsa0RBQWtEO0lBQ2xELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLEtBQUssU0FBUyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZFLHVCQUF1QjtRQUN2QixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ2pDLElBQUksV0FBVyxHQUFVLEVBQUMsSUFBSSxFQUFFLEtBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLElBQUksTUFBTSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBQyxFQUFFLENBQUc7Z0JBQ3BFLEtBQUssRUFBRSxNQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFFO2dCQUNsRixRQUFRLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxlQUFlLEVBQUMsQ0FBQztZQUM3RCxhQUFhLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ2xDLENBQUM7SUFDSCxDQUFDO0lBQ0QsSUFBSSxPQUFPLEdBQUc7UUFDWixJQUFJLEVBQUUsVUFBVTtRQUNoQixNQUFNLEVBQUUsYUFBYTtLQUN0QixDQUFBO0lBRUQsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLElBQUksV0FBVyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDcEMsSUFBSSxZQUFZLEdBQUcsVUFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzNDLEtBQUssQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFFRCxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUM3QixNQUFNLENBQUMsS0FBSyxDQUFDO0FBQ2YsQ0FBQztBQUVELCtFQUErRTtBQUMvRSwwQkFBMEI7QUFDMUIsZ0ZBQWdGO0FBQ2hGLElBQUksT0FBTyxHQUFHLGtGQUFrRixDQUFDO0FBRXRGLGFBQUssR0FBRyxLQUFLLENBQUM7QUFFekIsYUFBYSxDQUFNO0lBQ2pCLEVBQUUsQ0FBQyxDQUFDLGFBQUssQ0FBQyxDQUFDLENBQUM7UUFDVixPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2pCLENBQUM7QUFDSCxDQUFDO0FBRUQsMkJBQWtDLEtBQWtCO0lBQ2xELElBQUksZUFBZSxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsVUFBQyxJQUFJLElBQUssT0FBQSxJQUFJLENBQUMsUUFBUSxFQUFFLEVBQWYsQ0FBZSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxPQUFPLEdBQUcsSUFBSSxDQUFDLENBQUM7SUFDdkYsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLEdBQUcsZUFBZSxHQUFHLElBQUksR0FBRyxPQUFPLENBQUM7QUFDM0QsQ0FBQztBQUhlLHlCQUFpQixvQkFHaEMsQ0FBQTtBQUVELHVCQUE4QixLQUFZO0lBQ3hDLElBQUksVUFBVSxHQUFHLE1BQUksS0FBSyxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsVUFBQyxRQUFvQixJQUFLLE9BQUEsVUFBVSxDQUFDLFFBQVEsQ0FBQyxFQUFwQixDQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFHLENBQUM7SUFDdkcsVUFBVSxHQUFHLFVBQVUsQ0FBQyxNQUFNLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxVQUFVLENBQUM7SUFDdkQsSUFBSSxTQUFTLEdBQUcsS0FBSyxDQUFDLEtBQUssS0FBSyxTQUFTLEdBQUcsR0FBRyxHQUFHLE9BQUssS0FBSyxDQUFDLEtBQUssU0FBSSxLQUFLLENBQUMsR0FBRyxPQUFJLENBQUM7SUFDcEYsSUFBSSxXQUFXLEdBQU0sS0FBSyxDQUFDLEVBQUUsVUFBSyxLQUFLLENBQUMsWUFBWSxXQUFNLEtBQUssQ0FBQyxjQUFjLFdBQU0sa0JBQWtCLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxXQUFNLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsV0FBTSxVQUFZLENBQUU7SUFDckwsTUFBTSxDQUFDLFdBQVcsQ0FBQztBQUNyQixDQUFDO0FBTmUscUJBQWEsZ0JBTTVCLENBQUE7QUFFRCw0QkFBbUMsTUFBb0I7SUFDckQsSUFBSSxnQkFBZ0IsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLFVBQUMsS0FBSyxJQUFLLE9BQUEsYUFBYSxDQUFDLEtBQUssQ0FBQyxFQUFwQixDQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzlFLE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxHQUFHLGdCQUFnQixHQUFHLElBQUksR0FBRyxPQUFPLENBQUM7QUFDNUQsQ0FBQztBQUhlLDBCQUFrQixxQkFHakMsQ0FBQTtBQUVELCtFQUErRTtBQUMvRSxvQkFBb0I7QUFDcEIsK0VBQStFO0FBRS9FLDRCQUE0QixXQUE4QjtJQUN4RCxJQUFJLFNBQVMsR0FBZSxFQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUMsV0FBVyxDQUFDLENBQUM7SUFDNUQsTUFBTSxDQUFDLFNBQVMsQ0FBQztBQUNuQixDQUFDO0FBRUQsb0JBQW9CLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSTtJQUNwQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxLQUFLLENBQUM7QUFDdkMsQ0FBQztBQUVELHdCQUF3QixDQUFDLEVBQUUsQ0FBQztJQUMxQixJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDWCxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDWCxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUM7SUFDaEIsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDLE1BQU0sSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ3RDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFBQyxFQUFFLEVBQUUsQ0FBQztRQUN4QixJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUFDLEVBQUUsRUFBRSxDQUFDO1FBQzdCLElBQUksQ0FBQyxDQUFDO1lBQ0osTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNuQixFQUFFLEVBQUUsQ0FBQztZQUNMLEVBQUUsRUFBRSxDQUFDO1FBQ1AsQ0FBQztJQUNILENBQUM7SUFDRCxNQUFNLENBQUMsTUFBTSxDQUFDO0FBQ2hCLENBQUM7QUFFRCxtQkFBbUIsQ0FBTTtJQUN2QixNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzlDLENBQUM7QUFNRCxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDOzs7QUNuOUV6QixzQ0FBc0M7QUFDdEMsOENBQThDO0FBQzlDLElBQVksVUFBVSxXQUFNLGNBQWMsQ0FBQyxDQUFBO0FBQzNDLElBQVksT0FBTyxXQUFNLFdBQVcsQ0FBQyxDQUFBO0FBQ3JDLDJCQUF5QixjQUFjLENBQUMsQ0FBQTtBQUN4QyxzQkFBK0IsU0FBUyxDQUFDLENBQUE7QUFHOUIsb0JBQVksR0FBRyxDQUFDLFlBQVksRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSx5QkFBeUIsRUFBRSx1QkFBdUIsRUFBRSxzQkFBc0IsRUFBRSx1QkFBdUIsRUFBRSxnQkFBZ0IsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO0FBQzVOLDBCQUFrQixHQUFHLEtBQUssQ0FBQztBQUV0QywyREFBMkQ7QUFDM0QsV0FBVztBQUNYLDJEQUEyRDtBQUUzRCxJQUFJLFNBQVMsQ0FBQztBQUNkLElBQUksV0FBVyxDQUFDO0FBQ2hCLElBQUksVUFBVSxHQUFHLENBQUMsQ0FBQztBQUduQjtJQUNFLGdCQUFRLEdBQUcsSUFBSSxVQUFVLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDckMsa0JBQVUsR0FBRyxJQUFJLHVCQUFVLENBQUMsV0FBRyxDQUFDLENBQUM7SUFDakMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsZ0JBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUM1QyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQzFDLFdBQVcsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzVDLFdBQVcsQ0FBQyxFQUFFLEdBQUcsV0FBVyxDQUFDO0lBQzdCLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3pDLENBQUM7QUFFRCxFQUFFLENBQUEsQ0FBQyxXQUFHLEtBQUssU0FBUyxDQUFDO0lBQUMsSUFBSSxXQUFXLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLGNBQU0sT0FBQSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBdEIsQ0FBc0IsRUFBRSxDQUFBO0FBRTNGLG1CQUFXLEdBQUcsRUFBRSxDQUFDO0FBQzVCO0lBQ0UsRUFBRSxDQUFBLENBQUMsQ0FBQyxnQkFBUSxJQUFJLGdCQUFRLENBQUMsTUFBTSxDQUFDO1FBQUMsTUFBTSxDQUFDO0lBQ3hDLGdCQUFRLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztJQUN2QixxQkFBcUIsQ0FBQztRQUNwQixJQUFJLEtBQUssR0FBTyxFQUFFLENBQUM7UUFDbkIsSUFBSSxLQUFLLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBRTlCLElBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUNmLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLElBQUksbUJBQVcsQ0FBQyxDQUFDLENBQUM7WUFDN0IsS0FBSyxDQUFDLElBQUksQ0FBQyxtQkFBVyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNsQyxDQUFDO1FBRUQsS0FBSyxDQUFDLElBQUksR0FBRyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDcEQsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztZQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUUvRCxLQUFLLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQzFCLElBQUksU0FBUyxHQUFHLFdBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQUMsRUFBRSxJQUFLLE9BQUEsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFkLENBQWMsQ0FBQyxDQUFDO1FBQ2xFLEVBQUUsQ0FBQSxDQUFDLGFBQUssSUFBSSxhQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztZQUM3QixPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxTQUFTLENBQUMsQ0FBQztZQUNyQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxrQkFBVSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1FBQ25ELENBQUM7UUFDRCxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsa0JBQVUsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztRQUN2RCxLQUFLLENBQUMsU0FBUyxHQUFHLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxHQUFHLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6RCxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO1lBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUM7UUFFL0UsS0FBSyxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUMxQixnQkFBUSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN2QixLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxHQUFHLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0RCxLQUFLLENBQUMsTUFBTSxHQUFHLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFckMsV0FBVyxDQUFDLFdBQVcsR0FBRyxFQUFFLENBQUM7UUFDN0IsV0FBVyxDQUFDLFdBQVcsSUFBSSxXQUFTLEtBQUssQ0FBQyxJQUFNLENBQUM7UUFDakQsV0FBVyxDQUFDLFdBQVcsSUFBSSxvQkFBa0IsS0FBSyxDQUFDLFNBQVcsQ0FBQztRQUMvRCxXQUFXLENBQUMsV0FBVyxJQUFJLGdCQUFjLEtBQUssQ0FBQyxNQUFRLENBQUM7UUFDeEQsV0FBVyxDQUFDLFdBQVcsSUFBSSxnQkFBYyxLQUFLLENBQUMsTUFBUSxDQUFDO1FBQ3hELFNBQVMsR0FBRyxLQUFLLENBQUM7UUFFbEIsZ0JBQVEsQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO0lBQzFCLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQXZDZSxjQUFNLFNBdUNyQixDQUFBO0FBRUQsSUFBSSxXQUFXLEdBQUcsS0FBSyxDQUFDO0FBQ3hCO0lBQ0UsRUFBRSxDQUFBLENBQUMsV0FBVyxDQUFDO1FBQUMsTUFBTSxDQUFDO0lBQ3ZCLFdBQVcsR0FBRyxJQUFJLENBQUM7SUFDbkIsVUFBVSxDQUFDO1FBQ1QsSUFBSSxVQUFVLEdBQUcsV0FBRyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNyQyxFQUFFLENBQUMsQ0FBQywwQkFBa0IsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ2pDLEdBQUcsQ0FBQyxDQUFlLFVBQVksRUFBMUIsZ0NBQVUsRUFBVixJQUEwQixDQUFDO2dCQUEzQixJQUFJLE1BQU0sR0FBSSxvQkFBWSxJQUFoQjtnQkFDYixPQUFPLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUMzQjtRQUNILENBQUM7UUFDRCxPQUFPLFVBQVUsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNoQyxZQUFZLENBQUMsMEJBQWtCLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQzlELFdBQVcsR0FBRyxLQUFLLENBQUM7SUFDdEIsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ1gsQ0FBQztBQUVELDJEQUEyRDtBQUMzRCxXQUFXO0FBQ1gsMkRBQTJEO0FBRTNELElBQUksVUFBVSxHQUFHLEVBQUUsQ0FBQztBQUVwQixnQkFBdUIsS0FBSyxFQUFFLElBQUk7SUFDaEMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QixPQUFPLENBQUMsS0FBSyxDQUFDLDhCQUE0QixLQUFLLE1BQUcsQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFDRCxVQUFVLENBQUMsS0FBSyxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQzNCLENBQUM7QUFMZSxjQUFNLFNBS3JCLENBQUE7QUFFRCxrQkFBeUIsS0FBYyxFQUFFLElBQTZCLEVBQUUsWUFBYTtJQUNuRixJQUFJLE1BQU0sR0FBRyxZQUFZLENBQUM7SUFDMUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ1osTUFBTSxHQUFHLFdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNwQixNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7UUFDMUIsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO0lBQzNCLENBQUM7SUFDRCxNQUFNLENBQUMsUUFBUSxHQUFHLFVBQUMsS0FBSyxFQUFFLElBQUk7UUFDNUIsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ3ZDLENBQUMsQ0FBQztJQUNGLE1BQU0sQ0FBQyxNQUFNLEdBQUc7UUFDZCxJQUFJLEtBQUssR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDOUIsOEVBQThFO1FBQzlFLG9GQUFvRjtRQUNwRixtREFBbUQ7UUFDbkQsa0NBQWtDO1FBQ2xDLG1EQUFtRDtRQUNuRCx3Q0FBd0M7UUFDeEMsd0NBQXdDO1FBQ3hDLDZFQUE2RTtRQUM3RSxPQUFPO1FBQ1AsRUFBRSxDQUFBLENBQUMsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztZQUN4QixXQUFHLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3hCLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNOLFdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNuQyxDQUFDO1FBQ0QsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ3ZCLE1BQU0sRUFBRSxDQUFDO1FBQ1gsQ0FBQztRQUNELEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUN0QixZQUFZLEVBQUUsQ0FBQztZQUNmLEVBQUUsQ0FBQyxDQUFDLDBCQUFrQixLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUM7Z0JBQ2pDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN4QixDQUFDO1FBQ0gsQ0FBQztRQUNELFVBQVUsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLEdBQUcsS0FBSyxDQUFDO0lBQ3pDLENBQUMsQ0FBQTtJQUNELEVBQUUsQ0FBQSxDQUFDLENBQUMsS0FBSyxDQUFDO1FBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUN6QixJQUFJLElBQUksR0FBRyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDN0IsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ1YsT0FBTyxDQUFDLEtBQUssQ0FBQyx3QkFBc0IsS0FBSyxlQUFVLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFJLENBQUMsQ0FBQztJQUM5RSxDQUFDO0lBQUMsSUFBSSxDQUFDLENBQUM7UUFDTixJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3JCLENBQUM7SUFDRCxNQUFNLENBQUMsTUFBTSxDQUFBO0FBQ2YsQ0FBQztBQTdDZSxnQkFBUSxXQTZDdkIsQ0FBQTtBQUVELDJEQUEyRDtBQUMzRCxRQUFRO0FBQ1IsMkRBQTJEO0FBRWhELFdBQUcsR0FBRyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDeEIsb0JBQVksR0FBRyxFQUFFLENBQUM7QUFDbEIsc0JBQWMsR0FBRyxFQUFFLENBQUM7QUFFL0IsY0FBcUIsSUFBSSxFQUFFLElBQUk7SUFDN0Isb0JBQVksQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUM7QUFDNUIsQ0FBQztBQUZlLFlBQUksT0FFbkIsQ0FBQTtBQUVEO0lBQ0UsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsSUFBSSxvQkFBWSxDQUFDLENBQUMsQ0FBQztRQUNsQyxvQkFBWSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUM7SUFDM0IsQ0FBQztBQUNILENBQUM7QUFFRCwyREFBMkQ7QUFDM0QsWUFBWTtBQUNaLDJEQUEyRDtBQUUzRCxJQUFJLEVBQUUsR0FBRyxZQUFJLEVBQUUsQ0FBQztBQUNoQixFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztJQUNyQixFQUFFLENBQUEsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7UUFBQyxFQUFFLEdBQUcsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQy9DLElBQUk7UUFBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQy9CLENBQUM7QUFHRDtJQUNFLGNBQU0sR0FBRyxJQUFJLFNBQVMsQ0FBQyxXQUFRLE1BQU0sQ0FBQyxRQUFRLENBQUMsUUFBUSxJQUFJLFdBQVcsV0FBTyxDQUFDLENBQUM7SUFDL0UsY0FBTSxDQUFDLE9BQU8sR0FBRztRQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMsNERBQTRELENBQUMsQ0FBQztRQUM1RSwwQkFBa0IsR0FBRyxXQUFXLENBQUM7UUFDakMsbUJBQW1CLEVBQUUsQ0FBQztRQUN0QixNQUFNLEVBQUUsQ0FBQztJQUNYLENBQUMsQ0FBQTtJQUNELGNBQU0sQ0FBQyxNQUFNLEdBQUc7UUFDZCxVQUFVLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQzVCLENBQUMsQ0FBQTtJQUNELGNBQU0sQ0FBQyxTQUFTLEdBQUcsVUFBQyxJQUFJO1FBQ3RCLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ25DLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBRW5DLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQztZQUMzQixXQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN0QixtQkFBbUIsRUFBRSxDQUFDO1lBQ3RCLE1BQU0sRUFBRSxDQUFDO1FBQ1gsQ0FBQztRQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxLQUFLLFdBQVcsQ0FBQyxDQUFDLENBQUM7WUFDdkMsSUFBSSxJQUFJLEdBQUcsV0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ3RCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQztZQUMxQixXQUFHLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3BCLE1BQU0sRUFBRSxDQUFDO1FBQ1gsQ0FBQztJQUNILENBQUMsQ0FBQztBQUNKLENBQUM7QUFFRCxvQkFBb0IsV0FBVyxFQUFFLElBQUk7SUFDbkMsRUFBRSxDQUFDLENBQUMsQ0FBQyxjQUFNLENBQUM7UUFBQyxNQUFNLENBQUM7SUFDcEIsY0FBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxJQUFBLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFLE1BQUEsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzNGLENBQUM7QUFFRCx1QkFBdUIsU0FBUztJQUM5QixFQUFFLENBQUMsQ0FBQyxDQUFDLGNBQU0sQ0FBQztRQUFDLE1BQU0sQ0FBQztJQUNwQixJQUFJLE9BQU8sR0FBRyxFQUFFLENBQUM7SUFDakIsSUFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDO0lBQ2pCLEdBQUcsQ0FBQyxDQUFjLFVBQVksRUFBekIsZ0NBQVMsRUFBVCxJQUF5QixDQUFDO1FBQTFCLElBQUksS0FBSyxHQUFJLG9CQUFZLElBQWhCO1FBQ1osRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUIsSUFBSSxHQUFHLElBQUksQ0FBQztZQUNaLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzNDLENBQUM7S0FDRjtJQUNELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQztRQUFDLFVBQVUsQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDN0MsQ0FBQztBQUVELDJEQUEyRDtBQUMzRCxLQUFLO0FBQ0wsMkRBQTJEO0FBQzNELEVBQUUsQ0FBQSxDQUFDLFdBQUcsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO0lBQ3JCLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsRUFBRSxVQUFTLEtBQUs7UUFDMUQsWUFBWSxFQUFFLENBQUM7UUFDZixlQUFlLEVBQUUsQ0FBQztRQUNsQixNQUFNLEVBQUUsQ0FBQztJQUNYLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELElBQUksQ0FBQyxXQUFXLEVBQUM7SUFDZixJQUFJLE1BQU0sR0FBRyxZQUFZLENBQUMsMEJBQWtCLENBQUMsQ0FBQztJQUM5QyxFQUFFLENBQUEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ1YsV0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNuQixDQUFDO0FBQ0gsQ0FBQyxDQUFDLENBQUM7QUFHSCxFQUFFLENBQUEsQ0FBQyxXQUFHLEtBQUssU0FBUyxDQUFDO0lBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLE9BQU8sQ0FBQzs7O0FDclA5QyxzQkFBMEMsU0FDMUMsQ0FBQyxDQURrRDtBQUNuRCxJQUFZLE9BQU8sV0FBTSxXQUN6QixDQUFDLENBRG1DO0FBQ3BDLElBQVksR0FBRyxXQUFNLE9BQ3JCLENBQUMsQ0FEMkI7QUFDNUIsb0JBQWtCLE9BQ2xCLENBQUMsQ0FEd0I7QUFDekIsdUJBQTBDLFVBQzFDLENBQUMsQ0FEbUQ7QUFDcEQsMkJBQWlCLGNBRWpCLENBQUMsQ0FGOEI7QUFFcEIsWUFBSSxHQUFHLFNBQUcsQ0FBQztBQUd0QiwrRUFBK0U7QUFDL0UsWUFBWTtBQUNaLCtFQUErRTtBQUUvRSw2Q0FBNkM7QUFDN0MsMkNBQTJDO0FBQzNDLDRDQUE0QztBQUM1Qyx3RkFBd0Y7QUFDeEYsbURBQW1EO0FBQ25ELDREQUE0RDtBQUM1RCxnREFBZ0Q7QUFDaEQsMEJBQTBCO0FBQzFCLHdFQUF3RTtBQUN4RSxRQUFRO0FBQ1IsbUJBQW1CO0FBQ25CLE1BQU07QUFDTixzQ0FBc0M7QUFDdEMsSUFBSTtBQUVKO0lBUUUsaUJBQW1CLElBQW9CLEVBQVMsU0FBdUI7UUFBOUIseUJBQThCLEdBQTlCLFlBQW1CLElBQUksQ0FBQyxJQUFJLEVBQUU7UUFBcEQsU0FBSSxHQUFKLElBQUksQ0FBZ0I7UUFBUyxjQUFTLEdBQVQsU0FBUyxDQUFjO1FBUDdELFdBQU0sR0FBMkIsRUFBRSxDQUFDO1FBQ3BDLGdCQUFXLEdBQTZCLEVBQUUsQ0FBQztRQUMzQyxjQUFTLEdBQVksRUFBRSxDQUFDO1FBQ3hCLFNBQUksR0FBcUIsRUFBRSxDQUFDO1FBQzVCLGFBQVEsR0FBbUMsRUFBRSxDQUFDO1FBQzlDLFdBQU0sR0FBMkIsRUFBRSxDQUFDO0lBRTRCLENBQUM7SUFFM0UsMEJBQVEsR0FBUixVQUFTLElBQVc7UUFDbEIsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQUNELDRCQUFVLEdBQVYsVUFBVyxJQUFXO1FBQ3BCLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFDRCx1QkFBSyxHQUFMLFVBQU0sWUFBcUI7UUFDekIsR0FBRyxDQUFBLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUM1QixFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLE9BQU8sQ0FBQztnQkFBQyxZQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDaEYsQ0FBQztRQUNELEVBQUUsQ0FBQSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7WUFDaEIsR0FBRyxDQUFBLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDNUIsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxPQUFPLENBQUM7b0JBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ2hHLENBQUM7WUFDRCxHQUFHLENBQUEsQ0FBZSxVQUFjLEVBQWQsS0FBQSxJQUFJLENBQUMsU0FBUyxFQUE1QixjQUFVLEVBQVYsSUFBNEIsQ0FBQztnQkFBN0IsSUFBSSxNQUFNLFNBQUE7Z0JBQW9CLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLGdCQUFnQixFQUFFLEVBQUMsUUFBQSxNQUFNLEVBQUMsQ0FBQyxDQUFDO2FBQUE7WUFDcEYsR0FBRyxDQUFBLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDO2dCQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLGVBQUUsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQzFFLENBQUM7UUFDRCxZQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBRUQsK0VBQStFO0lBQy9FLFNBQVM7SUFDVCwrRUFBK0U7SUFDL0UseUJBQU8sR0FBUCxVQUFRLEtBQVksRUFBRSxJQUFPO1FBQzNCLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNoQyxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVELDJCQUFTLEdBQVQsVUFBVSxNQUFhLEVBQUUsSUFBVyxFQUFFLEtBQWMsRUFBRSxVQUFjLEVBQUUsWUFBb0I7UUFDeEYsTUFBTSxHQUFHLGlCQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDM0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUM7UUFDM0IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDNUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUUsRUFBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUMsQ0FBQyxDQUFDO1FBQ3ZELElBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUNkLEdBQUcsQ0FBQSxDQUFhLFVBQUssRUFBakIsaUJBQVEsRUFBUixJQUFpQixDQUFDO1lBQWxCLElBQUksSUFBSSxHQUFJLEtBQUssSUFBVDtZQUNWLElBQUksUUFBUSxHQUFNLE1BQU0sY0FBUyxJQUFNLENBQUM7WUFDeEMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFJLElBQUksZ0NBQTJCLFFBQVEsTUFBRyxDQUFDLENBQUM7WUFDMUQsSUFBSSxVQUFVLEdBQUcsaUJBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNqQyxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxFQUFDLEVBQUUsRUFBRSxVQUFVLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBQyxDQUFDLENBQUM7WUFDM0QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsRUFBQyxRQUFBLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBQyxDQUFDLENBQUE7U0FDOUY7UUFDRCxJQUFJLGVBQWUsR0FBRyxFQUFFLENBQUM7UUFDekIsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUNiLGVBQWUsR0FBTSxpQkFBUyxDQUFDLElBQUksQ0FBQyxjQUFTLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHLEtBQUssR0FBRyxFQUFFLFVBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLE1BQUcsQ0FBQztRQUN4SSxJQUFJLE9BQU8sR0FBRyxPQUFTLFdBQ2xCLEVBQUksVUFDTCxFQUFlLFFBQ2xCLGlEQUhhLGFBQUssQ0FBQyxDQUFDLENBQUMsS0FDakIsSUFBSSxFQUNMLGVBQWUsRUFDbEIsQ0FBQztRQUNGLEVBQUUsQ0FBQSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7WUFDZCxPQUFPLElBQUksa0JBQWtCLENBQUM7WUFDOUIsR0FBRyxDQUFBLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxVQUFVLENBQUMsQ0FBQyxDQUFDO2dCQUMzQixJQUFJLFFBQVEsR0FBTSxNQUFNLFNBQUksSUFBSSxTQUFJLFVBQVUsQ0FBQyxJQUFJLENBQUcsQ0FBQztnQkFDdkQsSUFBSSxLQUFLLEdBQU0sSUFBSSxXQUFNLElBQU0sQ0FBQztnQkFDaEMsSUFBSSxPQUFPLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7Z0JBQ3RDLE9BQU8sSUFBTyxJQUFJLFdBQU0sS0FBSyx3QkFBbUIsSUFBSSx1QkFBa0IsUUFBUSxRQUFLLENBQUM7Z0JBQ3BGLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUM5RCxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxFQUFDLFFBQUEsTUFBTSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsT0FBQSxLQUFLLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBQyxDQUFDLENBQUM7Z0JBQ2hGLElBQUksQ0FBQyxZQUFZLENBQUMsaUJBQVEsQ0FBQyxzQkFBbUIsT0FBTyx3RUFDQSxNQUFNLHdCQUFpQixJQUFJLCtFQUM5QixNQUFNLFlBQU0sSUFBSSxTQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUMzRSxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxFQUFDLE9BQUEsS0FBSyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUMsQ0FBQyxDQUFDO1lBQ3BELENBQUM7UUFDSCxDQUFDO1FBQ0QsRUFBRSxDQUFBLENBQUMsWUFBWSxDQUFDO1lBQUMsT0FBTyxJQUFJLElBQUksR0FBRyxZQUFZLENBQUM7UUFDaEQsSUFBSSxJQUFJLEdBQU0sTUFBTSxVQUFPLENBQUM7UUFDNUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUUsRUFBQyxNQUFBLElBQUksRUFBRSxTQUFBLE9BQU8sRUFBQyxDQUFDLENBQUM7UUFDOUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsRUFBQyxRQUFBLE1BQU0sRUFBRSxNQUFBLElBQUksRUFBQyxDQUFDLENBQUM7UUFDNUMsTUFBTSxDQUFDLElBQUksQ0FBQzs7SUFDZCxDQUFDO0lBRUQseUJBQU8sR0FBUCxVQUFRLElBQVcsRUFBRSxJQUFXLEVBQUUsTUFBZTtRQUMvQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQztRQUN6QixJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQztRQUNoQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxFQUFDLE1BQUEsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUMsQ0FBQyxDQUFDO1FBQ3pDLEdBQUcsQ0FBQSxDQUFjLFVBQU0sRUFBbkIsa0JBQVMsRUFBVCxJQUFtQixDQUFDO1lBQXBCLElBQUksS0FBSyxHQUFJLE1BQU0sSUFBVjtZQUFZLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLEVBQUMsTUFBQSxJQUFJLEVBQUUsT0FBQSxLQUFLLEVBQUMsQ0FBQyxDQUFDO1NBQUE7UUFDOUQsSUFBSSxNQUFNLEdBQU0sSUFBSSxVQUFPLENBQUM7UUFDNUIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxFQUFFLFNBQVMsRUFBRSxPQUFTLDJCQUVqRSxFQUFvRCxRQUN2RCxxREFIMkQsYUFBSyxDQUFDLENBQUMsQ0FBQyxLQUVoRSxNQUFNLENBQUMsR0FBRyxDQUFDLFVBQUMsS0FBSyxJQUFLLE9BQUEsUUFBSyxLQUFLLENBQUUsRUFBWixDQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQ3ZELENBQUMsQ0FBQztRQUNILE1BQU0sQ0FBQyxJQUFJLENBQUM7O0lBQ2QsQ0FBQztJQUVELDBCQUFRLEdBQVIsVUFBUyxJQUFXLEVBQUUsTUFBZTtRQUNuQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDcEMsTUFBTSxDQUFDLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCwwQkFBUSxHQUFSLFVBQVMsSUFBVyxFQUFFLE1BQWUsRUFBRSxPQUFzQjtRQUF0Qix1QkFBc0IsR0FBdEIsY0FBc0I7UUFDM0QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ3BDLEVBQUUsQ0FBQSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDWCxJQUFJLEtBQUssR0FBRyxhQUFXLElBQU0sQ0FBQztZQUM5QixJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztZQUM3QixJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztRQUNuQyxDQUFDO1FBRUQsTUFBTSxDQUFDLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxnQ0FBYyxHQUFkLFVBQWUsS0FBWSxFQUFFLE1BQWMsRUFBRSxPQUFXO1FBQ3RELDZCQUE2QjtRQUM3QixFQUFFLENBQUEsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDWixFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLE9BQU8sQ0FBQztnQkFBQyxNQUFNLElBQUksS0FBSyxDQUFDLFlBQVUsS0FBSywwQ0FBdUMsQ0FBQyxDQUFDO1lBQzdHLE9BQU8sR0FBRyxFQUFFLENBQUM7WUFDYixHQUFHLENBQUEsQ0FBYyxVQUFzQixFQUF0QixLQUFBLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLEVBQW5DLGNBQVMsRUFBVCxJQUFtQyxDQUFDO2dCQUFwQyxJQUFJLEtBQUssU0FBQTtnQkFBNEIsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQzthQUFBO1FBQ2xFLENBQUM7UUFDRCxJQUFJLE1BQU0sR0FBTSxLQUFLLGFBQVEsTUFBTSxhQUFRLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFHLENBQUM7UUFDckUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsRUFBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLFFBQUEsTUFBTSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBQyxDQUFDO2FBQ2hFLE9BQU8sQ0FBQyxlQUFlLEVBQUUsRUFBQyxRQUFBLE1BQU0sRUFBRSxhQUFhLEVBQUUsTUFBTSxFQUFDLENBQUMsQ0FBQztRQUU3RCxHQUFHLENBQUEsQ0FBQyxHQUFHLENBQUMsS0FBSyxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDekIsSUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzVCLEVBQUUsQ0FBQSxDQUFDLE1BQU0sQ0FBQyxXQUFXLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDaEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyx5QkFBeUIsRUFBRSxFQUFDLFFBQUEsTUFBTSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUM7WUFDckYsQ0FBQztZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNOLElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEVBQUUsRUFBQyxRQUFBLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBQyxDQUFDLENBQUM7WUFDakcsQ0FBQztRQUNILENBQUM7UUFDRCxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVELDBCQUFRLEdBQVIsVUFBUyxJQUFXLEVBQUUsS0FBbUI7UUFDdkMsS0FBSyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDbEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUM7UUFDNUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3BFLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDakQsTUFBTSxDQUFDLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCw4QkFBWSxHQUFaLFVBQWEsU0FBbUI7UUFDOUIsSUFBSSxLQUFLLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQztRQUM1QixHQUFHLENBQUEsQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLEtBQUssQ0FBQztZQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsU0FBRyxDQUFDLENBQUMsQ0FBQztRQUNwRSxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVELHVCQUFLLEdBQUwsVUFBTSxFQUFTLEVBQUUsRUFBSztRQUNwQixFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztRQUNYLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ25CLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDOUMsTUFBTSxDQUFDLElBQUksQ0FBQztJQUNkLENBQUM7SUFFSCxjQUFDO0FBQUQsQ0F6SkEsQUF5SkMsSUFBQTtBQUVELCtFQUErRTtBQUMvRSxnQkFBZ0I7QUFDaEIsK0VBQStFO0FBRS9FLEdBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFO0lBQ3BCLCtFQUErRTtJQUMvRSxnQkFBZ0I7SUFDaEIsK0VBQStFO0lBQy9FLElBQUksS0FBSyxHQUFHLElBQUksT0FBTyxDQUFDLFNBQUcsQ0FBQyxDQUFDO0lBQzdCLEtBQUssQ0FBQyxRQUFRLENBQUMsZUFBZSxFQUFFLENBQUMsUUFBUSxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUM7SUFDdkQsS0FBSyxDQUFDLFFBQVEsQ0FBQyxhQUFhLEVBQUUsQ0FBQyxRQUFRLEVBQUUsV0FBVyxFQUFFLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDO0lBQzFFLEtBQUssQ0FBQyxRQUFRLENBQUMsY0FBYyxFQUFFLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUM7SUFDcEQsS0FBSyxDQUFDLFFBQVEsQ0FBQyxhQUFhLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUNsRCxLQUFLLENBQUMsUUFBUSxDQUFDLGVBQWUsRUFBRSxDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQztJQUNqRSxLQUFLO1NBQ0YsU0FBUyxDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUN6QyxTQUFTLENBQUMsWUFBWSxFQUFFLFlBQVksRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ2pELFNBQVMsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLENBQUMsUUFBUSxFQUFFLFlBQVksQ0FBQyxDQUFDO1NBQ3ZELFNBQVMsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLENBQUMsUUFBUSxFQUFFLFlBQVksQ0FBQyxDQUFDO1NBQ3JELFNBQVMsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLENBQUMsUUFBUSxFQUFFLFlBQVksQ0FBQyxDQUFDO1NBQ3JELFNBQVMsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLENBQUMsUUFBUSxFQUFFLFlBQVksQ0FBQyxDQUFDO1NBQ3JELFNBQVMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxFQUFFLFlBQVksQ0FBQyxDQUFDO1NBQy9DLFNBQVMsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLENBQUMsUUFBUSxDQUFDLEVBQUUsU0FBUyxFQUFFLE9BQVMsMkRBRzFELDJFQUhpRCxhQUFLLENBQUMsQ0FBQyxDQUFDLEtBR3pELENBQUMsQ0FBQztJQUVMLEtBQUssQ0FBQyxRQUFRLENBQUMsYUFBYSxFQUFFLENBQUMsUUFBUSxFQUFFLFdBQVcsRUFBRSxPQUFPLENBQUMsRUFBRSxJQUFJLENBQUM7U0FDbEUsY0FBYyxDQUFDLGFBQWEsRUFBRSxlQUFlLEVBQUUsRUFBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBQyxDQUFDO1NBQzFHLGNBQWMsQ0FBQyxhQUFhLEVBQUUsYUFBYSxFQUFFLEVBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUMsQ0FBQztTQUd4RyxjQUFjLENBQUMsYUFBYSxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBRS9DLEtBQUssQ0FBQyxRQUFRLENBQUMsY0FBYyxFQUFFLENBQUMsUUFBUSxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztTQUN2RCxjQUFjLENBQUMsY0FBYyxFQUFFLGtCQUFrQixDQUFDO1NBQ2xELGNBQWMsQ0FBQyxjQUFjLEVBQUUsaUJBQWlCLEVBQUUsRUFBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBRTdHLEtBQUssQ0FBQyxRQUFRLENBQUMscUJBQXFCLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7U0FDdEQsY0FBYyxDQUFDLHFCQUFxQixFQUFFLGNBQWMsQ0FBQztTQUNyRCxjQUFjLENBQUMscUJBQXFCLEVBQUUsY0FBYyxFQUFFLEVBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFDLENBQUMsQ0FBQztJQUUzRixLQUFLLENBQUMsUUFBUSxDQUFDLHFCQUFxQixFQUFFLENBQUMsUUFBUSxFQUFFLFlBQVksQ0FBQyxDQUFDO1NBQzVELGNBQWMsQ0FBQyxxQkFBcUIsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0lBRTVELEtBQUssQ0FBQyxZQUFZLENBQUMsaUJBQVEsQ0FBQyx3TUFLM0IsQ0FBQyxDQUFDLENBQUM7SUFFSixLQUFLLENBQUMsWUFBWSxDQUFDLGlCQUFRLENBQUMsd09BSzNCLENBQUMsQ0FBQyxDQUFDO0lBRUosS0FBSyxDQUFDLFlBQVksQ0FBQyxpQkFBUSxDQUFDLCtMQUkzQixDQUFDLENBQUMsQ0FBQztJQUVKLHNHQUFzRztJQUN0RyxtRkFBbUY7SUFDbkYsS0FBSyxDQUFDLFlBQVksQ0FBQyxpQkFBUSxDQUFDLHFRQUszQixDQUFDLENBQUMsQ0FBQztJQUVKLEtBQUssQ0FBQyxZQUFZLENBQUMsaUJBQVEsQ0FBQywwT0FLM0IsQ0FBQyxDQUFDLENBQUM7SUFFSixLQUFLLENBQUMsWUFBWSxDQUFDLGlCQUFRLENBQUMsK1NBTzNCLENBQUMsQ0FBQyxDQUFDO0lBRUosS0FBSyxDQUFDLFFBQVEsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDeEQsRUFBRSxDQUFBLENBQUMsU0FBRyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDO1FBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsRUFBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBQyxDQUFDLENBQUM7SUFDdEcsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUVsQiwrRUFBK0U7SUFDL0UsbUJBQW1CO0lBQ25CLCtFQUErRTtJQUMvRSxLQUFLLEdBQUcsSUFBSSxPQUFPLENBQUMsU0FBRyxDQUFDLENBQUM7SUFDekIsS0FBSyxDQUFDLFNBQVMsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztJQUNoRCxLQUFLLENBQUMsU0FBUyxDQUFDLFlBQVksRUFBRSxZQUFZLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO0lBQ3hELEtBQUssQ0FBQyxZQUFZLENBQUMsaUJBQVEsQ0FBQyxPQUFTLHFLQUdrQyxFQUFtQixVQUN6RixpTUFKMkIsYUFBSyxDQUFDLENBQUMsQ0FBQyxLQUdtQyxpQkFBUyxDQUFDLFFBQVEsQ0FBQyxFQUN6RixDQUFDLENBQUMsQ0FBQztJQUNKLEtBQUssQ0FBQyxZQUFZLENBQUMsaUJBQVEsQ0FBQyxPQUFTLGlMQUdnQyxFQUF1QixVQUMzRiw2TUFKMkIsYUFBSyxDQUFDLENBQUMsQ0FBQyxLQUdpQyxpQkFBUyxDQUFDLFlBQVksQ0FBQyxFQUMzRixDQUFDLENBQUMsQ0FBQztJQUNOOzs7Ozs7Ozs7VUFTTTtJQUNKLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7SUFFbEIsK0VBQStFO0lBQy9FLEtBQUs7SUFDTCwrRUFBK0U7SUFDL0UsS0FBSyxHQUFHLElBQUksT0FBTyxDQUFDLFNBQUcsQ0FBQyxDQUFDO0lBRXpCLDhDQUE4QztJQUM5QyxpQkFBaUIsS0FBSyxFQUFFLE1BQU07UUFDNUIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsVUFBQyxLQUFLLElBQUssT0FBQSxDQUFHLEtBQUssVUFBSyxLQUFLLENBQUUsRUFBcEIsQ0FBb0IsQ0FBQyxDQUFDO0lBQ3JELENBQUM7SUFDRCxLQUFLLENBQUMsUUFBUSxDQUFDLGFBQWEsRUFBRSxPQUFPLENBQUMsYUFBYSxFQUFFLENBQUMsVUFBVSxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDcEYsS0FBSyxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsRUFBRSxPQUFPLENBQUMscUJBQXFCLEVBQUUsQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzdGLEtBQUssQ0FBQyxRQUFRLENBQUMsVUFBVSxFQUFFLE9BQU8sQ0FBQyxVQUFVLEVBQUUsQ0FBQyxPQUFPLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdkYsS0FBSyxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxPQUFPLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN2RixLQUFLLENBQUMsUUFBUSxDQUFDLHdCQUF3QixFQUFFLE9BQU8sQ0FBQyx3QkFBd0IsRUFBRSxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNqSCxLQUFLLENBQUMsUUFBUSxDQUFDLGNBQWMsRUFBRSxPQUFPLENBQUMsY0FBYyxFQUFFLENBQUMsVUFBVSxFQUFFLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDM0YsS0FBSyxDQUFDLFFBQVEsQ0FBQyxzQkFBc0IsRUFBRSxPQUFPLENBQUMsc0JBQXNCLEVBQUUsQ0FBQyxVQUFVLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDckgsS0FBSyxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLFVBQVUsRUFBRSxDQUFDLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdkUsS0FBSyxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxPQUFPLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbkcsS0FBSyxDQUFDLFFBQVEsQ0FBQyx3QkFBd0IsRUFBRSxPQUFPLENBQUMsd0JBQXdCLEVBQUUsQ0FBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRTdILEtBQUssQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztJQUUxQyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBRWxCLCtFQUErRTtJQUMvRSxVQUFVO0lBQ1YsK0VBQStFO0lBQy9FLEtBQUssR0FBRyxJQUFJLE9BQU8sQ0FBQyxTQUFHLENBQUMsQ0FBQztJQUN6QixJQUFJLFFBQVEsR0FBRztRQUNiLFdBQVcsRUFBRSxFQUFFO1FBQ2YsR0FBRyxFQUFFLEVBQUU7UUFDUCxNQUFNLEVBQUUsRUFBRTtRQUNWLFNBQVMsRUFBRSxFQUFFO1FBQ2IsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDO1FBQ1osR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDO1FBQ1osSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDO1FBQ2IsS0FBSyxFQUFFLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQztRQUN4QixLQUFLLEVBQUUsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDO1FBQ3hCLEtBQUssRUFBRSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUM7UUFDeEIsUUFBUSxFQUFFLENBQUMsUUFBUSxDQUFDO1FBQ3BCLE9BQU8sRUFBRSxDQUFDLFFBQVEsQ0FBQztRQUNuQixPQUFPLEVBQUUsQ0FBQyxRQUFRLEVBQUUsV0FBVyxDQUFDO1FBRWhDLE9BQU8sRUFBRSxFQUFFO1FBQ1gsTUFBTSxFQUFFLENBQUMsU0FBUyxDQUFDO1FBRW5CLFVBQVUsRUFBRSxFQUFFO1FBQ2QsV0FBVyxFQUFFLENBQUMsWUFBWSxDQUFDO1FBQzNCLFVBQVUsRUFBRSxDQUFDLFlBQVksQ0FBQztRQUMxQixLQUFLLEVBQUUsQ0FBQyxZQUFZLENBQUM7UUFFckIsUUFBUSxFQUFFLEVBQUU7UUFDWixJQUFJLEVBQUUsQ0FBQyxVQUFVLENBQUM7UUFDbEIsS0FBSyxFQUFFLENBQUMsVUFBVSxDQUFDO1FBQ25CLEtBQUssRUFBRSxDQUFDLFVBQVUsQ0FBQztRQUNuQixHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUM7UUFDakIsSUFBSSxFQUFFLENBQUMsVUFBVSxDQUFDO0tBQ25CLENBQUM7SUFDRixJQUFJLFNBQVMsR0FBRztRQUNkLEdBQUcsRUFBRSxFQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUM7UUFDaEIsR0FBRyxFQUFFLEVBQUMsTUFBTSxFQUFFLENBQUMsRUFBQztRQUNoQixJQUFJLEVBQUUsRUFBQyxNQUFNLEVBQUUsQ0FBQyxFQUFDO1FBQ2pCLEtBQUssRUFBRSxFQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUM7UUFDbEIsS0FBSyxFQUFFLEVBQUMsTUFBTSxFQUFFLENBQUMsRUFBQztRQUNsQixLQUFLLEVBQUUsRUFBQyxNQUFNLEVBQUUsQ0FBQyxFQUFDO1FBQ2xCLFdBQVcsRUFBRSxFQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUM7UUFDaEMsVUFBVSxFQUFFLEVBQUMsT0FBTyxFQUFFLFFBQVEsRUFBQztRQUMvQixLQUFLLEVBQUUsRUFBQyxPQUFPLEVBQUUsUUFBUSxFQUFDO1FBRTFCLElBQUksRUFBRSxFQUFDLFVBQVUsRUFBRSxhQUFhLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBQztRQUM1QyxLQUFLLEVBQUUsRUFBQyxVQUFVLEVBQUUsYUFBYSxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUM7UUFDOUMsS0FBSyxFQUFFLEVBQUMsVUFBVSxFQUFFLGFBQWEsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFDO1FBQzlDLElBQUksRUFBRSxFQUFDLFVBQVUsRUFBRSxhQUFhLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBQztRQUM1QyxHQUFHLEVBQUUsRUFBQyxVQUFVLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUM7S0FDNUMsQ0FBQztJQUNGLEdBQUcsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxNQUFNLElBQUksUUFBUSxDQUFDO1FBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLENBQUMsV0FBVyxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUUzSCwrQ0FBK0M7SUFDL0Msd0RBQXdEO0lBQ3hELHVEQUF1RDtJQUN2RCxtREFBbUQ7SUFDbkQsbUVBQW1FO0lBQ25FLG9GQUFvRjtJQUNwRixxRkFBcUY7SUFDckYsb0ZBQW9GO0lBQ3BGLGtGQUFrRjtJQUVsRixLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2xCLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUM7O0FBQ3RCLENBQUMsQ0FBQyxDQUFDO0FBR0gsTUFBTSxDQUFDLFdBQVcsQ0FBQyxHQUFHLE9BQU8sQ0FBQzs7O0FDMVI5QjtJQUNFLEVBQUUsQ0FBQSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO1FBQ3RCLE1BQU0sQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQ2xDLENBQUM7SUFDRCxNQUFNLENBQUMsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDaEMsQ0FBQztBQUVELHVCQUF1QixDQUFDLEVBQUUsQ0FBQztJQUN6QixFQUFFLENBQUEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQUMsTUFBTSxDQUFDLElBQUksQ0FBQztJQUN4QixFQUFFLENBQUEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7SUFDMUIsR0FBRyxDQUFBLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2YsRUFBRSxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7SUFDakMsQ0FBQztJQUNELEdBQUcsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNmLEVBQUUsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFBQyxNQUFNLENBQUMsS0FBSyxDQUFDO0lBQ2pDLENBQUM7SUFDRCxNQUFNLENBQUMsSUFBSSxDQUFDO0FBQ2QsQ0FBQztBQUVELDZCQUE2QixRQUFRO0lBQ25DLEdBQUcsQ0FBQSxDQUFhLFVBQVEsRUFBcEIsb0JBQVEsRUFBUixJQUFvQixDQUFDO1FBQXJCLElBQUksSUFBSSxHQUFJLFFBQVEsSUFBWjtRQUNWLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUM7WUFBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUN2RDtBQUNILENBQUM7QUFFRDtJQW1CRTtRQUNFLElBQUksQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM3QyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUM7UUFDbEMsSUFBSSxDQUFDLFlBQVksR0FBRyxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDL0MsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7UUFDbkIsSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7UUFDZixJQUFJLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQztRQUN0QixJQUFJLENBQUMsUUFBUSxHQUFHLEVBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFDLENBQUM7UUFDeEMsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLElBQUksQ0FBQyxXQUFXLEdBQUcscUJBQXFCLENBQVE7WUFDOUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsYUFBYSxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUM5QyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3pCLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO2dCQUFDLE1BQU0sQ0FBQztZQUNsQixJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzNCLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7Z0JBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztZQUFDLENBQUM7UUFDcEMsQ0FBQyxDQUFDO0lBQ0osQ0FBQztJQWhDTSxnQkFBTyxHQUFkLFVBQWUsSUFBWTtRQUN6QixFQUFFLENBQUEsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7WUFBQyxNQUFNLElBQUksS0FBSyxDQUFDLGlDQUFpQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUMxRSxJQUFJLFFBQVEsR0FBRyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2xELEVBQUUsQ0FBQSxDQUFDLENBQUMsUUFBUSxDQUFDO1lBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxRQUFRLEVBQUUsQ0FBQztRQUM3RSxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUN4QixNQUFNLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDeEMsQ0FBQztJQTJCRCx3QkFBSyxHQUFMO1FBQ0UsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQzFCLElBQUksQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO1FBQ2YsSUFBSSxDQUFDLFdBQVcsR0FBRyxFQUFFLENBQUM7SUFDeEIsQ0FBQztJQUVELHlCQUFNLEdBQU47UUFDRSxJQUFJLFFBQVEsR0FBVyxFQUFFLENBQUMsQ0FBQyxtRUFBbUU7UUFDOUYsSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztRQUN6QixJQUFJLFlBQVksR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQ2pDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7UUFDekIsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztRQUNyQixJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQzNCLElBQUksUUFBUSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDcEMsSUFBSSxZQUFZLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQztRQUNyQyxJQUFJLFNBQVMsR0FBTyxFQUFFLENBQUM7UUFFdkIsK0VBQStFO1FBQy9FLFVBQVU7UUFDVixHQUFHLENBQUEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDL0MsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2pCLElBQUksR0FBRyxHQUFHLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN2QixJQUFJLEdBQVEsQ0FBQztZQUNiLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUNaLEdBQUcsR0FBRyxRQUFRLENBQUMsZUFBZSxDQUFDLDRCQUE0QixFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksTUFBTSxDQUFDLENBQUM7WUFDaEYsQ0FBQztZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNOLEdBQUcsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUM7WUFDL0MsQ0FBQztZQUNELEdBQUcsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDO1lBQ2IsWUFBWSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQztZQUN2QixFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDYixFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7b0JBQ25CLEdBQUcsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztvQkFDM0IsR0FBRyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO2dCQUM3QixDQUFDO2dCQUVELFFBQVEsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFdEMsQ0FBQztRQUNILENBQUM7UUFFRCxHQUFHLENBQUEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDbkQsSUFBSSxFQUFFLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JCLElBQUksR0FBRyxHQUFHLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN2QixJQUFJLElBQUksR0FBRyxZQUFZLENBQUMsRUFBRSxDQUFDLElBQUksUUFBUSxDQUFDO1lBQ3hDLElBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN2QixJQUFJLEdBQUcsQ0FBQztZQUNSLEVBQUUsQ0FBQSxDQUFDLElBQUksS0FBSyxVQUFVLENBQUMsQ0FBQyxDQUFDO2dCQUN2QixJQUFJLEVBQUUsR0FBRyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQzFCLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUM7b0JBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ2pELEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO29CQUNaLEdBQUcsR0FBRyxRQUFRLENBQUMsZUFBZSxDQUFDLDRCQUE0QixFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksTUFBTSxDQUFDLENBQUM7Z0JBQ2hGLENBQUM7Z0JBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ04sR0FBRyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQztnQkFDL0MsQ0FBQztnQkFDRCxHQUFHLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQztnQkFDYixZQUFZLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDO1lBQ3pCLENBQUM7WUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7Z0JBQzlCLGlFQUFpRTtnQkFDakUsZ0VBQWdFO2dCQUNoRSxtRUFBbUU7Z0JBQ25FLHNFQUFzRTtnQkFDdEUsSUFBSSxFQUFFLEdBQUcsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFBO2dCQUN6QixFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztvQkFDZCxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxtQkFBbUIsQ0FBQztvQkFDMUMsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO3dCQUN2QixFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxVQUFVLENBQUM7b0JBQ2pDLENBQUM7b0JBQ0QsUUFBUSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDdkMsQ0FBQztnQkFDRCxJQUFJLENBQUMsRUFBRSxDQUFBLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQztvQkFBQyxFQUFFLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDckQsWUFBWSxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQztnQkFDeEIsUUFBUSxDQUFDO1lBQ1gsQ0FBQztZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNOLEdBQUcsR0FBRyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDekIsQ0FBQztZQUVELElBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUM7WUFDdEIsRUFBRSxDQUFBLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUFDLEdBQUcsQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMzQyxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsU0FBUyxLQUFLLElBQUksQ0FBQyxTQUFTLENBQUM7Z0JBQUMsR0FBRyxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUMsU0FBUyxLQUFLLFNBQVMsR0FBRyxJQUFJLEdBQUcsTUFBTSxDQUFDO1lBQ2pHLEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxlQUFlLEtBQUssSUFBSSxDQUFDLGVBQWUsQ0FBQztnQkFBQyxHQUFHLENBQUMsZUFBZSxHQUFHLEdBQUcsQ0FBQyxlQUFlLElBQUksU0FBUyxDQUFDO1lBQ3hHLEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEtBQUssSUFBSSxDQUFDLE9BQU8sQ0FBQztnQkFBQyxHQUFHLENBQUMsT0FBTyxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUM7WUFDM0QsRUFBRSxDQUFBLENBQUMsR0FBRyxDQUFDLFdBQVcsS0FBSyxJQUFJLENBQUMsV0FBVyxDQUFDO2dCQUFDLEdBQUcsQ0FBQyxXQUFXLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQztZQUMzRSxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsUUFBUSxLQUFLLElBQUksQ0FBQyxRQUFRLENBQUM7Z0JBQUMsR0FBRyxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUMsUUFBUSxDQUFDO1lBQy9ELEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQztnQkFBQyxHQUFHLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUM7WUFDbkQsRUFBRSxDQUFBLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxPQUFPLElBQUksR0FBRyxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDO2dCQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQztZQUNwRSxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLE9BQU8sSUFBSSxHQUFHLENBQUMsT0FBTyxLQUFLLElBQUksQ0FBQyxPQUFPLENBQUM7Z0JBQUMsR0FBRyxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDO1lBQ2hGLEVBQUUsQ0FBQSxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxVQUFVLENBQUMsSUFBSSxHQUFHLENBQUMsV0FBVyxLQUFLLEdBQUcsQ0FBQyxJQUFJLENBQUM7Z0JBQUMsR0FBRyxDQUFDLFdBQVcsR0FBRyxHQUFHLENBQUMsSUFBSSxLQUFLLFNBQVMsR0FBRyxFQUFFLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQztZQUN4SSxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsUUFBUSxLQUFLLElBQUksQ0FBQyxRQUFRLENBQUM7Z0JBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxVQUFVLEVBQUUsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzlFLEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQztnQkFBQyxHQUFHLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDOUQsRUFBRSxDQUFBLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDO2dCQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUMxRCxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUM7Z0JBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzlELEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEtBQUssSUFBSSxDQUFDLFFBQVEsQ0FBQztnQkFBQyxHQUFHLENBQUMsWUFBWSxDQUFDLFVBQVUsRUFBRSxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDOUUsRUFBRSxDQUFBLENBQUMsR0FBRyxDQUFDLGVBQWUsS0FBSyxJQUFJLENBQUMsZUFBZSxDQUFDO2dCQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBRTFHLHlCQUF5QjtZQUN6QixJQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsS0FBSyxJQUFJLFNBQVMsQ0FBQztZQUNuQyxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUMxQixFQUFFLENBQUEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO29CQUFDLFNBQVMsQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQztnQkFDekMsSUFBSTtvQkFBQyxLQUFLLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLEtBQUssU0FBUyxHQUFHLEVBQUUsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDO1lBQzNELENBQUM7WUFDRCxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUN4QixFQUFFLENBQUEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO29CQUFDLFNBQVMsQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQztnQkFDekMsSUFBSTtvQkFBQyxLQUFLLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLEtBQUssU0FBUyxHQUFHLEVBQUUsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDO1lBQzdELENBQUM7WUFDRCxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUN4QixFQUFFLENBQUEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDO29CQUFDLFNBQVMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQztnQkFDdEMsSUFBSTtvQkFBQyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEtBQUssU0FBUyxHQUFHLEVBQUUsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDO1lBQ3hELENBQUM7WUFDRCxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsTUFBTSxLQUFLLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUM5QixFQUFFLENBQUEsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO29CQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQztnQkFDL0MsSUFBSTtvQkFBQyxLQUFLLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxNQUFNLEtBQUssU0FBUyxHQUFHLE1BQU0sR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDO1lBQ3JFLENBQUM7WUFDRCxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUM1QixFQUFFLENBQUEsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO29CQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQztnQkFDNUMsSUFBSTtvQkFBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxLQUFLLEtBQUssU0FBUyxHQUFHLE1BQU0sR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDO1lBQ2xFLENBQUM7WUFDRCxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsTUFBTSxLQUFLLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUM5QixFQUFFLENBQUEsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO29CQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQztnQkFDL0MsSUFBSTtvQkFBQyxLQUFLLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUM7WUFDakMsQ0FBQztZQUNELEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxlQUFlLEtBQUssSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUM7Z0JBQ2hELEVBQUUsQ0FBQSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUM7b0JBQUMsU0FBUyxDQUFDLGVBQWUsR0FBRyxHQUFHLENBQUMsZUFBZSxDQUFDO2dCQUMxRSxJQUFJO29CQUFDLEtBQUssQ0FBQyxlQUFlLEdBQUcsR0FBRyxDQUFDLGVBQWUsSUFBSSxhQUFhLENBQUM7WUFDcEUsQ0FBQztZQUNELEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxXQUFXLEtBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7Z0JBQ3hDLEVBQUUsQ0FBQSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUM7b0JBQUMsU0FBUyxDQUFDLFdBQVcsR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDO2dCQUM5RCxJQUFJO29CQUFDLEtBQUssQ0FBQyxXQUFXLEdBQUcsR0FBRyxDQUFDLFdBQVcsSUFBSSxNQUFNLENBQUM7WUFDckQsQ0FBQztZQUNELEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxXQUFXLEtBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7Z0JBQ3hDLEVBQUUsQ0FBQSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUM7b0JBQUMsU0FBUyxDQUFDLFdBQVcsR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDO2dCQUM5RCxJQUFJO29CQUFDLEtBQUssQ0FBQyxXQUFXLEdBQUcsR0FBRyxDQUFDLFdBQVcsSUFBSSxDQUFDLENBQUM7WUFDaEQsQ0FBQztZQUNELEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEtBQUssSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7Z0JBQzFDLEVBQUUsQ0FBQSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUM7b0JBQUMsU0FBUyxDQUFDLFlBQVksR0FBRyxHQUFHLENBQUMsWUFBWSxDQUFDO2dCQUNqRSxJQUFJO29CQUFDLEtBQUssQ0FBQyxZQUFZLEdBQUcsQ0FBQyxHQUFHLENBQUMsWUFBWSxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztZQUMzRCxDQUFDO1lBQ0QsRUFBRSxDQUFBLENBQUMsR0FBRyxDQUFDLE9BQU8sS0FBSyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztnQkFDaEMsRUFBRSxDQUFBLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQztvQkFBQyxTQUFTLENBQUMsT0FBTyxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUM7Z0JBQ2xELElBQUk7b0JBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUMsT0FBTyxLQUFLLFNBQVMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQztZQUNuRSxDQUFDO1lBQ0QsRUFBRSxDQUFBLENBQUMsR0FBRyxDQUFDLFFBQVEsS0FBSyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztnQkFDbEMsRUFBRSxDQUFBLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQztvQkFBQyxTQUFTLENBQUMsUUFBUSxHQUFHLEdBQUcsQ0FBQyxRQUFRLENBQUM7Z0JBQ3JELElBQUk7b0JBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUMsUUFBUSxDQUFDO1lBQ3JDLENBQUM7WUFDRCxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUM1QixFQUFFLENBQUEsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO29CQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQztnQkFDNUMsSUFBSTtvQkFBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxLQUFLLElBQUksU0FBUyxDQUFDO1lBQzVDLENBQUM7WUFFRCxJQUFJLFFBQVEsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3RDLEVBQUUsQ0FBQSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUNuQixRQUFRLENBQUMsR0FBRyxFQUFFLFNBQVMsRUFBRSxLQUFLLENBQUMsQ0FBQztnQkFDaEMsU0FBUyxHQUFHLEVBQUUsQ0FBQztZQUNqQixDQUFDO1lBRUQsaUNBQWlDO1lBQ2pDLEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxlQUFlLEtBQUssSUFBSSxDQUFDLGVBQWUsQ0FBQztnQkFBQyxLQUFLLENBQUMsZUFBZSxHQUFHLFVBQVEsR0FBRyxDQUFDLGVBQWUsT0FBSSxDQUFDO1lBQ3pHLEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEtBQUssSUFBSSxDQUFDLE1BQU0sQ0FBQztnQkFBQyxLQUFLLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDO1lBQ25FLEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEtBQUssSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3BDLEtBQUssQ0FBQyxVQUFVLEdBQUcsR0FBRyxDQUFDLFNBQVMsQ0FBQztnQkFDakMsRUFBRSxDQUFBLENBQUMsR0FBRyxDQUFDLFNBQVMsS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDO29CQUM5QixLQUFLLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQztnQkFDN0IsQ0FBQztnQkFBQyxJQUFJLENBQUMsRUFBRSxDQUFBLENBQUMsR0FBRyxDQUFDLFNBQVMsS0FBSyxVQUFVLENBQUMsQ0FBQyxDQUFDO29CQUN2QyxLQUFLLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQztnQkFDNUIsQ0FBQztnQkFBQyxJQUFJLENBQUMsQ0FBQztvQkFDTixLQUFLLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQztnQkFDM0IsQ0FBQztZQUNILENBQUM7WUFDRCxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsYUFBYSxLQUFLLElBQUksQ0FBQyxhQUFhLENBQUM7Z0JBQUMsS0FBSyxDQUFDLGNBQWMsR0FBRyxHQUFHLENBQUMsYUFBYSxDQUFDO1lBQ3RGLEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEtBQUssSUFBSSxDQUFDLFVBQVUsQ0FBQztnQkFBQyxLQUFLLENBQUMsVUFBVSxHQUFHLEdBQUcsQ0FBQyxVQUFVLElBQUksU0FBUyxDQUFDO1lBQ3RGLEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEtBQUssSUFBSSxDQUFDLFNBQVMsQ0FBQztnQkFBQyxLQUFLLENBQUMsU0FBUyxHQUFHLEdBQUcsQ0FBQyxTQUFTLElBQUksTUFBTSxDQUFDO1lBQy9FLEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQztnQkFBQyxHQUFHLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFbEUsRUFBRSxDQUFBLENBQUMsR0FBRyxDQUFDLHVCQUF1QixLQUFLLElBQUksQ0FBQyx1QkFBdUIsQ0FBQztnQkFBQyxHQUFHLENBQUMsU0FBUyxHQUFHLEdBQUcsQ0FBQyx1QkFBdUIsQ0FBQztZQUU3RyxnQ0FBZ0M7WUFDaEMsRUFBRSxDQUFBLENBQUMsR0FBRyxDQUFDLFFBQVEsS0FBSyxJQUFJLENBQUMsUUFBUSxDQUFDO2dCQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsZUFBZSxFQUFFLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNuRixFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUM7Z0JBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxZQUFZLEVBQUUsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXZFLGlCQUFpQjtZQUNqQixFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDWCxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUM7b0JBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDdEUsRUFBRSxDQUFBLENBQUMsR0FBRyxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsTUFBTSxDQUFDO29CQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQzlFLEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxXQUFXLEtBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQztvQkFBQyxHQUFHLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxjQUFjLEVBQUUsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDO2dCQUNuRyxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUM7b0JBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDMUQsRUFBRSxDQUFBLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO29CQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzlELEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQztvQkFBRSxHQUFHLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUMzRCxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUM7b0JBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDMUQsRUFBRSxDQUFBLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxJQUFJLENBQUMsRUFBRSxDQUFDO29CQUFFLEdBQUcsQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQy9ELEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDLEVBQUUsQ0FBQztvQkFBQyxHQUFHLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUM5RCxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLElBQUksQ0FBQyxFQUFFLENBQUM7b0JBQUUsR0FBRyxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDL0QsRUFBRSxDQUFBLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxJQUFJLENBQUMsRUFBRSxDQUFDO29CQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxHQUFHLENBQUMs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QVMsQ0FBQztZQUMxSCxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsU0FBUyxLQUFLLElBQUksQ0FBQyxTQUFTLENBQUM7Z0JBQUMsR0FBRyxDQUFDLFdBQVcsR0FBRyxHQUFHLENBQUMsU0FBUyxLQUFLLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztZQUNsSCxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsU0FBUyxLQUFLLElBQUksQ0FBQyxTQUFTLENBQUM7Z0JBQUMsR0FBRyxDQUFDLFdBQVcsR0FBRyxHQUFHLENBQUMsU0FBUyxLQUFLLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztZQUNsSCxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsT0FBTyxLQUFLLElBQUksQ0FBQyxPQUFPLENBQUM7Z0JBQUMsR0FBRyxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUMsT0FBTyxLQUFLLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztZQUMxRyxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsU0FBUyxLQUFLLElBQUksQ0FBQyxTQUFTLENBQUM7Z0JBQUMsR0FBRyxDQUFDLFdBQVcsR0FBRyxHQUFHLENBQUMsU0FBUyxLQUFLLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztZQUNsSCxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsUUFBUSxLQUFLLElBQUksQ0FBQyxRQUFRLENBQUM7Z0JBQUMsR0FBRyxDQUFDLFVBQVUsR0FBRyxHQUFHLENBQUMsUUFBUSxLQUFLLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztZQUM5RyxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsVUFBVSxLQUFLLElBQUksQ0FBQyxVQUFVLENBQUM7Z0JBQUMsR0FBRyxDQUFDLFlBQVksR0FBRyxHQUFHLENBQUMsVUFBVSxLQUFLLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztZQUN0SCxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsVUFBVSxLQUFLLElBQUksQ0FBQyxVQUFVLENBQUM7Z0JBQUMsR0FBRyxDQUFDLFdBQVcsR0FBRyxHQUFHLENBQUMsVUFBVSxLQUFLLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztZQUNySCxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsUUFBUSxLQUFLLElBQUksQ0FBQyxRQUFRLENBQUM7Z0JBQUMsR0FBRyxDQUFDLFVBQVUsR0FBRyxHQUFHLENBQUMsUUFBUSxLQUFLLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztZQUM5RyxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsU0FBUyxLQUFLLElBQUksQ0FBQyxTQUFTLENBQUM7Z0JBQUMsR0FBRyxDQUFDLFdBQVcsR0FBRyxHQUFHLENBQUMsU0FBUyxLQUFLLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztZQUNsSCxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsT0FBTyxLQUFLLElBQUksQ0FBQyxPQUFPLENBQUM7Z0JBQUMsR0FBRyxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUMsT0FBTyxLQUFLLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztZQUMxRyxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUM7Z0JBQUMsR0FBRyxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsSUFBSSxLQUFLLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztZQUM5RixFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUM7Z0JBQUMsR0FBRyxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsSUFBSSxLQUFLLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztZQUM5RixFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsTUFBTSxLQUFLLElBQUksQ0FBQyxNQUFNLENBQUM7Z0JBQUMsR0FBRyxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUMsTUFBTSxLQUFLLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztZQUN0RyxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUM7Z0JBQUMsR0FBRyxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUMsS0FBSyxLQUFLLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztZQUNsRyxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUM7Z0JBQUMsR0FBRyxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsSUFBSSxLQUFLLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztZQUM5RixFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUM7Z0JBQUMsR0FBRyxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUMsS0FBSyxLQUFLLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztZQUNsRyxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsTUFBTSxLQUFLLElBQUksQ0FBQyxNQUFNLENBQUM7Z0JBQUMsR0FBRyxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUMsTUFBTSxLQUFLLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztZQUN0RyxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUM7Z0JBQUMsR0FBRyxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUMsS0FBSyxLQUFLLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztZQUNsRyxFQUFFLENBQUEsQ0FBQyxHQUFHLENBQUMsT0FBTyxLQUFLLElBQUks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SUFBSTttQkFDdkIsSUFBSSxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsR0FBRzttQkFDckIsSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSTttQkFDdkIsSUFBSSxDQUFDLFFBQVEsS0FBSyxJQUFJLENBQUMsUUFBUTttQkFDL0IsSUFBSSxDQUFDLGVBQWUsS0FBSyxJQUFJLENBQUMsZUFBZTttQkFDN0MsSUFBSSxDQUFDLFdBQVcsS0FBSyxJQUFJLENBQUMsV0FBVzttQkFDckMsSUFBSSxDQUFDLFFBQVEsS0FBSyxJQUFJLENBQUMsUUFBUTttQkFDL0IsSUFBSSxDQUFDLFNBQVMsS0FBSyxJQUFJLENBQUMsU0FBUzttQkFDakMsSUFBSSxDQUFDLGVBQWUsS0FBSyxJQUFJLENBQUMsZUFBZTttQkFDN0MsSUFBSSxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUMsS0FBSzttQkFDekIsSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSTttQkFDdkIsSUFBSSxDQUFDLE9BQU8sS0FBSyxJQUFJLENBQUMsT0FBTzttQkFDN0IsSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSTttQkFDdkIsSUFBSSxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsR0FBRzttQkFDckIsSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSTttQkFDdkIsSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSTttQkFDdkIsSUFBSSxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUMsS0FBSzttQkFDekIsSUFBSSxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsTUFBTTttQkFDM0IsSUFBSSxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsTUFBTTttQkFDM0IsSUFBSSxDQUFDLGVBQWUsS0FBSyxJQUFJLENBQUMsZUFBZTttQkFDN0MsSUFBSSxDQUFDLGVBQWUsS0FBSyxJQUFJLENBQUMsZUFBZTttQkFDN0MsSUFBSSxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUMsS0FBSzttQkFDekIsSUFBSSxD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QyxDQUFDLENBQUM7QUFFSCxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBQyxFQUFFLFVBQVMsQ0FBQyxFQUFFLENBQUM7SUFDOUQsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsT0FBTyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDO0FBQ2xELENBQUMsQ0FBQyxDQUFDO0FBRUgsT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUMsRUFBRSxVQUFTLENBQUMsRUFBRSxDQUFDO0lBQzlELE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQztBQUNoRCxDQUFDLENBQUMsQ0FBQztBQUVILE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFDLEVBQUUsVUFBUyxDQUFDLEVBQUUsQ0FBQztJQUM5RCxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxPQUFPLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUM7QUFDaEQsQ0FBQyxDQUFDLENBQUM7QUFFSCxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBQyxFQUFFLFVBQVMsQ0FBQyxFQUFFLENBQUM7SUFDOUQsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDO0FBQ2pELENBQUMsQ0FBQyxDQUFDO0FBRUgsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUMs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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQge2V2ZX0gZnJvbSBcIi4vYXBwXCI7XG5cbmRlY2xhcmUgdmFyIHBsdXJhbGl6ZTtcbmRlY2xhcmUgdmFyIG5scDtcbmRlY2xhcmUgdmFyIHV1aWQ7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFVzZXItRmFjaW5nIGZ1bmN0aW9uc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhcnNlUmVzdWx0IHtcbiAgdG9rZW5zOiBBcnJheTxUb2tlbj4sXG4gIHRyZWU6IE5vZGUsXG4gIGNvbnRleHQ6IENvbnRleHQsXG4gIHF1ZXJ5OiBRdWVyeSxcbiAgc2NvcmU6IG51bWJlcixcbiAgc3RhdGU6IFN0YXRlRmxhZ3MsXG59XG5cbmV4cG9ydCBlbnVtIFN0YXRlRmxhZ3Mge1xuICBDT01QTEVURSxcbiAgTU9SRUlORk8sXG4gIE5PUkVTVUxULCAgXG59XG5cbi8vIEVudHJ5IHBvaW50IGZvciBOTFFQXG5leHBvcnQgZnVuY3Rpb24gcGFyc2UocXVlcnlTdHJpbmc6IHN0cmluZyk6IEFycmF5PFBhcnNlUmVzdWx0PiB7XG4gIGxldCBwcmVUb2tlbnMgPSBwcmVwcm9jZXNzUXVlcnlTdHJpbmcocXVlcnlTdHJpbmcpO1xuICBsZXQgdG9rZW5zID0gZm9ybVRva2VucyhwcmVUb2tlbnMpO1xuICBsZXQge3RyZWUsIGNvbnRleHR9ID0gZm9ybVRyZWUodG9rZW5zKTtcbiAgbGV0IHF1ZXJ5ID0gZm9ybVF1ZXJ5KHRyZWUpO1xuICAvLyBGaWd1cmUgb3V0IHRoZSBzdGF0ZSBmbGFnc1xuICBsZXQgZmxhZzogU3RhdGVGbGFncztcbiAgaWYgKHF1ZXJ5LnByb2plY3RzLmxlbmd0aCA9PT0gMCAmJiBxdWVyeS50ZXJtcy5sZW5ndGggPT09IDApIHtcbiAgICBmbGFnID0gU3RhdGVGbGFncy5OT1JFU1VMVDtcbiAgfSBlbHNlIGlmICh0cmVlQ29tcGxldGUodHJlZSkpIHtcbiAgICBmbGFnID0gU3RhdGVGbGFncy5DT01QTEVURTsgXG4gIH0gZWxzZSB7XG4gICAgZmxhZyA9IFN0YXRlRmxhZ3MuTU9SRUlORk87XG4gIH1cbiAgcmV0dXJuIFt7dG9rZW5zOiB0b2tlbnMsIHRyZWU6IHRyZWUsIGNvbnRleHQ6IGNvbnRleHQsIHF1ZXJ5OiBxdWVyeSwgc2NvcmU6IHVuZGVmaW5lZCwgc3RhdGU6IGZsYWd9XTtcbn1cblxuLy8gUmV0dXJucyBmYWxzZSBpZiBhbnkgbm9kZXMgYXJlIG5vdCBtYXJrZWQgZm91bmRcbi8vIFJldHVybnMgdHJ1ZSBpZiBhbGwgbm9kZXMgYXJlIG1hcmtlZCBmb3VuZFxuZnVuY3Rpb24gdHJlZUNvbXBsZXRlKG5vZGU6IE5vZGUpOiBib29sZWFuIHtcbiAgaWYgKG5vZGUuZm91bmQgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIGxldCBjaGlsZHJlblN0YXR1cyA9IG5vZGUuY2hpbGRyZW4ubWFwKHRyZWVDb21wbGV0ZSk7XG4gICAgcmV0dXJuIGNoaWxkcmVuU3RhdHVzLmV2ZXJ5KChjaGlsZCkgPT4gY2hpbGQgPT09IHRydWUpOyBcbiAgfVxufVxuXG4vLyBQZXJmb3JtcyBzb21lIHRyYW5zZm9ybWF0aW9ucyB0byB0aGUgcXVlcnkgc3RyaW5nIGJlZm9yZSB0b2tlbml6aW5nXG5leHBvcnQgZnVuY3Rpb24gcHJlcHJvY2Vzc1F1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nOiBzdHJpbmcpOiBBcnJheTxQcmVUb2tlbj4ge1xuICAvLyBBZGQgd2hpdGVzcGFjZSBiZWZvcmUgY29tbWFzXG4gIGxldCBwcm9jZXNzZWRTdHJpbmcgPSBxdWVyeVN0cmluZy5yZXBsYWNlKG5ldyBSZWdFeHAoXCIsXCIsICdnJyksXCIgLCBcIik7XG4gIHByb2Nlc3NlZFN0cmluZyA9IHByb2Nlc3NlZFN0cmluZy5yZXBsYWNlKG5ldyBSZWdFeHAoXCI7XCIsICdnJyksXCIgOyBcIik7XG4gIHByb2Nlc3NlZFN0cmluZyA9IHByb2Nlc3NlZFN0cmluZy5yZXBsYWNlKG5ldyBSZWdFeHAoXCJcXFxcK1wiLCAnZycpLFwiICsgXCIpO1xuICBwcm9jZXNzZWRTdHJpbmcgPSBwcm9jZXNzZWRTdHJpbmcucmVwbGFjZShuZXcgUmVnRXhwKFwiLVwiLCAnZycpLFwiIC0gXCIpO1xuICBwcm9jZXNzZWRTdHJpbmcgPSBwcm9jZXNzZWRTdHJpbmcucmVwbGFjZShuZXcgUmVnRXhwKFwiXFxcXCpcIiwgJ2cnKSxcIiAqIFwiKTtcbiAgcHJvY2Vzc2VkU3RyaW5nID0gcHJvY2Vzc2VkU3RyaW5nLnJlcGxhY2UobmV3IFJlZ0V4cChcIi9cIiwgJ2cnKSxcIiAvIFwiKTtcbiAgcHJvY2Vzc2VkU3RyaW5nID0gcHJvY2Vzc2VkU3RyaW5nLnJlcGxhY2UobmV3IFJlZ0V4cChcIlxcc1xccytcIiwgJ2cnKSxcIiBcIik7XG4gIC8vIEdldCBwYXJ0cyBvZiBzcGVhY2ggd2l0aCBzZW50ZW5jZSBpbmZvcm1hdGlvbi4gSXQncyBva2F5IGlmIHRoZXkncmUgd3Jvbmc7IHRoZXkgXG4gIC8vIHdpbGwgYmUgY29ycmVjdGVkIGFzIHdlIGNyZWF0ZSB0aGUgdHJlZSBhbmQgbWF0Y2ggYWdhaW5zdCB0aGUgdW5kZXJseWluZyBkYXRhIG1vZGVsXG4gIGxldCBzZW50ZW5jZXMgPSBubHAucG9zKHByb2Nlc3NlZFN0cmluZywge2RvbnRfY29tYmluZTogdHJ1ZX0pLnNlbnRlbmNlczsgICBcbiAgLy8gSWYgbm8gc2VudGVuY2VzIHdlcmUgZm91bmQsIGRvbid0IGJvdGhlciBwYXJzaW5nXG4gIGlmIChzZW50ZW5jZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGxldCBubHBjVG9rZW5zID0gc2VudGVuY2VzWzBdLnRva2VucztcbiAgbGV0IHByZVRva2VuczogQXJyYXk8UHJlVG9rZW4+ID0gbmxwY1Rva2Vucy5tYXAoKHRva2VuLGkpID0+IHtcbiAgICByZXR1cm4ge2l4OiBpLCB0ZXh0OiB0b2tlbi50ZXh0LCB0YWc6IHRva2VuLnBvcy50YWd9O1xuICB9KTtcbiAgLy8gR3JvdXAgcXVvdGVkIHRleHQgaGVyZVxuICBsZXQgcXVvdGVTdGFydHMgPSBwcmVUb2tlbnMuZmlsdGVyKCh0KSA9PiB0LnRleHQuY2hhckF0KDApID09PSBgXCJgKTtcbiAgbGV0IHF1b3RlRW5kcyA9IHByZVRva2Vucy5maWx0ZXIoKHQpID0+IHQudGV4dC5jaGFyQXQodC50ZXh0Lmxlbmd0aC0xKSA9PT0gYFwiYCk7XG4gIC8vIElmIHdlIGhhdmUgYmFsYW5jZWQgcXVvdGVzLCBjb21iaW5lIHRva2Vuc1xuICBpZiAocXVvdGVTdGFydHMubGVuZ3RoID09PSBxdW90ZUVuZHMubGVuZ3RoKSB7XG4gICAgbGV0IGVuZCwgc3RhcnQ7IC8vIEBIQUNLIHRvIGdldCBhcm91bmQgYmxvY2sgc2NvcGVkIHZhcmlhYmxlIHJlc3RyaWN0aW9uXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBxdW90ZVN0YXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgc3RhcnQgPSBxdW90ZVN0YXJ0c1tpXTtcbiAgICAgIGVuZCA9IHF1b3RlRW5kc1tpXTtcbiAgICAgIC8vIEdldCBhbGwgdG9rZW5zIGJldHdlZW4gcXVvdGVzIChpbmNsdXNpdmUpXG4gICAgICBsZXQgcXVvdGVkVG9rZW5zID0gcHJlVG9rZW5zLmZpbHRlcigodG9rZW4pID0+IHRva2VuLml4ID49IHN0YXJ0Lml4ICYmIHRva2VuLml4IDw9IGVuZC5peClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKCh0b2tlbikgPT4gdG9rZW4udGV4dCk7XG4gICAgICBsZXQgcXVvdGVkVGV4dCA9IHF1b3RlZFRva2Vucy5qb2luKFwiIFwiKTsgICAgICAgICAgICAgICAgICBcbiAgICAgIC8vIFJlbW92ZSBxdW90ZXMgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgIHF1b3RlZFRleHQgPSBxdW90ZWRUZXh0LnJlcGxhY2UobmV3IFJlZ0V4cChcIlxcXCJcIiwgJ2cnKSxcIlwiKTtcbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBwcmV0b2tlblxuICAgICAgbGV0IG5ld1ByZVRva2VuOiBQcmVUb2tlbiA9IHtpeDogc3RhcnQuaXgsIHRleHQ6IHF1b3RlZFRleHQsIHRhZzogXCJOTlFcIn07XG4gICAgICBwcmVUb2tlbnMuc3BsaWNlKHByZVRva2Vucy5pbmRleE9mKHN0YXJ0KSxxdW90ZWRUb2tlbnMubGVuZ3RoLG5ld1ByZVRva2VuKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHByZVRva2Vucztcbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVG9rZW4gZnVuY3Rpb25zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmludGVyZmFjZSBQcmVUb2tlbiB7XG4gIGl4OiBudW1iZXIsXG4gIHRleHQ6IHN0cmluZyxcbiAgdGFnOiBzdHJpbmcsXG59XG5cbmVudW0gTWFqb3JQYXJ0c09mU3BlZWNoIHtcbiAgUk9PVCxcbiAgVkVSQixcbiAgQURKRUNUSVZFLFxuICBBRFZFUkIsXG4gIE5PVU4sXG4gIEdMVUUsXG4gIFdIV09SRCxcbiAgU1lNQk9MLFxufVxuXG5lbnVtIE1pbm9yUGFydHNPZlNwZWVjaCB7XG4gIFJPT1QsXG4gIC8vIFZlcmJcbiAgVkIsICAgLy8gdmVyYiwgZ2VuZXJpYyAoZWF0KVxuICBWQkQsICAvLyBwYXN0LXRlbnNlIHZlcmIgKGF0ZSlcbiAgVkJOLCAgLy8gcGFzdC1wYXJ0aWNpcGxlIHZlcmIgKGVhdGVuKVxuICBWQlAsICAvLyBpbmZpbml0aXZlIHZlcmIgKGVhdClcbiAgVkJaLCAgLy8gcHJlc250LXRlbnNlIHZlcmIgKGVhdHMpXG4gIFZCRiwgIC8vIGZ1dHVyZS10ZW5zZSB2ZXJiIChlYXQpXG4gIENQLCAgIC8vIGNvcHVsYSAoaXMsIHdhcywgd2VyZSlcbiAgVkJHLCAgLy8gZ2VydW5kIHZlcmIgKGVhdGluZylcbiAgLy8gQWRqZWN0aXZlXG4gIEpKLCAgIC8vIGFkamVjdGl2ZSwgZ2VuZXJpYyAoYmlnKVxuICBKSlIsICAvLyBjb21wYXJhdGl2ZSBhZGplY3RpdmUgKGJpZ2dlcilcbiAgSkpTLCAgLy8gc3VwZXJsYXRpdmUgYWRqZWN0aXZlIChiaWdnZXN0KVxuICAvLyBBZHZlcmJcbiAgUkIsICAgLy8gYWR2ZXJiLCBnZW5lcmljIChxdWlja2x5KVxuICBSQlIsICAvLyBjb21wYXJhdGl2ZSBhZHZlcmIgKGNvb2xlcilcbiAgUkJTLCAgLy8gc3VwZXJsYXRpdmUgYWR2ZXJiIChjb29sZXN0IChsb29raW5nKSlcbiAgLy8gTm91blxuICBOTiwgICAvLyBub3VuLCBzaW5ndWxhciAoZG9nKSBcbiAgTk5QQSwgLy8gYWNyb255bSAoRkJJKVxuICBOTkFCLCAvLyBhYmJyZXZpYXRpb24gKGpyLilcbiAgTkcsICAgLy8gZ2VydW5kIG5vdW4gKGVhdGluZywgd2lubmluZywgYnV0IHVzZWQgYXMgYSBub3VuKVxuICBQUlAsICAvLyBwZXJzb25hbCBwcm9ub3VuIChJLCB5b3UsIHNoZSlcbiAgUFAsICAgLy8gcG9zc2Vzc2l2ZSBwcm9ub3VuIChteSwgb25lJ3MpXG4gIC8vIExlZ2FjeSBOb3VuXG4gIE5OUCwgIC8vIFNpbmd1bGFyIHByb3BlciBub3VuIChTbWl0aClcbiAgTk5QUywgLy8gUGx1cmFsIHByb3BlciBub3VuIChTbWl0aHMpXG4gIE5OTywgIC8vIFBvc3Nlc3NpdmUgbm91biAocGVvcGxlJ3MpXG4gIE5OUywgIC8vIFBsdXJhbCBub3VuIChwZW9wbGUpXG4gIE5OQSwgIC8vIEBUT0RPIGZpZ3VyZSBvdXQgd2hhdCBOTkEgaXMuXG4gIE5OUSwgIC8vIFF1b3RlZCB0ZXh0XG4gIC8vIEdsdWVcbiAgRlcsICAgLy8gZm9yZWlnbiB3b3JkICh2b2lsYSkgXG4gIElOLCAgIC8vIHByZXBvc2l0aW9uIChvZiwgaW4sIGJ5KVxuICBNRCwgICAvLyBtb2RhbCB2ZXJiIChjYW4sIHNob3VsZClcbiAgQ0MsICAgLy8gY29vcmRpbmF0aW5nIGNvbmp1bmN0aW9uIChhbmQsIGJ1dCwgb3IpXG4gIFBEVCwgIC8vIHByZWRldGVybWluZXIgKHNvbWUsIGFsbCwgYW55KVxuICBEVCwgICAvLyBkZXRlcm1pbmVyICh0aGUpXG4gIFVILCAgIC8vIGludGVyamVjdGlvbiAob2gsIG9vcHMpXG4gIEVYLCAgIC8vIGV4aXN0ZW50aWFsIHRoZXJlICh0aGVyZSlcbiAgLy8gVmFsdWVcbiAgQ0QsICAgLy8gY2FyZGluYWwgdmFsdWUgKG9uZSwgdHdvLCBmaXJzdClcbiAgREEsICAgLy8gZGF0ZSAoanVuZSA1dGggMTk5OClcbiAgTlUsICAgLy8gbnVtYmVyICgxMDAsIG9uZSBodW5kcmVkKVxuICAvLyBTeW1ib2xcbiAgTFQsICAgLy8gU3ltYm9sICg8KVxuICBHVCwgICAvLyBTeW1ib2wgKD4pXG4gIEdURSwgIC8vIFN5bWJvbCAoPj0pXG4gIExURSwgIC8vIFN5bWJvbCAoPD0pXG4gIEVRLCAgIC8vIFN5bWJvbCAoPSlcbiAgTkVRLCAgLy8gU3ltYm9sICghPSlcbiAgUExVUywgLy8gU3VtYm9sICgrKVxuICBNSU5VUywvLyBTdW1ib2wgKC0pXG4gIERJViwgIC8vIFN1bWJvbCAoLylcbiAgTVVMLCAgLy8gU3VtYm9sICgqKVxuICBTRVAsICAvLyBTZXBhcmF0b3IgKCwgOylcbiAgLy8gV2gtIHdvcmRcbiAgV0RULCAgLy8gV2gtZGV0ZXJtaW5lciAodGhhdCB3aGF0IHdoYXRldmVyIHdoaWNoIHdoaWNoZXZlcilcbiAgV1AsICAgLy8gV2gtcHJvbm91biAodGhhdCB3aGF0IHdoYXRldmVyIHdoaWNoIHdobyB3aG9tKVxuICBXUE8sICAvLyBXaC1wcm9ub3VuIHBvc3Nlc3NpdmUgKHdob3NlKVxuICBXUkIgICAvLyBXaC1hZHZlcmIgKGhvd2V2ZXIgd2hlbmV2ZXIgd2hlcmUgd2h5KVxufVxuXG5pbnRlcmZhY2UgVG9rZW4ge1xuICBpeDogbnVtYmVyLFxuICBzdGFydD86IG51bWJlcixcbiAgZW5kPzogbnVtYmVyLFxuICBvcmlnaW5hbFdvcmQ6IHN0cmluZyxcbiAgbm9ybWFsaXplZFdvcmQ6IHN0cmluZyxcbiAgUE9TOiBNaW5vclBhcnRzT2ZTcGVlY2gsXG4gIHByb3BlcnRpZXM6IEFycmF5PFByb3BlcnRpZXM+LFxuICBub2RlPzogTm9kZSxcbiAgcHJldj86IFRva2VuLFxuICBuZXh0PzogVG9rZW4sXG59XG5cbmZ1bmN0aW9uIGNsb25lVG9rZW4odG9rZW46IFRva2VuKTogVG9rZW4ge1xuICBsZXQgY2xvbmU6IFRva2VuID0ge1xuICAgIGl4OiB0b2tlbi5peCxcbiAgICBvcmlnaW5hbFdvcmQ6IHRva2VuLm9yaWdpbmFsV29yZCxcbiAgICBub3JtYWxpemVkV29yZDogdG9rZW4ubm9ybWFsaXplZFdvcmQsXG4gICAgUE9TOiB0b2tlbi5QT1MsXG4gICAgcHJvcGVydGllczogW10sXG4gIH07XG4gIHRva2VuLnByb3BlcnRpZXMubWFwKChwcm9wZXJ0eSkgPT4gY2xvbmUucHJvcGVydGllcy5wdXNoKHByb3BlcnR5KSk7XG4gIHJldHVybiBjbG9uZTtcbn1cblxuZnVuY3Rpb24gbmV3VG9rZW4od29yZDogc3RyaW5nKTogVG9rZW4ge1xuICBsZXQgdG9rZW4gPSB7XG4gICAgaXg6IDAsXG4gICAgb3JpZ2luYWxXb3JkOiB3b3JkLFxuICAgIG5vcm1hbGl6ZWRXb3JkOiB3b3JkLFxuICAgIFBPUzogTWlub3JQYXJ0c09mU3BlZWNoLk5OLFxuICAgIHByb3BlcnRpZXM6IFtdLFxuICB9XG4gIHJldHVybiB0b2tlbjtcbn1cblxuZW51bSBQcm9wZXJ0aWVzIHtcbiAgUk9PVCxcbiAgRU5USVRZLFxuICBDT0xMRUNUSU9OLFxuICBBVFRSSUJVVEUsXG4gIFFVQU5USVRZLFxuICBQUk9QRVIsXG4gIFBMVVJBTCxcbiAgUE9TU0VTU0lWRSxcbiAgQkFDS1JFTEFUSU9OU0hJUCxcbiAgQ09NUEFSQVRJVkUsXG4gIFNVUEVSTEFUSVZFLFxuICBQUk9OT1VOLCAgXG4gIFNFUEFSQVRPUixcbiAgQ09OSlVOQ1RJT04sXG4gIENPTVBPVU5ELFxuICBRVU9URUQsXG4gIEZVTkNUSU9OLFxuICBHUk9VUElORyxcbiAgT1VUUFVULFxuICBJTlBVVCxcbiAgTkVHQVRFUyxcbiAgSU1QTElDSVQsXG4gIEFHR1JFR0FURSxcbiAgQ0FMQ1VMQVRFLFxuICBPUEVSQVRPUixcbn1cblxuLy8gRmluZHMgYSBnaXZlbiBwcm9wZXJ0eSBpbiBhIHRva2VuXG5mdW5jdGlvbiBoYXNQcm9wZXJ0eSh0b2tlbjogVG9rZW4sIHByb3BlcnR5OiBQcm9wZXJ0aWVzKTogYm9vbGVhbiB7XG4gIGxldCBmb3VuZCA9IHRva2VuLnByb3BlcnRpZXMuaW5kZXhPZihwcm9wZXJ0eSk7XG4gIGlmIChmb3VuZCAhPT0gLTEpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuXG4vLyB0YWtlIGFuIGlucHV0IHN0cmluZywgZXh0cmFjdCB0b2tlbnNcbmZ1bmN0aW9uIGZvcm1Ub2tlbnMocHJlVG9rZW5zOiBBcnJheTxQcmVUb2tlbj4pOiBBcnJheTxUb2tlbj4ge1xuICAgIFxuICAgIC8vIEZvcm0gYSB0b2tlbiBmb3IgZWFjaCB3b3JkXG4gICAgbGV0IGN1cnNvclBvcyA9IC0yO1xuICAgIGxldCB0b2tlbnM6IEFycmF5PFRva2VuPiA9IHByZVRva2Vucy5tYXAoKHByZVRva2VuOiBQcmVUb2tlbiwgaTogbnVtYmVyKSA9PiB7XG4gICAgICBsZXQgd29yZCA9IHByZVRva2VuLnRleHQ7XG4gICAgICBsZXQgdGFnID0gcHJlVG9rZW4udGFnO1xuICAgICAgbGV0IHRva2VuOiBUb2tlbiA9IHtcbiAgICAgICAgaXg6IGkrMSwgXG4gICAgICAgIG9yaWdpbmFsV29yZDogd29yZCwgXG4gICAgICAgIG5vcm1hbGl6ZWRXb3JkOiB3b3JkLFxuICAgICAgICBzdGFydDogY3Vyc29yUG9zICs9IDIsXG4gICAgICAgIGVuZDogY3Vyc29yUG9zICs9IHdvcmQubGVuZ3RoIC0gMSxcbiAgICAgICAgUE9TOiBNaW5vclBhcnRzT2ZTcGVlY2hbdGFnXSxcbiAgICAgICAgcHJvcGVydGllczogW10sIFxuICAgICAgfTtcbiAgICAgIGxldCBiZWZvcmUgPSBcIlwiO1xuICAgICAgICAgICBcbiAgICAgIC8vIEFkZCBkZWZhdWx0IGF0dHJpYnV0ZSBtYXJrZXJzIHRvIG5vdW5zXG4gICAgICBpZiAoZ2V0TWFqb3JQT1ModG9rZW4uUE9TKSA9PT0gTWFqb3JQYXJ0c09mU3BlZWNoLk5PVU4pIHtcbiAgICAgICAgaWYgKHRva2VuLlBPUyA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLk5OTyB8fCBcbiAgICAgICAgICAgIHRva2VuLlBPUyA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLlBQKSB7XG4gICAgICAgICB0b2tlbi5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5QT1NTRVNTSVZFKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9rZW4uUE9TID09PSBNaW5vclBhcnRzT2ZTcGVlY2guTk5QICB8fFxuICAgICAgICAgICAgdG9rZW4uUE9TID09PSBNaW5vclBhcnRzT2ZTcGVlY2guTk5QUyB8fFxuICAgICAgICAgICAgdG9rZW4uUE9TID09PSBNaW5vclBhcnRzT2ZTcGVlY2guTk5QQSkge1xuICAgICAgICAgIHRva2VuLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLlBST1BFUik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRva2VuLlBPUyA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLk5OUFMgIHx8XG4gICAgICAgICAgICB0b2tlbi5QT1MgPT09IE1pbm9yUGFydHNPZlNwZWVjaC5OTlMpIHtcbiAgICAgICAgICB0b2tlbi5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5QTFVSQUwpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b2tlbi5QT1MgPT09IE1pbm9yUGFydHNPZlNwZWVjaC5DRCB8fFxuICAgICAgICAgICAgdG9rZW4uUE9TID09PSBNaW5vclBhcnRzT2ZTcGVlY2guREEgfHxcbiAgICAgICAgICAgIHRva2VuLlBPUyA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLk5VKSB7XG4gICAgICAgICAgdG9rZW4ucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuUVVBTlRJVFkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b2tlbi5QT1MgPT09IE1pbm9yUGFydHNPZlNwZWVjaC5QUCB8fFxuICAgICAgICAgICAgdG9rZW4uUE9TID09PSBNaW5vclBhcnRzT2ZTcGVlY2guUFJQKSB7XG4gICAgICAgICAgdG9rZW4ucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuUFJPTk9VTik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRva2VuLlBPUyA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLk5OUSkge1xuICAgICAgICAgIHRva2VuLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLlBST1BFUik7XG4gICAgICAgICAgdG9rZW4ucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuUVVPVEVEKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBZGQgZGVmYXVsdCBwcm9wZXJ0aWVzIHRvIGFkamVjdGl2ZXMgYW5kIGFkdmVyYnNcbiAgICAgIGlmICh0b2tlbi5QT1MgPT09IE1pbm9yUGFydHNPZlNwZWVjaC5KSlIgfHwgdG9rZW4uUE9TID09PSBNaW5vclBhcnRzT2ZTcGVlY2guUkJSKSB7XG4gICAgICAgIHRva2VuLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLkNPTVBBUkFUSVZFKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHRva2VuLlBPUyA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLkpKUyB8fCB0b2tlbi5QT1MgPT09IE1pbm9yUGFydHNPZlNwZWVjaC5SQlMpIHsgICAgICAgIFxuICAgICAgICB0b2tlbi5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5TVVBFUkxBVElWRSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFkZCBkZWZhdWx0IHByb3BlcnRpZXMgdG8gc2VwYXJhdG9yc1xuICAgICAgaWYgKHRva2VuLlBPUyA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLkNDKSB7XG4gICAgICAgIHRva2VuLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLkNPTkpVTkNUSU9OKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gbm9ybWFsaXplIHRoZSB3b3JkIHdpdGggdGhlIGZvbGxvd2luZyB0cmFuc2Zvcm1hdGlvbnM6IFxuICAgICAgLy8gLS0tIHN0cmlwIHB1bmN0dWF0aW9uXG4gICAgICAvLyAtLS0gZ2V0IHJpZCBvZiBwb3NzZXNzaXZlIGVuZGluZyBcbiAgICAgIC8vIC0tLSBjb252ZXJ0IHRvIGxvd2VyIGNhc2VcbiAgICAgIC8vIC0tLSBzaW5ndWxhcml6ZVxuICAgICAgICAgICAgLy8gSWYgdGhlIHdvcmQgaXMgcXVvdGVkXG4gICAgICBpZiAodG9rZW4uUE9TID09PSBNaW5vclBhcnRzT2ZTcGVlY2guTk5RIHx8XG4gICAgICAgICAgdG9rZW4uUE9TID09PSBNaW5vclBhcnRzT2ZTcGVlY2guQ0QpIHtcbiAgICAgICAgdG9rZW4ubm9ybWFsaXplZFdvcmQgPSB3b3JkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IG5vcm1hbGl6ZWRXb3JkID0gd29yZDtcbiAgICAgICAgLy8gLS0tIHN0cmlwIHB1bmN0dWF0aW9uXG4gICAgICAgIG5vcm1hbGl6ZWRXb3JkID0gbm9ybWFsaXplZFdvcmQucmVwbGFjZSgvXFwufFxcP3xcXCF8L2csJycpO1xuICAgICAgICAvLyAtLS0gZ2V0IHJpZCBvZiBwb3NzZXNzaXZlIGVuZGluZ1xuICAgICAgICBiZWZvcmUgPSBub3JtYWxpemVkV29yZDtcbiAgICAgICAgbm9ybWFsaXplZFdvcmQgPSBub3JtYWxpemVkV29yZC5yZXBsYWNlKC8nc3wnJC8sJycpO1xuICAgICAgICAvLyBIZXVyaXN0aWM6IElmIHRoZSB3b3JkIGhhZCBhIHBvc3Nlc3NpdmUgZW5kaW5nLCBpdCBoYXMgdG8gYmUgYSBwb3NzZXNzaXZlIG5vdW4gb2Ygc29tZSBzb3J0ICAgICAgXG4gICAgICAgIGlmIChiZWZvcmUgIT09IG5vcm1hbGl6ZWRXb3JkKSB7XG4gICAgICAgICAgaWYgKGdldE1ham9yUE9TKHRva2VuLlBPUykgIT09IE1ham9yUGFydHNPZlNwZWVjaC5OT1VOKSB7XG4gICAgICAgICAgICB0b2tlbi5QT1MgPSBNaW5vclBhcnRzT2ZTcGVlY2guTk47XG4gICAgICAgICAgfVxuICAgICAgICAgIHRva2VuLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLlBPU1NFU1NJVkUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIC0tLSBjb252ZXJ0IHRvIGxvd2VyY2FzZVxuICAgICAgICBiZWZvcmUgPSBub3JtYWxpemVkV29yZDtcbiAgICAgICAgbm9ybWFsaXplZFdvcmQgPSBub3JtYWxpemVkV29yZC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAvLyBIZXVyaXN0aWM6IGlmIHRoZSB3b3JkIGlzIG5vdCB0aGUgZmlyc3Qgd29yZCBpbiB0aGUgc2VudGVuY2UgYW5kIGl0IGhhZCBjYXBpdGFsaXphdGlvbiwgdGhlbiBpdCBpcyBwcm9iYWJseSBhIHByb3BlciBub3VuXG4gICAgICAgIGlmIChiZWZvcmUgIT09IG5vcm1hbGl6ZWRXb3JkICYmIGkgIT09IDApIHtcbiAgICAgICAgICB0b2tlbi5QT1MgPSBNaW5vclBhcnRzT2ZTcGVlY2guTk5QO1xuICAgICAgICAgIHRva2VuLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLlBST1BFUik7ICAgICBcbiAgICAgICAgfVxuICAgICAgICAvLyAtLS0gaWYgdGhlIHdvcmQgaXMgYSAobm90IHByb3Blcikgbm91biBvciB2ZXJiLCBzaW5ndWxhcml6ZVxuICAgICAgICBpZiAoKGdldE1ham9yUE9TKHRva2VuLlBPUykgPT09IE1ham9yUGFydHNPZlNwZWVjaC5OT1VOIHx8IGdldE1ham9yUE9TKHRva2VuLlBPUykgPT09IE1ham9yUGFydHNPZlNwZWVjaC5WRVJCKSAmJiAhaGFzUHJvcGVydHkodG9rZW4sUHJvcGVydGllcy5QUk9QRVIpKSB7XG4gICAgICAgICAgYmVmb3JlID0gbm9ybWFsaXplZFdvcmQ7XG4gICAgICAgICAgbm9ybWFsaXplZFdvcmQgPSBzaW5ndWxhcml6ZShub3JtYWxpemVkV29yZCk7XG4gICAgICAgICAgLy8gSGV1cmlzdGljOiBJZiB0aGUgd29yZCBjaGFuZ2VkIGFmdGVyIHNpbmd1bGFyaXppbmcgaXQsIHRoZW4gaXQgd2FzIHBsdXJhbCB0byBiZWdpbiB3aXRoXG4gICAgICAgICAgaWYgKGJlZm9yZSAhPT0gbm9ybWFsaXplZFdvcmQpIHtcbiAgICAgICAgICAgIHRva2VuLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLlBMVVJBTCk7XG4gICAgICAgICAgfVxuICAgICAgICB9ICAgICAgXG4gICAgICAgIHRva2VuLm5vcm1hbGl6ZWRXb3JkID0gbm9ybWFsaXplZFdvcmQ7XG4gICAgICB9XG5cbiAgICAgICAgICAgXG4gICAgICAvLyBIZXVyaXN0aWM6IFNwZWNpYWwgY2FzZSBcImluXCIgY2xhc3NpZmllZCBhcyBhbiBhZGplY3RpdmUuIGUuZy4gXCJ0aGUgaW4gY3Jvd2RcIi4gVGhpcyBpcyBhbiB1bmNvbW1vbiB1c2FnZVxuICAgICAgaWYgKHRva2VuLm5vcm1hbGl6ZWRXb3JkID09PSBcImluXCIgJiYgZ2V0TWFqb3JQT1ModG9rZW4uUE9TKSA9PT0gTWFqb3JQYXJ0c09mU3BlZWNoLkFESkVDVElWRSkgXG4gICAgICB7XG4gICAgICAgIHRva2VuLlBPUyA9IE1pbm9yUGFydHNPZlNwZWVjaC5JTjtcbiAgICAgIH1cblxuICAgICAgLy8gSGV1cmlzdGljOiBTcGVjaWFsIGNhc2Ugd29yZHMgd2l0aCBubyBhbWJpZ3VvdXMgUE9TIHRoYXQgTkxQQyBtaXNjbGFzc2lmaWVzXG4gICAgICBzd2l0Y2ggKHRva2VuLm5vcm1hbGl6ZWRXb3JkKSB7XG4gICAgICAgIGNhc2UgXCJvZlwiOlxuICAgICAgICAgIHRva2VuLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLkJBQ0tSRUxBVElPTlNISVApOyBcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInBlclwiOlxuICAgICAgICAgIHRva2VuLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLkJBQ0tSRUxBVElPTlNISVApOyBcbiAgICAgICAgICB0b2tlbi5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5HUk9VUElORyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJhbGxcIjpcbiAgICAgICAgICB0b2tlbi5QT1MgPSBNaW5vclBhcnRzT2ZTcGVlY2guUERUO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiaGFkXCI6XG4gICAgICAgICAgdG9rZW4uUE9TID0gTWlub3JQYXJ0c09mU3BlZWNoLlZCRDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImhhc1wiOlxuICAgICAgICAgIHRva2VuLlBPUyA9IE1pbm9yUGFydHNPZlNwZWVjaC5WQlo7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJpc1wiOiBcbiAgICAgICAgICB0b2tlbi5QT1MgPSBNaW5vclBhcnRzT2ZTcGVlY2guQ1A7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJ3YXNcIjpcbiAgICAgICAgICB0b2tlbi5QT1MgPSBNaW5vclBhcnRzT2ZTcGVlY2guQ1A7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJhc1wiOiBcbiAgICAgICAgICB0b2tlbi5QT1MgPSBNaW5vclBhcnRzT2ZTcGVlY2guQ1A7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJ3ZXJlXCI6XG4gICAgICAgICAgdG9rZW4uUE9TID0gTWlub3JQYXJ0c09mU3BlZWNoLkNQO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiYmVcIjpcbiAgICAgICAgICB0b2tlbi5QT1MgPSBNaW5vclBhcnRzT2ZTcGVlY2guQ1A7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJkb1wiOlxuICAgICAgICAgIHRva2VuLlBPUyA9IE1pbm9yUGFydHNPZlNwZWVjaC5WQlA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJub1wiOlxuICAgICAgICAgIHRva2VuLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLk5FR0FURVMpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwibmVpdGhlclwiOlxuICAgICAgICAgIHRva2VuLlBPUyA9IE1pbm9yUGFydHNPZlNwZWVjaC5DQztcbiAgICAgICAgICB0b2tlbi5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5ORUdBVEVTKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIm5vclwiOlxuICAgICAgICAgIHRva2VuLlBPUyA9IE1pbm9yUGFydHNPZlNwZWVjaC5DQztcbiAgICAgICAgICB0b2tlbi5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5ORUdBVEVTKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImV4Y2VwdFwiOlxuICAgICAgICAgIHRva2VuLlBPUyA9IE1pbm9yUGFydHNPZlNwZWVjaC5DQztcbiAgICAgICAgICB0b2tlbi5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5ORUdBVEVTKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIndpdGhvdXRcIjpcbiAgICAgICAgICB0b2tlbi5QT1MgPSBNaW5vclBhcnRzT2ZTcGVlY2guQ0M7XG4gICAgICAgICAgdG9rZW4ucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuTkVHQVRFUyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJub3RcIjpcbiAgICAgICAgICB0b2tlbi5QT1MgPSBNaW5vclBhcnRzT2ZTcGVlY2guQ0M7XG4gICAgICAgICAgdG9rZW4ucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuTkVHQVRFUyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJhdmVyYWdlXCI6XG4gICAgICAgICAgdG9rZW4uUE9TID0gTWlub3JQYXJ0c09mU3BlZWNoLk5OO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwibWVhblwiOlxuICAgICAgICAgIHRva2VuLlBPUyA9IE1pbm9yUGFydHNPZlNwZWVjaC5OTjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInRoZWlyXCI6XG4gICAgICAgICAgdG9rZW4ucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuUExVUkFMKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIm1vc3RcIjpcbiAgICAgICAgICB0b2tlbi5QT1MgPSBNaW5vclBhcnRzT2ZTcGVlY2guSkpTO1xuICAgICAgICAgIHRva2VuLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLlNVUEVSTEFUSVZFKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImJlc3RcIjpcbiAgICAgICAgICB0b2tlbi5QT1MgPSBNaW5vclBhcnRzT2ZTcGVlY2guSkpTO1xuICAgICAgICAgIHRva2VuLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLlNVUEVSTEFUSVZFKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIndpbGxcIjpcbiAgICAgICAgICAvLyAnd2lsbCcgY2FuIGJlIGEgbm91blxuICAgICAgICAgIGlmIChnZXRNYWpvclBPUyh0b2tlbi5QT1MpICE9PSBNYWpvclBhcnRzT2ZTcGVlY2guTk9VTikge1xuICAgICAgICAgICAgdG9rZW4uUE9TID0gTWlub3JQYXJ0c09mU3BlZWNoLk1EO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInllYXJzXCI6XG4gICAgICAgICAgdG9rZW4uUE9TID0gTWlub3JQYXJ0c09mU3BlZWNoLk5OO1xuICAgICAgICAgIHRva2VuLm5vcm1hbGl6ZWRXb3JkID0gXCJ5ZWFyXCI7XG4gICAgICAgICAgdG9rZW4ucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuUExVUkFMKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU3BlY2lhbCBjYXNlIHN5bWJvbHNcbiAgICAgIHN3aXRjaCAodG9rZW4ubm9ybWFsaXplZFdvcmQpIHtcbiAgICAgICAgY2FzZSBcIj5cIjogXG4gICAgICAgICAgdG9rZW4uUE9TID0gTWlub3JQYXJ0c09mU3BlZWNoLkdUO1xuICAgICAgICAgIHRva2VuLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLkNPTVBBUkFUSVZFKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIj49XCI6IFxuICAgICAgICAgIHRva2VuLlBPUyA9IE1pbm9yUGFydHNPZlNwZWVjaC5HVEU7XG4gICAgICAgICAgdG9rZW4ucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuQ09NUEFSQVRJVkUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiPFwiOlxuICAgICAgICAgIHRva2VuLlBPUyA9IE1pbm9yUGFydHNPZlNwZWVjaC5MVDtcbiAgICAgICAgICB0b2tlbi5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5DT01QQVJBVElWRSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCI8PVwiOlxuICAgICAgICAgIHRva2VuLlBPUyA9IE1pbm9yUGFydHNPZlNwZWVjaC5MVEU7XG4gICAgICAgICAgdG9rZW4ucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuQ09NUEFSQVRJVkUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiPVwiOlxuICAgICAgICAgIHRva2VuLlBPUyA9IE1pbm9yUGFydHNPZlNwZWVjaC5FUTtcbiAgICAgICAgICB0b2tlbi5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5DT01QQVJBVElWRSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCIhPVwiOlxuICAgICAgICAgIHRva2VuLlBPUyA9IE1pbm9yUGFydHNPZlNwZWVjaC5ORVE7XG4gICAgICAgICAgdG9rZW4ucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuQ09NUEFSQVRJVkUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiK1wiOlxuICAgICAgICAgIHRva2VuLlBPUyA9IE1pbm9yUGFydHNPZlNwZWVjaC5QTFVTO1xuICAgICAgICAgIHRva2VuLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLk9QRVJBVE9SKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIi1cIjpcbiAgICAgICAgICB0b2tlbi5QT1MgPSBNaW5vclBhcnRzT2ZTcGVlY2guTUlOVVM7XG4gICAgICAgICAgdG9rZW4ucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuT1BFUkFUT1IpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiKlwiOlxuICAgICAgICAgIHRva2VuLlBPUyA9IE1pbm9yUGFydHNPZlNwZWVjaC5NVUw7XG4gICAgICAgICAgdG9rZW4ucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuT1BFUkFUT1IpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiL1wiOlxuICAgICAgICAgIHRva2VuLlBPUyA9IE1pbm9yUGFydHNPZlNwZWVjaC5ESVY7XG4gICAgICAgICAgdG9rZW4ucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuT1BFUkFUT1IpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiLFwiOlxuICAgICAgICAgIHRva2VuLlBPUyA9IE1pbm9yUGFydHNPZlNwZWVjaC5TRVA7XG4gICAgICAgICAgdG9rZW4ucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuU0VQQVJBVE9SKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIjtcIjpcbiAgICAgICAgICB0b2tlbi5QT1MgPSBNaW5vclBhcnRzT2ZTcGVlY2guU0VQO1xuICAgICAgICAgIHRva2VuLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLlNFUEFSQVRPUik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICB0b2tlbi5wcm9wZXJ0aWVzID0gdG9rZW4ucHJvcGVydGllcy5maWx0ZXIob25seVVuaXF1ZSk7XG4gICAgICByZXR1cm4gdG9rZW47XG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ29ycmVjdCB3aC0gdG9rZW5zXG4gICAgZm9yIChsZXQgdG9rZW4gb2YgdG9rZW5zKSB7XG4gICAgICBpZiAodG9rZW4ubm9ybWFsaXplZFdvcmQgPT09IFwidGhhdFwiICAgICB8fCBcbiAgICAgICAgICB0b2tlbi5ub3JtYWxpemVkV29yZCA9PT0gXCJ3aGF0ZXZlclwiIHx8XG4gICAgICAgICAgdG9rZW4ubm9ybWFsaXplZFdvcmQgPT09IFwid2hpY2hcIikge1xuICAgICAgICAvLyBkZXRlcm1pbmVycyBiZWNvbWUgd2gtIGRldGVybWluZXJzXG4gICAgICAgIGlmICh0b2tlbi5QT1MgPT09IE1pbm9yUGFydHNPZlNwZWVjaC5EVCkge1xuICAgICAgICAgIHRva2VuLlBPUyA9IE1pbm9yUGFydHNPZlNwZWVjaC5XRFQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcHJvbm91bnMgYmVjb21lIHdoLSBwcm9ub3Vuc1xuICAgICAgICBlbHNlIGlmICh0b2tlbi5QT1MgPT09IE1pbm9yUGFydHNPZlNwZWVjaC5QUlAgfHwgdG9rZW4uUE9TID09PSBNaW5vclBhcnRzT2ZTcGVlY2guUFApIHtcbiAgICAgICAgICB0b2tlbi5QT1MgPSBNaW5vclBhcnRzT2ZTcGVlY2guV1A7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICAvLyB3aG8gYW5kIHdob20gYXJlIHdoLSBwcm9ub3Vuc1xuICAgICAgaWYgKHRva2VuLm5vcm1hbGl6ZWRXb3JkID09PSBcIndob1wiICB8fCBcbiAgICAgICAgICB0b2tlbi5ub3JtYWxpemVkV29yZCA9PT0gXCJ3aGF0XCIgfHxcbiAgICAgICAgICB0b2tlbi5ub3JtYWxpemVkV29yZCA9PT0gXCJ3aG9tXCIpIHtcbiAgICAgICAgdG9rZW4uUE9TID0gTWlub3JQYXJ0c09mU3BlZWNoLldQO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIC8vIHdob3NlIGlzIHRoZSBvbmx5IHdoLSBwb3NzZXNzaXZlIHByb25vdW5cbiAgICAgIGlmICh0b2tlbi5ub3JtYWxpemVkV29yZCA9PT0gXCJ3aG9zZVwiKSB7XG4gICAgICAgIHRva2VuLlBPUyA9IE1pbm9yUGFydHNPZlNwZWVjaC5XUE87XG4gICAgICAgIHRva2VuLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLlBPU1NFU1NJVkUpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIC8vIGFkdmVyYnMgYmVjb21lIHdoLSBhZHZlcmJzXG4gICAgICBpZiAodG9rZW4ubm9ybWFsaXplZFdvcmQgPT09IFwiaG93XCIgICAgICB8fFxuICAgICAgICAgIHRva2VuLm5vcm1hbGl6ZWRXb3JkID09PSBcIndoZW5cIiAgICAgfHxcbiAgICAgICAgICB0b2tlbi5ub3JtYWxpemVkV29yZCA9PT0gXCJob3dldmVyXCIgIHx8IFxuICAgICAgICAgIHRva2VuLm5vcm1hbGl6ZWRXb3JkID09PSBcIndoZW5ldmVyXCIgfHxcbiAgICAgICAgICB0b2tlbi5ub3JtYWxpemVkV29yZCA9PT0gXCJ3aGVyZVwiICAgIHx8XG4gICAgICAgICAgdG9rZW4ubm9ybWFsaXplZFdvcmQgPT09IFwid2h5XCIpIHtcbiAgICAgICAgdG9rZW4uUE9TID0gTWlub3JQYXJ0c09mU3BlZWNoLldSQjtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFNlbnRlbmNlLWxldmVsIFBPUyBjb3JyZWN0aW9uc1xuICAgIC8vIEhldXJpc3RpYzogSWYgdGhlcmUgYXJlIG5vIHZlcmJzIGluIHRoZSBzZW50ZW5jZSwgdGhlcmUgY2FuIGJlIG5vIGFkdmVyYnMuIFR1cm4gdGhlbSBpbnRvIGFkamVjdGl2ZXNcbiAgICBsZXQgdmVyYnMgPSB0b2tlbnMuZmlsdGVyKCh0b2tlbjogVG9rZW4pID0+IGdldE1ham9yUE9TKHRva2VuLlBPUykgPT09IE1ham9yUGFydHNPZlNwZWVjaC5WRVJCICk7XG4gICAgaWYgKHZlcmJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbGV0IGFkdmVyYnM6IEFycmF5PFRva2VuPiA9IHRva2Vucy5maWx0ZXIoKHRva2VuOiBUb2tlbikgPT4gZ2V0TWFqb3JQT1ModG9rZW4uUE9TKSA9PT0gTWFqb3JQYXJ0c09mU3BlZWNoLkFEVkVSQik7XG4gICAgICBhZHZlcmJzLm1hcCgoYWR2ZXJiOiBUb2tlbikgPT4gYWR2ZXJiVG9BZGplY3RpdmUoYWR2ZXJiKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEhldXJpc3RpYzogQWR2ZXJicyBhcmUgbG9jYXRlZCBjbG9zZSB0byB2ZXJic1xuICAgICAgLy8gR2V0IHRoZSBkaXN0YW5jZSBmcm9tIGVhY2ggYWR2ZXJiIHRvIHRoZSBjbG9zZXN0IHZlcmIgYXMgYSBwZXJjZW50YWdlIG9mIHRoZSBsZW5ndGggb2YgdGhlIHNlbnRlbmNlLlxuICAgICAgbGV0IGFkdmVyYnM6IEFycmF5PFRva2VuPiA9IHRva2Vucy5maWx0ZXIoKHRva2VuOiBUb2tlbikgPT4gZ2V0TWFqb3JQT1ModG9rZW4uUE9TKSA9PT0gTWFqb3JQYXJ0c09mU3BlZWNoLkFEVkVSQik7XG4gICAgICBhZHZlcmJzLm1hcCgoYWR2ZXJiOiBUb2tlbikgPT4ge1xuICAgICAgICAgIGxldCBjbG9zZXN0VmVyYiA9IHRva2Vucy5sZW5ndGg7XG4gICAgICAgICAgdmVyYnMubWFwKCh2ZXJiOiBUb2tlbikgPT4ge1xuICAgICAgICAgICAgbGV0IGRpc3QgPSBNYXRoLmFicyhhZHZlcmIuaXggLSB2ZXJiLml4KTtcbiAgICAgICAgICAgIGlmIChkaXN0IDwgY2xvc2VzdFZlcmIpIHtcbiAgICAgICAgICAgICAgY2xvc2VzdFZlcmIgPSBkaXN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGxldCBkaXN0UmF0aW8gPSBjbG9zZXN0VmVyYi90b2tlbnMubGVuZ3RoO1xuICAgICAgICAgIC8vIFRocmVzaG9sZCB0aGUgZGlzdGFuY2UgYW4gYWR2ZXJiIGNhbiBiZSBmcm9tIHRoZSB2ZXJiXG4gICAgICAgICAgLy8gaWYgaXQgaXMgdG9vIGZhciwgbWFrZSBpdCBhbiBhZGplY3RpdmUgaW5zdGVhZFxuICAgICAgICAgIGlmIChkaXN0UmF0aW8gPiAuMjUpIHtcbiAgICAgICAgICAgIGFkdmVyYlRvQWRqZWN0aXZlKGFkdmVyYik7XG4gICAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGxldCByb290VG9rZW4gPSB7XG4gICAgICBpeDogMCwgXG4gICAgICBvcmlnaW5hbFdvcmQ6IHRva2Vucy5tYXAoKHRva2VuKSA9PiB0b2tlbi5vcmlnaW5hbFdvcmQpLmpvaW4oXCIgXCIpLCBcbiAgICAgIG5vcm1hbGl6ZWRXb3JkOiB0b2tlbnMubWFwKCh0b2tlbikgPT4gdG9rZW4ubm9ybWFsaXplZFdvcmQpLmpvaW4oXCIgXCIpLCBcbiAgICAgIFBPUzogTWlub3JQYXJ0c09mU3BlZWNoLlJPT1QsXG4gICAgICBwcm9wZXJ0aWVzOiBbUHJvcGVydGllcy5ST09UXSwgXG4gICAgfTtcbiAgICBcbiAgICB0b2tlbnMgPSBbcm9vdFRva2VuXS5jb25jYXQodG9rZW5zKTtcbiAgICBcbiAgICAvLyBMaW5rIHRva2VucyB0byBlYWNob3RoZXJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IHRva2VuID0gdG9rZW5zW2ldO1xuICAgICAgdG9rZW4ucHJldiA9IHRva2Vuc1tpIC0gMV07XG4gICAgICB0b2tlbi5uZXh0ID0gdG9rZW5zW2kgKyAxXTtcbiAgICB9XG4gICAgXG4gICAgbG9nKHRva2VuQXJyYXlUb1N0cmluZyh0b2tlbnMpKTtcbiAgICBcbiAgICByZXR1cm4gdG9rZW5zO1xufVxuXG5mdW5jdGlvbiBhZHZlcmJUb0FkamVjdGl2ZSh0b2tlbjogVG9rZW4pOiBUb2tlbiB7XG4gIGxldCB3b3JkID0gdG9rZW4ubm9ybWFsaXplZFdvcmQ7XG4gIC8vIEhldXJpc3RpYzogV29yZHMgdGhhdCBlbmQgaW4gLWVzdCBhcmUgc3VwZXJsYXRpdmVcbiAgaWYgKHdvcmQuc3Vic3RyKHdvcmQubGVuZ3RoLTMsd29yZC5sZW5ndGgpID09PSBcImVzdFwiKSB7XG4gICAgdG9rZW4uUE9TID0gTWlub3JQYXJ0c09mU3BlZWNoLkpKUztcbiAgICB0b2tlbi5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5TVVBFUkxBVElWRSk7XG4gIC8vIEhldXJpc3RpYzogV29yZHMgdGhhdCBlbmQgaW4gLWVyIGFyZSBjb21hcHJhdGl2ZVxuICB9IGVsc2UgaWYgKHdvcmQuc3Vic3RyKHdvcmQubGVuZ3RoLTIsd29yZC5sZW5ndGgpID09PSBcImVyXCIpe1xuICAgIHRva2VuLlBPUyA9IE1pbm9yUGFydHNPZlNwZWVjaC5KSlI7XG4gICAgdG9rZW4ucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuQ09NUEFSQVRJVkUpO1xuICB9IGVsc2Uge1xuICAgIHRva2VuLlBPUyA9IE1pbm9yUGFydHNPZlNwZWVjaC5KSjtcbiAgfSAgXG4gIHJldHVybiB0b2tlbjtcbn1cblxuZnVuY3Rpb24gZ2V0TWFqb3JQT1MobWlub3JQYXJ0T2ZTcGVlY2g6IE1pbm9yUGFydHNPZlNwZWVjaCk6IE1ham9yUGFydHNPZlNwZWVjaCB7XG4gIC8vIFJPT1RcbiAgaWYgKG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guUk9PVCkge1xuICAgIHJldHVybiBNYWpvclBhcnRzT2ZTcGVlY2guUk9PVDtcbiAgfVxuICAvLyBWZXJiXG4gIGlmIChtaW5vclBhcnRPZlNwZWVjaCA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLlZCICB8fFxuICAgICAgbWlub3JQYXJ0T2ZTcGVlY2ggPT09IE1pbm9yUGFydHNPZlNwZWVjaC5WQkQgfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guVkJOIHx8XG4gICAgICBtaW5vclBhcnRPZlNwZWVjaCA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLlZCUCB8fFxuICAgICAgbWlub3JQYXJ0T2ZTcGVlY2ggPT09IE1pbm9yUGFydHNPZlNwZWVjaC5WQlogfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guVkJGIHx8XG4gICAgICBtaW5vclBhcnRPZlNwZWVjaCA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLlZCRykge1xuICAgICAgICByZXR1cm4gTWFqb3JQYXJ0c09mU3BlZWNoLlZFUkI7XG4gIH1cbiAgLy8gQWRqZWN0aXZlXG4gIGlmIChtaW5vclBhcnRPZlNwZWVjaCA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLkpKICB8fFxuICAgICAgbWlub3JQYXJ0T2ZTcGVlY2ggPT09IE1pbm9yUGFydHNPZlNwZWVjaC5KSlIgfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guSkpTKSB7XG4gICAgICAgIHJldHVybiBNYWpvclBhcnRzT2ZTcGVlY2guQURKRUNUSVZFO1xuICB9XG4gIC8vIEFkanZlcmJcbiAgaWYgKG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guUkIgIHx8XG4gICAgICBtaW5vclBhcnRPZlNwZWVjaCA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLlJCUiB8fFxuICAgICAgbWlub3JQYXJ0T2ZTcGVlY2ggPT09IE1pbm9yUGFydHNPZlNwZWVjaC5SQlMpIHtcbiAgICAgICAgcmV0dXJuIE1ham9yUGFydHNPZlNwZWVjaC5BRFZFUkI7XG4gIH1cbiAgLy8gTm91blxuICBpZiAobWlub3JQYXJ0T2ZTcGVlY2ggPT09IE1pbm9yUGFydHNPZlNwZWVjaC5OTiAgIHx8XG4gICAgICBtaW5vclBhcnRPZlNwZWVjaCA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLk5OQSAgfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guTk5QQSB8fFxuICAgICAgbWlub3JQYXJ0T2ZTcGVlY2ggPT09IE1pbm9yUGFydHNPZlNwZWVjaC5OTkFCIHx8XG4gICAgICBtaW5vclBhcnRPZlNwZWVjaCA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLk5OUCAgfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guTk5QUyB8fFxuICAgICAgbWlub3JQYXJ0T2ZTcGVlY2ggPT09IE1pbm9yUGFydHNPZlNwZWVjaC5OTlMgIHx8XG4gICAgICBtaW5vclBhcnRPZlNwZWVjaCA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLk5OUSAgfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guQ0QgICB8fFxuICAgICAgbWlub3JQYXJ0T2ZTcGVlY2ggPT09IE1pbm9yUGFydHNPZlNwZWVjaC5EQSAgIHx8XG4gICAgICBtaW5vclBhcnRPZlNwZWVjaCA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLk5VICAgfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guTk5PICB8fFxuICAgICAgbWlub3JQYXJ0T2ZTcGVlY2ggPT09IE1pbm9yUGFydHNPZlNwZWVjaC5ORyAgIHx8XG4gICAgICBtaW5vclBhcnRPZlNwZWVjaCA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLlBSUCAgfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guUFApIHtcbiAgICAgICAgcmV0dXJuIE1ham9yUGFydHNPZlNwZWVjaC5OT1VOO1xuICB9XG4gIC8vIEdsdWVcbiAgaWYgKG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guRlcgIHx8XG4gICAgICBtaW5vclBhcnRPZlNwZWVjaCA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLklOICB8fFxuICAgICAgbWlub3JQYXJ0T2ZTcGVlY2ggPT09IE1pbm9yUGFydHNPZlNwZWVjaC5DUCAgfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guTUQgIHx8XG4gICAgICBtaW5vclBhcnRPZlNwZWVjaCA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLkNDICB8fFxuICAgICAgbWlub3JQYXJ0T2ZTcGVlY2ggPT09IE1pbm9yUGFydHNPZlNwZWVjaC5QRFQgfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guRFQgIHx8XG4gICAgICBtaW5vclBhcnRPZlNwZWVjaCA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLlVIICB8fFxuICAgICAgbWlub3JQYXJ0T2ZTcGVlY2ggPT09IE1pbm9yUGFydHNPZlNwZWVjaC5FWCkge1xuICAgICAgICByZXR1cm4gTWFqb3JQYXJ0c09mU3BlZWNoLkdMVUU7XG4gIH0gIFxuICAvLyBTeW1ib2xcbiAgaWYgKG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guTFQgICAgfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guR1QgICAgfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guR1RFICAgfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guTFRFICAgfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guRVEgICAgfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guTkVRICAgfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guUExVUyAgfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guTUlOVVMgfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guRElWICAgfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guTVVMICAgfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guU0VQKSB7XG4gICAgICAgIHJldHVybiBNYWpvclBhcnRzT2ZTcGVlY2guU1lNQk9MO1xuICB9XG4gIC8vIFdoLVdvcmRcbiAgaWYgKG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guV0RUIHx8XG4gICAgICBtaW5vclBhcnRPZlNwZWVjaCA9PT0gTWlub3JQYXJ0c09mU3BlZWNoLldQICB8fFxuICAgICAgbWlub3JQYXJ0T2ZTcGVlY2ggPT09IE1pbm9yUGFydHNPZlNwZWVjaC5XUE8gfHxcbiAgICAgIG1pbm9yUGFydE9mU3BlZWNoID09PSBNaW5vclBhcnRzT2ZTcGVlY2guV1JCKSB7XG4gICAgICAgIHJldHVybiBNYWpvclBhcnRzT2ZTcGVlY2guV0hXT1JEO1xuICB9XG59XG5cbi8vIFdyYXAgcGx1cmFsaXplIHRvIHNwZWNpYWwgY2FzZSBjZXJ0YWluIHdvcmRzIGl0IGdldHMgd3JvbmdcbmZ1bmN0aW9uIHNpbmd1bGFyaXplKHdvcmQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBzcGVjaWFsQ2FzZXMgPSBbXCJoaXNcIiwgXCJ0aW1lc1wiLCBcImhhc1wiLCBcImRvd25zdGFpcnNcIiwgXCJ1bml0ZWQgc3RhdGVzXCIsIFwiaXRzXCJdO1xuICBmb3IgKGxldCBzcGVjaWFsQ2FzZSBvZiBzcGVjaWFsQ2FzZXMpIHtcbiAgICBpZiAoc3BlY2lhbENhc2UgPT09IHdvcmQpIHtcbiAgICAgIHJldHVybiB3b3JkO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcGx1cmFsaXplKHdvcmQsIDEpO1xufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmVlIGZ1bmN0aW9uc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5pbnRlcmZhY2UgTm9kZSB7XG4gIGl4OiBudW1iZXIsXG4gIG5hbWU6IHN0cmluZyxcbiAgcGFyZW50OiBOb2RlLFxuICBjaGlsZHJlbjogQXJyYXk8Tm9kZT4sXG4gIGVudGl0eT86IEVudGl0eSxcbiAgY29sbGVjdGlvbj86IENvbGxlY3Rpb24sXG4gIGF0dHJpYnV0ZT86IEF0dHJpYnV0ZSxcbiAgZnhuPzogQnVpbHRJbkZ1bmN0aW9uLFxuICBjb25zdGl0dWVudHM/OiBBcnJheTxOb2RlPixcbiAgdG9rZW46IFRva2VuLFxuICBmb3VuZDogYm9vbGVhbixcbiAgcHJvcGVydGllczogQXJyYXk8UHJvcGVydGllcz4sXG4gIGhhc1Byb3BlcnR5KFByb3BlcnRpZXMpOiBib29sZWFuO1xuICB0b1N0cmluZyhudW1iZXI/OiBudW1iZXIpOiBzdHJpbmc7XG4gIG5leHQoKTogTm9kZTtcbiAgcHJldigpOiBOb2RlO1xuICBhZGRDaGlsZChub2RlOiBOb2RlKTogdm9pZDtcbn1cblxuZnVuY3Rpb24gY2xvbmVOb2RlKG5vZGU6IE5vZGUpOiBOb2RlIHtcbiAgbGV0IHRva2VuID0gY2xvbmVUb2tlbihub2RlLnRva2VuKTtcbiAgbGV0IGNsb25lTm9kZSA9IG5ld05vZGUodG9rZW4pO1xuICBjbG9uZU5vZGUuZW50aXR5ID0gbm9kZS5lbnRpdHk7XG4gIGNsb25lTm9kZS5jb2xsZWN0aW9uID0gbm9kZS5jb2xsZWN0aW9uO1xuICBjbG9uZU5vZGUuYXR0cmlidXRlID0gbm9kZS5hdHRyaWJ1dGU7XG4gIGNsb25lTm9kZS5meG4gPSBub2RlLmZ4bjtcbiAgY2xvbmVOb2RlLmZvdW5kID0gbm9kZS5mb3VuZDtcbiAgbm9kZS5wcm9wZXJ0aWVzLm1hcCgocHJvcGVydHkpID0+IGNsb25lTm9kZS5wcm9wZXJ0aWVzLnB1c2gocHJvcGVydHkpKTtcbiAgcmV0dXJuIGNsb25lTm9kZTtcbn1cblxuZnVuY3Rpb24gbmV3Tm9kZSh0b2tlbjogVG9rZW4pOiBOb2RlIHtcbiAgbGV0IG5vZGU6IE5vZGUgPSB7XG4gICAgaXg6IHRva2VuLml4LFxuICAgIG5hbWU6IHRva2VuLm5vcm1hbGl6ZWRXb3JkLFxuICAgIHBhcmVudDogdW5kZWZpbmVkLFxuICAgIGNoaWxkcmVuOiBbXSxcbiAgICB0b2tlbjogdG9rZW4sIFxuICAgIHByb3BlcnRpZXM6IHRva2VuLnByb3BlcnRpZXMsXG4gICAgZm91bmQ6IGZhbHNlLFxuICAgIGhhc1Byb3BlcnR5OiBoYXNQcm9wZXJ0eSxcbiAgICB0b1N0cmluZzogbm9kZVRvU3RyaW5nLFxuICAgIG5leHQ6IG5leHROb2RlLFxuICAgIHByZXY6IHByZXZpb3VzTm9kZSxcbiAgICBhZGRDaGlsZDogYWRkQ2hpbGQsXG4gIH07XG4gIHRva2VuLm5vZGUgPSBub2RlO1xuICBmdW5jdGlvbiBoYXNQcm9wZXJ0eShwcm9wZXJ0eTogUHJvcGVydGllcyk6IGJvb2xlYW4ge1xuICBsZXQgZm91bmQgPSBub2RlLnByb3BlcnRpZXMuaW5kZXhPZihwcm9wZXJ0eSk7XG4gIGlmIChmb3VuZCAhPT0gLTEpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIG5leHROb2RlKCk6IE5vZGUge1xuICAgIGxldCB0b2tlbiA9IG5vZGUudG9rZW47XG4gICAgbGV0IG5leHRUb2tlbiA9IHRva2VuLm5leHQ7XG4gICAgaWYgKG5leHRUb2tlbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gbmV4dFRva2VuLm5vZGU7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgZnVuY3Rpb24gcHJldmlvdXNOb2RlKCk6IE5vZGUge1xuICAgIGxldCB0b2tlbiA9IG5vZGUudG9rZW47XG4gICAgbGV0IHByZXZUb2tlbiA9IHRva2VuLnByZXY7XG4gICAgaWYgKHByZXZUb2tlbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gcHJldlRva2VuLm5vZGU7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgZnVuY3Rpb24gYWRkQ2hpbGQobmV3Q2hpbGQ6IE5vZGUpOiB2b2lkIHtcbiAgICBub2RlLmNoaWxkcmVuLnB1c2gobmV3Q2hpbGQpO1xuICAgIG5ld0NoaWxkLnBhcmVudCA9IG5vZGU7XG4gIH1cbiAgZnVuY3Rpb24gbm9kZVRvU3RyaW5nKGRlcHRoPzogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAoZGVwdGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgZGVwdGggPSAwO1xuICAgIH1cbiAgICBsZXQgY2hpbGRyZW5TdHJpbmdzID0gbm9kZS5jaGlsZHJlbi5tYXAoKGNoaWxkTm9kZSkgPT4gY2hpbGROb2RlLnRvU3RyaW5nKGRlcHRoKzEpKS5qb2luKFwiXFxuXCIpO1xuICAgIGxldCBjaGlsZHJlbiA9IGNoaWxkcmVuU3RyaW5ncy5sZW5ndGggPiAwID8gXCJcXG5cIiArIGNoaWxkcmVuU3RyaW5ncyA6IFwiXCI7XG4gICAgbGV0IGluZGVudCA9IEFycmF5KGRlcHRoKzEpLmpvaW4oXCIgXCIpO1xuICAgIGxldCBpbmRleCA9IG5vZGUuaXggPT09IHVuZGVmaW5lZCA/IFwiKyBcIiA6IGAke25vZGUuaXh9OiBgO1xuICAgIGxldCBwcm9wZXJ0aWVzID0gbm9kZS5wcm9wZXJ0aWVzLmxlbmd0aCA9PT0gMCA/IFwiXCIgOiBgKCR7bm9kZS5wcm9wZXJ0aWVzLm1hcCgocHJvcGVydHk6IFByb3BlcnRpZXMpID0+IFByb3BlcnRpZXNbcHJvcGVydHldKS5qb2luKFwifFwiKX0pYDtcbiAgICBsZXQgYXR0cmlidXRlID0gbm9kZS5hdHRyaWJ1dGUgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBgWyR7bm9kZS5hdHRyaWJ1dGUudmFyaWFibGV9ICgke25vZGUuYXR0cmlidXRlLnZhbHVlfSldIGA7XG4gICAgbGV0IGVudGl0eSA9IG5vZGUuZW50aXR5ID09PSB1bmRlZmluZWQgPyBcIlwiIDogYFske25vZGUuZW50aXR5LmRpc3BsYXlOYW1lfV0gYDtcbiAgICBsZXQgY29sbGVjdGlvbiA9IG5vZGUuY29sbGVjdGlvbiA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IGBbJHtub2RlLmNvbGxlY3Rpb24uZGlzcGxheU5hbWV9XSBgO1xuICAgIGxldCBmeG4gPSBub2RlLmZ4biA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IGBbJHtub2RlLmZ4bi5uYW1lfV0gYDtcbiAgICBsZXQgbmVnYXRlZCA9IG5vZGUuaGFzUHJvcGVydHkoUHJvcGVydGllcy5ORUdBVEVTKSA/IFwiIVwiIDogXCJcIjtcbiAgICBsZXQgZm91bmQgPSBub2RlLmZvdW5kID8gXCIqXCIgOiBcIiBcIjtcbiAgICBsZXQgZW50aXR5T3JQcm9wZXJ0aWVzID0gZm91bmQgPT09IFwiIFwiID8gYCR7cHJvcGVydGllc31gIDogYCR7bmVnYXRlZH0ke2Z4bn0ke2VudGl0eX0ke2NvbGxlY3Rpb259JHthdHRyaWJ1dGV9YDtcbiAgICBwcm9wZXJ0aWVzID0gcHJvcGVydGllcy5sZW5ndGggPT09IDIgPyBcIlwiIDogcHJvcGVydGllcztcbiAgICBsZXQgbm9kZVN0cmluZyA9IGB8JHtmb3VuZH0ke2luZGVudH0ke2luZGV4fSR7bm9kZS5uYW1lfSAke2VudGl0eU9yUHJvcGVydGllc30ke2NoaWxkcmVufWA7IFxuICAgIHJldHVybiBub2RlU3RyaW5nO1xuICB9XG4gIHJldHVybiBub2RlOyAgXG59XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBWYXJpb3VzIG5vZGUgbWFuaXB1bGF0aW9uIGZ1bmN0aW9uc1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gUmVtb3ZlcyB0aGUgbm9kZSBhbmQgaXRzIGNoaWxkcmVuIGZyb20gdGhlIHRyZWUsIFxuLy8gYW5kIG1ha2VzIGl0IGEgY2hpbGQgb2YgdGhlIHRhcmdldCBub2RlXG5mdW5jdGlvbiByZXJvb3Qobm9kZTogTm9kZSwgdGFyZ2V0OiBOb2RlKTogdm9pZCB7XG4gIG5vZGUucGFyZW50LmNoaWxkcmVuLnNwbGljZShub2RlLnBhcmVudC5jaGlsZHJlbi5pbmRleE9mKG5vZGUpLDEpOyAgXG4gIHRhcmdldC5hZGRDaGlsZChub2RlKTtcbn1cblxuLy8gUmVtb3ZlcyBhIG5vZGUgZnJvbSB0aGUgdHJlZVxuLy8gVGhlIG5vZGUncyBjaGlsZHJlbiBnZXQgYWRkZWQgdG8gaXRzIHBhcmVudFxuLy8gcmV0dXJucyB0aGUgbm9kZSBvciB1bmRlZmluZWQgaWYgdGhlIG9wZXJhdGlvbiBmYWlsZWRcbmZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZTogTm9kZSk6IE5vZGUge1xuICBpZiAobm9kZS5oYXNQcm9wZXJ0eShQcm9wZXJ0aWVzLlJPT1QpKSB7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cbiAgaWYgKG5vZGUucGFyZW50ID09PSB1bmRlZmluZWQgJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuICBsZXQgcGFyZW50OiBOb2RlID0gbm9kZS5wYXJlbnQ7XG4gIGxldCBjaGlsZHJlbjogQXJyYXk8Tm9kZT4gPSBub2RlLmNoaWxkcmVuO1xuICAvLyBSZXdpcmVcbiAgcGFyZW50LmNoaWxkcmVuID0gcGFyZW50LmNoaWxkcmVuLmNvbmNhdChjaGlsZHJlbik7XG4gIHBhcmVudC5jaGlsZHJlbi5zb3J0KChhLGIpID0+IGEuaXggLSBiLml4KTtcbiAgY2hpbGRyZW4ubWFwKChjaGlsZCkgPT4gY2hpbGQucGFyZW50ID0gcGFyZW50KTtcbiAgLy8gR2V0IHJpZCBvZiByZWZlcmVuY2VzIG9uIGN1cnJlbnQgbm9kZVxuICBwYXJlbnQuY2hpbGRyZW4uc3BsaWNlKHBhcmVudC5jaGlsZHJlbi5pbmRleE9mKG5vZGUpLDEpO1xuICBub2RlLnBhcmVudCA9IHVuZGVmaW5lZDtcbiAgbm9kZS5jaGlsZHJlbiA9IFtdO1xuICByZXR1cm4gbm9kZTtcbn1cblxuXG4vLyBSZXR1cm5zIHRoZSBmaXJzdCBhbmNlc3RvciBub2RlIHRoYXQgaGFzIGJlZW4gZm91bmRcbmZ1bmN0aW9uIHByZXZpb3VzbHlNYXRjaGVkKG5vZGU6IE5vZGUsIGlnbm9yZUZ1bmN0aW9ucz86IGJvb2xlYW4pOiBOb2RlIHtcbiAgaWYgKGlnbm9yZUZ1bmN0aW9ucyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgaWdub3JlRnVuY3Rpb25zID0gZmFsc2U7XG4gIH1cbiAgaWYgKG5vZGUucGFyZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9IGVsc2UgaWYgKCFpZ25vcmVGdW5jdGlvbnMgJiYgbm9kZS5wYXJlbnQuaGFzUHJvcGVydHkoUHJvcGVydGllcy5GVU5DVElPTikgJiYgIW5vZGUucGFyZW50Lmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuQ09OSlVOQ1RJT04pKSAge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH0gZWxzZSBpZiAobm9kZS5wYXJlbnQuaGFzUHJvcGVydHkoUHJvcGVydGllcy5FTlRJVFkpIHx8XG4gICAgICAgICAgICAgbm9kZS5wYXJlbnQuaGFzUHJvcGVydHkoUHJvcGVydGllcy5BVFRSSUJVVEUpIHx8XG4gICAgICAgICAgICAgbm9kZS5wYXJlbnQuaGFzUHJvcGVydHkoUHJvcGVydGllcy5DT0xMRUNUSU9OKSkge1xuICAgIHJldHVybiBub2RlLnBhcmVudDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcHJldmlvdXNseU1hdGNoZWQobm9kZS5wYXJlbnQsaWdub3JlRnVuY3Rpb25zKTtcbiAgfVxufVxuXG4vLyBJbnNlcnRzIGEgbm9kZSBhZnRlciB0aGUgdGFyZ2V0LCBtb3ZpbmcgYWxsIG9mIHRoZVxuLy8gdGFyZ2V0J3MgY2hpbGRyZW4gdG8gdGhlIG5vZGVcbi8vIEJlZm9yZTogW1RhcmdldF0gLT4gW0NoaWxkcmVuXVxuLy8gQWZ0ZXI6ICBbVGFyZ2V0XSAtPiBbTm9kZV0gLT4gW0NoaWxkcmVuXVxuZnVuY3Rpb24gaW5zZXJ0QWZ0ZXJOb2RlKG5vZGU6IE5vZGUsIHRhcmdldDogTm9kZSk6IHZvaWQge1xuICBub2RlLnBhcmVudCA9IHRhcmdldDtcbiAgbm9kZS5jaGlsZHJlbiA9IHRhcmdldC5jaGlsZHJlbjtcbiAgdGFyZ2V0LmNoaWxkcmVuLm1hcCgobikgPT4gbi5wYXJlbnQgPSBub2RlKTtcbiAgdGFyZ2V0LmNoaWxkcmVuID0gW25vZGVdO1xufVxuXG4vLyBGaW5kIGFsbCBsZWFmIG5vZGVzIHN0ZW1taW5nIGZyb20gYSBnaXZlbiBub2RlXG5mdW5jdGlvbiBmaW5kTGVhZk5vZGVzKG5vZGU6IE5vZGUpOiBBcnJheTxOb2RlPiB7XG4gIGlmKG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFtub2RlXTtcbiAgfVxuICBlbHNlIHtcbiAgICBsZXQgZm91bmRMZWFmcyA9IG5vZGUuY2hpbGRyZW4ubWFwKGZpbmRMZWFmTm9kZXMpO1xuICAgIGxldCBmbGF0TGVhZnMgPSBmbGF0dGVuTmVzdGVkQXJyYXkoZm91bmRMZWFmcyk7XG4gICAgcmV0dXJuIGZsYXRMZWFmcztcbiAgfVxufSBcblxuLypmdW5jdGlvbiBtb3ZlTm9kZShub2RlOiBOb2RlLCB0YXJnZXQ6IE5vZGUpOiB2b2lkIHtcbiAgaWYgKG5vZGUuaGFzUHJvcGVydHkoUHJvcGVydGllcy5ST09UKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgcGFyZW50ID0gbm9kZS5wYXJlbnQ7XG4gIHBhcmVudC5jaGlsZHJlbi5zcGxpY2UocGFyZW50LmNoaWxkcmVuLmluZGV4T2Yobm9kZSksMSk7XG4gIHBhcmVudC5jaGlsZHJlbiA9IHBhcmVudC5jaGlsZHJlbi5jb25jYXQobm9kZS5jaGlsZHJlbik7XG4gIG5vZGUuY2hpbGRyZW4ubWFwKChjaGlsZCkgPT4gY2hpbGQucGFyZW50ID0gcGFyZW50KTtcbiAgbm9kZS5jaGlsZHJlbiA9IFtdO1xuICBub2RlLnBhcmVudCA9IHRhcmdldDtcbiAgdGFyZ2V0LmNoaWxkcmVuLnB1c2gobm9kZSk7XG59Ki9cblxuLy8gRmluZHMgYSBwYXJlbnQgbm9kZSB3aXRoIHRoZSBzcGVjaWZpZWQgcHJvcGVydHksIFxuLy8gcmV0dXJucyB1bmRlZmluZWQgaWYgbm8gbm9kZSB3YXMgZm91bmRcbmZ1bmN0aW9uIGZpbmRQYXJlbnRXaXRoUHJvcGVydHkobm9kZTogTm9kZSwgcHJvcGVydHk6IFByb3BlcnRpZXMpOiBOb2RlIHtcbiAgaWYgKG5vZGUuaGFzUHJvcGVydHkoUHJvcGVydGllcy5ST09UKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKG5vZGUucGFyZW50Lmhhc1Byb3BlcnR5KHByb3BlcnR5KSkge1xuICAgIHJldHVybiBub2RlLnBhcmVudDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmluZFBhcmVudFdpdGhQcm9wZXJ0eShub2RlLnBhcmVudCxwcm9wZXJ0eSk7XG4gIH0gXG59XG5cbi8vIEZpbmRzIGEgcGFyZW50IG5vZGUgd2l0aCB0aGUgc3BlY2lmaWVkIHByb3BlcnR5LCBcbi8vIHJldHVybnMgdW5kZWZpbmVkIGlmIG5vIG5vZGUgd2FzIGZvdW5kXG5mdW5jdGlvbiBmaW5kQ2hpbGRXaXRoUHJvcGVydHkobm9kZTogTm9kZSwgcHJvcGVydHk6IFByb3BlcnRpZXMpOiBOb2RlIHtcbiAgaWYgKG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBpZiAobm9kZS5oYXNQcm9wZXJ0eShwcm9wZXJ0eSkpIHtcbiAgICByZXR1cm4gbm9kZTtcbiAgfSBlbHNlIHtcbiAgICBsZXQgY2hpbGRyZW5XaXRoUHJvcGVydHkgPSBub2RlLmNoaWxkcmVuLmZpbHRlcigoY2hpbGQpID0+IGNoaWxkLmhhc1Byb3BlcnR5KHByb3BlcnR5KSk7XG4gICAgaWYgKGNoaWxkcmVuV2l0aFByb3BlcnR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBjaGlsZHJlbldpdGhQcm9wZXJ0eVswXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHJlc3VsdHMgPSBub2RlLmNoaWxkcmVuLm1hcCgoY2hpbGQpID0+IGZpbmRDaGlsZFdpdGhQcm9wZXJ0eShjaGlsZCxwcm9wZXJ0eSkpLmZpbHRlcigocmVzdWx0KSA9PiByZXN1bHQgIT09IHVuZGVmaW5lZCk7XG4gICAgICBpZiAocmVzdWx0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiByZXN1bHRzWzBdO1xuICAgICAgfVxuICAgIH1cbiAgfSBcbn1cblxuLy8gRmluZHMgYSBwYXJlbnQgbm9kZSB3aXRoIHRoZSBzcGVjaWZpZWQgUE9TLCBcbi8vIHJldHVybnMgdW5kZWZpbmVkIGlmIG5vIG5vZGUgd2FzIGZvdW5kXG5mdW5jdGlvbiBmaW5kUGFyZW50V2l0aFBPUyhub2RlOiBOb2RlLCBtYWpvclBPUzogTWFqb3JQYXJ0c09mU3BlZWNoKTogTm9kZSB7XG4gIGlmIChnZXRNYWpvclBPUyhub2RlLnRva2VuLlBPUykgPT09IE1ham9yUGFydHNPZlNwZWVjaC5ST09UKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoZ2V0TWFqb3JQT1Mobm9kZS5wYXJlbnQudG9rZW4uUE9TKSA9PT0gbWFqb3JQT1MpIHtcbiAgICByZXR1cm4gbm9kZS5wYXJlbnQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZpbmRQYXJlbnRXaXRoUE9TKG5vZGUucGFyZW50LG1ham9yUE9TKTtcbiAgfSBcbn1cblxuLypcbi8vIFNldHMgbm9kZSB0byBiZSBhIHNpYmxpbmcgb2YgaXRzIHBhcmVudFxuLy8gQmVmb3JlOiBbR3JhbmRwYXJlbnRdIC0+IFtQYXJlbnRdIC0+IFtOb2RlXSBcbi8vIEFmdGVyOiAgW0dyYW5kcGFyZW50XSAtPiBbUGFyZW50XVxuLy8gICAgICAgICAgICAgICAgICAgICAgIC0+IFtOb2RlXVxuZnVuY3Rpb24gcHJvbW90ZU5vZGUobm9kZTogTm9kZSk6IHZvaWQge1xuICBpZiAobm9kZS5wYXJlbnQuaGFzUHJvcGVydHkoUHJvcGVydGllcy5ST09UKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgbmV3U2libGluZyA9IG5vZGUucGFyZW50O1xuICBsZXQgbmV3UGFyZW50ID0gbmV3U2libGluZy5wYXJlbnQ7XG4gIC8vIFNldCBwYXJlbnRcbiAgbm9kZS5wYXJlbnQgPSBuZXdQYXJlbnQ7XG4gIC8vIFJlbW92ZSBub2RlIGZyb20gcGFyZW50J3MgY2hpbGRyZW5cbiAgbmV3U2libGluZy5jaGlsZHJlbi5zcGxpY2UobmV3U2libGluZy5jaGlsZHJlbi5pbmRleE9mKG5vZGUpLDEpO1xuICAvLyBBZGQgbm9kZSB0byBuZXcgcGFyZW50J3MgY2hpbGRyZW5cbiAgbmV3UGFyZW50LmNoaWxkcmVuLnB1c2gobm9kZSk7XG59Ki9cblxuLy8gTWFrZXMgdGhlIG5vZGUncyBwYXJlbnQgYSBjaGlsZCBvZiB0aGUgbm9kZS5cbi8vIFRoZSBub2RlJ3MgZ3JhbmRwYXJlbnQgaXMgdGhlbiB0aGUgbm9kZSdzIHBhcmVudFxuLy8gQmVmb3JlOiBbR3JhbmRwYXJlbnRdIC0+IFtQYXJlbnRdIC0+IFtOb2RlXVxuLy8gQWZ0ZXI6IFtHcmFuZHBhcmVuXSAtPiBbTm9kZV0gLT4gW1BhcmVudF1cbmZ1bmN0aW9uIG1ha2VQYXJlbnRDaGlsZChub2RlOiBOb2RlKTogdm9pZCB7XG4gIGxldCBwYXJlbnQgPSBub2RlLnBhcmVudDtcbiAgLy8gRG8gbm90IHN3YXAgd2l0aCByb290XG4gIGlmIChwYXJlbnQuaGFzUHJvcGVydHkoUHJvcGVydGllcy5ST09UKSkge1xuICAgIHJldHVybjtcbiAgfVxuICAvLyBTZXQgcGFyZW50c1xuICBub2RlLnBhcmVudCA9IHBhcmVudC5wYXJlbnRcbiAgcGFyZW50LnBhcmVudCA9IG5vZGU7XG4gIC8vIFJlbW92ZSBub2RlIGFzIGEgY2hpbGQgZnJvbSBwYXJlbnRcbiAgcGFyZW50LmNoaWxkcmVuLnNwbGljZShwYXJlbnQuY2hpbGRyZW4uaW5kZXhPZihub2RlKSwxKTtcbiAgLy8gU2V0IGNoaWxkcmVuXG4gIG5vZGUuY2hpbGRyZW4gPSBub2RlLmNoaWxkcmVuLmNvbmNhdChwYXJlbnQpO1xuICBub2RlLnBhcmVudC5jaGlsZHJlbi5wdXNoKG5vZGUpO1xuICBub2RlLnBhcmVudC5jaGlsZHJlbi5zcGxpY2Uobm9kZS5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZihwYXJlbnQpLDEpO1xufVxuXG5cbi8vIFN3YXBzIGEgbm9kZSB3aXRoIGl0cyBwYXJlbnQuIFRoZSBub2RlJ3MgcGFyZW50XG4vLyBpcyB0aGVuIHRoZSBwYXJlbnQncyBwYXJlbnQsIGFuZCBpdHMgY2hpbGQgaXMgdGhlIHBhcmVudC5cbi8vIFRoZSBwYXJlbnQgZ2V0cyB0aGUgbm9kZSdzIGNoaWxkcmVuXG5mdW5jdGlvbiBzd2FwV2l0aFBhcmVudChub2RlOiBOb2RlKTogdm9pZCB7XG4gIGxldCBwYXJlbnQgPSBub2RlLnBhcmVudDtcbiAgbGV0IHBwYXJlbnQgPSBwYXJlbnQucGFyZW50O1xuICBpZiAocGFyZW50Lmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuUk9PVCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcGFyZW50LnBhcmVudCA9IG5vZGU7XG4gIHBhcmVudC5jaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW47XG4gIHBwYXJlbnQuY2hpbGRyZW4uc3BsaWNlKHBwYXJlbnQuY2hpbGRyZW4uaW5kZXhPZihwYXJlbnQpLDEpO1xuICBub2RlLnBhcmVudCA9IHBwYXJlbnQ7XG4gIG5vZGUuY2hpbGRyZW4gPSBbcGFyZW50XTtcbiAgcHBhcmVudC5jaGlsZHJlbi5wdXNoKG5vZGUpO1xufVxuXG5leHBvcnQgZW51bSBGdW5jdGlvblR5cGVzIHtcbiAgRklMVEVSLFxuICBBR0dSRUdBVEUsXG4gIEJPT0xFQU4sXG4gIENBTENVTEFURSxcbn1cblxuaW50ZXJmYWNlIEJ1aWx0SW5GdW5jdGlvbiB7XG4gIG5hbWU6IHN0cmluZyxcbiAgdHlwZTogRnVuY3Rpb25UeXBlcyxcbiAgYXR0cmlidXRlPzogc3RyaW5nLFxuICBmaWVsZHM6IEFycmF5PHN0cmluZz4sXG4gIHByb2plY3Q6IGJvb2xlYW4sXG4gIG5lZ2F0ZWQ/OiBib29sZWFuLFxuICBub2RlPzogTm9kZSxcbn1cblxuaW50ZXJmYWNlIENvbnRleHQge1xuICBlbnRpdGllczogQXJyYXk8RW50aXR5PixcbiAgY29sbGVjdGlvbnM6IEFycmF5PENvbGxlY3Rpb24+LFxuICBhdHRyaWJ1dGVzOiBBcnJheTxBdHRyaWJ1dGU+LFxuICBmeG5zOiBBcnJheTxCdWlsdEluRnVuY3Rpb24+LFxuICBncm91cGluZ3M6IEFycmF5PE5vZGU+LFxuICByZWxhdGlvbnNoaXBzOiBBcnJheTxSZWxhdGlvbnNoaXA+LFxuICBtYXliZUVudGl0aWVzOiBBcnJheTxOb2RlPixcbiAgbWF5YmVBdHRyaWJ1dGVzOiBBcnJheTxOb2RlPixcbiAgbWF5YmVDb2xsZWN0aW9uczogQXJyYXk8Tm9kZT4sXG4gIG1heWJlRnVuY3Rpb25zOiBBcnJheTxOb2RlPixcbiAgbWF5YmVBcmd1bWVudHM6IEFycmF5PE5vZGU+LFxufVxuXG5mdW5jdGlvbiBuZXdDb250ZXh0KCk6IENvbnRleHQge1xuICByZXR1cm4ge1xuICAgIGVudGl0aWVzOiBbXSxcbiAgICBjb2xsZWN0aW9uczogW10sXG4gICAgYXR0cmlidXRlczogW10sXG4gICAgZnhuczogW10sXG4gICAgZ3JvdXBpbmdzOiBbXSxcbiAgICByZWxhdGlvbnNoaXBzOiBbXSxcbiAgICBtYXliZUVudGl0aWVzOiBbXSxcbiAgICBtYXliZUF0dHJpYnV0ZXM6IFtdLFxuICAgIG1heWJlQ29sbGVjdGlvbnM6IFtdLFxuICAgIG1heWJlRnVuY3Rpb25zOiBbXSxcbiAgICBtYXliZUFyZ3VtZW50czogW10sXG4gIH07XG59XG5cbmZ1bmN0aW9uIHdvcmRUb0Z1bmN0aW9uKHdvcmQ6IHN0cmluZyk6IEJ1aWx0SW5GdW5jdGlvbiB7XG4gIHN3aXRjaCAod29yZCkge1xuICAgIGNhc2UgXCJ0YWxsZXJcIjpcbiAgICAgIHJldHVybiB7bmFtZTogXCI+XCIsIHR5cGU6IEZ1bmN0aW9uVHlwZXMuRklMVEVSLCBhdHRyaWJ1dGU6IFwiaGVpZ2h0XCIsIGZpZWxkczogW1wiYVwiLCBcImJcIl0sIHByb2plY3Q6IGZhbHNlfTtcbiAgICBjYXNlIFwic2hvcnRlclwiOlxuICAgICAgcmV0dXJuIHtuYW1lOiBcIjxcIiwgdHlwZTogRnVuY3Rpb25UeXBlcy5GSUxURVIsIGF0dHJpYnV0ZTogXCJsZW5ndGhcIiwgZmllbGRzOiBbXCJhXCIsIFwiYlwiXSwgcHJvamVjdDogZmFsc2V9O1xuICAgIGNhc2UgXCJsb25nZXJcIjpcbiAgICAgIHJldHVybiB7bmFtZTogXCI+XCIsIHR5cGU6IEZ1bmN0aW9uVHlwZXMuRklMVEVSLCBhdHRyaWJ1dGU6IFwibGVuZ3RoXCIsIGZpZWxkczogW1wiYVwiLCBcImJcIl0sIHByb2plY3Q6IGZhbHNlfTtcbiAgICBjYXNlIFwieW91bmdlclwiOlxuICAgICAgcmV0dXJuIHtuYW1lOiBcIjxcIiwgdHlwZTogRnVuY3Rpb25UeXBlcy5GSUxURVIsIGF0dHJpYnV0ZTogXCJhZ2VcIiwgZmllbGRzOiBbXCJhXCIsIFwiYlwiXSwgcHJvamVjdDogZmFsc2V9O1xuICAgIGNhc2UgXCJhbmRcIjpcbiAgICAgIHJldHVybiB7bmFtZTogXCJhbmRcIiwgdHlwZTogRnVuY3Rpb25UeXBlcy5CT09MRUFOLCBmaWVsZHM6IFtdLCBwcm9qZWN0OiBmYWxzZX07XG4gICAgY2FzZSBcIm9yXCI6XG4gICAgICByZXR1cm4ge25hbWU6IFwib3JcIiwgdHlwZTogRnVuY3Rpb25UeXBlcy5CT09MRUFOLCBmaWVsZHM6IFtdLCBwcm9qZWN0OiBmYWxzZX07XG4gICAgY2FzZSBcInRvdGFsXCI6XG4gICAgY2FzZSBcInN1bVwiOlxuICAgICAgcmV0dXJuIHtuYW1lOiBcInN1bVwiLCB0eXBlOiBGdW5jdGlvblR5cGVzLkFHR1JFR0FURSwgZmllbGRzOiBbXCJzdW1cIiwgXCJ2YWx1ZVwiXSwgcHJvamVjdDogdHJ1ZX07XG4gICAgY2FzZSBcImF2ZXJhZ2VcIjpcbiAgICBjYXNlIFwiYXZnXCI6XG4gICAgY2FzZSBcIm1lYW5cIjpcbiAgICAgIHJldHVybiB7bmFtZTogXCJhdmVyYWdlXCIsIHR5cGU6IEZ1bmN0aW9uVHlwZXMuQUdHUkVHQVRFLCBmaWVsZHM6IFtcImF2ZXJhZ2VcIiwgXCJ2YWx1ZVwiXSwgcHJvamVjdDogdHJ1ZX07XG4gICAgY2FzZSBcInBsdXNcIjpcbiAgICBjYXNlIFwiYWRkXCI6XG4gICAgY2FzZSBcIitcIjpcbiAgICAgIHJldHVybiB7bmFtZTogXCIrXCIsIHR5cGU6IEZ1bmN0aW9uVHlwZXMuQ0FMQ1VMQVRFLCBmaWVsZHM6IFtcInJlc3VsdFwiLCBcImFcIiwgXCJiXCJdLCBwcm9qZWN0OiB0cnVlfTtcbiAgICBjYXNlIFwic3VidHJhY3RcIjpcbiAgICBjYXNlIFwibWludXNcIjpcbiAgICBjYXNlIFwiLVwiOlxuICAgICAgcmV0dXJuIHtuYW1lOiBcIi1cIiwgdHlwZTogRnVuY3Rpb25UeXBlcy5DQUxDVUxBVEUsIGZpZWxkczogW1wicmVzdWx0XCIsIFwiYVwiLCBcImJcIl0sIHByb2plY3Q6IHRydWV9O1xuICAgIGNhc2UgXCJ0aW1lc1wiOlxuICAgIGNhc2UgXCJtdWx0aXBseVwiOlxuICAgIGNhc2UgXCJtdWx0aXBsaWVkXCI6XG4gICAgY2FzZSBcIipcIjpcbiAgICAgIHJldHVybiB7bmFtZTogXCIqXCIsIHR5cGU6IEZ1bmN0aW9uVHlwZXMuQ0FMQ1VMQVRFLCBmaWVsZHM6IFtcInJlc3VsdFwiLCBcImFcIiwgXCJiXCJdLCBwcm9qZWN0OiB0cnVlfTtcbiAgICBjYXNlIFwiZGl2aWRlXCI6XG4gICAgY2FzZSBcImRpdmlkZWRcIjpcbiAgICBjYXNlIFwiL1wiOlxuICAgICAgcmV0dXJuIHtuYW1lOiBcIi9cIiwgdHlwZTogRnVuY3Rpb25UeXBlcy5DQUxDVUxBVEUsIGZpZWxkczogW1wicmVzdWx0XCIsIFwiYVwiLCBcImJcIl0sIHByb2plY3Q6IHRydWV9O1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZvcm1UcmVlKHRva2VuczogQXJyYXk8VG9rZW4+KSB7ICBcbiAgbGV0IHRyZWU6IE5vZGU7XG4gIGxldCBzdWJzdW1lZE5vZGVzOiBBcnJheTxOb2RlPiA9IFtdO1xuXG4gIC8vIFR1cm4gdG9rZW5zIGludG8gbm9kZXNcbiAgbGV0IG5vZGVzID0gdG9rZW5zLmZpbHRlcigodG9rZW4pID0+IHRva2VuLm5vZGUgPT09IHVuZGVmaW5lZCkubWFwKG5ld05vZGUpO1xuICAgIFxuICAvLyBEbyBhIHF1aWNrIHBhc3MgdG8gaWRlbnRpZnkgZnVuY3Rpb25zXG4gIHRva2Vucy5tYXAoKHRva2VuKSA9PiB7XG4gICAgbGV0IG5vZGUgPSB0b2tlbi5ub2RlO1xuICAgIGxldCBmeG4gPSB3b3JkVG9GdW5jdGlvbihub2RlLm5hbWUpO1xuICAgIGlmIChmeG4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgbm9kZS5meG4gPSBmeG47XG4gICAgICBmeG4ubm9kZSA9IG5vZGU7XG4gICAgICBub2RlLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLkZVTkNUSU9OKTtcbiAgICAgIGlmIChub2RlLmZ4bi50eXBlID09PSBGdW5jdGlvblR5cGVzLkFHR1JFR0FURSkge1xuICAgICAgICBub2RlLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLkFHR1JFR0FURSk7ICBcbiAgICAgIH0gZWxzZSBpZiAobm9kZS5meG4udHlwZSA9PT0gRnVuY3Rpb25UeXBlcy5DQUxDVUxBVEUpIHtcbiAgICAgICAgbm9kZS5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5DQUxDVUxBVEUpO1xuICAgICAgfVxuICAgIH0gICAgXG4gIH0pO1xuICBcbiAgLy8gTGluayBub2RlcyBlbmQgdG8gZW5kXG4gIG5vZGVzLm1hcCgodGhpc05vZGUsaSkgPT4ge1xuICAgIGxldCBuZXh0Tm9kZSA9IG5vZGVzW2kgKyAxXTtcbiAgICBpZiAobmV4dE5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpc05vZGUuYWRkQ2hpbGQobmV4dE5vZGUpOyAgXG4gICAgfVxuICB9KVxuXG4gIC8vIEF0IHRoaXMgcG9pbnQgd2Ugc2hvdWxkIG9ubHkgaGF2ZSBhIHNpbmdsZSByb290LlxuICBub2RlcyA9IG5vZGVzLmZpbHRlcigobm9kZSkgPT4gbm9kZS5wYXJlbnQgPT09IHVuZGVmaW5lZCk7XG4gIHRyZWUgPSBub2Rlcy5wb3AoKTtcbiAgICBcbiAgZnVuY3Rpb24gcmVzb2x2ZUVudGl0aWVzKG5vZGU6IE5vZGUsIGNvbnRleHQ6IENvbnRleHQpOiBDb250ZXh0IHtcbiAgICBsZXQgcmVsYXRpb25zaGlwOiBSZWxhdGlvbnNoaXA7XG4gICAgXG4gICAgbG9vcDA6XG4gICAgd2hpbGUgKG5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29udGV4dC5tYXliZUF0dHJpYnV0ZXMgPSBjb250ZXh0Lm1heWJlQXR0cmlidXRlcy5maWx0ZXIoKG1heWJlQXR0cikgPT4gIW1heWJlQXR0ci5mb3VuZCk7XG4gICAgICBsb2coXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIik7XG4gICAgICBsb2cobm9kZSk7XG4gICAgICBcbiAgICAgIC8vIEhhbmRsZSBub2RlcyB0aGF0IHdlIHByZXZpb3VzbHkgZm91bmQgYnV0IG5lZWQgdG8gZ2V0IGhvb2tlZCB1cCB0byBhIGZ1bmN0aW9uXG4gICAgICBpZiAobm9kZS5mb3VuZCAmJiBub2RlLmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuQVRUUklCVVRFKSAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCAmJiBjb250ZXh0Lm1heWJlQXJndW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBsb2coXCJIYW5kbGluZyBtaXNzaW5nIGF0dHJpYnV0ZVwiKVxuICAgICAgICAgIGxldCBhcmd1bWVudCA9IGNvbnRleHQubWF5YmVBcmd1bWVudHMuc2hpZnQoKTtcbiAgICAgICAgICBpZiAobm9kZS5wYXJlbnQuaGFzUHJvcGVydHkoUHJvcGVydGllcy5FTlRJVFkpIHx8IG5vZGUucGFyZW50Lmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuQ09MTEVDVElPTikpIHtcbiAgICAgICAgICAgIGxldCBwYXJlbnQgPSByZW1vdmVOb2RlKG5vZGUucGFyZW50KTtcbiAgICAgICAgICAgIGFyZ3VtZW50LmFkZENoaWxkKHBhcmVudCk7XG4gICAgICAgICAgICByZW1vdmVOb2RlKG5vZGUpO1xuICAgICAgICAgICAgcGFyZW50LmFkZENoaWxkKG5vZGUpO1xuICAgICAgICAgICAgYXJndW1lbnQuZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHBhcmVudC5jb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgIHBhcmVudC5jb2xsZWN0aW9uLnByb2plY3QgPSBmYWxzZTsgIFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcGFyZW50LmVudGl0eS5wcm9qZWN0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrOyAgICBcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU2tpcCBjZXJ0YWluIG5vZGVzXG4gICAgICBpZiAobm9kZS5mb3VuZCB8fFxuICAgICAgICAgIG5vZGUuaGFzUHJvcGVydHkoUHJvcGVydGllcy5JTVBMSUNJVCkgfHxcbiAgICAgICAgICBub2RlLmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuUk9PVCkpIHtcbiAgICAgICAgbG9nKFwiU2tpcHBpbmcuLi5cIik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBSZW1vdmUgY2VydGFpbiBub2Rlc1xuICAgICAgaWYgKCFub2RlLmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuRlVOQ1RJT04pKSB7XG4gICAgICAgIGlmIChub2RlLmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuU0VQQVJBVE9SKSB8fFxuICAgICAgICAgICAgZ2V0TWFqb3JQT1Mobm9kZS50b2tlbi5QT1MpID09PSBNYWpvclBhcnRzT2ZTcGVlY2guV0hXT1JEIHx8XG4gICAgICAgICAgICBnZXRNYWpvclBPUyhub2RlLnRva2VuLlBPUykgPT09IE1ham9yUGFydHNPZlNwZWVjaC5HTFVFKSB7XG4gICAgICAgICAgbG9nKGBSZW1vdmluZyBub2RlIFwiJHtub2RlLm5hbWV9XCJgKTtcbiAgICAgICAgICBub2RlID0gbm9kZS5jaGlsZHJlblswXTtcbiAgICAgICAgICBpZiAobm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsZXQgck5vZGUgPSByZW1vdmVOb2RlKG5vZGUucGFyZW50KTtcbiAgICAgICAgICAgIGlmIChyTm9kZS5oYXNQcm9wZXJ0eShQcm9wZXJ0aWVzLkdST1VQSU5HKSkge1xuICAgICAgICAgICAgICBub2RlLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLkdST1VQSU5HKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyTm9kZS5oYXNQcm9wZXJ0eShQcm9wZXJ0aWVzLk5FR0FURVMpKSB7XG4gICAgICAgICAgICAgIG5vZGUucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuTkVHQVRFUyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEhhbmRsZSBxdWFudGl0aWVzXG4gICAgICBpZiAobm9kZS5oYXNQcm9wZXJ0eShQcm9wZXJ0aWVzLlFVQU5USVRZKSkge1xuICAgICAgICBsb2coXCJIYW5kbGluZyBxdWFudGl0eS4uLlwiKVxuICAgICAgICBpZiAoaXNOdW1lcmljKG5vZGUubmFtZSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ3JlYXRlIGFuIGF0dHJpYnV0ZSBmb3IgdGhlIHF1YW50aXR5IFxuICAgICAgICBsZXQgcXVhbnRpdHlBdHRyaWJ1dGU6IEF0dHJpYnV0ZSA9IHtcbiAgICAgICAgICBpZDogbm9kZS5uYW1lLFxuICAgICAgICAgIGRpc3BsYXlOYW1lOiBub2RlLm5hbWUsXG4gICAgICAgICAgdmFsdWU6IGAke25vZGUubmFtZX1gLFxuICAgICAgICAgIHZhcmlhYmxlOiBgJHtub2RlLm5hbWV9YCxcbiAgICAgICAgICBub2RlOiBub2RlLFxuICAgICAgICAgIHByb2plY3Q6IGZhbHNlLFxuICAgICAgICB9XG4gICAgICAgIG5vZGUuYXR0cmlidXRlID0gcXVhbnRpdHlBdHRyaWJ1dGU7XG4gICAgICAgIG5vZGUucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuQVRUUklCVVRFKTtcbiAgICAgICAgbm9kZS5mb3VuZCA9IHRydWU7XG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGEgbWF5YmVBcmd1bWVudCwgYXR0YWNoIHRoZSBxdWFudGl0eSB0byBpdFxuICAgICAgICBpZiAoY29udGV4dC5tYXliZUFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgbGV0IGFyZ3VtZW50ID0gY29udGV4dC5tYXliZUFyZ3VtZW50cy5zaGlmdCgpO1xuICAgICAgICAgIGxldCBxTm9kZSA9IG5vZGU7XG4gICAgICAgICAgbm9kZSA9IHFOb2RlLmNoaWxkcmVuWzBdO1xuICAgICAgICAgIHJlbW92ZU5vZGUocU5vZGUpO1xuICAgICAgICAgIGFyZ3VtZW50LmFkZENoaWxkKHFOb2RlKTsgXG4gICAgICAgICAgYXJndW1lbnQuZm91bmQgPSB0cnVlO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBIYW5kbGUgZnVuY3Rpb25zXG4gICAgICBpZiAobm9kZS5oYXNQcm9wZXJ0eShQcm9wZXJ0aWVzLkZVTkNUSU9OKSkge1xuICAgICAgICBsb2coXCJIYW5kbGluZyBmdW5jdGlvbi4uLlwiKVxuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIGNvbXBhcmF0aXZlIGZ1bmN0aW9uc1xuICAgICAgICBpZiAobm9kZS5oYXNQcm9wZXJ0eShQcm9wZXJ0aWVzLkNPTVBBUkFUSVZFKSkge1xuICAgICAgICAgIGxldCBhdHRyaWJ1dGUgPSBub2RlLmZ4bi5hdHRyaWJ1dGU7XG4gICAgICAgICAgbGV0IGNvbXBBdHRyVG9rZW4gPSBuZXdUb2tlbihub2RlLmZ4bi5hdHRyaWJ1dGUpO1xuICAgICAgICAgIGNvbXBBdHRyVG9rZW4ucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuSU1QTElDSVQpO1xuICAgICAgICAgIGxldCBjb21wQXR0ck5vZGUgPSBuZXdOb2RlKGNvbXBBdHRyVG9rZW4pO1xuICAgICAgICAgIGNvbXBBdHRyTm9kZS5meG4gPSBub2RlLmZ4bjtcbiAgICAgICAgICAvLyBBZGQgdHdvIGFyZ3VtZW50IG5vZGVzXG4gICAgICAgICAgbGV0IGFyZ3VtZW50VG9rZW5BID0gbmV3VG9rZW4oXCJhXCIpO1xuICAgICAgICAgIGxldCBhcmd1bWVudE5vZGVBID0gbmV3Tm9kZShhcmd1bWVudFRva2VuQSk7XG4gICAgICAgICAgYXJndW1lbnROb2RlQS5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5JTVBMSUNJVCk7XG4gICAgICAgICAgYXJndW1lbnROb2RlQS5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5JTlBVVCk7XG4gICAgICAgICAgbm9kZS5hZGRDaGlsZChhcmd1bWVudE5vZGVBKTtcbiAgICAgICAgICBjb250ZXh0Lm1heWJlQXJndW1lbnRzLnB1c2goYXJndW1lbnROb2RlQSk7XG4gICAgICAgICAgbGV0IGFyZ3VtZW50VG9rZW5CID0gbmV3VG9rZW4oXCJiXCIpO1xuICAgICAgICAgIGxldCBhcmd1bWVudE5vZGVCID0gbmV3Tm9kZShhcmd1bWVudFRva2VuQik7XG4gICAgICAgICAgYXJndW1lbnROb2RlQi5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5JTVBMSUNJVCk7XG4gICAgICAgICAgYXJndW1lbnROb2RlQi5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5JTlBVVCk7XG4gICAgICAgICAgbm9kZS5hZGRDaGlsZChhcmd1bWVudE5vZGVCKTtcbiAgICAgICAgICBjb250ZXh0Lm1heWJlQXJndW1lbnRzLnB1c2goYXJndW1lbnROb2RlQik7XG5cbiAgICAgICAgICAvLyBGaW5kIGEgbm9kZSBmb3IgdGhlIExIUyBvZiB0aGUgY29tYXBhcmlzb25cbiAgICAgICAgICBsZXQgbWF0Y2hlZE5vZGUgPSBwcmV2aW91c2x5TWF0Y2hlZChub2RlKTtcbiAgICAgICAgICBsZXQgY29tcEF0dHJOb2RlMSA9IGNsb25lTm9kZShjb21wQXR0ck5vZGUpO1xuICAgICAgICAgIHJlbGF0aW9uc2hpcCA9IGZpbmRSZWxhdGlvbnNoaXAobWF0Y2hlZE5vZGUsY29tcEF0dHJOb2RlMSxjb250ZXh0KTtcbiAgICAgICAgICBpZiAocmVsYXRpb25zaGlwLnR5cGUgPT09IFJlbGF0aW9uc2hpcFR5cGVzLkRJUkVDVCkge1xuICAgICAgICAgICAgcmVtb3ZlTm9kZShtYXRjaGVkTm9kZSk7XG4gICAgICAgICAgICBtYXRjaGVkTm9kZS5hZGRDaGlsZChjb21wQXR0ck5vZGUxKTtcbiAgICAgICAgICAgIGNvbXBBdHRyTm9kZTEuYXR0cmlidXRlLnByb2plY3QgPSBmYWxzZTtcbiAgICAgICAgICAgIGFyZ3VtZW50Tm9kZUEuYWRkQ2hpbGQobWF0Y2hlZE5vZGUpO1xuICAgICAgICAgICAgYXJndW1lbnROb2RlQS5mb3VuZCA9IHRydWU7XG4gICAgICAgICAgICBjb250ZXh0Lm1heWJlQXJndW1lbnRzLnNoaWZ0KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFB1c2ggdGhlIFJIUyBhdHRyaWJ1dGUgb250byB0aGUgY29udGV4dCBhbmQgY29udGludWUgc2VhcmNoaW5nXG4gICAgICAgICAgY29udGV4dC5tYXliZUF0dHJpYnV0ZXMucHVzaChjb21wQXR0ck5vZGUpO1xuICAgICAgICAgIG5vZGUuZm91bmQgPSB0cnVlO1xuICAgICAgICAvLyBIYW5kbGUgYWdncmVnYXRlc1xuICAgICAgICB9IGVsc2UgaWYgKG5vZGUuaGFzUHJvcGVydHkoUHJvcGVydGllcy5BR0dSRUdBVEUpKSB7XG4gICAgICAgICAgLy8gQWRkIGFuIG91dHB1dCB0b2tlblxuICAgICAgICAgIGxldCBvdXRwdXRUb2tlbiA9IG5ld1Rva2VuKFwib3V0cHV0XCIpO1xuICAgICAgICAgIGxldCBvdXRwdXROb2RlID0gbmV3Tm9kZShvdXRwdXRUb2tlbik7XG4gICAgICAgICAgb3V0cHV0Tm9kZS5mb3VuZCA9IHRydWU7XG4gICAgICAgICAgb3V0cHV0Tm9kZS5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5JTVBMSUNJVCk7XG4gICAgICAgICAgb3V0cHV0Tm9kZS5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5PVVRQVVQpO1xuICAgICAgICAgIGxldCBvdXRwdXRBdHRyaWJ1dGU6IEF0dHJpYnV0ZSA9IHtcbiAgICAgICAgICAgIGlkOiBvdXRwdXROb2RlLm5hbWUsXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogb3V0cHV0Tm9kZS5uYW1lLFxuICAgICAgICAgICAgdmFsdWU6IGAke25vZGUuZnhuLm5hbWV9fCR7b3V0cHV0Tm9kZS5uYW1lfWAsXG4gICAgICAgICAgICB2YXJpYWJsZTogYCR7bm9kZS5meG4ubmFtZX18JHtvdXRwdXROb2RlLm5hbWV9YCxcbiAgICAgICAgICAgIG5vZGU6IG91dHB1dE5vZGUsXG4gICAgICAgICAgICBwcm9qZWN0OiB0cnVlLFxuICAgICAgICAgIH1cbiAgICAgICAgICBvdXRwdXROb2RlLmF0dHJpYnV0ZSA9IG91dHB1dEF0dHJpYnV0ZTsgICAgICAgICAgXG4gICAgICAgICAgbm9kZS5hZGRDaGlsZChvdXRwdXROb2RlKTtcbiAgICAgICAgICAvLyBBZGQgYW4gaW5wdXQgbm9kZVxuICAgICAgICAgIGxldCBhcmd1bWVudFRva2VuID0gbmV3VG9rZW4oXCJpbnB1dFwiKTtcbiAgICAgICAgICBsZXQgYXJndW1lbnROb2RlID0gbmV3Tm9kZShhcmd1bWVudFRva2VuKTtcbiAgICAgICAgICBhcmd1bWVudE5vZGUucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuSU1QTElDSVQpO1xuICAgICAgICAgIGFyZ3VtZW50Tm9kZS5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5JTlBVVCk7XG4gICAgICAgICAgbm9kZS5hZGRDaGlsZChhcmd1bWVudE5vZGUpO1xuICAgICAgICAgIGNvbnRleHQubWF5YmVBcmd1bWVudHMucHVzaChhcmd1bWVudE5vZGUpO1xuICAgICAgICAgIG5vZGUuZm91bmQgPSB0cnVlO1xuICAgICAgICAvLyBIYW5kbGUgY2FsY3VsYXRpb25zXG4gICAgICAgIH0gZWxzZSBpZiAobm9kZS5oYXNQcm9wZXJ0eShQcm9wZXJ0aWVzLkNBTENVTEFURSkpIHtcbiAgICAgICAgICAvLyBDcmVhdGUgYSByZXN1bHQgbm9kZVxuICAgICAgICAgIGxldCByZXN1bHRUb2tlbiA9IG5ld1Rva2VuKG5vZGUuZnhuLmZpZWxkc1swXSk7XG4gICAgICAgICAgbGV0IHJlc3VsdE5vZGUgPSBuZXdOb2RlKHJlc3VsdFRva2VuKTtcbiAgICAgICAgICByZXN1bHROb2RlLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLk9VVFBVVCk7XG4gICAgICAgICAgcmVzdWx0Tm9kZS5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5JTVBMSUNJVCk7XG4gICAgICAgICAgbGV0IHJlc3VsdEF0dHJpYnV0ZTogQXR0cmlidXRlID0ge1xuICAgICAgICAgICAgaWQ6IHJlc3VsdE5vZGUubmFtZSxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiByZXN1bHROb2RlLm5hbWUsXG4gICAgICAgICAgICB2YWx1ZTogYCR7bm9kZS5meG4ubmFtZX18JHtyZXN1bHROb2RlLm5hbWV9YCxcbiAgICAgICAgICAgIHZhcmlhYmxlOiBgJHtub2RlLmZ4bi5uYW1lfXwke3Jlc3VsdE5vZGUubmFtZX1gLFxuICAgICAgICAgICAgbm9kZTogcmVzdWx0Tm9kZSxcbiAgICAgICAgICAgIHByb2plY3Q6IHRydWUsXG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3VsdE5vZGUuYXR0cmlidXRlID0gcmVzdWx0QXR0cmlidXRlOyAgICAgICAgICBcbiAgICAgICAgICBub2RlLmFkZENoaWxkKHJlc3VsdE5vZGUpO1xuICAgICAgICAgIHJlc3VsdE5vZGUuZm91bmQgPSB0cnVlO1xuICAgICAgICAgIC8vIEFkZCB0d28gYXJndW1lbnQgbm9kZXNcbiAgICAgICAgICBsZXQgYXJndW1lbnRUb2tlbkEgPSBuZXdUb2tlbihcImFcIik7XG4gICAgICAgICAgbGV0IGFyZ3VtZW50Tm9kZUEgPSBuZXdOb2RlKGFyZ3VtZW50VG9rZW5BKTtcbiAgICAgICAgICBhcmd1bWVudE5vZGVBLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLklNUExJQ0lUKTtcbiAgICAgICAgICBhcmd1bWVudE5vZGVBLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLklOUFVUKTtcbiAgICAgICAgICBub2RlLmFkZENoaWxkKGFyZ3VtZW50Tm9kZUEpO1xuICAgICAgICAgIGxldCBhcmd1bWVudFRva2VuQiA9IG5ld1Rva2VuKFwiYlwiKTtcbiAgICAgICAgICBsZXQgYXJndW1lbnROb2RlQiA9IG5ld05vZGUoYXJndW1lbnRUb2tlbkIpO1xuICAgICAgICAgIGFyZ3VtZW50Tm9kZUIucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuSU1QTElDSVQpO1xuICAgICAgICAgIGFyZ3VtZW50Tm9kZUIucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuSU5QVVQpO1xuICAgICAgICAgIG5vZGUuYWRkQ2hpbGQoYXJndW1lbnROb2RlQik7XG4gICAgICAgICAgLy8gSWYgd2UgYWxyZWFkeSBmb3VuZCBhIG51bWVyaWNhbCBhdHRyaWJ1dGUsIHJld2lyZSBpdFxuICAgICAgICAgIGxldCBmb3VuZFF1YW50aXR5ID0gZmluZFBhcmVudFdpdGhQcm9wZXJ0eShub2RlLCBQcm9wZXJ0aWVzLlFVQU5USVRZKTtcbiAgICAgICAgICBpZiAoZm91bmRRdWFudGl0eSAhPT0gdW5kZWZpbmVkICYmIGZvdW5kUXVhbnRpdHkuZm91bmQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJlbW92ZU5vZGUoZm91bmRRdWFudGl0eSk7XG4gICAgICAgICAgICBhcmd1bWVudE5vZGVBLmFkZENoaWxkKGZvdW5kUXVhbnRpdHkpO1xuICAgICAgICAgICAgYXJndW1lbnROb2RlQS5mb3VuZCA9IHRydWU7XG4gICAgICAgICAgICBmb3VuZFF1YW50aXR5LmF0dHJpYnV0ZS5wcm9qZWN0ID0gZmFsc2U7XG4gICAgICAgICAgICAvLyBJZiB0aGUgbm9kZSBoYXMgYW4gZW50aXR5LCByZXdpcmUgaXQgYXMgYSBjaGlsZCBvZiB0aGUgZnVuY3Rpb25cbiAgICAgICAgICAgIGlmIChmb3VuZFF1YW50aXR5LmF0dHJpYnV0ZS5lbnRpdHkpIHtcbiAgICAgICAgICAgICAgZm91bmRRdWFudGl0eS5hdHRyaWJ1dGUuZW50aXR5LnByb2plY3QgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29udGV4dC5tYXliZUFyZ3VtZW50cy5wdXNoKGFyZ3VtZW50Tm9kZUEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250ZXh0Lm1heWJlQXJndW1lbnRzLnB1c2goYXJndW1lbnROb2RlQik7XG4gICAgICAgICAgbm9kZS5mb3VuZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAobm9kZS5oYXNQcm9wZXJ0eShQcm9wZXJ0aWVzLkNPTkpVTkNUSU9OKSkge1xuICAgICAgICAgIG5vZGUuZm91bmQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQuZnhucy5wdXNoKG5vZGUuZnhuKTtcbiAgICAgICAgbG9nKHRyZWUudG9TdHJpbmcoKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBIYW5kbGUgcHJvbm91bnNcbiAgICAgIGlmIChub2RlLmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuUFJPTk9VTikpIHtcbiAgICAgICAgbG9nKFwiTWF0Y2hpbmcgcHJvbm91biB3aXRoIHByZXZpb3VzIGVudGl0eS4uLlwiKTtcbiAgICAgICAgbGV0IG1hdGNoZWROb2RlID0gcHJldmlvdXNseU1hdGNoZWQobm9kZSwgdHJ1ZSk7XG4gICAgICAgIGlmIChtYXRjaGVkTm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKG1hdGNoZWROb2RlLmNvbGxlY3Rpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbm9kZS5jb2xsZWN0aW9uID0gbWF0Y2hlZE5vZGUuY29sbGVjdGlvbjtcbiAgICAgICAgICAgIG5vZGUucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuQ09MTEVDVElPTik7XG4gICAgICAgICAgICBub2RlLmZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIGxvZyhgRm91bmQ6ICR7bWF0Y2hlZE5vZGUubmFtZX1gKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2hlZE5vZGUuZW50aXR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG5vZGUuZW50aXR5ID0gbWF0Y2hlZE5vZGUuZW50aXR5XG4gICAgICAgICAgICBub2RlLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLkVOVElUWSk7XG4gICAgICAgICAgICBub2RlLmZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIGxvZyhgRm91bmQ6ICR7bWF0Y2hlZE5vZGUubmFtZX1gKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBGaW5kIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiBwYXJlbnQgYW5kIGNoaWxkIG5vZGVzXG4gICAgICAvLyBQcmV2aW91c2x5IG1hdGNoZWQgbm9kZVxuICAgICAgbGV0IG1hdGNoZWROb2RlID0gcHJldmlvdXNseU1hdGNoZWQobm9kZSk7XG4gICAgICBpZiAobWF0Y2hlZE5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBsb2coYE1hdGNoIGluIGNvbnRleHQgb2YgcHJldmlvdXNseSBtYXRjaGVkIG5vZGUgXCIke21hdGNoZWROb2RlLm5hbWV9XCJgKTtcbiAgICAgICAgLy8gRmluZCByZWxhdGlvbnNoaXAgYmV0d2VlbiBwcmV2aW91c2x5IG1hdGNoZWQgbm9kZSBhbmQgdGhpcyBvbmVcbiAgICAgICAgaWYgKG1hdGNoZWROb2RlLmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuUE9TU0VTU0lWRSkpIHtcbiAgICAgICAgICBpZiAobWF0Y2hlZE5vZGUuaGFzUHJvcGVydHkoUHJvcGVydGllcy5FTlRJVFkpKSB7XG4gICAgICAgICAgICBsZXQgZm91bmQgPSBmaW5kRW50aXR5QXR0cmlidXRlKG5vZGUsbWF0Y2hlZE5vZGUuZW50aXR5LGNvbnRleHQpO1xuICAgICAgICAgICAgaWYgKGZvdW5kID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIHJlbGF0aW9uc2hpcCA9IHt0eXBlOiBSZWxhdGlvbnNoaXBUeXBlcy5ESVJFQ1R9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWxhdGlvbnNoaXAgPSBmaW5kUmVsYXRpb25zaGlwKG1hdGNoZWROb2RlLCBub2RlLCBjb250ZXh0KTsgIFxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmaW5kQ29sbGVjdGlvbk9yRW50aXR5KG5vZGUsIGNvbnRleHQpO1xuICAgICAgICAgIHJlbGF0aW9uc2hpcCA9IGZpbmRSZWxhdGlvbnNoaXAobWF0Y2hlZE5vZGUsIG5vZGUsIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAvLyBOb3RoaW5nIGhhcyBiZWVuIG1hdGNoZWQsIHRyeSB0byBtYXRjaCBhZ2FpbnN0IGFueSBtYXliZSBhdHRyaWJ1dGVzXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaW5kQ29sbGVjdGlvbk9yRW50aXR5KG5vZGUsIGNvbnRleHQpO1xuICAgICAgICBmb3IgKGxldCBtYXliZUF0dHIgb2YgY29udGV4dC5tYXliZUF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICBsb2coXCJNYXRjaGluZyBwcmV2aW91c2x5IHVubWF0Y2hlZCBub2Rlcy4uLlwiKTtcbiAgICAgICAgICByZWxhdGlvbnNoaXAgPSBmaW5kUmVsYXRpb25zaGlwKG1heWJlQXR0ciwgbm9kZSwgY29udGV4dCk7XG4gICAgICAgICAgLy8gUmV3aXJlIGZvdW5kIGF0dHJpYnV0ZXNcbiAgICAgICAgICBpZiAobWF5YmVBdHRyLmZvdW5kID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZW1vdmVOb2RlKG1heWJlQXR0cik7XG4gICAgICAgICAgICAvLyBJZiB0aGUgYXR0ciB3YXMgYW4gaW1wbGljaXQgYXR0cmlidXRlIGRlcml2ZWQgZnJvbSBhIGZ1bmN0aW9uLFxuICAgICAgICAgICAgLy8gbW92ZSB0aGUgbm9kZSB0byBiZSBhIGNoaWxkIG9mIHRoZSBmdW5jdGlvbiBhbmQgcmVyb290IHRoZSByZXN0IG9mIHRoZSBxdWVyeVxuICAgICAgICAgICAgaWYgKG1heWJlQXR0ci5oYXNQcm9wZXJ0eShQcm9wZXJ0aWVzLklNUExJQ0lUKSkge1xuICAgICAgICAgICAgICBtYXliZUF0dHIuYXR0cmlidXRlLnByb2plY3QgPSBmYWxzZTtcbiAgICAgICAgICAgICAgbGV0IHRoaXNOb2RlID0gbm9kZTtcbiAgICAgICAgICAgICAgbm9kZSA9IG5vZGUuY2hpbGRyZW5bMF07XG4gICAgICAgICAgICAgIGlmIChub2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXJvb3Qobm9kZSxmaW5kUGFyZW50V2l0aFByb3BlcnR5KG5vZGUsUHJvcGVydGllcy5ST09UKSk7ICAgXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGhpc05vZGUuYWRkQ2hpbGQobWF5YmVBdHRyKTtcbiAgICAgICAgICAgICAgaWYgKGNvbnRleHQubWF5YmVBcmd1bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGxldCBmeG5BcmdOb2RlID0gY29udGV4dC5tYXliZUFyZ3VtZW50cy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIHJlcm9vdCh0aGlzTm9kZSwgZnhuQXJnTm9kZSk7XG4gICAgICAgICAgICAgICAgZnhuQXJnTm9kZS5mb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29udGludWUgbG9vcDA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG5vZGUuYWRkQ2hpbGQobWF5YmVBdHRyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIFJld2lyZSBub2RlIHRvIHJlZmxlY3QgYW4gYXJndW1lbnQgb2YgYSBmdW5jdGlvblxuICAgICAgaWYgKG5vZGUuaGFzUHJvcGVydHkoUHJvcGVydGllcy5BVFRSSUJVVEUpICYmIGNvbnRleHQubWF5YmVBcmd1bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGxldCBhcmd1bWVudCA9IGNvbnRleHQubWF5YmVBcmd1bWVudHMuc2hpZnQoKTtcbiAgICAgICAgICBsZXQgcU5vZGUgPSBub2RlO1xuICAgICAgICAgIG5vZGUgPSBxTm9kZS5jaGlsZHJlblswXTtcbiAgICAgICAgICByZW1vdmVOb2RlKHFOb2RlKTtcbiAgICAgICAgICBhcmd1bWVudC5hZGRDaGlsZChxTm9kZSk7IFxuICAgICAgICAgIGFyZ3VtZW50LmZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICBpZiAocU5vZGUuYXR0cmlidXRlLmVudGl0eSkge1xuICAgICAgICAgICAgcU5vZGUuYXR0cmlidXRlLmVudGl0eS5wcm9qZWN0ID0gZmFsc2U7ICBcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWU7ICBcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmV3aXJlIG5vZGVzIHRvIHJlZmxlY3QgZm91bmQgcmVsYXRpb25zaGlwXG4gICAgICBpZiAocmVsYXRpb25zaGlwICE9PSB1bmRlZmluZWQgJiYgcmVsYXRpb25zaGlwLnR5cGUgIT09IFJlbGF0aW9uc2hpcFR5cGVzLk5PTkUpIHtcbiAgICAgICAgLy8gRm9yIGEgZGlyZWN0IHJlbGF0aW9uc2hpcCwgbW92ZSB0aGUgZm91bmQgbm9kZSB0byB0aGUgZW50aXR5L2NvbGxlY3Rpb25cbiAgICAgICAgaWYgKHJlbGF0aW9uc2hpcC50eXBlID09PSBSZWxhdGlvbnNoaXBUeXBlcy5ESVJFQ1QpIHtcbiAgICAgICAgICBpZiAobm9kZS5hdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgIGxldCB0YXJnZXROb2RlOiBOb2RlO1xuICAgICAgICAgICAgaWYgKG5vZGUuYXR0cmlidXRlLmNvbGxlY3Rpb24gJiYgbm9kZS5wYXJlbnQgIT09IG5vZGUuYXR0cmlidXRlLmNvbGxlY3Rpb24ubm9kZSkge1xuICAgICAgICAgICAgICB0YXJnZXROb2RlID0gbm9kZS5hdHRyaWJ1dGUuY29sbGVjdGlvbi5ub2RlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChub2RlLmF0dHJpYnV0ZS5lbnRpdHkgJiYgbm9kZS5wYXJlbnQgIT09IG5vZGUuYXR0cmlidXRlLmVudGl0eS5ub2RlKSB7XG4gICAgICAgICAgICAgIHRhcmdldE5vZGUgPSBub2RlLmF0dHJpYnV0ZS5lbnRpdHkubm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJnZXROb2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgbGV0IHJOb2RlID0gbm9kZTtcbiAgICAgICAgICAgICAgbm9kZSA9IG5vZGUuY2hpbGRyZW5bMF07XG4gICAgICAgICAgICAgIHJlbW92ZU5vZGUock5vZGUpO1xuICAgICAgICAgICAgICB0YXJnZXROb2RlLmFkZENoaWxkKHJOb2RlKTtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAvLyBGb3IgYSBvbmUtaG9wIHJlbGF0aW9uc2hpcCwgd2UgbmVlZCB0byBpbnNlcnQgdGhlIGxpbmtpbmcgbm9kZVxuICAgICAgICB9IGVsc2UgaWYgKHJlbGF0aW9uc2hpcC50eXBlID09PSBSZWxhdGlvbnNoaXBUeXBlcy5PTkVIT1ApIHtcbiAgICAgICAgICBsb2cocmVsYXRpb25zaGlwKVxuICAgICAgICAgIGlmIChyZWxhdGlvbnNoaXAubm9kZXNbMF0uY29sbGVjdGlvbikge1xuICAgICAgICAgICAgbGV0IGNvbGxlY3Rpb24gPSByZWxhdGlvbnNoaXAubm9kZXNbMF0uY29sbGVjdGlvbjtcbiAgICAgICAgICAgIGxldCBsaW5rSUQgPSByZWxhdGlvbnNoaXAubGlua3NbMF07XG4gICAgICAgICAgICBsZXQgbkNvbGxlY3Rpb24gPSBmaW5kRXZlQ29sbGVjdGlvbihsaW5rSUQpO1xuICAgICAgICAgICAgaWYgKG5Db2xsZWN0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGxpbmsgbm9kZVxuICAgICAgICAgICAgICBsZXQgdG9rZW4gPSBuZXdUb2tlbihuQ29sbGVjdGlvbi5kaXNwbGF5TmFtZSk7XG4gICAgICAgICAgICAgIGxldCBuTm9kZSA9IG5ld05vZGUodG9rZW4pO1xuICAgICAgICAgICAgICBpbnNlcnRBZnRlck5vZGUobk5vZGUsY29sbGVjdGlvbi5ub2RlKTtcbiAgICAgICAgICAgICAgbk5vZGUuY29sbGVjdGlvbiA9IG5Db2xsZWN0aW9uO1xuICAgICAgICAgICAgICBuQ29sbGVjdGlvbi5ub2RlID0gbk5vZGU7XG4gICAgICAgICAgICAgIGNvbnRleHQuY29sbGVjdGlvbnMucHVzaChuQ29sbGVjdGlvbik7XG4gICAgICAgICAgICAgIC8vIEJ1aWxkIGEgY29sbGVjdGlvbiBhdHRyaWJ1dGUgdG8gbGluayB3aXRoIHBhcmVudFxuICAgICAgICAgICAgICBsZXQgY29sbGVjdGlvbkF0dHJpYnV0ZTogQXR0cmlidXRlID0ge1xuICAgICAgICAgICAgICAgICAgaWQ6IGNvbGxlY3Rpb24uZGlzcGxheU5hbWUsXG4gICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogY29sbGVjdGlvbi5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb246IG5Db2xsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgdmFsdWU6IGAke2NvbGxlY3Rpb24uZGlzcGxheU5hbWV9YCxcbiAgICAgICAgICAgICAgICAgIHZhcmlhYmxlOiBgJHtjb2xsZWN0aW9uLmRpc3BsYXlOYW1lfWAsXG4gICAgICAgICAgICAgICAgICBub2RlOiBuTm9kZSxcbiAgICAgICAgICAgICAgICAgIHByb2plY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBuTm9kZS5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5JTVBMSUNJVCk7XG4gICAgICAgICAgICAgIG5Ob2RlLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLkFUVFJJQlVURSk7XG4gICAgICAgICAgICAgIG5Ob2RlLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLkNPTExFQ1RJT04pO1xuICAgICAgICAgICAgICBuTm9kZS5hdHRyaWJ1dGUgPSBjb2xsZWN0aW9uQXR0cmlidXRlO1xuICAgICAgICAgICAgICBjb250ZXh0LmF0dHJpYnV0ZXMucHVzaChjb2xsZWN0aW9uQXR0cmlidXRlKTtcbiAgICAgICAgICAgICAgbk5vZGUuZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICBuTm9kZS5jaGlsZHJlblswXS5hdHRyaWJ1dGUuY29sbGVjdGlvbiA9IG5Db2xsZWN0aW9uO1xuICAgICAgICAgICAgfSAgICAgXG4gICAgICAgICAgfSBlbHNlIGlmIChyZWxhdGlvbnNoaXAubm9kZXNbMF0uZW50aXR5KSB7XG4gICAgICAgICAgICBsZXQgZW50aXR5ID0gcmVsYXRpb25zaGlwLm5vZGVzWzBdLmVudGl0eTtcbiAgICAgICAgICAgIGxldCBsaW5rSUQgPSByZWxhdGlvbnNoaXAubGlua3NbMF07XG4gICAgICAgICAgICBsZXQgbkNvbGxlY3Rpb24gPSBmaW5kRXZlQ29sbGVjdGlvbihsaW5rSUQpO1xuICAgICAgICAgICAgaWYgKG5Db2xsZWN0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGxpbmsgbm9kZVxuICAgICAgICAgICAgICBsZXQgdG9rZW4gPSBuZXdUb2tlbihuQ29sbGVjdGlvbi5kaXNwbGF5TmFtZSk7XG4gICAgICAgICAgICAgIGxldCBuTm9kZSA9IG5ld05vZGUodG9rZW4pO1xuICAgICAgICAgICAgICBpbnNlcnRBZnRlck5vZGUobk5vZGUsZW50aXR5Lm5vZGUpO1xuICAgICAgICAgICAgICBuTm9kZS5jb2xsZWN0aW9uID0gbkNvbGxlY3Rpb247XG4gICAgICAgICAgICAgIG5Db2xsZWN0aW9uLm5vZGUgPSBuTm9kZTtcbiAgICAgICAgICAgICAgbk5vZGUucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuSU1QTElDSVQpO1xuICAgICAgICAgICAgICBuTm9kZS5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5BVFRSSUJVVEUpO1xuICAgICAgICAgICAgICBuTm9kZS5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5DT0xMRUNUSU9OKTtcbiAgICAgICAgICAgICAgbk5vZGUuZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICBjb250ZXh0LmNvbGxlY3Rpb25zLnB1c2gobkNvbGxlY3Rpb24pO1xuICAgICAgICAgICAgICAvLyBCdWlsZCBhIGNvbGxlY3Rpb24gYXR0cmlidXRlIHRvIGxpbmsgd2l0aCBwYXJlbnRcbiAgICAgICAgICAgICAgbGV0IGNvbGxlY3Rpb25BdHRyaWJ1dGU6IEF0dHJpYnV0ZSA9IHtcbiAgICAgICAgICAgICAgICAgIGlkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogbkNvbGxlY3Rpb24uZGlzcGxheU5hbWUsXG4gICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uOiBuQ29sbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBgJHtlbnRpdHkuaWR9YCxcbiAgICAgICAgICAgICAgICAgIHZhcmlhYmxlOiBgJHtlbnRpdHkuZGlzcGxheU5hbWV9YCxcbiAgICAgICAgICAgICAgICAgIG5vZGU6IG5Ob2RlLFxuICAgICAgICAgICAgICAgICAgcHJvamVjdDogZmFsc2UsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIG5Ob2RlLmF0dHJpYnV0ZSA9IGNvbGxlY3Rpb25BdHRyaWJ1dGU7XG4gICAgICAgICAgICAgIGNvbnRleHQuYXR0cmlidXRlcy5wdXNoKGNvbGxlY3Rpb25BdHRyaWJ1dGUpO1xuICAgICAgICAgICAgICBuTm9kZS5jaGlsZHJlblswXS5hdHRyaWJ1dGUuY29sbGVjdGlvbiA9IG5Db2xsZWN0aW9uO1xuICAgICAgICAgICAgfSAgICAgXG4gICAgICAgICAgfVxuICAgICAgICAvLyBGb3IgYW4gaW50ZXJzZWN0aW9uLCBzZXQgdGhlIGNvcnJlY3QgdmFyaWFibGVzIG9uIGNvbGxlY3Rpb25zXG4gICAgICAgIH0gZWxzZSBpZiAocmVsYXRpb25zaGlwLnR5cGUgPT09IFJlbGF0aW9uc2hpcFR5cGVzLklOVEVSU0VDVElPTikge1xuICAgICAgICAgIGxldCBbbm9kZUEsIG5vZGVCXSA9IHJlbGF0aW9uc2hpcC5ub2RlcztcbiAgICAgICAgICBub2RlQS5jb2xsZWN0aW9uLnZhcmlhYmxlID0gbm9kZUIuY29sbGVjdGlvbi52YXJpYWJsZTtcbiAgICAgICAgICBub2RlQi5jb2xsZWN0aW9uLnByb2plY3QgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBJZiBubyBjb2xsZWN0aW9uIG9yIGVudGl0eSBoYXMgYmVlbiBmb3VuZCwgZG8gc29tZSB3b3JrIGRlcGVuZGluZyBvbiB0aGUgbm9kZVxuICAgICAgaWYgKG5vZGUuZm91bmQgPT09IGZhbHNlICYmICFub2RlLmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuSU1QTElDSVQpKSB7XG4gICAgICAgIGxvZyhcIk5vdCBmb3VuZFwiKTtcbiAgICAgICAgbG9nKGNvbnRleHQpXG4gICAgICAgIGNvbnRleHQubWF5YmVBdHRyaWJ1dGVzLnB1c2gobm9kZSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgXG4gICAgLy8gUmVzb2x2ZSBlbnRpdGllcyBmb3IgdGhlIGNoaWxkcmVuXG4gICAgaWYgKG5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgbm9kZS5jaGlsZHJlbi5tYXAoKGNoaWxkKSA9PiByZXNvbHZlRW50aXRpZXMoY2hpbGQsY29udGV4dCkpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY29udGV4dDtcbiAgfVxuXG4gIGxvZyh0cmVlLnRvU3RyaW5nKCkpO1xuICBsb2coXCJSZXNvbHZpbmcgZW50aXRpZXMuLi5cIik7XG4gIGxldCBjb250ZXh0ID0gbmV3Q29udGV4dCgpO1xuICByZXNvbHZlRW50aXRpZXModHJlZSxjb250ZXh0KTtcbiAgbG9nKFwiRW50aXRpZXMgcmVzb2x2ZWQhXCIpO1xuXG4gIFxuICAvLyBSZXdpcmUgZ3JvdXBpbmdzIGFuZCBhZ2dyZWdhdGVzXG4gIC8vIEBUT0RPIERvIHRoaXMgaW4gYSByZXdpcmUgc3RlcFxuICBsZXQgYWdncmVnYXRlID0gZmluZENoaWxkV2l0aFByb3BlcnR5KHRyZWUsIFByb3BlcnRpZXMuQUdHUkVHQVRFKTtcbiAgaWYgKGFnZ3JlZ2F0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgbGV0IGdyb3VwaW5nID0gZmluZENoaWxkV2l0aFByb3BlcnR5KGFnZ3JlZ2F0ZSwgUHJvcGVydGllcy5HUk9VUElORyk7XG4gICAgICBpZiAoZ3JvdXBpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmVtb3ZlTm9kZShncm91cGluZyk7XG4gICAgICBpbnNlcnRBZnRlck5vZGUoZ3JvdXBpbmcsYWdncmVnYXRlLnBhcmVudCk7XG4gICAgfSAgXG4gIH1cbiAgXG4gIC8vIFNvcnQgY2hpbGRyZW4gdG8gcHJlc2VydmUgYXJndW1lbnQgb3JkZXIgaW4gZnVuY3Rpb25zXG4gIGZ1bmN0aW9uIHNvcnRDaGlsZHJlbihub2RlOiBOb2RlKTogdm9pZCB7XG4gICAgbm9kZS5jaGlsZHJlbi5zb3J0KChhLGIpID0+IGEuaXggLSBiLml4KTtcbiAgICBub2RlLmNoaWxkcmVuLm1hcChzb3J0Q2hpbGRyZW4pO1xuICB9XG4gIHNvcnRDaGlsZHJlbih0cmVlKTtcbiAgXG4gIC8vIE1hcmsgcm9vdCBhcyBmb3VuZFxuICB0cmVlLmZvdW5kID0gdHJ1ZTtcbiAgbG9nKHRyZWUudG9TdHJpbmcoKSk7XG4gIHJldHVybiB7dHJlZTogdHJlZSwgY29udGV4dDogY29udGV4dH07XG59XG5cbi8vIEVBViBGdW5jdGlvbnNcblxuaW50ZXJmYWNlIEVudGl0eSB7XG4gIGlkOiBzdHJpbmcsXG4gIGRpc3BsYXlOYW1lOiBzdHJpbmcsXG4gIGNvbnRlbnQ6IHN0cmluZyxcbiAgdmFyaWFibGU6IHN0cmluZyxcbiAgZW50aXR5QXR0cmlidXRlOiBib29sZWFuLFxuICBub2RlPzogTm9kZSxcbiAgcHJvamVjdDogYm9vbGVhbixcbn1cblxuZnVuY3Rpb24gY2xvbmVFbnRpdHkoZW50aXR5OiBFbnRpdHkpOiBFbnRpdHkge1xuICBsZXQgY2xvbmU6IEVudGl0eSA9IHtcbiAgICBpZDogZW50aXR5LmlkLFxuICAgIGRpc3BsYXlOYW1lOiBlbnRpdHkuZGlzcGxheU5hbWUsXG4gICAgY29udGVudDogZW50aXR5LmNvbnRlbnQsXG4gICAgbm9kZTogZW50aXR5Lm5vZGUsXG4gICAgZW50aXR5QXR0cmlidXRlOiBlbnRpdHkuZW50aXR5QXR0cmlidXRlLFxuICAgIHZhcmlhYmxlOiBlbnRpdHkudmFyaWFibGUsXG4gICAgcHJvamVjdDogZW50aXR5LnByb2plY3QsXG4gIH1cbiAgcmV0dXJuIGNsb25lO1xufVxuXG5pbnRlcmZhY2UgQ29sbGVjdGlvbiB7XG4gIGlkOiBzdHJpbmcsXG4gIGRpc3BsYXlOYW1lOiBzdHJpbmcsXG4gIGNvdW50OiBudW1iZXIsXG4gIG5vZGU/OiBOb2RlLFxuICB2YXJpYWJsZTogc3RyaW5nLFxuICBwcm9qZWN0OiBib29sZWFuLFxufVxuXG5mdW5jdGlvbiBjbG9uZUNvbGxlY3Rpb24oY29sbGVjdGlvbjogQ29sbGVjdGlvbik6IENvbGxlY3Rpb24ge1xuICBsZXQgY2xvbmU6IENvbGxlY3Rpb24gPSB7XG4gICAgaWQ6IGNvbGxlY3Rpb24uaWQsXG4gICAgZGlzcGxheU5hbWU6IGNvbGxlY3Rpb24uZGlzcGxheU5hbWUsXG4gICAgY291bnQ6IGNvbGxlY3Rpb24uY291bnQsXG4gICAgbm9kZTogY29sbGVjdGlvbi5ub2RlLFxuICAgIHZhcmlhYmxlOiBjb2xsZWN0aW9uLnZhcmlhYmxlLFxuICAgIHByb2plY3Q6IGNvbGxlY3Rpb24ucHJvamVjdCxcbiAgfVxuICByZXR1cm4gY2xvbmU7XG59XG5cbmludGVyZmFjZSBBdHRyaWJ1dGUge1xuICBpZDogc3RyaW5nLFxuICBkaXNwbGF5TmFtZTogc3RyaW5nLFxuICBlbnRpdHk/OiBFbnRpdHksXG4gIGNvbGxlY3Rpb24/OiBDb2xsZWN0aW9uLFxuICB2YWx1ZTogc3RyaW5nIHwgbnVtYmVyXG4gIHZhcmlhYmxlOiBzdHJpbmcsXG4gIG5vZGU/OiBOb2RlLFxuICBwcm9qZWN0OiBib29sZWFuLFxufVxuXG4vLyBSZXR1cm5zIHRoZSBlbnRpdHkgd2l0aCB0aGUgZ2l2ZW4gZGlzcGxheSBuYW1lLlxuLy8gSWYgdGhlIGVudGl0eSBpcyBub3QgZm91bmQsIHJldHVybnMgdW5kZWZpbmVkXG4vLyBUd28gZXJyb3IgbW9kZXMgaGVyZTogXG4vLyAxKSB0aGUgbmFtZSBpcyBub3QgZm91bmQgaW4gXCJkaXNwbGF5IG5hbWVcIlxuLy8gMikgdGhlIG5hbWUgaXMgZm91bmQgaW4gXCJkaXNwbGF5IG5hbWVcIiBidXQgbm90IGZvdW5kIGluIFwiZW50aXR5XCJcbi8vIGNhbiAyKSBldmVyIGhhcHBlbj9cbi8vIFJldHVybnMgdGhlIGNvbGxlY3Rpb24gd2l0aCB0aGUgZ2l2ZW4gZGlzcGxheSBuYW1lLlxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRFdmVFbnRpdHkoc2VhcmNoOiBzdHJpbmcpOiBFbnRpdHkge1xuICBsb2coXCJTZWFyY2hpbmcgZm9yIGVudGl0eTogXCIgKyBzZWFyY2gpO1xuICBsZXQgZm91bmRFbnRpdHk7XG4gIGxldCBuYW1lOiBzdHJpbmc7XG4gIC8vIFRyeSB0byBmaW5kIGJ5IGRpc3BsYXkgbmFtZSBmaXJzdFxuICBsZXQgZGlzcGxheSA9IGV2ZS5maW5kT25lKFwiZGlzcGxheSBuYW1lXCIseyBuYW1lOiBzZWFyY2ggfSk7XG4gIGlmIChkaXNwbGF5ICE9PSB1bmRlZmluZWQpIHtcbiAgICBmb3VuZEVudGl0eSA9IGV2ZS5maW5kT25lKFwiZW50aXR5XCIsIHsgZW50aXR5OiBkaXNwbGF5LmlkIH0pO1xuICAgIG5hbWUgPSBzZWFyY2g7XG4gIC8vIElmIHdlIGRpZG4ndCBmaW5kIGl0IHRoYXQgd2F5LCB0cnkgYWdhaW4gYnkgSURcbiAgfSBlbHNlIHtcbiAgICBmb3VuZEVudGl0eSA9IGV2ZS5maW5kT25lKFwiZW50aXR5XCIsIHsgZW50aXR5OiBzZWFyY2ggfSk7XG4gIH1cbiAgLy8gQnVpbGQgdGhlIGVudGl0eVxuICBpZiAoZm91bmRFbnRpdHkgIT09IHVuZGVmaW5lZCkge1xuICAgIGlmIChuYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGRpc3BsYXkgPSBldmUuZmluZE9uZShcImRpc3BsYXkgbmFtZVwiLHsgaWQ6IHNlYXJjaCB9KTtcbiAgICAgIG5hbWUgPSBkaXNwbGF5Lm5hbWU7ICBcbiAgICB9XG4gICAgbGV0IGVudGl0eTogRW50aXR5ID0ge1xuICAgICAgaWQ6IGZvdW5kRW50aXR5LmVudGl0eSxcbiAgICAgIGRpc3BsYXlOYW1lOiBuYW1lLFxuICAgICAgY29udGVudDogZm91bmRFbnRpdHkuY29udGVudCxcbiAgICAgIHZhcmlhYmxlOiBmb3VuZEVudGl0eS5lbnRpdHksXG4gICAgICBlbnRpdHlBdHRyaWJ1dGU6IGZhbHNlLFxuICAgICAgcHJvamVjdDogdHJ1ZSxcbiAgICB9ICAgIFxuICAgIGxvZyhcIiBGb3VuZDogXCIgKyBuYW1lKTtcbiAgICByZXR1cm4gZW50aXR5O1xuICB9IGVsc2Uge1xuICAgIGxvZyhcIiBOb3QgZm91bmQ6IFwiICsgc2VhcmNoKTtcbiAgICByZXR1cm4gdW5kZWZpbmVkOyAgXG4gIH1cbn1cbi8vIFJldHVybnMgdGhlIGNvbGxlY3Rpb24gd2l0aCB0aGUgZ2l2ZW4gZGlzcGxheSBuYW1lLlxuZnVuY3Rpb24gZmluZEV2ZUNvbGxlY3Rpb24oc2VhcmNoOiBzdHJpbmcpOiBDb2xsZWN0aW9uIHtcbiAgbG9nKFwiU2VhcmNoaW5nIGZvciBjb2xsZWN0aW9uOiBcIiArIHNlYXJjaCk7XG4gIGxldCBmb3VuZENvbGxlY3Rpb247XG4gIGxldCBuYW1lOiBzdHJpbmc7XG4gIC8vIFRyeSB0byBmaW5kIGJ5IGRpc3BsYXkgbmFtZSBmaXJzdFxuICBsZXQgZGlzcGxheSA9IGV2ZS5maW5kT25lKFwiZGlzcGxheSBuYW1lXCIseyBuYW1lOiBzZWFyY2ggfSk7XG4gIGlmIChkaXNwbGF5ICE9PSB1bmRlZmluZWQpIHtcbiAgICBmb3VuZENvbGxlY3Rpb24gPSBldmUuZmluZE9uZShcImNvbGxlY3Rpb25cIiwgeyBjb2xsZWN0aW9uOiBkaXNwbGF5LmlkIH0pO1xuICAgIG5hbWUgPSBzZWFyY2g7XG4gIC8vIElmIHdlIGRpZG4ndCBmaW5kIGl0IHRoYXQgd2F5LCB0cnkgYWdhaW4gYnkgSURcbiAgfSBlbHNlIHtcbiAgICBmb3VuZENvbGxlY3Rpb24gPSBldmUuZmluZE9uZShcImNvbGxlY3Rpb25cIiwgeyBjb2xsZWN0aW9uOiBzZWFyY2ggfSk7XG4gIH1cbiAgLy8gQnVpbGQgdGhlIGNvbGxlY3Rpb25cbiAgaWYgKGZvdW5kQ29sbGVjdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKG5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZGlzcGxheSA9IGV2ZS5maW5kT25lKFwiZGlzcGxheSBuYW1lXCIseyBpZDogc2VhcmNoIH0pO1xuICAgICAgbmFtZSA9IGRpc3BsYXkubmFtZTsgIFxuICAgIH1cbiAgICBsZXQgY29sbGVjdGlvbjogQ29sbGVjdGlvbiA9IHtcbiAgICAgIGlkOiBmb3VuZENvbGxlY3Rpb24uY29sbGVjdGlvbixcbiAgICAgIGRpc3BsYXlOYW1lOiBuYW1lLFxuICAgICAgY291bnQ6IGZvdW5kQ29sbGVjdGlvbi5jb3VudCxcbiAgICAgIHZhcmlhYmxlOiBuYW1lLFxuICAgICAgcHJvamVjdDogdHJ1ZSxcbiAgICB9XG4gICAgbG9nKFwiIEZvdW5kOiBcIiArIG5hbWUpO1xuICAgIHJldHVybiBjb2xsZWN0aW9uO1xuICB9IGVsc2Uge1xuICAgIGxvZyhcIiBOb3QgZm91bmQ6IFwiICsgc2VhcmNoKTtcbiAgICByZXR1cm4gdW5kZWZpbmVkOyAgXG4gIH1cbn1cblxuLy8gUmV0dXJucyB0aGUgYXR0cmlidXRlIHdpdGggdGhlIGdpdmVuIGRpc3BsYXkgbmFtZSBhdHRhY2hlZCB0byB0aGUgZ2l2ZW4gZW50aXR5XG4vLyBJZiB0aGUgZW50aXR5IGRvZXMgbm90IGhhdmUgdGhhdCBhdHRyaWJ1dGUsIG9yIHRoZSBlbnRpdHkgZG9lcyBub3QgZXhpc3QsIHJldHVybnMgdW5kZWZpbmVkXG5mdW5jdGlvbiBmaW5kRXZlQXR0cmlidXRlKG5hbWU6IHN0cmluZywgZW50aXR5OiBFbnRpdHkpOiBBdHRyaWJ1dGUge1xuICBsb2coXCJTZWFyY2hpbmcgZm9yIGF0dHJpYnV0ZTogXCIgKyBuYW1lKTtcbiAgbG9nKFwiIEVudGl0eTogXCIgKyBlbnRpdHkuZGlzcGxheU5hbWUpO1xuICBsZXQgZm91bmRBdHRyaWJ1dGUgPSBldmUuZmluZE9uZShcImVudGl0eSBlYXZzXCIsIHsgZW50aXR5OiBlbnRpdHkuaWQsIGF0dHJpYnV0ZTogbmFtZSB9KTtcbiAgaWYgKGZvdW5kQXR0cmlidXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICBsZXQgYXR0cmlidXRlOiBBdHRyaWJ1dGUgPSB7XG4gICAgICBpZDogZm91bmRBdHRyaWJ1dGUuYXR0cmlidXRlLFxuICAgICAgZGlzcGxheU5hbWU6IG5hbWUsXG4gICAgICBlbnRpdHk6IGVudGl0eSxcbiAgICAgIHZhbHVlOiBmb3VuZEF0dHJpYnV0ZS52YWx1ZSxcbiAgICAgIHZhcmlhYmxlOiBgJHtlbnRpdHkuZGlzcGxheU5hbWV9fCR7bmFtZX1gLnJlcGxhY2UoLyAvZywnJyksXG4gICAgICBwcm9qZWN0OiB0cnVlLFxuICAgIH1cbiAgICBsb2coYCBGb3VuZDogJHtuYW1lfSAke2F0dHJpYnV0ZS52YXJpYWJsZX0gPT4gJHthdHRyaWJ1dGUudmFsdWV9YCk7XG4gICAgbG9nKGF0dHJpYnV0ZSk7XG4gICAgcmV0dXJuIGF0dHJpYnV0ZTtcbiAgfVxuICBsb2coXCIgTm90IGZvdW5kOiBcIiArIG5hbWUpO1xuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5lbnVtIFJlbGF0aW9uc2hpcFR5cGVzIHtcbiAgTk9ORSxcbiAgRElSRUNULFxuICBPTkVIT1AsXG4gIFRXT0hPUCxcbiAgSU5URVJTRUNUSU9OLFxufVxuXG5pbnRlcmZhY2UgUmVsYXRpb25zaGlwIHtcbiAgbGlua3M/OiBBcnJheTxzdHJpbmc+LFxuICB0eXBlOiBSZWxhdGlvbnNoaXBUeXBlcyxcbiAgbm9kZXM/OiBBcnJheTxOb2RlPixcbn1cblxuZnVuY3Rpb24gZmluZFJlbGF0aW9uc2hpcChub2RlQTogTm9kZSwgbm9kZUI6IE5vZGUsIGNvbnRleHQ6IENvbnRleHQpOiBSZWxhdGlvbnNoaXAge1xuICBsb2coYEZpbmRpbmcgcmVsYXRpb25zaGlwIGJldHdlZW4gXCIke25vZGVBLm5hbWV9XCIgYW5kIFwiJHtub2RlQi5uYW1lfVwiYCk7XG4gIGxldCByZWxhdGlvbnNoaXA6IFJlbGF0aW9uc2hpcDtcbiAgLy8gSWYgYm90aCBub2RlcyBhcmUgQ29sbGVjdGlvbnMsIGZpbmQgdGhlaXIgcmVsYXRpb25zaGlwXG4gIGlmIChub2RlQS5oYXNQcm9wZXJ0eShQcm9wZXJ0aWVzLkNPTExFQ1RJT04pICYmIG5vZGVCLmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuQ09MTEVDVElPTikpIHtcbiAgICByZWxhdGlvbnNoaXAgPSBmaW5kQ29sbGVjdGlvblRvQ29sbGVjdGlvblJlbGF0aW9uc2hpcChub2RlQS5jb2xsZWN0aW9uLCBub2RlQi5jb2xsZWN0aW9uKTtcbiAgLy8gSWYgb25lIG5vZGUgaXMgYSBDb2xsZWN0aW9uLCBhbmQgdGhlIG90aGVyIG5vZGUgaXMgbmVpdGhlciBhIGNvbGxlY3Rpb24gbm9yIGFuIGVudGl0eVxuICB9IGVsc2UgaWYgKG5vZGVBLmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuQ09MTEVDVElPTikgJiYgIShub2RlQi5oYXNQcm9wZXJ0eShQcm9wZXJ0aWVzLkNPTExFQ1RJT04pIHx8bm9kZUIuaGFzUHJvcGVydHkoUHJvcGVydGllcy5FTlRJVFkpKSkge1xuICAgIHJlbGF0aW9uc2hpcCA9IGZpbmRDb2xsZWN0aW9uVG9BdHRyUmVsYXRpb25zaGlwKG5vZGVBLmNvbGxlY3Rpb24sIG5vZGVCLCBjb250ZXh0KTtcbiAgfSBlbHNlIGlmIChub2RlQi5oYXNQcm9wZXJ0eShQcm9wZXJ0aWVzLkNPTExFQ1RJT04pICYmICEobm9kZUEuaGFzUHJvcGVydHkoUHJvcGVydGllcy5DT0xMRUNUSU9OKSB8fCBub2RlQS5oYXNQcm9wZXJ0eShQcm9wZXJ0aWVzLkVOVElUWSkpKSB7XG4gICAgcmVsYXRpb25zaGlwID0gZmluZENvbGxlY3Rpb25Ub0F0dHJSZWxhdGlvbnNoaXAobm9kZUIuY29sbGVjdGlvbiwgbm9kZUEsIGNvbnRleHQpO1xuICAvLyBJZiBvbmUgbm9kZSBpcyBhbiBlbnRpdHkgYW5kIHRoZSBvdGhlciBpcyBhIGNvbGxlY3Rpb24gXG4gIH0gZWxzZSBpZiAobm9kZUEuaGFzUHJvcGVydHkoUHJvcGVydGllcy5DT0xMRUNUSU9OKSAmJiBub2RlQi5oYXNQcm9wZXJ0eShQcm9wZXJ0aWVzLkVOVElUWSkpIHtcbiAgICByZWxhdGlvbnNoaXAgPSBmaW5kQ29sbGVjdGlvblRvRW50UmVsYXRpb25zaGlwKG5vZGVBLmNvbGxlY3Rpb24sIG5vZGVCLmVudGl0eSk7XG4gIH0gZWxzZSBpZiAobm9kZUIuaGFzUHJvcGVydHkoUHJvcGVydGllcy5DT0xMRUNUSU9OKSAmJiBub2RlQS5oYXNQcm9wZXJ0eShQcm9wZXJ0aWVzLkVOVElUWSkpIHtcbiAgICByZWxhdGlvbnNoaXAgPSBmaW5kQ29sbGVjdGlvblRvRW50UmVsYXRpb25zaGlwKG5vZGVCLmNvbGxlY3Rpb24sIG5vZGVBLmVudGl0eSk7XG4gIC8vIElmIG9uZSBub2RlIGlzIGFuIEVudGl0eSwgYW5kIHRoZSBvdGhlciBub2RlIGlzIG5laXRoZXIgYSBjb2xsZWN0aW9uIG5vciBhbiBlbnRpdHlcbiAgfSBlbHNlIGlmIChub2RlQS5oYXNQcm9wZXJ0eShQcm9wZXJ0aWVzLkVOVElUWSkgJiYgIShub2RlQi5oYXNQcm9wZXJ0eShQcm9wZXJ0aWVzLkNPTExFQ1RJT04pIHx8IG5vZGVCLmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuRU5USVRZKSkpIHtcbiAgICByZWxhdGlvbnNoaXAgPSBmaW5kRW50VG9BdHRyUmVsYXRpb25zaGlwKG5vZGVBLmVudGl0eSwgbm9kZUIsIGNvbnRleHQpO1xuICB9IGVsc2UgaWYgKG5vZGVCLmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuRU5USVRZKSAmJiAhKG5vZGVBLmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuQ09MTEVDVElPTikgfHwgbm9kZUEuaGFzUHJvcGVydHkoUHJvcGVydGllcy5FTlRJVFkpKSkge1xuICAgIHJlbGF0aW9uc2hpcCA9IGZpbmRFbnRUb0F0dHJSZWxhdGlvbnNoaXAobm9kZUIuZW50aXR5LCBub2RlQSwgY29udGV4dCk7XG4gLy8gSWYgb25lIG5vZGUgaXMgYW4gQXR0cmlidXRlLCBhbmQgdGhlIG90aGVyIG5vZGUgaXMgbmVpdGhlciBhIGNvbGxlY3Rpb24gbm9yIGFuIGVudGl0eVxuICB9IGVsc2UgaWYgKG5vZGVBLmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuQVRUUklCVVRFKSAmJiAhKG5vZGVCLmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuQ09MTEVDVElPTikgfHwgbm9kZUIuaGFzUHJvcGVydHkoUHJvcGVydGllcy5FTlRJVFkpKSkge1xuICAgIHJlbGF0aW9uc2hpcCA9IGZpbmRFbnRUb0F0dHJSZWxhdGlvbnNoaXAobm9kZUEuYXR0cmlidXRlLmVudGl0eSwgbm9kZUIsIGNvbnRleHQpO1xuICB9IGVsc2UgaWYgKG5vZGVCLmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuQVRUUklCVVRFKSAmJiAhKG5vZGVBLmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuQ09MTEVDVElPTikgfHwgbm9kZUEuaGFzUHJvcGVydHkoUHJvcGVydGllcy5FTlRJVFkpKSkge1xuICAgIHJlbGF0aW9uc2hpcCA9IGZpbmRFbnRUb0F0dHJSZWxhdGlvbnNoaXAobm9kZUIuYXR0cmlidXRlLmVudGl0eSwgbm9kZUEsIGNvbnRleHQpO1xuICB9XG4gIC8vIElmIHdlIGZvdW5kIGEgcmVsYXRpb25zaGlwLCBhZGQgaXQgdG8gdGhlIGNvbnRleHRcbiAgaWYgKHJlbGF0aW9uc2hpcCAhPT0gdW5kZWZpbmVkICYmIHJlbGF0aW9uc2hpcC50eXBlICE9PSBSZWxhdGlvbnNoaXBUeXBlcy5OT05FKSB7XG4gICAgY29udGV4dC5yZWxhdGlvbnNoaXBzLnB1c2gocmVsYXRpb25zaGlwKTtcbiAgICByZXR1cm4gcmVsYXRpb25zaGlwOyBcbiAgfSBlbHNlIHtcbiAgICBsb2coXCJObyByZWxhdGlvbnNoaXAgZm91bmQgOihcIik7XG4gICAgcmV0dXJuIHt0eXBlOiBSZWxhdGlvbnNoaXBUeXBlcy5OT05FfTsgIFxuICB9XG59XG5cbi8vIGUuZy4gXCJtZWV0aW5ncyBqb2huIHdhcyBpblwiXG5mdW5jdGlvbiBmaW5kQ29sbGVjdGlvblRvRW50UmVsYXRpb25zaGlwKGNvbGw6IENvbGxlY3Rpb24sIGVudDogRW50aXR5KTogUmVsYXRpb25zaGlwIHtcbiAgbG9nKGBGaW5kaW5nIENvbGwgLT4gRW50IHJlbGF0aW9uc2hpcCBiZXR3ZWVuIFwiJHtjb2xsLmRpc3BsYXlOYW1lfVwiIGFuZCBcIiR7ZW50LmRpc3BsYXlOYW1lfVwiLi4uYCk7XG4gIC8qaWYgKGNvbGwgPT09IFwiY29sbGVjdGlvbnNcIikge1xuICAgIGlmIChldmUuZmluZE9uZShcImNvbGxlY3Rpb24gZW50aXRpZXNcIiwgeyBlbnRpdHk6IGVudC5pZCB9KSkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogUmVsYXRpb25zaGlwVHlwZXMuRElSRUNUIH07XG4gICAgfVxuICB9Ki9cbiAgaWYgKGV2ZS5maW5kT25lKFwiY29sbGVjdGlvbiBlbnRpdGllc1wiLCB7IGNvbGxlY3Rpb246IGNvbGwuaWQsIGVudGl0eTogZW50LmlkIH0pKSB7XG4gICAgbG9nKFwiRm91bmQgRGlyZWN0IHJlbGF0aW9uc2hpcFwiKVxuICAgIHJldHVybiB7IHR5cGU6IFJlbGF0aW9uc2hpcFR5cGVzLkRJUkVDVCB9O1xuICB9XG4gIFxuICBsZXQgcmVsYXRpb25zaGlwID0gZXZlLnF1ZXJ5KGBgKVxuICAgIC5zZWxlY3QoXCJjb2xsZWN0aW9uIGVudGl0aWVzXCIsIHsgY29sbGVjdGlvbjogY29sbC5pZCB9LCBcImNvbGxlY3Rpb25cIilcbiAgICAuc2VsZWN0KFwiZGlyZWN0aW9ubGVzcyBsaW5rc1wiLCB7IGVudGl0eTogW1wiY29sbGVjdGlvblwiLCBcImVudGl0eVwiXSwgbGluazogZW50LmlkIH0sIFwibGlua3NcIilcbiAgICAuZXhlYygpO1xuICBpZiAocmVsYXRpb25zaGlwLnVucHJvamVjdGVkLmxlbmd0aCkge1xuICAgIGxvZyhcIkZvdW5kIE9uZS1Ib3AgUmVsYXRpb25zaGlwXCIpO1xuICAgIHJldHVybiB7IHR5cGU6IFJlbGF0aW9uc2hpcFR5cGVzLk9ORUhPUCB9O1xuICB9LypcbiAgLy8gZS5nLiBldmVudHMgd2l0aCBjaHJpcyBncmFuZ2VyIChldmVudHMgLT4gbWVldGluZ3MgLT4gY2hyaXMgZ3JhbmdlcilcbiAgbGV0IHJlbGF0aW9uc2hpcHMyID0gZXZlLnF1ZXJ5KGBgKVxuICAgIC5zZWxlY3QoXCJjb2xsZWN0aW9uIGVudGl0aWVzXCIsIHsgY29sbGVjdGlvbjogY29sbCB9LCBcImNvbGxlY3Rpb25cIilcbiAgICAuc2VsZWN0KFwiZGlyZWN0aW9ubGVzcyBsaW5rc1wiLCB7IGVudGl0eTogW1wiY29sbGVjdGlvblwiLCBcImVudGl0eVwiXSB9LCBcImxpbmtzXCIpXG4gICAgLnNlbGVjdChcImRpcmVjdGlvbmxlc3MgbGlua3NcIiwgeyBlbnRpdHk6IFtcImxpbmtzXCIsIFwibGlua1wiXSwgbGluazogZW50IH0sIFwibGlua3MyXCIpXG4gICAgLmV4ZWMoKTtcbiAgaWYgKHJlbGF0aW9uc2hpcHMyLnVucHJvamVjdGVkLmxlbmd0aCkge1xuICAgIGxldCBlbnRpdGllcyA9IGV4dHJhY3RGcm9tVW5wcm9qZWN0ZWQocmVsYXRpb25zaGlwczIudW5wcm9qZWN0ZWQsIDEsIDMpO1xuICAgIHJldHVybiB7IHR5cGU6IFJlbGF0aW9uc2hpcFR5cGVzLlRXT0hPUCB9O1xuICB9Ki9cbiAgbG9nKFwiTm8gcmVsYXRpb25zaGlwIGZvdW5kIDooXCIpO1xuICByZXR1cm4geyB0eXBlOiBSZWxhdGlvbnNoaXBUeXBlcy5OT05FIH07XG59XG5cbmZ1bmN0aW9uIGZpbmRFbnRUb0F0dHJSZWxhdGlvbnNoaXAoZW50aXR5OiBFbnRpdHksIGF0dHI6IE5vZGUsIGNvbnRleHQ6IENvbnRleHQpOiBSZWxhdGlvbnNoaXAge1xuICAvLyBDaGVjayBmb3IgYSBkaXJlY3QgcmVsYXRpb25zaGlwXG4gIC8vIGUuZy4gXCJKb3NoJ3MgYWdlXCJcbiAgbGV0IGZvdW5kID0gZmluZEVudGl0eUF0dHJpYnV0ZShhdHRyLGVudGl0eSxjb250ZXh0KTtcbiAgaWYgKGZvdW5kID09PSB0cnVlKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogUmVsYXRpb25zaGlwVHlwZXMuRElSRUNUIH07XG4gIH1cbiAgLy8gQ2hlY2sgZm9yIGEgb25lLWhvcCByZWxhdGlvbnNoaXBcbiAgLy8gZS5nLiBcIlNhbGFyaWVzIGluIGVuZ2luZWVyaW5nXCJcbiAgbGV0IHJlbGF0aW9uc2hpcCA9IGV2ZS5xdWVyeShgYClcbiAgICAuc2VsZWN0KFwiZGlyZWN0aW9ubGVzcyBsaW5rc1wiLCB7IGVudGl0eTogZW50aXR5LmlkIH0sIFwibGlua3NcIilcbiAgICAuc2VsZWN0KFwiZW50aXR5IGVhdnNcIiwgeyBlbnRpdHk6IFtcImxpbmtzXCIsIFwibGlua1wiXSwgYXR0cmlidXRlOiBhdHRyLm5hbWUgfSwgXCJlYXZcIilcbiAgICAuZXhlYygpO1xuICBpZiAocmVsYXRpb25zaGlwLnVucHJvamVjdGVkLmxlbmd0aCkge1xuICAgIGxvZyhcIkZvdW5kIE9uZS1Ib3AgUmVsYXRpb25zaGlwXCIpO1xuICAgIGxvZyhyZWxhdGlvbnNoaXApO1xuICAgIC8vIEZpbmQgdGhlIG9uZS1ob3AgbGlua1xuICAgIGxldCBlbnRpdGllcyA9IGV4dHJhY3RGcm9tVW5wcm9qZWN0ZWQocmVsYXRpb25zaGlwLnVucHJvamVjdGVkLCAwLCAyKTtcbiAgICBsZXQgY29sbGVjdGlvbnMgPSBmaW5kQ29tbW9uQ29sbGVjdGlvbnMoZW50aXRpZXMpXG4gICAgbGV0IGxpbmtJRDtcbiAgICBpZiAoY29sbGVjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gQEhBQ0sgQ2hvb3NlIHRoZSBjb3JyZWN0IGNvbGxlY3Rpb24gaW4gYSBzbWFydCB3YXkuIFxuICAgICAgLy8gTGFyZ2VzdCBjb2xsZWN0aW9uIG90aGVyIHRoYW4gZW50aXR5IG9yIHRlc3RkYXRhP1xuICAgICAgbGlua0lEID0gY29sbGVjdGlvbnNbMF07ICBcbiAgICB9XG4gICAgbGV0IGVudGl0eUF0dHJpYnV0ZTogQXR0cmlidXRlID0ge1xuICAgICAgaWQ6IGF0dHIubmFtZSxcbiAgICAgIGRpc3BsYXlOYW1lOiBhdHRyLm5hbWUsXG4gICAgICB2YWx1ZTogYCR7ZW50aXR5LmRpc3BsYXlOYW1lfXwke2F0dHIubmFtZX1gLFxuICAgICAgdmFyaWFibGU6IGAke2VudGl0eS5kaXNwbGF5TmFtZX18JHthdHRyLm5hbWV9YCxcbiAgICAgIG5vZGU6IGF0dHIsXG4gICAgICBwcm9qZWN0OiB0cnVlLFxuICAgIH1cbiAgICBhdHRyLmF0dHJpYnV0ZSA9IGVudGl0eUF0dHJpYnV0ZTtcbiAgICBjb250ZXh0LmF0dHJpYnV0ZXMucHVzaChlbnRpdHlBdHRyaWJ1dGUpO1xuICAgIGF0dHIucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuQVRUUklCVVRFKTtcbiAgICBhdHRyLmZvdW5kID0gdHJ1ZTtcbiAgICByZXR1cm4ge2xpbmtzOiBbbGlua0lEXSwgdHlwZTogUmVsYXRpb25zaGlwVHlwZXMuT05FSE9QLCBub2RlczogW2VudGl0eS5ub2RlLCBhdHRyXX07XG4gIH1cbiAgLypcbiAgbGV0IHJlbGF0aW9uc2hpcHMyID0gZXZlLnF1ZXJ5KGBgKVxuICAgIC5zZWxlY3QoXCJkaXJlY3Rpb25sZXNzIGxpbmtzXCIsIHsgZW50aXR5OiBlbnRpdHkuaWQgfSwgXCJsaW5rc1wiKVxuICAgIC5zZWxlY3QoXCJkaXJlY3Rpb25sZXNzIGxpbmtzXCIsIHsgZW50aXR5OiBbXCJsaW5rc1wiLCBcImxpbmtcIl0gfSwgXCJsaW5rczJcIilcbiAgICAuc2VsZWN0KFwiZW50aXR5IGVhdnNcIiwgeyBlbnRpdHk6IFtcImxpbmtzMlwiLCBcImxpbmtcIl0sIGF0dHJpYnV0ZTogYXR0ciB9LCBcImVhdlwiKVxuICAgIC5leGVjKCk7XG4gIGlmIChyZWxhdGlvbnNoaXBzMi51bnByb2plY3RlZC5sZW5ndGgpIHtcbiAgICBsZXQgZW50aXRpZXMgPSBleHRyYWN0RnJvbVVucHJvamVjdGVkKHJlbGF0aW9uc2hpcHMyLnVucHJvamVjdGVkLCAwLCAzKTtcbiAgICBsZXQgZW50aXRpZXMyID0gZXh0cmFjdEZyb21VbnByb2plY3RlZChyZWxhdGlvbnNoaXBzMi51bnByb2plY3RlZCwgMSwgMyk7XG4gICAgLy9yZXR1cm4geyBkaXN0YW5jZTogMiwgdHlwZTogUmVsYXRpb25zaGlwVHlwZXMuRU5USVRZX0FUVFJJQlVURSwgbm9kZXM6IFtmaW5kQ29tbW9uQ29sbGVjdGlvbnMoZW50aXRpZXMpLCBmaW5kQ29tbW9uQ29sbGVjdGlvbnMoZW50aXRpZXMyKV0gfTtcbiAgfSovXG4gIGxvZyhcIk5vIHJlbGF0aW9uc2hpcCBmb3VuZCA6KFwiKTtcbiAgcmV0dXJuIHsgdHlwZTogUmVsYXRpb25zaGlwVHlwZXMuTk9ORSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZENvbGxlY3Rpb25Ub0NvbGxlY3Rpb25SZWxhdGlvbnNoaXAoY29sbEE6IENvbGxlY3Rpb24sIGNvbGxCOiBDb2xsZWN0aW9uKTogUmVsYXRpb25zaGlwIHsgIFxuICBsb2coYEZpbmRpbmcgQ29sbCAtPiBDb2xsIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIFwiJHtjb2xsQS5kaXNwbGF5TmFtZX1cIiBhbmQgXCIke2NvbGxCLmRpc3BsYXlOYW1lfVwiLi4uYCk7XG4gIC8vIGFyZSB0aGVyZSB0aGluZ3MgaW4gYm90aCBzZXRzP1xuICBsZXQgaW50ZXJzZWN0aW9uID0gZXZlLnF1ZXJ5KGAke2NvbGxBLmRpc3BsYXlOYW1lfS0+JHtjb2xsQi5kaXNwbGF5TmFtZX1gKVxuICAgIC5zZWxlY3QoXCJjb2xsZWN0aW9uIGVudGl0aWVzXCIsIHsgY29sbGVjdGlvbjogY29sbEEuaWQgfSwgXCJjb2xsQVwiKVxuICAgIC5zZWxlY3QoXCJjb2xsZWN0aW9uIGVudGl0aWVzXCIsIHsgY29sbGVjdGlvbjogY29sbEIuaWQsIGVudGl0eTogW1wiY29sbEFcIiwgXCJlbnRpdHlcIl0gfSwgXCJjb2xsQlwiKVxuICAgIC5leGVjKCk7XG4gIC8vIGlzIHRoZXJlIGEgcmVsYXRpb25zaGlwIGJldHdlZW4gdGhpbmdzIGluIGJvdGggc2V0c1xuICBsZXQgcmVsYXRpb25zaGlwcyA9IGV2ZS5xdWVyeShgcmVsYXRpb25zaGlwcyBiZXR3ZWVuICR7Y29sbEEuZGlzcGxheU5hbWV9IGFuZCAke2NvbGxCLmRpc3BsYXlOYW1lfWApXG4gICAgLnNlbGVjdChcImNvbGxlY3Rpb24gZW50aXRpZXNcIiwgeyBjb2xsZWN0aW9uOiBjb2xsQS5pZCB9LCBcImNvbGxBXCIpXG4gICAgLnNlbGVjdChcImRpcmVjdGlvbmxlc3MgbGlua3NcIiwgeyBlbnRpdHk6IFtcImNvbGxBXCIsIFwiZW50aXR5XCJdIH0sIFwibGlua3NcIilcbiAgICAuc2VsZWN0KFwiY29sbGVjdGlvbiBlbnRpdGllc1wiLCB7IGNvbGxlY3Rpb246IGNvbGxCLmlkLCBlbnRpdHk6IFtcImxpbmtzXCIsIFwibGlua1wiXSB9LCBcImNvbGxCXCIpXG4gICAgLmdyb3VwKFtbXCJsaW5rc1wiLCBcImxpbmtcIl1dKVxuICAgIC5hZ2dyZWdhdGUoXCJjb3VudFwiLCB7fSwgXCJjb3VudFwiKVxuICAgIC5wcm9qZWN0KHsgdHlwZTogW1wibGlua3NcIiwgXCJsaW5rXCJdLCBjb3VudDogW1wiY291bnRcIiwgXCJjb3VudFwiXSB9KVxuICAgIC5leGVjKCk7XG4gIGxldCBtYXhSZWwgPSB7IGNvdW50OiAwIH07XG4gIGZvciAobGV0IHJlc3VsdCBvZiByZWxhdGlvbnNoaXBzLnJlc3VsdHMpIHtcbiAgICBpZiAocmVzdWx0LmNvdW50ID4gbWF4UmVsLmNvdW50KSBtYXhSZWwgPSByZXN1bHQ7XG4gIH1cblxuICAvLyB3ZSBkaXZpZGUgYnkgdHdvIGJlY2F1c2UgdW5wcm9qZWN0ZWQgcmVzdWx0cyBwYWNrIHJvd3MgbmV4dCB0byBlYWNob3RoZXJcbiAgLy8gYW5kIHdlIGhhdmUgdHdvIHNlbGVjdHMuXG4gIGxldCBpbnRlcnNlY3Rpb25TaXplID0gaW50ZXJzZWN0aW9uLnVucHJvamVjdGVkLmxlbmd0aCAvIDI7XG4gICAgXG4gIGlmIChtYXhSZWwuY291bnQgPiBpbnRlcnNlY3Rpb25TaXplKSB7XG4gICAgLy8gQFRPRE9cbiAgICByZXR1cm4ge3R5cGU6IFJlbGF0aW9uc2hpcFR5cGVzLk5PTkV9O1xuICB9IGVsc2UgaWYgKGludGVyc2VjdGlvblNpemUgPiBtYXhSZWwuY291bnQpIHtcbiAgICByZXR1cm4ge3R5cGU6IFJlbGF0aW9uc2hpcFR5cGVzLklOVEVSU0VDVElPTiwgbm9kZXM6IFtjb2xsQS5ub2RlLCBjb2xsQi5ub2RlXX07XG4gIH0gZWxzZSBpZiAobWF4UmVsLmNvdW50ID09PSAwICYmIGludGVyc2VjdGlvblNpemUgPT09IDApIHtcbiAgICByZXR1cm4ge3R5cGU6IFJlbGF0aW9uc2hpcFR5cGVzLk5PTkV9O1xuICB9IGVsc2Uge1xuICAgIC8vIEBUT0RPXG4gICAgcmV0dXJuIHt0eXBlOiBSZWxhdGlvbnNoaXBUeXBlcy5OT05FfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5kQ29sbGVjdGlvblRvQXR0clJlbGF0aW9uc2hpcChjb2xsOiBDb2xsZWN0aW9uLCBhdHRyOiBOb2RlLCBjb250ZXh0OiBDb250ZXh0KTogUmVsYXRpb25zaGlwIHtcbiAgLy8gRmluZHMgYSBkaXJlY3QgcmVsYXRpb25zaGlwIGJldHdlZW4gY29sbGVjdGlvbiBhbmQgYXR0cmlidXRlXG4gIC8vIGUuZy4gXCJwZXRzJyBsZW5ndGhzXCJcIiA9PiBwZXQgLT4gbGVuZ3RoXG4gIGxvZyhgRmluZGluZyBDb2xsIC0+IEF0dHIgcmVsYXRpb25zaGlwIGJldHdlZW4gXCIke2NvbGwuZGlzcGxheU5hbWV9XCIgYW5kIFwiJHthdHRyLm5hbWV9XCIuLi5gKTtcbiAgbGV0IHJlbGF0aW9uc2hpcCA9IGV2ZS5xdWVyeShgYClcbiAgICAuc2VsZWN0KFwiY29sbGVjdGlvbiBlbnRpdGllc1wiLCB7IGNvbGxlY3Rpb246IGNvbGwuaWQgfSwgXCJjb2xsZWN0aW9uXCIpXG4gICAgLnNlbGVjdChcImVudGl0eSBlYXZzXCIsIHsgZW50aXR5OiBbXCJjb2xsZWN0aW9uXCIsIFwiZW50aXR5XCJdLCBhdHRyaWJ1dGU6IGF0dHIubmFtZSB9LCBcImVhdlwiKVxuICAgIC5leGVjKCk7XG4gIGlmIChyZWxhdGlvbnNoaXAudW5wcm9qZWN0ZWQubGVuZ3RoID4gMCkgeyAgICBcbiAgICBsb2coXCJGb3VuZCBEaXJlY3QgUmVsYXRpb25zaGlwXCIpO1xuICAgIGxldCBjb2xsZWN0aW9uQXR0cmlidXRlOiBBdHRyaWJ1dGUgPSB7XG4gICAgICBpZDogYXR0ci5uYW1lLFxuICAgICAgZGlzcGxheU5hbWU6IGF0dHIubmFtZSxcbiAgICAgIGNvbGxlY3Rpb246IGNvbGwsXG4gICAgICB2YWx1ZTogYCR7Y29sbC5kaXNwbGF5TmFtZX18JHthdHRyLm5hbWV9YCxcbiAgICAgIHZhcmlhYmxlOiBgJHtjb2xsLmRpc3BsYXlOYW1lfXwke2F0dHIubmFtZX1gLFxuICAgICAgbm9kZTogYXR0cixcbiAgICAgIHByb2plY3Q6IHRydWUsXG4gICAgfVxuICAgIGF0dHIuYXR0cmlidXRlID0gY29sbGVjdGlvbkF0dHJpYnV0ZTtcbiAgICBjb250ZXh0LmF0dHJpYnV0ZXMucHVzaChjb2xsZWN0aW9uQXR0cmlidXRlKTtcbiAgICBhdHRyLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLkFUVFJJQlVURSk7XG4gICAgYXR0ci5mb3VuZCA9IHRydWU7XG4gICAgcmV0dXJuIHt0eXBlOiBSZWxhdGlvbnNoaXBUeXBlcy5ESVJFQ1QsIG5vZGVzOiBbY29sbC5ub2RlLCBhdHRyXX07XG4gIH1cbiAgLy8gRmluZHMgYSBvbmUgaG9wIHJlbGF0aW9uc2hpcFxuICAvLyBlLmcuIFwiZGVwYXJ0bWVudCBzYWxhcmllc1wiID0+IGRlcGFydG1lbnQgLT4gZW1wbG95ZWUgLT4gc2FsYXJ5XG4gIHJlbGF0aW9uc2hpcCA9IGV2ZS5xdWVyeShgYClcbiAgICAuc2VsZWN0KFwiY29sbGVjdGlvbiBlbnRpdGllc1wiLCB7IGNvbGxlY3Rpb246IGNvbGwuaWQgfSwgXCJjb2xsZWN0aW9uXCIpXG4gICAgLnNlbGVjdChcImRpcmVjdGlvbmxlc3MgbGlua3NcIiwgeyBlbnRpdHk6IFtcImNvbGxlY3Rpb25cIiwgXCJlbnRpdHlcIl0gfSwgXCJsaW5rc1wiKVxuICAgIC5zZWxlY3QoXCJlbnRpdHkgZWF2c1wiLCB7IGVudGl0eTogW1wibGlua3NcIiwgXCJsaW5rXCJdLCBhdHRyaWJ1dGU6IGF0dHIubmFtZSB9LCBcImVhdlwiKVxuICAgIC5leGVjKCk7XG4gIGlmIChyZWxhdGlvbnNoaXAudW5wcm9qZWN0ZWQubGVuZ3RoID4gMCkge1xuICAgIGxvZyhcIkZvdW5kIE9uZS1Ib3AgUmVsYXRpb25zaGlwXCIpO1xuICAgIGxvZyhyZWxhdGlvbnNoaXApXG4gICAgLy8gRmluZCB0aGUgb25lLWhvcCBsaW5rXG4gICAgbGV0IGVudGl0aWVzID0gZXh0cmFjdEZyb21VbnByb2plY3RlZChyZWxhdGlvbnNoaXAudW5wcm9qZWN0ZWQsIDEsIDMpO1xuICAgIGxldCBjb2xsZWN0aW9ucyA9IGZpbmRDb21tb25Db2xsZWN0aW9ucyhlbnRpdGllcylcbiAgICBsZXQgbGlua0lEO1xuICAgIGlmIChjb2xsZWN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBASEFDSyBDaG9vc2UgdGhlIGNvcnJlY3QgY29sbGVjdGlvbiBpbiBhIHNtYXJ0IHdheS4gXG4gICAgICAvLyBMYXJnZXN0IGNvbGxlY3Rpb24gb3RoZXIgdGhhbiBlbnRpdHkgb3IgdGVzdGRhdGE/XG4gICAgICBsaW5rSUQgPSBjb2xsZWN0aW9uc1swXTsgIFxuICAgIH1cbiAgICAvLyBCdWlsZCBhbiBhdHRyaWJ1dGUgZm9yIHRoZSBub2RlXG4gICAgbGV0IGF0dHJpYnV0ZTogQXR0cmlidXRlID0ge1xuICAgICAgICBpZDogYXR0ci5uYW1lLFxuICAgICAgICBkaXNwbGF5TmFtZTogYXR0ci5uYW1lLFxuICAgICAgICBjb2xsZWN0aW9uOiBjb2xsLFxuICAgICAgICB2YWx1ZTogYCR7Y29sbC5kaXNwbGF5TmFtZX18JHthdHRyLm5hbWV9YCxcbiAgICAgICAgdmFyaWFibGU6IGAke2NvbGwuZGlzcGxheU5hbWV9fCR7YXR0ci5uYW1lfWAsXG4gICAgICAgIG5vZGU6IGF0dHIsXG4gICAgICAgIHByb2plY3Q6IHRydWUsXG4gICAgfTtcbiAgICBhdHRyLmF0dHJpYnV0ZSA9IGF0dHJpYnV0ZTtcbiAgICBjb250ZXh0LmF0dHJpYnV0ZXMucHVzaChhdHRyaWJ1dGUpO1xuICAgIGF0dHIucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuQVRUUklCVVRFKTtcbiAgICBhdHRyLmZvdW5kID0gdHJ1ZTtcbiAgICByZXR1cm4ge2xpbmtzOiBbbGlua0lEXSwgdHlwZTogUmVsYXRpb25zaGlwVHlwZXMuT05FSE9QLCBub2RlczogW2NvbGwubm9kZSwgYXR0cl19O1xuICB9XG4gIC8vIE5vdCBzdXJlIGlmIHRoaXMgb25lIHdvcmtzLi4uIHVzaW5nIHRoZSBlbnRpdHkgdGFibGUsIGEgMiBob3AgbGluayBjYW5cbiAgLy8gYmUgZm91bmQgYWxtb3N0IGFueXdoZXJlLCB5aWVsZGluZyByZXN1bHRzIGxpa2VcbiAgLy8gZS5nLiBcIlBldHMgaGVpZ2h0c1wiID0+IHBldHMgLT4gc25ha2UgLT4gZW50aXR5IC0+IGNvcmV5IC0+IGhlaWdodFxuICAvKnJlbGF0aW9uc2hpcCA9IGV2ZS5xdWVyeShgYClcbiAgICAuc2VsZWN0KFwiY29sbGVjdGlvbiBlbnRpdGllc1wiLCB7IGNvbGxlY3Rpb246IGNvbGwuaWQgfSwgXCJjb2xsZWN0aW9uXCIpXG4gICAgLnNlbGVjdChcImRpcmVjdGlvbmxlc3MgbGlua3NcIiwgeyBlbnRpdHk6IFtcImNvbGxlY3Rpb25cIiwgXCJlbnRpdHlcIl0gfSwgXCJsaW5rc1wiKVxuICAgIC5zZWxlY3QoXCJkaXJlY3Rpb25sZXNzIGxpbmtzXCIsIHsgZW50aXR5OiBbXCJsaW5rc1wiLCBcImxpbmtcIl0gfSwgXCJsaW5rczJcIilcbiAgICAuc2VsZWN0KFwiZW50aXR5IGVhdnNcIiwgeyBlbnRpdHk6IFtcImxpbmtzMlwiLCBcImxpbmtcIl0sIGF0dHJpYnV0ZTogYXR0ciB9LCBcImVhdlwiKVxuICAgIC5leGVjKCk7XG4gIGlmIChyZWxhdGlvbnNoaXAudW5wcm9qZWN0ZWQubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9Ki9cbiAgbG9nKFwiTm8gcmVsYXRpb25zaGlwIGZvdW5kIDooXCIpO1xuICByZXR1cm4ge3R5cGU6IFJlbGF0aW9uc2hpcFR5cGVzLk5PTkV9O1xufVxuXG4vLyBFeHRyYWN0cyBlbnRpdGllcyBmcm9tIHVucHJvamVjdGVkIHJlc3VsdHNcbmZ1bmN0aW9uIGV4dHJhY3RGcm9tVW5wcm9qZWN0ZWQoY29sbCwgaXg6IG51bWJlciwgc2l6ZTogbnVtYmVyKSB7XG4gIGxldCByZXN1bHRzID0gW107XG4gIGZvciAobGV0IGkgPSAwLCBsZW4gPSBjb2xsLmxlbmd0aDsgaSA8IGxlbjsgaSArPSBzaXplKSB7XG4gICAgcmVzdWx0cy5wdXNoKGNvbGxbaSArIGl4XVtcImxpbmtcIl0pO1xuICB9XG4gIHJldHVybiByZXN1bHRzO1xufVxuXG4vLyBGaW5kIGNvbGxlY3Rpb25zIHRoYXQgZW50aXRpZXMgaGF2ZSBpbiBjb21tb25cbmZ1bmN0aW9uIGZpbmRDb21tb25Db2xsZWN0aW9ucyhlbnRpdGllczogQXJyYXk8c3RyaW5nPik6IEFycmF5PHN0cmluZz4ge1xuICBsZXQgaW50ZXJzZWN0aW9uID0gZW50aXR5VG9jb2xsZWN0aW9uc0FycmF5KGVudGl0aWVzWzBdKTtcbiAgaW50ZXJzZWN0aW9uLnNvcnQoKTtcbiAgZm9yIChsZXQgZW50SWQgb2YgZW50aXRpZXMuc2xpY2UoMSkpIHtcbiAgICBsZXQgY3VyID0gZW50aXR5VG9jb2xsZWN0aW9uc0FycmF5KGVudElkKTtcbiAgICBjdXIuc29ydCgpO1xuICAgIGFycmF5SW50ZXJzZWN0KGludGVyc2VjdGlvbiwgY3VyKTtcbiAgfVxuICBpbnRlcnNlY3Rpb24uc29ydCgoYSwgYikgPT4ge1xuICAgIHJldHVybiBldmUuZmluZE9uZShcImNvbGxlY3Rpb25cIiwgeyBjb2xsZWN0aW9uOiBhIH0pW1wiY291bnRcIl0gLSBldmUuZmluZE9uZShcImNvbGxlY3Rpb25cIiwgeyBjb2xsZWN0aW9uOiBiIH0pW1wiY291bnRcIl07XG4gIH0pO1xuICByZXR1cm4gaW50ZXJzZWN0aW9uO1xufVxuXG5mdW5jdGlvbiBlbnRpdHlUb2NvbGxlY3Rpb25zQXJyYXkoZW50aXR5OiBzdHJpbmcpOiBBcnJheTxzdHJpbmc+IHtcbiAgbGV0IGVudGl0aWVzID0gZXZlLmZpbmQoXCJjb2xsZWN0aW9uIGVudGl0aWVzXCIsIHsgZW50aXR5IH0pO1xuICByZXR1cm4gZW50aXRpZXMubWFwKChhKSA9PiBhW1wiY29sbGVjdGlvblwiXSk7XG59XG5cbmZ1bmN0aW9uIGZpbmRDb2xsZWN0aW9uQXR0cmlidXRlKG5vZGU6IE5vZGUsIGNvbGxlY3Rpb246IENvbGxlY3Rpb24sIGNvbnRleHQ6IENvbnRleHQsIHJlbGF0aW9uc2hpcDogUmVsYXRpb25zaGlwKTogYm9vbGVhbiB7XG4gIFxuICAvLyBUaGUgYXR0cmlidXRlIGlzIGFuIGF0dHJpYnV0ZSBvZiBtZW1iZXJzIG9mIHRoZSBjb2xsZWN0aW9uXG4gIGlmIChyZWxhdGlvbnNoaXAudHlwZSA9PT0gUmVsYXRpb25zaGlwVHlwZXMuRElSRUNUKSB7XG4gICAgbGV0IGNvbGxlY3Rpb25BdHRyaWJ1dGU6IEF0dHJpYnV0ZSA9IHtcbiAgICAgIGlkOiBub2RlLm5hbWUsXG4gICAgICBkaXNwbGF5TmFtZTogbm9kZS5uYW1lLFxuICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvbixcbiAgICAgIHZhbHVlOiBgJHtjb2xsZWN0aW9uLmRpc3BsYXlOYW1lfXwke25vZGUubmFtZX1gLFxuICAgICAgdmFyaWFibGU6IGAke2NvbGxlY3Rpb24uZGlzcGxheU5hbWV9fCR7bm9kZS5uYW1lfWAsXG4gICAgICBub2RlOiBub2RlLFxuICAgICAgcHJvamVjdDogdHJ1ZSxcbiAgICB9XG4gICAgbm9kZS5hdHRyaWJ1dGUgPSBjb2xsZWN0aW9uQXR0cmlidXRlO1xuICAgIGNvbnRleHQuYXR0cmlidXRlcy5wdXNoKGNvbGxlY3Rpb25BdHRyaWJ1dGUpO1xuICAgIG5vZGUuZm91bmQgPSB0cnVlO1xuICAgIHJldHVybiB0cnVlO1xuICAvLyBUaGUgYXR0cmlidXRlIGlzIGFuIGF0dHJpYnV0ZSBvZiBtZW1iZXJzIG9mIGEgY29sbGVjdGlvbiB3aGljaCBhcmVcbiAgLy8gYWxzbyBtZW1iZXJzIG9mIHRoaXMgY29sbGVjdGlvblxuICB9IGVsc2UgaWYgKHJlbGF0aW9uc2hpcC50eXBlID09PSBSZWxhdGlvbnNoaXBUeXBlcy5PTkVIT1ApIHtcbiAgICBsZXQgbGlua0lEID0gcmVsYXRpb25zaGlwLmxpbmtzWzBdO1xuICAgIGxldCBuQ29sbGVjdGlvbiA9IGZpbmRFdmVDb2xsZWN0aW9uKGxpbmtJRCk7XG4gICAgaWYgKG5Db2xsZWN0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBsaW5rIG5vZGVcbiAgICAgIGxldCB0b2tlbjogVG9rZW4gPSB7XG4gICAgICAgIGl4OiAwLCBcbiAgICAgICAgb3JpZ2luYWxXb3JkOiBuQ29sbGVjdGlvbi5kaXNwbGF5TmFtZSwgXG4gICAgICAgIG5vcm1hbGl6ZWRXb3JkOiBuQ29sbGVjdGlvbi5kaXNwbGF5TmFtZSwgXG4gICAgICAgIFBPUzogTWlub3JQYXJ0c09mU3BlZWNoLk5OLFxuICAgICAgICBwcm9wZXJ0aWVzOiBbXSwgXG4gICAgICB9O1xuICAgICAgbGV0IG5Ob2RlID0gbmV3Tm9kZSh0b2tlbik7XG4gICAgICBpbnNlcnRBZnRlck5vZGUobk5vZGUsY29sbGVjdGlvbi5ub2RlKTtcbiAgICAgIG5Ob2RlLmNvbGxlY3Rpb24gPSBuQ29sbGVjdGlvbjtcbiAgICAgIG5Db2xsZWN0aW9uLm5vZGUgPSBuTm9kZTtcbiAgICAgIGNvbnRleHQuY29sbGVjdGlvbnMucHVzaChuQ29sbGVjdGlvbik7XG4gICAgICAvLyBCdWlsZCBhIGNvbGxlY3Rpb24gYXR0cmlidXRlIHRvIGxpbmsgd2l0aCBwYXJlbnRcbiAgICAgIGxldCBjb2xsZWN0aW9uQXR0cmlidXRlOiBBdHRyaWJ1dGUgPSB7XG4gICAgICAgIGlkOiBjb2xsZWN0aW9uLmRpc3BsYXlOYW1lLFxuICAgICAgICBkaXNwbGF5TmFtZTogY29sbGVjdGlvbi5kaXNwbGF5TmFtZSxcbiAgICAgICAgY29sbGVjdGlvbjogbkNvbGxlY3Rpb24sXG4gICAgICAgIHZhbHVlOiBgJHtjb2xsZWN0aW9uLmRpc3BsYXlOYW1lfWAsXG4gICAgICAgIHZhcmlhYmxlOiBgJHtjb2xsZWN0aW9uLmRpc3BsYXlOYW1lfWAsXG4gICAgICAgIG5vZGU6IG5Ob2RlLFxuICAgICAgICBwcm9qZWN0OiBmYWxzZSxcbiAgICAgIH1cbiAgICAgIG5Ob2RlLmF0dHJpYnV0ZSA9IGNvbGxlY3Rpb25BdHRyaWJ1dGU7XG4gICAgICBjb250ZXh0LmF0dHJpYnV0ZXMucHVzaChjb2xsZWN0aW9uQXR0cmlidXRlKTtcbiAgICAgIG5Ob2RlLmZvdW5kID0gdHJ1ZTtcbiAgICAgIC8vIEJ1aWxkIGFuIGF0dHJpYnV0ZSBmb3IgdGhlIHJlZmVyZW5jZWQgbm9kZVxuICAgICAgbGV0IGF0dHJpYnV0ZTogQXR0cmlidXRlID0ge1xuICAgICAgICBpZDogbm9kZS5uYW1lLFxuICAgICAgICBkaXNwbGF5TmFtZTogbm9kZS5uYW1lLFxuICAgICAgICBjb2xsZWN0aW9uOiBuQ29sbGVjdGlvbixcbiAgICAgICAgdmFsdWU6IGAke25Db2xsZWN0aW9uLmRpc3BsYXlOYW1lfXwke25vZGUubmFtZX1gLFxuICAgICAgICB2YXJpYWJsZTogYCR7bkNvbGxlY3Rpb24uZGlzcGxheU5hbWV9fCR7bm9kZS5uYW1lfWAsXG4gICAgICAgIG5vZGU6IG5vZGUsXG4gICAgICAgIHByb2plY3Q6IHRydWUsXG4gICAgICB9XG4gICAgICBub2RlLmF0dHJpYnV0ZSA9IGF0dHJpYnV0ZTtcbiAgICAgIGNvbnRleHQuYXR0cmlidXRlcy5wdXNoKGF0dHJpYnV0ZSk7XG4gICAgICBub2RlLmZvdW5kID0gdHJ1ZTsgXG4gICAgICByZXR1cm4gdHJ1ZTsgICAgICAgICAgICAgXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBlbnRpdHkgPSBmaW5kRXZlRW50aXR5KGxpbmtJRCk7XG4gICAgICBpZiAoZW50aXR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gQFRPRE8gaGFuZGxlIGVudGl0aWVzXG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZmluZEVudGl0eUF0dHJpYnV0ZShub2RlOiBOb2RlLCBlbnRpdHk6IEVudGl0eSwgY29udGV4dDogQ29udGV4dCk6IGJvb2xlYW4ge1xuICBsZXQgYXR0cmlidXRlID0gZmluZEV2ZUF0dHJpYnV0ZShub2RlLm5hbWUsZW50aXR5KTtcbiAgaWYgKGF0dHJpYnV0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKGlzTnVtZXJpYyhhdHRyaWJ1dGUudmFsdWUpKSB7XG4gICAgICBub2RlLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLlFVQU5USVRZKTtcbiAgICB9XG4gICAgY29udGV4dC5hdHRyaWJ1dGVzLnB1c2goYXR0cmlidXRlKTtcbiAgICBub2RlLmF0dHJpYnV0ZSA9IGF0dHJpYnV0ZTtcbiAgICBub2RlLnByb3BlcnRpZXMucHVzaChQcm9wZXJ0aWVzLkFUVFJJQlVURSk7XG4gICAgYXR0cmlidXRlLm5vZGUgPSBub2RlO1xuICAgIC8vIElmIHRoZSBub2RlIGlzIHBvc3Nlc3NpdmUsIGNoZWNrIHRvIHNlZSBpZiBpdCBpcyBhbiBlbnRpdHlcbiAgICBpZiAobm9kZS5oYXNQcm9wZXJ0eShQcm9wZXJ0aWVzLlBPU1NFU1NJVkUpIHx8IG5vZGUuaGFzUHJvcGVydHkoUHJvcGVydGllcy5CQUNLUkVMQVRJT05TSElQKSkge1xuICAgICAgbGV0IGVudGl0eSA9IGZpbmRFdmVFbnRpdHkoYCR7YXR0cmlidXRlLnZhbHVlfWApO1xuICAgICAgaWYgKGVudGl0eSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5vZGUuZW50aXR5ID0gZW50aXR5O1xuICAgICAgICBlbnRpdHkudmFyaWFibGUgPSBhdHRyaWJ1dGUudmFyaWFibGU7XG4gICAgICAgIGVudGl0eS5lbnRpdHlBdHRyaWJ1dGUgPSB0cnVlO1xuICAgICAgICBlbnRpdHkubm9kZSA9IG5vZGU7XG4gICAgICAgIG5vZGUucGFyZW50LmVudGl0eS5wcm9qZWN0ID0gZmFsc2U7XG4gICAgICAgIGF0dHJpYnV0ZS5wcm9qZWN0ID0gZmFsc2U7XG4gICAgICAgIGNvbnRleHQuZW50aXRpZXMucHVzaChlbnRpdHkpOyBcbiAgICAgICAgbm9kZS5wcm9wZXJ0aWVzLnB1c2goUHJvcGVydGllcy5FTlRJVFkpO1xuICAgICAgfVxuICAgIH1cbiAgICBub2RlLmZvdW5kID0gdHJ1ZTtcbiAgICBsZXQgZW50aXR5Tm9kZSA9IGVudGl0eS5ub2RlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLy8gc2VhcmNoZXMgZm9yIGEgY29sbGVjdGlvbiBmaXJzdCwgdGhlbiB0cmllcyB0byBmaW5kIGFuIGVudGl0eVxuZnVuY3Rpb24gZmluZENvbGxlY3Rpb25PckVudGl0eShub2RlOiBOb2RlLCBjb250ZXh0OiBDb250ZXh0KTogYm9vbGVhbiB7XG4gIGxldCBmb3VuZENvbGxlY3Rpb24gPSBmaW5kQ29sbGVjdGlvbihub2RlLGNvbnRleHQpO1xuICBpZiAoZm91bmRDb2xsZWN0aW9uID09PSB0cnVlKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSB7XG4gICAgbGV0IGZvdW5kRW50aXR5ID0gZmluZEVudGl0eShub2RlLGNvbnRleHQpO1xuICAgIGlmIChmb3VuZEVudGl0eSA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLy8gc2VhcmNoZXMgZm9yIGEgY29sbGVjdGlvbiBmaXJzdCwgdGhlbiB0cmllcyB0byBmaW5kIGFuIGVudGl0eVxuZnVuY3Rpb24gZmluZEVudGl0eU9yQ29sbGVjdGlvbihub2RlOiBOb2RlLCBjb250ZXh0OiBDb250ZXh0KTogYm9vbGVhbiB7XG4gIGxldCBmb3VuZEVudGl0eSA9IGZpbmRFbnRpdHkobm9kZSxjb250ZXh0KTtcbiAgaWYgKGZvdW5kRW50aXR5ID09PSB0cnVlKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSB7XG4gICAgbGV0IGZvdW5kQ29sbGVjdGlvbiA9IGZpbmRDb2xsZWN0aW9uKG5vZGUsY29udGV4dCk7XG4gICAgaWYgKGZvdW5kQ29sbGVjdGlvbiA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZmluZENvbGxlY3Rpb24obm9kZTogTm9kZSwgY29udGV4dDogQ29udGV4dCk6IGJvb2xlYW4ge1xuICBsZXQgY29sbGVjdGlvbiA9IGZpbmRFdmVDb2xsZWN0aW9uKG5vZGUubmFtZSk7XG4gIGlmIChjb2xsZWN0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICBjb250ZXh0LmNvbGxlY3Rpb25zLnB1c2goY29sbGVjdGlvbik7XG4gICAgY29sbGVjdGlvbi5ub2RlID0gbm9kZTtcbiAgICBub2RlLmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xuICAgIG5vZGUuZm91bmQgPSB0cnVlO1xuICAgIG5vZGUucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuQ09MTEVDVElPTilcbiAgICBpZiAobm9kZS5oYXNQcm9wZXJ0eShQcm9wZXJ0aWVzLkdST1VQSU5HKSkge1xuICAgICAgY29udGV4dC5ncm91cGluZ3MucHVzaChub2RlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBmaW5kRW50aXR5KG5vZGU6IE5vZGUsIGNvbnRleHQ6IENvbnRleHQpOiBib29sZWFuIHtcbiAgbGV0IGVudGl0eSA9IGZpbmRFdmVFbnRpdHkobm9kZS5uYW1lKTtcbiAgaWYgKGVudGl0eSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY29udGV4dC5lbnRpdGllcy5wdXNoKGVudGl0eSk7XG4gICAgZW50aXR5Lm5vZGUgPSBub2RlO1xuICAgIG5vZGUuZW50aXR5ID0gZW50aXR5O1xuICAgIG5vZGUuZm91bmQgPSB0cnVlO1xuICAgIG5vZGUucHJvcGVydGllcy5wdXNoKFByb3BlcnRpZXMuRU5USVRZKVxuICAgIGlmIChub2RlLmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuR1JPVVBJTkcpKSB7XG4gICAgICBjb250ZXh0Lmdyb3VwaW5ncy5wdXNoKG5vZGUpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFF1ZXJ5IGZ1bmN0aW9uc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5pbnRlcmZhY2UgRmllbGQge1xuICBuYW1lOiBzdHJpbmcsXG4gIHZhbHVlOiBzdHJpbmcgfCBudW1iZXIsXG4gIHZhcmlhYmxlOiBib29sZWFuLFxufVxuXG5pbnRlcmZhY2UgVGVybSB7XG4gIHR5cGU6IHN0cmluZyxcbiAgdGFibGU/OiBzdHJpbmcsXG4gIGZpZWxkczogQXJyYXk8RmllbGQ+XG4gIHByb2plY3Q/OiBBcnJheTxzdHJpbmc+LFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5IHtcbiAgdHlwZTogc3RyaW5nLFxuICB0ZXJtczogQXJyYXk8VGVybT4sXG4gIHN1YnF1ZXJpZXM6IEFycmF5PFF1ZXJ5PixcbiAgcHJvamVjdHM6IEFycmF5PFRlcm0+LFxuICB0b1N0cmluZyhudW1iZXI/OiBudW1iZXIpOiBzdHJpbmc7XG59XG5cblxuZnVuY3Rpb24gbmVnYXRlVGVybSh0ZXJtOiBUZXJtKTogUXVlcnkge1xuICBsZXQgbmVnYXRlID0gbmV3UXVlcnkoW3Rlcm1dKTtcbiAgbmVnYXRlLnR5cGUgPSBcIm5lZ2F0ZVwiO1xuICByZXR1cm4gbmVnYXRlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbmV3UXVlcnkodGVybXM/OiBBcnJheTxUZXJtPiwgc3VicXVlcmllcz86IEFycmF5PFF1ZXJ5PiwgcHJvamVjdHM/OiBBcnJheTxUZXJtPik6IFF1ZXJ5IHtcbiAgaWYgKHRlcm1zID09PSB1bmRlZmluZWQpIHtcbiAgICB0ZXJtcyA9IFtdO1xuICB9XG4gIGlmIChzdWJxdWVyaWVzID09PSB1bmRlZmluZWQpIHtcbiAgICBzdWJxdWVyaWVzID0gW107XG4gIH1cbiAgaWYgKHByb2plY3RzID09PSB1bmRlZmluZWQpIHtcbiAgICBwcm9qZWN0cyA9IFtdO1xuICB9XG4gIC8vIERlZHVwZSB0ZXJtc1xuICBsZXQgdGVybVN0cmluZ3MgPSB0ZXJtcy5tYXAodGVybVRvU3RyaW5nKTtcbiAgbGV0IHVuaXF1ZVRlcm1zOiBBcnJheTxib29sZWFuPiA9IHRlcm1TdHJpbmdzLm1hcCgodmFsdWUsIGluZGV4LCBzZWxmKSA9PiB7XG4gICAgcmV0dXJuIHNlbGYuaW5kZXhPZih2YWx1ZSkgPT09IGluZGV4O1xuICB9KTsgXG4gIHRlcm1zID0gdGVybXMuZmlsdGVyKCh0ZXJtLCBpbmRleCkgPT4gdW5pcXVlVGVybXNbaW5kZXhdKTtcbiAgbGV0IHF1ZXJ5OiBRdWVyeSA9IHtcbiAgICB0eXBlOiBcInF1ZXJ5XCIsXG4gICAgdGVybXM6IHRlcm1zLFxuICAgIHN1YnF1ZXJpZXM6IHN1YnF1ZXJpZXMsXG4gICAgcHJvamVjdHM6IHByb2plY3RzLFxuICAgIHRvU3RyaW5nOiBxdWVyeVRvU3RyaW5nLFxuICB9XG4gIGZ1bmN0aW9uIHF1ZXJ5VG9TdHJpbmcoZGVwdGg/OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmIChxdWVyeS50ZXJtcy5sZW5ndGggPT09IDAgJiYgcXVlcnkucHJvamVjdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gICAgaWYgKGRlcHRoID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGRlcHRoID0gMDtcbiAgICB9XG4gICAgbGV0IGluZGVudCA9IEFycmF5KGRlcHRoKzEpLmpvaW4oXCJcXHRcIik7XG4gICAgbGV0IHF1ZXJ5U3RyaW5nID0gaW5kZW50ICsgXCIoXCI7XG4gICAgLy8gTWFwIGVhY2ggdGVybS9zdWJxdWVyeS9wcm9qZWN0IHRvIGEgc3RyaW5nXG4gICAgbGV0IHR5cGVTdHJpbmcgPSBxdWVyeS50eXBlO1xuICAgIGxldCB0ZXJtU3RyaW5nID0gcXVlcnkudGVybXMubWFwKCh0ZXJtKSA9PiB0ZXJtVG9TdHJpbmcodGVybSxkZXB0aCsxKSkuam9pbihcIlxcblwiKTtcbiAgICBsZXQgc3VicXVlcmllc1N0cmluZyA9IHF1ZXJ5LnN1YnF1ZXJpZXMubWFwKChxdWVyeSkgPT4gcXVlcnkudG9TdHJpbmcoZGVwdGggKyAxKSkuam9pbihcIlxcblwiKTtcbiAgICBsZXQgcHJvamVjdHNTdHJpbmcgPSBxdWVyeS5wcm9qZWN0cy5tYXAoKHRlcm0pID0+IHRlcm1Ub1N0cmluZyh0ZXJtLGRlcHRoKzEpKS5qb2luKFwiXFxuXCIpO1xuICAgIC8vIE5vdyBjb21wb3NlIHRoZSBxdWVyeSBzdHJpbmdcbiAgICBxdWVyeVN0cmluZyArPSB0eXBlU3RyaW5nO1xuICAgIHF1ZXJ5U3RyaW5nICs9IHRlcm1TdHJpbmcgPT09IFwiXCIgPyBcIlwiIDogXCJcXG5cIiArIHRlcm1TdHJpbmc7XG4gICAgcXVlcnlTdHJpbmcgKz0gc3VicXVlcmllc1N0cmluZyA9PT0gXCJcIiA/IFwiXCIgOiBcIlxcblwiICsgc3VicXVlcmllc1N0cmluZztcbiAgICBxdWVyeVN0cmluZyArPSBwcm9qZWN0c1N0cmluZyA9PT0gXCJcIiA/IFwiXCIgOiBcIlxcblwiICsgcHJvamVjdHNTdHJpbmc7XG4gICAgLy8gQ2xvc2Ugb3V0IHRoZSBxdWVyeVxuICAgIHF1ZXJ5U3RyaW5nICs9IFwiXFxuXCIgKyBpbmRlbnQgKyBcIilcIjtcbiAgICByZXR1cm4gcXVlcnlTdHJpbmc7XG4gIH1cbiAgZnVuY3Rpb24gdGVybVRvU3RyaW5nKHRlcm06IFRlcm0sIGRlcHRoPzogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAoZGVwdGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgZGVwdGggPSAwO1xuICAgIH1cbiAgICBsZXQgaW5kZW50ID0gQXJyYXkoZGVwdGgrMSkuam9pbihcIlxcdFwiKTtcbiAgICBsZXQgdGVybVN0cmluZyA9IGluZGVudCArIFwiKFwiO1xuICAgIHRlcm1TdHJpbmcgKz0gYCR7dGVybS50eXBlfSBgO1xuICAgIHRlcm1TdHJpbmcgKz0gYCR7dGVybS50YWJsZSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IGBcIiR7dGVybS50YWJsZX1cIiBgfWA7XG4gICAgdGVybVN0cmluZyArPSB0ZXJtLmZpZWxkcy5tYXAoKGZpZWxkKSA9PiBgOiR7ZmllbGQubmFtZX0gJHtmaWVsZC52YXJpYWJsZSA/IGZpZWxkLnZhbHVlIDogYFwiJHtmaWVsZC52YWx1ZX1cImB9YCkuam9pbihcIiBcIik7XG4gICAgdGVybVN0cmluZyArPSBcIilcIjtcbiAgICByZXR1cm4gdGVybVN0cmluZztcbiAgfVxuICByZXR1cm4gcXVlcnk7XG59XG5cblxuZnVuY3Rpb24gZm9ybVF1ZXJ5KG5vZGU6IE5vZGUpOiBRdWVyeSB7XG4gIGxldCBxdWVyeTogUXVlcnkgPSBuZXdRdWVyeSgpO1xuICBsZXQgcHJvamVjdEZpZWxkczogQXJyYXk8RmllbGQ+ID0gW107XG4gIFxuICAvLyBIYW5kbGUgdGhlIGNoaWxkIG5vZGVzXG4gIFxuICBsZXQgY2hpbGRRdWVyaWVzID0gbm9kZS5jaGlsZHJlbi5tYXAoZm9ybVF1ZXJ5KTtcbiAgLy8gU3Vic3VtZSBjaGlsZCBxdWVyaWVzXG4gIGxldCBjb21iaW5lZFByb2plY3RGaWVsZHM6IEFycmF5PEZpZWxkPiA9IFtdO1xuICBmb3IgKGxldCBjUXVlcnkgb2YgY2hpbGRRdWVyaWVzKSB7XG4gICAgcXVlcnkudGVybXMgPSBxdWVyeS50ZXJtcy5jb25jYXQoY1F1ZXJ5LnRlcm1zKTtcbiAgICBxdWVyeS5zdWJxdWVyaWVzID0gcXVlcnkuc3VicXVlcmllcy5jb25jYXQoY1F1ZXJ5LnN1YnF1ZXJpZXMpO1xuICAgIC8vIENvbWJpbmUgdW5uYW1lZCBwcm9qZWN0c1xuICAgIGZvciAobGV0IHByb2plY3Qgb2YgY1F1ZXJ5LnByb2plY3RzKSB7XG4gICAgICBpZiAocHJvamVjdC50YWJsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbWJpbmVkUHJvamVjdEZpZWxkcyA9IGNvbWJpbmVkUHJvamVjdEZpZWxkcy5jb25jYXQocHJvamVjdC5maWVsZHMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoY29tYmluZWRQcm9qZWN0RmllbGRzLmxlbmd0aCA+IDApIHtcbiAgICBsZXQgcHJvamVjdCA9IHtcbiAgICAgIHR5cGU6IFwicHJvamVjdCFcIixcbiAgICAgIGZpZWxkczogY29tYmluZWRQcm9qZWN0RmllbGRzLFxuICAgIH1cbiAgICBxdWVyeS5wcm9qZWN0cy5wdXNoKHByb2plY3QpO1xuICB9XG4gIC8vIElmIHRoZSBub2RlIGlzIGEgZ3JvdXBpbmcgbm9kZSwgc3R1ZmYgdGhlIHF1ZXJ5IGludG8gYSBzdWJxdWVyeVxuICAvLyBhbmQgdGFrZSBpdHMgcHJvamVjdHNcbiAgaWYgKG5vZGUuaGFzUHJvcGVydHkoUHJvcGVydGllcy5HUk9VUElORykpIHtcbiAgICBsZXQgc3VicXVlcnkgPSBxdWVyeTtcbiAgICBxdWVyeSA9IG5ld1F1ZXJ5KCk7XG4gICAgcXVlcnkucHJvamVjdHMgPSBxdWVyeS5wcm9qZWN0cy5jb25jYXQoc3VicXVlcnkucHJvamVjdHMpO1xuICAgIHN1YnF1ZXJ5LnByb2plY3RzID0gW107XG4gICAgcXVlcnkuc3VicXVlcmllcy5wdXNoKHN1YnF1ZXJ5KTtcbiAgfVxuICBcbiAgLy8gSGFuZGxlIHRoZSBjdXJyZW50IG5vZGVcbiAgXG4gIC8vIEp1c3QgcmV0dXJuIGF0IHRoZSByb290XG4gIGlmIChub2RlLmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuUk9PVCkpIHtcbiAgICAvLyBSZXZlcnNlIHRoZSBvcmRlciBvZiBmaWVsZHMgaW4gdGhlIHByb2plY3RzXG4gICAgZm9yIChsZXQgcHJvamVjdCBvZiBxdWVyeS5wcm9qZWN0cykge1xuICAgICAgcHJvamVjdC5maWVsZHMgPSBwcm9qZWN0LmZpZWxkcy5yZXZlcnNlKCk7XG4gICAgfVxuICAgIHJldHVybiBxdWVyeTtcbiAgfVxuICAvLyBIYW5kbGUgZnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgaWYgKG5vZGUuZnhuICE9PSB1bmRlZmluZWQpIHtcbiAgICAvLyBTa2lwIGZ1bmN0aW9ucyB3aXRoIG5vIGFyZ3VtZW50c1xuICAgIGlmIChub2RlLmZ4bi5maWVsZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gcXVlcnk7XG4gICAgfVxuICAgIFxuICAgIC8vIENvbGxlY3Rpb24gYWxsIGlucHV0IGFuZCBvdXRwdXQgbm9kZXMgd2hpY2ggd2VyZSBmb3VuZFxuICAgIGxldCBuZXN0ZWRBcmdzID0gbm9kZS5jaGlsZHJlbi5maWx0ZXIoKGNoaWxkKSA9PiAoY2hpbGQuaGFzUHJvcGVydHkoUHJvcGVydGllcy5JTlBVVCkgfHwgY2hpbGQuaGFzUHJvcGVydHkoUHJvcGVydGllcy5PVVRQVVQpKSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGNoaWxkLmZvdW5kID09PSB0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZmluZExlYWZOb2Rlcyk7XG4gICAgbGV0IGFyZ3MgPSBmbGF0dGVuTmVzdGVkQXJyYXkobmVzdGVkQXJncyk7XG5cbiAgICAvLyBJZiB3ZSBoYXZlIHRoZSByaWdodCBudW1iZXIgb2YgYXJndW1lbnRzLCBwcm9jZWVkXG4gICAgLy8gQFRPRE8gc3VyZmFjZSBhbiBlcnJvciBpZiB0aGUgYXJndW1lbnRzIGFyZSB3cm9uZ1xuICAgIGxldCBvdXRwdXQ7XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSBub2RlLmZ4bi5maWVsZHMubGVuZ3RoKSB7XG4gICAgICBsZXQgZmllbGRzOiBBcnJheTxGaWVsZD4gPSBhcmdzLm1hcCgoYXJnLGkpID0+IHtcbiAgICAgICAgcmV0dXJuIHtuYW1lOiBgJHtub2RlLmZ4bi5maWVsZHNbaV19YCwgXG4gICAgICAgICAgICAgICB2YWx1ZTogYCR7YXJnLmF0dHJpYnV0ZS52YXJpYWJsZX1gLCBcbiAgICAgICAgICAgIHZhcmlhYmxlOiB0cnVlfTtcbiAgICAgIH0pO1xuICAgICAgbGV0IHRlcm06IFRlcm0gPSB7XG4gICAgICAgIHR5cGU6IFwic2VsZWN0XCIsXG4gICAgICAgIHRhYmxlOiBub2RlLmZ4bi5uYW1lLFxuICAgICAgICBmaWVsZHM6IGZpZWxkcyxcbiAgICAgIH1cbiAgICAgIC8vIElmIGFuIGFnZ3JlZ2F0ZSBpcyBncm91cGVkLCB3ZSBoYXZlIHRvIHB1c2ggdGhlIGFnZ3JlZ2F0ZSBpbnRvIGEgc3VicXVlcnlcbiAgICAgIGlmIChub2RlLmZ4bi50eXBlID09PSBGdW5jdGlvblR5cGVzLkFHR1JFR0FURSAmJiBxdWVyeS5zdWJxdWVyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbGV0IHN1YnF1ZXJ5ID0gcXVlcnkuc3VicXVlcmllc1swXTtcbiAgICAgICAgaWYgKHN1YnF1ZXJ5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzdWJxdWVyeS50ZXJtcy5wdXNoKHRlcm0pO1xuICAgICAgICB9IFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcXVlcnkudGVybXMucHVzaCh0ZXJtKTsgIFxuICAgICAgfVxuICAgICAgLy8gcHJvamVjdCBvdXRwdXQgaWYgbmVjZXNzYXJ5XG4gICAgICBpZiAobm9kZS5meG4ucHJvamVjdCA9PT0gdHJ1ZSkge1xuICAgICAgICBsZXQgb3V0cHV0RmllbGRzOiBBcnJheTxGaWVsZD4gPSBhcmdzLmZpbHRlcigoYXJnKSA9PiBhcmcuaGFzUHJvcGVydHkoUHJvcGVydGllcy5PVVRQVVQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChhcmcpID0+IHtyZXR1cm4ge25hbWU6IGAke25vZGUuZnhuLm5hbWV9YCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYCR7YXJnLmF0dHJpYnV0ZS52YXJpYWJsZX1gLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZTogdHJ1ZX19KTtcbiAgICAgICAgcHJvamVjdEZpZWxkcyA9IHByb2plY3RGaWVsZHMuY29uY2F0KG91dHB1dEZpZWxkcyk7XG4gICAgICAgIHF1ZXJ5LnByb2plY3RzID0gW107XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIEhhbmRsZSBhdHRyaWJ1dGVzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgaWYgKG5vZGUuYXR0cmlidXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICBsZXQgYXR0ciA9IG5vZGUuYXR0cmlidXRlO1xuICAgIGxldCBlbnRpdHkgPSBhdHRyLmVudGl0eTtcbiAgICBsZXQgY29sbGVjdGlvbiA9IGF0dHIuY29sbGVjdGlvbjtcbiAgICBsZXQgZmllbGRzOiBBcnJheTxGaWVsZD4gPSBbXTtcbiAgICBsZXQgZW50aXR5RmllbGQ6IEZpZWxkO1xuICAgIC8vIEVudGl0eVxuICAgIGlmIChlbnRpdHkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZW50aXR5RmllbGQgPSB7bmFtZTogXCJlbnRpdHlcIiwgXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBgJHthdHRyLmVudGl0eS5lbnRpdHlBdHRyaWJ1dGUgPyBhdHRyLmVudGl0eS52YXJpYWJsZSA6IGF0dHIuZW50aXR5LmlkfWAsIFxuICAgICAgICAgICAgICAgICB2YXJpYWJsZTogYXR0ci5lbnRpdHkuZW50aXR5QXR0cmlidXRlfTtcbiAgICB9IGVsc2UgaWYgKGNvbGxlY3Rpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgZW50aXR5RmllbGQgPSB7bmFtZTogXCJlbnRpdHlcIiwgXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBgJHthdHRyLmNvbGxlY3Rpb24uZGlzcGxheU5hbWV9YCwgXG4gICAgICAgICAgICAgICAgIHZhcmlhYmxlOiB0cnVlfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHF1ZXJ5O1xuICAgIH1cbiAgICBmaWVsZHMucHVzaChlbnRpdHlGaWVsZCk7XG4gICAgLy8gQXR0cmlidXRlXG4gICAgaWYgKGF0dHIuaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgbGV0IGF0dHJGaWVsZDogRmllbGQgPSB7bmFtZTogXCJhdHRyaWJ1dGVcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXR0ci5pZCwgXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlOiBmYWxzZX07XG4gICAgICBmaWVsZHMucHVzaChhdHRyRmllbGQpO1xuICAgIH1cbiAgICAvLyBWYWx1ZVxuICAgIGxldCB2YWx1ZUZpZWxkOiBGaWVsZCA9IHtuYW1lOiBcInZhbHVlXCIsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhdHRyLmlkID09PSB1bmRlZmluZWQgPyBhdHRyLnZhbHVlIDogYXR0ci52YXJpYWJsZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGU6IGF0dHIuaWQgIT09IHVuZGVmaW5lZH07XG4gICAgZmllbGRzLnB1c2godmFsdWVGaWVsZCk7XG4gICAgbGV0IHRlcm06IFRlcm0gPSB7XG4gICAgICB0eXBlOiBcInNlbGVjdFwiLFxuICAgICAgdGFibGU6IFwiZW50aXR5IGVhdnNcIixcbiAgICAgIGZpZWxkczogZmllbGRzLFxuICAgIH1cbiAgICBxdWVyeS50ZXJtcy5wdXNoKHRlcm0pO1xuICAgIC8vIHByb2plY3QgaWYgbmVjZXNzYXJ5XG4gICAgaWYgKG5vZGUuYXR0cmlidXRlLnByb2plY3QgPT09IHRydWUgJiYgIW5vZGUuaGFzUHJvcGVydHkoUHJvcGVydGllcy5ORUdBVEVTKSkge1xuICAgICAgbGV0IGF0dHJpYnV0ZUZpZWxkOiBGaWVsZCA9IHtuYW1lOiBgJHtub2RlLmF0dHJpYnV0ZS5pZH1gICwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5vZGUuYXR0cmlidXRlLnZhcmlhYmxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZTogdHJ1ZX07XG4gICAgICBwcm9qZWN0RmllbGRzLnB1c2goYXR0cmlidXRlRmllbGQpO1xuICAgIH1cbiAgfVxuICAvLyBIYW5kbGUgY29sbGVjdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBpZiAobm9kZS5jb2xsZWN0aW9uICE9PSB1bmRlZmluZWQgJiYgIW5vZGUuaGFzUHJvcGVydHkoUHJvcGVydGllcy5QUk9OT1VOKSkge1xuICAgIGxldCBlbnRpdHlGaWVsZDogRmllbGQgPSB7bmFtZTogXCJlbnRpdHlcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBub2RlLmNvbGxlY3Rpb24udmFyaWFibGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZTogdHJ1ZX07XG4gICAgbGV0IGNvbGxlY3Rpb25GaWVsZDogRmllbGQgPSB7bmFtZTogXCJjb2xsZWN0aW9uXCIsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5vZGUuY29sbGVjdGlvbi5pZCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZTogZmFsc2V9O1xuICAgIGxldCB0ZXJtOiBUZXJtID0ge1xuICAgICAgdHlwZTogXCJzZWxlY3RcIixcbiAgICAgIHRhYmxlOiBcImlzIGEgYXR0cmlidXRlc1wiLFxuICAgICAgZmllbGRzOiBbZW50aXR5RmllbGQsIGNvbGxlY3Rpb25GaWVsZF0sXG4gICAgfVxuICAgIHF1ZXJ5LnRlcm1zLnB1c2godGVybSk7XG4gICAgLy8gcHJvamVjdCBpZiBuZWNlc3NhcnlcbiAgICBpZiAobm9kZS5jb2xsZWN0aW9uLnByb2plY3QgPT09IHRydWUgJiYgIW5vZGUuaGFzUHJvcGVydHkoUHJvcGVydGllcy5ORUdBVEVTKSkge1xuICAgICAgbGV0IGNvbGxlY3Rpb25GaWVsZDogRmllbGQgPSB7bmFtZTogYCR7bm9kZS5jb2xsZWN0aW9uLmRpc3BsYXlOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cChcIiBcIiwgJ2cnKSxcIlwiKX1gLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGAke25vZGUuY29sbGVjdGlvbi52YXJpYWJsZX1gLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGU6IHRydWV9O1xuICAgICAgcHJvamVjdEZpZWxkcy5wdXNoKGNvbGxlY3Rpb25GaWVsZCk7XG4gICAgfVxuICB9XG4gIC8vIEhhbmRsZSBlbnRpdGllcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGlmIChub2RlLmVudGl0eSAhPT0gdW5kZWZpbmVkICYmICFub2RlLmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuUFJPTk9VTikpIHtcbiAgICAvLyBwcm9qZWN0IGlmIG5lY2Vzc2FyeVxuICAgIGlmIChub2RlLmVudGl0eS5wcm9qZWN0ID09PSB0cnVlKSB7XG4gICAgICBsZXQgZW50aXR5RmllbGQ6IEZpZWxkID0ge25hbWU6IGAke25vZGUuZW50aXR5LmRpc3BsYXlOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cChcIiBcIiwgJ2cnKSxcIlwiKX1gLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYCR7bm9kZS5lbnRpdHkuZW50aXR5QXR0cmlidXRlID8gbm9kZS5lbnRpdHkudmFyaWFibGUgOiBub2RlLmVudGl0eS5pZH1gLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZTogbm9kZS5lbnRpdHkuZW50aXR5QXR0cmlidXRlfTtcbiAgICAgIHByb2plY3RGaWVsZHMucHVzaChlbnRpdHlGaWVsZCk7ICBcbiAgICB9XG4gIH1cbiAgbGV0IHByb2plY3QgPSB7XG4gICAgdHlwZTogXCJwcm9qZWN0IVwiLFxuICAgIGZpZWxkczogcHJvamVjdEZpZWxkcywgXG4gIH1cbiAgXG4gIGlmIChub2RlLmhhc1Byb3BlcnR5KFByb3BlcnRpZXMuTkVHQVRFUykpIHtcbiAgICBsZXQgbmVnYXRlZFRlcm0gPSBxdWVyeS50ZXJtcy5wb3AoKTtcbiAgICBsZXQgbmVnYXRlZFF1ZXJ5ID0gbmVnYXRlVGVybShuZWdhdGVkVGVybSk7XG4gICAgcXVlcnkuc3VicXVlcmllcy5wdXNoKG5lZ2F0ZWRRdWVyeSk7XG4gIH1cbiAgXG4gIHF1ZXJ5LnByb2plY3RzLnB1c2gocHJvamVjdCk7XG4gIHJldHVybiBxdWVyeTtcbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gRGVidWcgdXRpbGl0eSBmdW5jdGlvbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gXG5sZXQgZGl2aWRlciA9IFwiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIjtcblxuZXhwb3J0IGxldCBkZWJ1ZyA9IGZhbHNlO1xuXG5mdW5jdGlvbiBsb2coeDogYW55KSB7XG4gIGlmIChkZWJ1Zykge1xuICAgIGNvbnNvbGUubG9nKHgpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub2RlQXJyYXlUb1N0cmluZyhub2RlczogQXJyYXk8Tm9kZT4pOiBzdHJpbmcge1xuICBsZXQgbm9kZUFycmF5U3RyaW5nID0gbm9kZXMubWFwKChub2RlKSA9PiBub2RlLnRvU3RyaW5nKCkpLmpvaW4oXCJcXG5cIiArIGRpdmlkZXIgKyBcIlxcblwiKTsgIFxuICByZXR1cm4gZGl2aWRlciArIFwiXFxuXCIgKyBub2RlQXJyYXlTdHJpbmcgKyBcIlxcblwiICsgZGl2aWRlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRva2VuVG9TdHJpbmcodG9rZW46IFRva2VuKTogc3RyaW5nIHtcbiAgbGV0IHByb3BlcnRpZXMgPSBgKCR7dG9rZW4ucHJvcGVydGllcy5tYXAoKHByb3BlcnR5OiBQcm9wZXJ0aWVzKSA9PiBQcm9wZXJ0aWVzW3Byb3BlcnR5XSkuam9pbihcInxcIil9KWA7XG4gIHByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzLmxlbmd0aCA9PT0gMiA/IFwiXCIgOiBwcm9wZXJ0aWVzO1xuICBsZXQgdG9rZW5TcGFuID0gdG9rZW4uc3RhcnQgPT09IHVuZGVmaW5lZCA/IFwiIFwiIDogYCBbJHt0b2tlbi5zdGFydH0tJHt0b2tlbi5lbmR9XSBgO1xuICBsZXQgdG9rZW5TdHJpbmcgPSBgJHt0b2tlbi5peH06ICR7dG9rZW4ub3JpZ2luYWxXb3JkfSB8ICR7dG9rZW4ubm9ybWFsaXplZFdvcmR9IHwgJHtNYWpvclBhcnRzT2ZTcGVlY2hbZ2V0TWFqb3JQT1ModG9rZW4uUE9TKV19IHwgJHtNaW5vclBhcnRzT2ZTcGVlY2hbdG9rZW4uUE9TXX0gfCAke3Byb3BlcnRpZXN9YCA7XG4gIHJldHVybiB0b2tlblN0cmluZztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRva2VuQXJyYXlUb1N0cmluZyh0b2tlbnM6IEFycmF5PFRva2VuPik6IHN0cmluZyB7XG4gIGxldCB0b2tlbkFycmF5U3RyaW5nID0gdG9rZW5zLm1hcCgodG9rZW4pID0+IHRva2VuVG9TdHJpbmcodG9rZW4pKS5qb2luKFwiXFxuXCIpO1xuICByZXR1cm4gZGl2aWRlciArIFwiXFxuXCIgKyB0b2tlbkFycmF5U3RyaW5nICsgXCJcXG5cIiArIGRpdmlkZXI7XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFV0aWxpdHkgZnVuY3Rpb25zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmZ1bmN0aW9uIGZsYXR0ZW5OZXN0ZWRBcnJheShuZXN0ZWRBcnJheTogQXJyYXk8QXJyYXk8YW55Pj4pOiBBcnJheTxhbnk+IHtcbiAgbGV0IGZsYXR0ZW5lZDogQXJyYXk8YW55PiA9IFtdLmNvbmNhdC5hcHBseShbXSxuZXN0ZWRBcnJheSk7XG4gIHJldHVybiBmbGF0dGVuZWQ7XG59XG5cbmZ1bmN0aW9uIG9ubHlVbmlxdWUodmFsdWUsIGluZGV4LCBzZWxmKSB7IFxuICByZXR1cm4gc2VsZi5pbmRleE9mKHZhbHVlKSA9PT0gaW5kZXg7XG59XG5cbmZ1bmN0aW9uIGFycmF5SW50ZXJzZWN0KGEsIGIpIHtcbiAgbGV0IGFpID0gMDtcbiAgbGV0IGJpID0gMDtcbiAgbGV0IHJlc3VsdCA9IFtdO1xuICB3aGlsZSAoYWkgPCBhLmxlbmd0aCAmJiBiaSA8IGIubGVuZ3RoKSB7XG4gICAgaWYgKGFbYWldIDwgYltiaV0pIGFpKys7XG4gICAgZWxzZSBpZiAoYVthaV0gPiBiW2JpXSkgYmkrKztcbiAgICBlbHNlIHtcbiAgICAgIHJlc3VsdC5wdXNoKGFbYWldKTtcbiAgICAgIGFpKys7XG4gICAgICBiaSsrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBpc051bWVyaWMobjogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiAhaXNOYU4ocGFyc2VGbG9hdChuKSkgJiYgaXNGaW5pdGUobik7XG59XG5cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5kZWNsYXJlIHZhciBleHBvcnRzO1xud2luZG93W1wiTkxRUFwiXSA9IGV4cG9ydHM7IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIm1pY3JvUmVhY3QudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL3ZlbmRvci9tYXJrZWQuZC50c1wiIC8+XG5pbXBvcnQgKiBhcyBtaWNyb1JlYWN0IGZyb20gXCIuL21pY3JvUmVhY3RcIjtcbmltcG9ydCAqIGFzIHJ1bnRpbWUgZnJvbSBcIi4vcnVudGltZVwiO1xuaW1wb3J0IHtVSVJlbmRlcmVyfSBmcm9tIFwiLi91aVJlbmRlcmVyXCI7XG5pbXBvcnQge0VOViwgREVCVUcsIHV1aWR9IGZyb20gXCIuL3V0aWxzXCI7XG5cblxuZXhwb3J0IHZhciBzeW5jZWRUYWJsZXMgPSBbXCJtYW51YWwgZWF2XCIsIFwidmlld1wiLCBcImFjdGlvblwiLCBcImFjdGlvbiBzb3VyY2VcIiwgXCJhY3Rpb24gbWFwcGluZ1wiLCBcImFjdGlvbiBtYXBwaW5nIGNvbnN0YW50XCIsIFwiYWN0aW9uIG1hcHBpbmcgc29ydGVkXCIsIFwiYWN0aW9uIG1hcHBpbmcgbGltaXRcIiwgXCJhZGQgY29sbGVjdGlvbiBhY3Rpb25cIiwgXCJhZGQgZWF2IGFjdGlvblwiLCBcImFkZCBiaXQgYWN0aW9uXCJdO1xuZXhwb3J0IHZhciBldmVMb2NhbFN0b3JhZ2VLZXkgPSBcImV2ZVwiO1xuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gUmVuZGVyZXJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbnZhciBwZXJmU3RhdHM7XG52YXIgcGVyZlN0YXRzVWk7XG52YXIgdXBkYXRlU3RhdCA9IDA7XG5leHBvcnQgdmFyIHJlbmRlcmVyO1xuZXhwb3J0IHZhciB1aVJlbmRlcmVyO1xuZnVuY3Rpb24gaW5pdFJlbmRlcmVyKCkge1xuICByZW5kZXJlciA9IG5ldyBtaWNyb1JlYWN0LlJlbmRlcmVyKCk7XG4gIHVpUmVuZGVyZXIgPSBuZXcgVUlSZW5kZXJlcihldmUpO1xuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHJlbmRlcmVyLmNvbnRlbnQpO1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCByZW5kZXIpO1xuICBwZXJmU3RhdHNVaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHBlcmZTdGF0c1VpLmlkID0gXCJwZXJmU3RhdHNcIjtcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChwZXJmU3RhdHNVaSk7XG59XG5cbmlmKEVOViA9PT0gXCJicm93c2VyXCIpIHZhciBwZXJmb3JtYW5jZSA9IHdpbmRvd1tcInBlcmZvcm1hbmNlXCJdIHx8IHsgbm93OiAoKSA9PiAobmV3IERhdGUoKSkuZ2V0VGltZSgpIH1cblxuZXhwb3J0IHZhciByZW5kZXJSb290cyA9IHt9O1xuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgaWYoIXJlbmRlcmVyIHx8IHJlbmRlcmVyLnF1ZXVlZCkgcmV0dXJuO1xuICByZW5kZXJlci5xdWV1ZWQgPSB0cnVlO1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKSB7XG4gICAgbGV0IHN0YXRzOmFueSA9IHt9O1xuICAgIGxldCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuXG4gICAgbGV0IHRyZWVzID0gW107XG4gICAgZm9yICh2YXIgcm9vdCBpbiByZW5kZXJSb290cykge1xuICAgICAgdHJlZXMucHVzaChyZW5kZXJSb290c1tyb290XSgpKTtcbiAgICB9XG5cbiAgICBzdGF0cy5yb290ID0gKHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnQpLnRvRml4ZWQoMik7XG4gICAgaWYgKCtzdGF0cy5yb290ID4gMTApIGNvbnNvbGUuaW5mbyhcIlNsb3cgcm9vdDogXCIgKyBzdGF0cy5yb290KTtcblxuICAgIHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgbGV0IGR5bmFtaWNVSSA9IGV2ZS5maW5kKFwic3lzdGVtIHVpXCIpLm1hcCgodWkpID0+IHVpW1widGVtcGxhdGVcIl0pO1xuICAgIGlmKERFQlVHICYmIERFQlVHLlVJX0NPTVBJTEUpIHtcbiAgICAgIGNvbnNvbGUuaW5mbyhcImNvbXBpbGluZ1wiLCBkeW5hbWljVUkpO1xuICAgICAgY29uc29sZS5pbmZvKFwiKlwiLCB1aVJlbmRlcmVyLmNvbXBpbGUoZHluYW1pY1VJKSk7XG4gICAgfVxuICAgIHRyZWVzLnB1c2guYXBwbHkodHJlZXMsIHVpUmVuZGVyZXIuY29tcGlsZShkeW5hbWljVUkpKTtcbiAgICBzdGF0cy51aUNvbXBpbGUgPSAocGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydCkudG9GaXhlZCgyKTtcbiAgICBpZiAoK3N0YXRzLnVpQ29tcGlsZSA+IDEwKSBjb25zb2xlLmluZm8oXCJTbG93IHVpIGNvbXBpbGU6IFwiICsgc3RhdHMudWlDb21waWxlKTtcblxuICAgIHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgcmVuZGVyZXIucmVuZGVyKHRyZWVzKTtcbiAgICBzdGF0cy5yZW5kZXIgPSAocGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydCkudG9GaXhlZCgyKTtcbiAgICBzdGF0cy51cGRhdGUgPSB1cGRhdGVTdGF0LnRvRml4ZWQoMik7XG5cbiAgICBwZXJmU3RhdHNVaS50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgcGVyZlN0YXRzVWkudGV4dENvbnRlbnQgKz0gYHJvb3Q6ICR7c3RhdHMucm9vdH1gO1xuICAgIHBlcmZTdGF0c1VpLnRleHRDb250ZW50ICs9IGAgfCB1aSBjb21waWxlOiAke3N0YXRzLnVpQ29tcGlsZX1gO1xuICAgIHBlcmZTdGF0c1VpLnRleHRDb250ZW50ICs9IGAgfCByZW5kZXI6ICR7c3RhdHMucmVuZGVyfWA7XG4gICAgcGVyZlN0YXRzVWkudGV4dENvbnRlbnQgKz0gYCB8IHVwZGF0ZTogJHtzdGF0cy51cGRhdGV9YDtcbiAgICBwZXJmU3RhdHMgPSBzdGF0cztcblxuICAgIHJlbmRlcmVyLnF1ZXVlZCA9IGZhbHNlO1xuICB9KTtcbn1cblxudmFyIHN0b3JlUXVldWVkID0gZmFsc2U7XG5mdW5jdGlvbiBzdG9yZUxvY2FsbHkoKSB7XG4gIGlmKHN0b3JlUXVldWVkKSByZXR1cm47XG4gIHN0b3JlUXVldWVkID0gdHJ1ZTtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgbGV0IHNlcmlhbGl6ZWQgPSBldmUuc2VyaWFsaXplKHRydWUpO1xuICAgIGlmIChldmVMb2NhbFN0b3JhZ2VLZXkgPT09IFwiZXZlXCIpIHtcbiAgICAgIGZvciAobGV0IHN5bmNlZCBvZiBzeW5jZWRUYWJsZXMpIHtcbiAgICAgICAgZGVsZXRlIHNlcmlhbGl6ZWRbc3luY2VkXTtcbiAgICAgIH1cbiAgICB9XG4gICAgZGVsZXRlIHNlcmlhbGl6ZWRbXCJwcm92ZW5hbmNlXCJdO1xuICAgIGxvY2FsU3RvcmFnZVtldmVMb2NhbFN0b3JhZ2VLZXldID0gSlNPTi5zdHJpbmdpZnkoc2VyaWFsaXplZCk7XG4gICAgc3RvcmVRdWV1ZWQgPSBmYWxzZTtcbiAgfSwgMTAwMCk7XG59XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBEaXNwYXRjaFxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxubGV0IGRpc3BhdGNoZXMgPSB7fTtcblxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZShldmVudCwgZnVuYykge1xuICBpZiAoZGlzcGF0Y2hlc1tldmVudF0pIHtcbiAgICBjb25zb2xlLmVycm9yKGBPdmVyd3JpdGluZyBoYW5kbGVyIGZvciAnJHtldmVudH0nYCk7XG4gIH1cbiAgZGlzcGF0Y2hlc1tldmVudF0gPSBmdW5jO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzcGF0Y2goZXZlbnQ/OiBzdHJpbmcsIGluZm8/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9LCBkaXNwYXRjaEluZm8/KSB7XG4gIGxldCByZXN1bHQgPSBkaXNwYXRjaEluZm87XG4gIGlmICghcmVzdWx0KSB7XG4gICAgcmVzdWx0ID0gZXZlLmRpZmYoKTtcbiAgICByZXN1bHQubWV0YS5yZW5kZXIgPSB0cnVlO1xuICAgIHJlc3VsdC5tZXRhLnN0b3JlID0gdHJ1ZTtcbiAgfVxuICByZXN1bHQuZGlzcGF0Y2ggPSAoZXZlbnQsIGluZm8pID0+IHtcbiAgICByZXR1cm4gZGlzcGF0Y2goZXZlbnQsIGluZm8sIHJlc3VsdCk7XG4gIH07XG4gIHJlc3VsdC5jb21taXQgPSAoKSA9PiB7XG4gICAgdmFyIHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgLy8gcmVzdWx0LnJlbW92ZShcImJ1aWx0aW4gZW50aXR5XCIsIHtlbnRpdHk6IFwicmVuZGVyIHBlcmZvcm1hbmNlIHN0YXRpc3RpY3NcIn0pO1xuICAgIC8vIHJlc3VsdC5hZGQoXCJidWlsdGluIGVudGl0eVwiLCB7ZW50aXR5OiBcInJlbmRlciBwZXJmb3JtYW5jZSBzdGF0aXN0aWNzXCIsIGNvbnRlbnQ6IGBcbiAgICAvLyAjIFJlbmRlciBwZXJmb3JtYW5jZSBzdGF0aXN0aWNzICh7aXMgYTogc3lzdGVtfSlcbiAgICAvLyByb290OiB7cm9vdDogJHtwZXJmU3RhdHMucm9vdH19XG4gICAgLy8gdWkgY29tcGlsZToge3VpIGNvbXBpbGU6ICR7cGVyZlN0YXRzLnVpQ29tcGlsZX19XG4gICAgLy8gcmVuZGVyOiB7cmVuZGVyOiAke3BlcmZTdGF0cy5yZW5kZXJ9fVxuICAgIC8vIHVwZGF0ZToge3VwZGF0ZTogJHtwZXJmU3RhdHMudXBkYXRlfX1cbiAgICAvLyBIb3JyaWJsZSBoYWNrLCBkaXNyZWdhcmQgdGhpczoge3BlcmYgc3RhdHM6IHJlbmRlciBwZXJmb3JtYW5jZSBzdGF0aXN0aWNzfVxuICAgIC8vIGB9KTtcbiAgICBpZighcnVudGltZS5JTkNSRU1FTlRBTCkge1xuICAgICAgZXZlLmFwcGx5RGlmZihyZXN1bHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBldmUuYXBwbHlEaWZmSW5jcmVtZW50YWwocmVzdWx0KTtcbiAgICB9XG4gICAgaWYgKHJlc3VsdC5tZXRhLnJlbmRlcikge1xuICAgICAgcmVuZGVyKCk7XG4gICAgfVxuICAgIGlmIChyZXN1bHQubWV0YS5zdG9yZSkge1xuICAgICAgc3RvcmVMb2NhbGx5KCk7XG4gICAgICBpZiAoZXZlTG9jYWxTdG9yYWdlS2V5ID09PSBcImV2ZVwiKSB7XG4gICAgICAgIHNlbmRDaGFuZ2VTZXQocmVzdWx0KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlU3RhdCA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnQ7XG4gIH1cbiAgaWYoIWV2ZW50KSByZXR1cm4gcmVzdWx0O1xuICBsZXQgZnVuYyA9IGRpc3BhdGNoZXNbZXZlbnRdO1xuICBpZiAoIWZ1bmMpIHtcbiAgICBjb25zb2xlLmVycm9yKGBObyBkaXNwYXRjaGVzIGZvciAnJHtldmVudH0nIHdpdGggJHtKU09OLnN0cmluZ2lmeShpbmZvKSB9YCk7XG4gIH0gZWxzZSB7XG4gICAgZnVuYyhyZXN1bHQsIGluZm8pO1xuICB9XG4gIHJldHVybiByZXN1bHRcbn1cblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXRlXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgdmFyIGV2ZSA9IHJ1bnRpbWUuaW5kZXhlcigpO1xuZXhwb3J0IHZhciBpbml0aWFsaXplcnMgPSB7fTtcbmV4cG9ydCB2YXIgYWN0aXZlU2VhcmNoZXMgPSB7fTtcblxuZXhwb3J0IGZ1bmN0aW9uIGluaXQobmFtZSwgZnVuYykge1xuICBpbml0aWFsaXplcnNbbmFtZV0gPSBmdW5jO1xufVxuXG5mdW5jdGlvbiBleGVjdXRlSW5pdGlhbGl6ZXJzKCkge1xuICBmb3IgKGxldCBpbml0TmFtZSBpbiBpbml0aWFsaXplcnMpIHtcbiAgICBpbml0aWFsaXplcnNbaW5pdE5hbWVdKCk7XG4gIH1cbn1cblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFdlYnNvY2tldFxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxudmFyIG1lID0gdXVpZCgpO1xuaWYodGhpcy5sb2NhbFN0b3JhZ2UpIHtcbiAgaWYobG9jYWxTdG9yYWdlW1wibWVcIl0pIG1lID0gbG9jYWxTdG9yYWdlW1wibWVcIl07XG4gIGVsc2UgbG9jYWxTdG9yYWdlW1wibWVcIl0gPSBtZTtcbn1cblxuZXhwb3J0IHZhciBzb2NrZXQ7XG5mdW5jdGlvbiBjb25uZWN0VG9TZXJ2ZXIoKSB7XG4gIHNvY2tldCA9IG5ldyBXZWJTb2NrZXQoYHdzOi8vJHt3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgfHwgXCJsb2NhbGhvc3RcIn06ODA4MGApO1xuICBzb2NrZXQub25lcnJvciA9ICgpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNvbm5lY3QgdG8gc2VydmVyLCBmYWxsaW5nIGJhY2sgdG8gbG9jYWwgc3RvcmFnZVwiKTtcbiAgICBldmVMb2NhbFN0b3JhZ2VLZXkgPSBcImxvY2FsLWV2ZVwiO1xuICAgIGV4ZWN1dGVJbml0aWFsaXplcnMoKTtcbiAgICByZW5kZXIoKTtcbiAgfVxuICBzb2NrZXQub25vcGVuID0gKCkgPT4ge1xuICAgIHNlbmRTZXJ2ZXIoXCJjb25uZWN0XCIsIG1lKTtcbiAgfVxuICBzb2NrZXQub25tZXNzYWdlID0gKGRhdGEpID0+IHtcbiAgICBsZXQgcGFyc2VkID0gSlNPTi5wYXJzZShkYXRhLmRhdGEpO1xuICAgIGNvbnNvbGUubG9nKFwiV1MgTUVTU0FHRTpcIiwgcGFyc2VkKTtcblxuICAgIGlmIChwYXJzZWQua2luZCA9PT0gXCJsb2FkXCIpIHtcbiAgICAgIGV2ZS5sb2FkKHBhcnNlZC5kYXRhKTtcbiAgICAgIGV4ZWN1dGVJbml0aWFsaXplcnMoKTtcbiAgICAgIHJlbmRlcigpO1xuICAgIH0gZWxzZSBpZiAocGFyc2VkLmtpbmQgPT09IFwiY2hhbmdlc2V0XCIpIHtcbiAgICAgIGxldCBkaWZmID0gZXZlLmRpZmYoKTtcbiAgICAgIGRpZmYudGFibGVzID0gcGFyc2VkLmRhdGE7XG4gICAgICBldmUuYXBwbHlEaWZmKGRpZmYpO1xuICAgICAgcmVuZGVyKCk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBzZW5kU2VydmVyKG1lc3NhZ2VLaW5kLCBkYXRhKSB7XG4gIGlmICghc29ja2V0KSByZXR1cm47XG4gIHNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHsga2luZDogbWVzc2FnZUtpbmQsIG1lLCB0aW1lOiAobmV3IERhdGUpLmdldFRpbWUoKSwgZGF0YSB9KSk7XG59XG5cbmZ1bmN0aW9uIHNlbmRDaGFuZ2VTZXQoY2hhbmdlc2V0KSB7XG4gIGlmICghc29ja2V0KSByZXR1cm47XG4gIGxldCBjaGFuZ2VzID0ge307XG4gIGxldCBzZW5kID0gZmFsc2U7XG4gIGZvciAobGV0IHRhYmxlIG9mIHN5bmNlZFRhYmxlcykge1xuICAgIGlmIChjaGFuZ2VzZXQudGFibGVzW3RhYmxlXSkge1xuICAgICAgc2VuZCA9IHRydWU7XG4gICAgICBjaGFuZ2VzW3RhYmxlXSA9IGNoYW5nZXNldC50YWJsZXNbdGFibGVdO1xuICAgIH1cbiAgfVxuICBpZiAoc2VuZCkgc2VuZFNlcnZlcihcImNoYW5nZXNldFwiLCBjaGFuZ2VzKTtcbn1cblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEdvXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuaWYoRU5WID09PSBcImJyb3dzZXJcIikge1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbihldmVudCkge1xuICAgIGluaXRSZW5kZXJlcigpO1xuICAgIGNvbm5lY3RUb1NlcnZlcigpO1xuICAgIHJlbmRlcigpO1xuICB9KTtcbn1cblxuaW5pdChcImxvYWQgZGF0YVwiLGZ1bmN0aW9uKCkge1xuICBsZXQgc3RvcmVkID0gbG9jYWxTdG9yYWdlW2V2ZUxvY2FsU3RvcmFnZUtleV07XG4gIGlmKHN0b3JlZCkge1xuICAgIGV2ZS5sb2FkKHN0b3JlZCk7XG4gIH1cbn0pO1xuXG5kZWNsYXJlIHZhciBleHBvcnRzO1xuaWYoRU5WID09PSBcImJyb3dzZXJcIikgd2luZG93W1wiYXBwXCJdID0gZXhwb3J0cztcbiIsImltcG9ydCB7dW5wYWQsIHRpdGxlY2FzZSwgYnVpbHRpbklkfSBmcm9tIFwiLi91dGlsc1wiXG5pbXBvcnQgKiBhcyBydW50aW1lIGZyb20gXCIuL3J1bnRpbWVcIlxuaW1wb3J0ICogYXMgYXBwIGZyb20gXCIuL2FwcFwiXG5pbXBvcnQge2V2ZX0gZnJvbSBcIi4vYXBwXCJcbmltcG9ydCB7VUlFbGVtLCBwYXJzZURTTCwgQXJ0aWZhY3RzfSBmcm9tIFwiLi9wYXJzZXJcIlxuaW1wb3J0IHtVSX0gZnJvbSBcIi4vdWlSZW5kZXJlclwiXG5cbmV4cG9ydCB2YXIgaXhlciA9IGV2ZTtcbmRlY2xhcmUgdmFyIHV1aWQ7XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFV0aWxpdGllc1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vLyBleHBvcnQgZnVuY3Rpb24gVUlGcm9tRFNMKHN0cjpzdHJpbmcpOlVJIHtcbi8vICAgZnVuY3Rpb24gcHJvY2Vzc0VsZW0oZGF0YTpVSUVsZW0pOlVJIHtcbi8vICAgICBsZXQgZWxlbSA9IG5ldyBVSShkYXRhLmlkIHx8IHV1aWQoKSk7XG4vLyAgICAgaWYoZGF0YS5iaW5kaW5nKSBlbGVtLmJpbmQoZGF0YS5iaW5kaW5nS2luZCA9PT0gXCJxdWVyeVwiID8gcGFyc2VEU0woZGF0YS5iaW5kaW5nKTtcbi8vICAgICBpZihkYXRhLmVtYmVkZGVkKSBlbGVtLmVtYmVkKGRhdGEuZW1iZWRkZWQpO1xuLy8gICAgIGlmKGRhdGEuYXR0cmlidXRlcykgZWxlbS5hdHRyaWJ1dGVzKGRhdGEuYXR0cmlidXRlcyk7XG4vLyAgICAgaWYoZGF0YS5ldmVudHMpIGVsZW0uZXZlbnRzKGRhdGEuZXZlbnRzKTtcbi8vICAgICBpZihkYXRhLmNoaWxkcmVuKSB7XG4vLyAgICAgICBmb3IobGV0IGNoaWxkIG9mIGRhdGEuY2hpbGRyZW4pIGVsZW0uY2hpbGQocHJvY2Vzc0VsZW0oY2hpbGQpKTtcbi8vICAgICB9XG4vLyAgICAgcmV0dXJuIGVsZW07XG4vLyAgIH1cbi8vICAgcmV0dXJuIHByb2Nlc3NFbGVtKHBhcnNlVUkoc3RyKSk7XG4vLyB9XG5cbmNsYXNzIEJTUGhhc2Uge1xuICBwcm90ZWN0ZWQgX3ZpZXdzOntbdmlldzpzdHJpbmddOiBzdHJpbmd9ID0ge307XG4gIHByb3RlY3RlZCBfdmlld0ZpZWxkczp7W3ZpZXc6c3RyaW5nXTogc3RyaW5nW119ID0ge307XG4gIHByb3RlY3RlZCBfZW50aXRpZXM6c3RyaW5nW10gPSBbXTtcbiAgcHJvdGVjdGVkIF91aXM6e1t1aTpzdHJpbmddOiBVSX0gPSB7fTtcbiAgcHJvdGVjdGVkIF9xdWVyaWVzOntbcXVlcnk6c3RyaW5nXTogcnVudGltZS5RdWVyeX0gPSB7fTtcbiAgcHJvdGVjdGVkIF9uYW1lczp7W25hbWU6c3RyaW5nXTogc3RyaW5nfSA9IHt9O1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBpeGVyOnJ1bnRpbWUuSW5kZXhlciwgcHVibGljIGNoYW5nZXNldCA9IGl4ZXIuZGlmZigpKSB7fVxuXG4gIHZpZXdLaW5kKHZpZXc6c3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZpZXdzW3ZpZXddO1xuICB9XG4gIHZpZXdGaWVsZHModmlldzpzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5fdmlld0ZpZWxkc1t2aWV3XTtcbiAgfVxuICBhcHBseShudWtlRXhpc3Rpbmc/OmJvb2xlYW4pIHtcbiAgICBmb3IobGV0IHZpZXcgaW4gdGhpcy5fdmlld3MpIHtcbiAgICAgIGlmKHRoaXMuX3ZpZXdzW3ZpZXddID09PSBcInRhYmxlXCIpIGl4ZXIuYWRkVGFibGUodmlldywgdGhpcy5fdmlld0ZpZWxkc1t2aWV3XSk7XG4gICAgfVxuICAgIGlmKG51a2VFeGlzdGluZykge1xuICAgICAgZm9yKGxldCB2aWV3IGluIHRoaXMuX3ZpZXdzKSB7XG4gICAgICAgIGlmKHRoaXMuX3ZpZXdzW3ZpZXddICE9PSBcInRhYmxlXCIpIHRoaXMuY2hhbmdlc2V0Lm1lcmdlKHJ1bnRpbWUuUXVlcnkucmVtb3ZlKHZpZXcsIHRoaXMuaXhlcikpO1xuICAgICAgfVxuICAgICAgZm9yKGxldCBlbnRpdHkgb2YgdGhpcy5fZW50aXRpZXMpIHRoaXMuY2hhbmdlc2V0LnJlbW92ZShcImJ1aWx0aW4gZW50aXR5XCIsIHtlbnRpdHl9KTtcbiAgICAgIGZvcihsZXQgdWkgaW4gdGhpcy5fdWlzKSB0aGlzLmNoYW5nZXNldC5tZXJnZShVSS5yZW1vdmUodWksIHRoaXMuaXhlcikpO1xuICAgIH1cbiAgICBpeGVyLmFwcGx5RGlmZih0aGlzLmNoYW5nZXNldCk7XG4gIH1cblxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIE1hY3Jvc1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGFkZEZhY3QodGFibGU6c3RyaW5nLCBmYWN0Ont9KSB7XG4gICAgdGhpcy5jaGFuZ2VzZXQuYWRkKHRhYmxlLCBmYWN0KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGFkZEVudGl0eShlbnRpdHk6c3RyaW5nLCBuYW1lOnN0cmluZywga2luZHM6c3RyaW5nW10sIGF0dHJpYnV0ZXM/Ont9LCBleHRyYUNvbnRlbnQ/OnN0cmluZykge1xuICAgIGVudGl0eSA9IGJ1aWx0aW5JZChlbnRpdHkpO1xuICAgIHRoaXMuX25hbWVzW25hbWVdID0gZW50aXR5O1xuICAgIHRoaXMuX2VudGl0aWVzLnB1c2goZW50aXR5KTtcbiAgICB0aGlzLmFkZEZhY3QoXCJkaXNwbGF5IG5hbWVcIiwge2lkOiBlbnRpdHksIG5hbWU6IG5hbWV9KTtcbiAgICBsZXQgaXNBcyA9IFtdO1xuICAgIGZvcihsZXQga2luZCBvZiBraW5kcykge1xuICAgICAgbGV0IHNvdXJjZUlkID0gYCR7ZW50aXR5fSxpcyBhLCR7a2luZH1gO1xuICAgICAgaXNBcy5wdXNoKGB7JHtraW5kfXxyZXA9bGluazsgZWF2IHNvdXJjZSA9ICR7c291cmNlSWR9fWApO1xuICAgICAgbGV0IGNvbGxFbnRpdHkgPSBidWlsdGluSWQoa2luZCk7XG4gICAgICB0aGlzLmFkZEZhY3QoXCJkaXNwbGF5IG5hbWVcIiwge2lkOiBjb2xsRW50aXR5LCBuYW1lOiBraW5kfSk7XG4gICAgICB0aGlzLmFkZEZhY3QoXCJzb3VyY2VkIGVhdlwiLCB7ZW50aXR5LCBhdHRyaWJ1dGU6IFwiaXMgYVwiLCB2YWx1ZTogY29sbEVudGl0eSwgc291cmNlOiBzb3VyY2VJZH0pXG4gICAgfVxuICAgIGxldCBjb2xsZWN0aW9uc1RleHQgPSBcIlwiO1xuICAgIGlmKGlzQXMubGVuZ3RoKVxuICAgICAgY29sbGVjdGlvbnNUZXh0ID0gYCR7dGl0bGVjYXNlKG5hbWUpfSBpcyBhICR7aXNBcy5zbGljZSgwLCAtMSkuam9pbihcIiwgXCIpfSAke2lzQXMubGVuZ3RoID4gMSA/IFwiYW5kXCIgOiBcIlwifSAke2lzQXNbaXNBcy5sZW5ndGggLSAxXX0uYDtcbiAgICBsZXQgY29udGVudCA9IHVucGFkKDYpIGBcbiAgICAgICMke25hbWV9XG4gICAgICAke2NvbGxlY3Rpb25zVGV4dH1cbiAgICBgO1xuICAgIGlmKGF0dHJpYnV0ZXMpIHtcbiAgICAgIGNvbnRlbnQgKz0gXCJcXG4jI0F0dHJpYnV0ZXNcXG5cIjtcbiAgICAgIGZvcihsZXQgYXR0ciBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIGxldCBzb3VyY2VJZCA9IGAke2VudGl0eX0sJHthdHRyfSwke2F0dHJpYnV0ZXNbYXR0cl19YDtcbiAgICAgICAgbGV0IHF1ZXJ5ID0gYCR7bmFtZX0ncyAke2F0dHJ9YDtcbiAgICAgICAgbGV0IHF1ZXJ5SWQgPSBxdWVyeS5yZXBsYWNlKFwiIFwiLCBcIi1cIik7XG4gICAgICAgIGNvbnRlbnQgKz0gYCR7YXR0cn06IHske3F1ZXJ5fXxyZXA9Q1NWOyBmaWVsZD0ke2F0dHJ9OyBlYXYgc291cmNlID0gJHtzb3VyY2VJZH19XFxuYDtcbiAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5fbmFtZXNbYXR0cmlidXRlc1thdHRyXV0gfHwgYXR0cmlidXRlc1thdHRyXTtcbiAgICAgICAgdGhpcy5hZGRGYWN0KFwic291cmNlZCBlYXZcIiwge2VudGl0eSwgYXR0cmlidXRlOiBhdHRyLCB2YWx1ZSwgc291cmNlOiBzb3VyY2VJZH0pO1xuICAgICAgICB0aGlzLmFkZEFydGlmYWN0cyhwYXJzZURTTChgKHF1ZXJ5IDokJHZpZXcgXCIke3F1ZXJ5SWR9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZW50aXR5LWVhdnMgOmVudGl0eSBcIiR7ZW50aXR5fVwiIDphdHRyaWJ1dGUgXCIke2F0dHJ9XCIgOnZhbHVlIHYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHByb2plY3QhIDplbnRpdHkgXCIke2VudGl0eX1cIiA6JHthdHRyfSB2KSlgKSk7XG4gICAgICAgIHRoaXMuYWRkRmFjdChcInF1ZXJ5IHRvIGlkXCIsIHtxdWVyeSwgaWQ6IHF1ZXJ5SWR9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYoZXh0cmFDb250ZW50KSBjb250ZW50ICs9IFwiXFxuXCIgKyBleHRyYUNvbnRlbnQ7XG4gICAgbGV0IHBhZ2UgPSBgJHtlbnRpdHl9fHJvb3RgO1xuICAgIHRoaXMuYWRkRmFjdChcInBhZ2UgY29udGVudFwiLCB7cGFnZSwgY29udGVudH0pO1xuICAgIHRoaXMuYWRkRmFjdChcImVudGl0eSBwYWdlXCIsIHtlbnRpdHksIHBhZ2V9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGFkZFZpZXcodmlldzpzdHJpbmcsIGtpbmQ6c3RyaW5nLCBmaWVsZHM6c3RyaW5nW10pIHtcbiAgICB0aGlzLl92aWV3c1t2aWV3XSA9IGtpbmQ7XG4gICAgdGhpcy5fdmlld0ZpZWxkc1t2aWV3XSA9IGZpZWxkcztcbiAgICB0aGlzLmFkZEZhY3QoXCJ2aWV3XCIsIHt2aWV3LCBraW5kOiBraW5kfSk7XG4gICAgZm9yKGxldCBmaWVsZCBvZiBmaWVsZHMpIHRoaXMuYWRkRmFjdChcImZpZWxkXCIsIHt2aWV3LCBmaWVsZH0pO1xuICAgIGxldCBlbnRpdHkgPSBgJHt2aWV3fSB2aWV3YDtcbiAgICB0aGlzLmFkZEVudGl0eShlbnRpdHksIGVudGl0eSwgW1wic3lzdGVtXCIsIGtpbmRdLCB1bmRlZmluZWQsIHVucGFkKDYpIGBcbiAgICAgICMjIEZpZWxkc1xuICAgICAgJHtmaWVsZHMubWFwKChmaWVsZCkgPT4gYCogJHtmaWVsZH1gKS5qb2luKFwiXFxuICAgICAgXCIpfVxuICAgIGApO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgYWRkVGFibGUodmlldzpzdHJpbmcsIGZpZWxkczpzdHJpbmdbXSkge1xuICAgIHRoaXMuYWRkVmlldyh2aWV3LCBcInRhYmxlXCIsIGZpZWxkcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBhZGRVbmlvbih2aWV3OnN0cmluZywgZmllbGRzOnN0cmluZ1tdLCBidWlsdGluOmJvb2xlYW4gPSB0cnVlKSB7XG4gICAgdGhpcy5hZGRWaWV3KHZpZXcsIFwidW5pb25cIiwgZmllbGRzKTtcbiAgICBpZihidWlsdGluKSB7XG4gICAgICBsZXQgdGFibGUgPSBgYnVpbHRpbiAke3ZpZXd9YDtcbiAgICAgIHRoaXMuYWRkVGFibGUodGFibGUsIGZpZWxkcyk7XG4gICAgICB0aGlzLmFkZFVuaW9uTWVtYmVyKHZpZXcsIHRhYmxlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGFkZFVuaW9uTWVtYmVyKHVuaW9uOnN0cmluZywgbWVtYmVyOiBzdHJpbmcsIG1hcHBpbmc/Ont9KSB7XG4gICAgLy8gYXBwbHkgdGhlIG5hdHVyYWwgbWFwcGluZy5cbiAgICBpZighbWFwcGluZykge1xuICAgICAgaWYodGhpcy52aWV3S2luZCh1bmlvbikgIT09IFwidW5pb25cIikgdGhyb3cgbmV3IEVycm9yKGBVbmlvbiAnJHt1bmlvbn0nIG11c3QgYmUgYWRkZWQgYmVmb3JlIGFkZGluZyBtZW1iZXJzYCk7XG4gICAgICBtYXBwaW5nID0ge307XG4gICAgICBmb3IobGV0IGZpZWxkIG9mIHRoaXMudmlld0ZpZWxkcyh1bmlvbikpIG1hcHBpbmdbZmllbGRdID0gZmllbGQ7XG4gICAgfVxuICAgIGxldCBhY3Rpb24gPSBgJHt1bmlvbn0gPC0tICR7bWVtYmVyfSA8LS0gJHtKU09OLnN0cmluZ2lmeShtYXBwaW5nKX1gO1xuICAgIHRoaXMuYWRkRmFjdChcImFjdGlvblwiLCB7dmlldzogdW5pb24sIGFjdGlvbiwga2luZDogXCJ1bmlvblwiLCBpeDogMH0pXG4gICAgICAuYWRkRmFjdChcImFjdGlvbiBzb3VyY2VcIiwge2FjdGlvbiwgXCJzb3VyY2Ugdmlld1wiOiBtZW1iZXJ9KTtcblxuICAgIGZvcihsZXQgZmllbGQgaW4gbWFwcGluZykge1xuICAgICAgbGV0IG1hcHBlZCA9IG1hcHBpbmdbZmllbGRdO1xuICAgICAgaWYobWFwcGVkLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuICAgICAgICB0aGlzLmFkZEZhY3QoXCJhY3Rpb24gbWFwcGluZyBjb25zdGFudFwiLCB7YWN0aW9uLCBmcm9tOiBmaWVsZCwgXCJ2YWx1ZVwiOiBtYXBwZWRbMF19KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYWRkRmFjdChcImFjdGlvbiBtYXBwaW5nXCIsIHthY3Rpb24sIGZyb206IGZpZWxkLCBcInRvIHNvdXJjZVwiOiBtZW1iZXIsIFwidG8gZmllbGRcIjogbWFwcGVkfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgYWRkUXVlcnkodmlldzpzdHJpbmcsIHF1ZXJ5OnJ1bnRpbWUuUXVlcnkpIHtcbiAgICBxdWVyeS5uYW1lID0gdmlldztcbiAgICB0aGlzLl9xdWVyaWVzW3ZpZXddID0gcXVlcnk7XG4gICAgdGhpcy5hZGRWaWV3KHZpZXcsIFwicXVlcnlcIiwgT2JqZWN0LmtleXMocXVlcnkucHJvamVjdGlvbk1hcCB8fCB7fSkpO1xuICAgIHRoaXMuY2hhbmdlc2V0Lm1lcmdlKHF1ZXJ5LmNoYW5nZXNldCh0aGlzLml4ZXIpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGFkZEFydGlmYWN0cyhhcnRpZmFjdHM6QXJ0aWZhY3RzKSB7XG4gICAgbGV0IHZpZXdzID0gYXJ0aWZhY3RzLnZpZXdzO1xuICAgIGZvcihsZXQgaWQgaW4gdmlld3MpIHRoaXMuY2hhbmdlc2V0Lm1lcmdlKHZpZXdzW2lkXS5jaGFuZ2VzZXQoZXZlKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBhZGRVSShpZDpzdHJpbmcsIHVpOlVJKSB7XG4gICAgdWkuaWQgPSBpZDtcbiAgICB0aGlzLl91aXNbaWRdID0gdWk7XG4gICAgdGhpcy5hZGRFbnRpdHkoaWQsIGlkLCBbXCJzeXN0ZW1cIiwgXCJ1aVwiXSk7XG4gICAgdGhpcy5jaGFuZ2VzZXQubWVyZ2UodWkuY2hhbmdlc2V0KHRoaXMuaXhlcikpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbn1cblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gUnVudGltZSBTZXR1cFxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5hcHAuaW5pdChcImJvb3RzdHJhcFwiLCBmdW5jdGlvbiBib290c3RyYXAoKSB7XG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gRW50aXR5IFN5c3RlbVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGxldCBwaGFzZSA9IG5ldyBCU1BoYXNlKGV2ZSk7XG4gIHBoYXNlLmFkZFRhYmxlKFwibWFudWFsIGVudGl0eVwiLCBbXCJlbnRpdHlcIiwgXCJjb250ZW50XCJdKTtcbiAgcGhhc2UuYWRkVGFibGUoXCJzb3VyY2VkIGVhdlwiLCBbXCJlbnRpdHlcIiwgXCJhdHRyaWJ1dGVcIiwgXCJ2YWx1ZVwiLCBcInNvdXJjZVwiXSk7XG4gIHBoYXNlLmFkZFRhYmxlKFwicGFnZSBjb250ZW50XCIsIFtcInBhZ2VcIiwgXCJjb250ZW50XCJdKTtcbiAgcGhhc2UuYWRkVGFibGUoXCJlbnRpdHkgcGFnZVwiLCBbXCJlbnRpdHlcIiwgXCJwYWdlXCJdKTtcbiAgcGhhc2UuYWRkVGFibGUoXCJhY3Rpb24gZW50aXR5XCIsIFtcImVudGl0eVwiLCBcImNvbnRlbnRcIiwgXCJzb3VyY2VcIl0pO1xuICBwaGFzZVxuICAgIC5hZGRFbnRpdHkoXCJlbnRpdHlcIiwgXCJlbnRpdHlcIiwgW1wic3lzdGVtXCJdKVxuICAgIC5hZGRFbnRpdHkoXCJjb2xsZWN0aW9uXCIsIFwiY29sbGVjdGlvblwiLCBbXCJzeXN0ZW1cIl0pXG4gICAgLmFkZEVudGl0eShcInN5c3RlbVwiLCBcInN5c3RlbVwiLCBbXCJzeXN0ZW1cIiwgXCJjb2xsZWN0aW9uXCJdKVxuICAgIC5hZGRFbnRpdHkoXCJ1bmlvblwiLCBcInVuaW9uXCIsIFtcInN5c3RlbVwiLCBcImNvbGxlY3Rpb25cIl0pXG4gICAgLmFkZEVudGl0eShcInF1ZXJ5XCIsIFwicXVlcnlcIiwgW1wic3lzdGVtXCIsIFwiY29sbGVjdGlvblwiXSlcbiAgICAuYWRkRW50aXR5KFwidGFibGVcIiwgXCJ0YWJsZVwiLCBbXCJzeXN0ZW1cIiwgXCJjb2xsZWN0aW9uXCJdKVxuICAgIC5hZGRFbnRpdHkoXCJ1aVwiLCBcInVpXCIsIFtcInN5c3RlbVwiLCBcImNvbGxlY3Rpb25cIl0pXG4gICAgLmFkZEVudGl0eShcImhvbWVcIiwgXCJob21lXCIsIFtcInN5c3RlbVwiXSwgdW5kZWZpbmVkLCB1bnBhZCg2KSBgXG4gICAgICAjIERpcmVjdG9yeVxuICAgICAge2VudGl0eXxyZXAgPSBkaXJlY3Rvcnl9XG4gICAgYCk7XG5cbiAgcGhhc2UuYWRkVW5pb24oXCJlbnRpdHkgZWF2c1wiLCBbXCJlbnRpdHlcIiwgXCJhdHRyaWJ1dGVcIiwgXCJ2YWx1ZVwiXSwgdHJ1ZSlcbiAgICAuYWRkVW5pb25NZW1iZXIoXCJlbnRpdHkgZWF2c1wiLCBcImdlbmVyYXRlZCBlYXZcIiwge2VudGl0eTogXCJlbnRpdHlcIiwgYXR0cmlidXRlOiBcImF0dHJpYnV0ZVwiLCB2YWx1ZTogXCJ2YWx1ZVwifSlcbiAgICAuYWRkVW5pb25NZW1iZXIoXCJlbnRpdHkgZWF2c1wiLCBcInNvdXJjZWQgZWF2XCIsIHtlbnRpdHk6IFwiZW50aXR5XCIsIGF0dHJpYnV0ZTogXCJhdHRyaWJ1dGVcIiwgdmFsdWU6IFwidmFsdWVcIn0pXG4gICAgLy8gdGhpcyBpcyBhIHN0b3JlZCB1bmlvbiB0aGF0IGlzIHVzZWQgYnkgdGhlIGFkZCBlYXYgYWN0aW9uIHRvIHRha2UgcXVlcnkgcmVzdWx0cyBhbmRcbiAgICAvLyBwdXNoIHRoZW0gaW50byBlYXZzLCBlLmcuIHN1bSBzYWxhcmllcyBwZXIgZGVwYXJ0bWVudCAtPiBbdG90YWwgc2FsYXJ5ID0gKl1cbiAgICAuYWRkVW5pb25NZW1iZXIoXCJlbnRpdHkgZWF2c1wiLCBcImFkZGVkIGVhdnNcIik7XG5cbiAgcGhhc2UuYWRkVW5pb24oXCJlbnRpdHkgbGlua3NcIiwgW1wiZW50aXR5XCIsIFwibGlua1wiLCBcInR5cGVcIl0pXG4gICAgLmFkZFVuaW9uTWVtYmVyKFwiZW50aXR5IGxpbmtzXCIsIFwiZWF2IGVudGl0eSBsaW5rc1wiKVxuICAgIC5hZGRVbmlvbk1lbWJlcihcImVudGl0eSBsaW5rc1wiLCBcImlzIGEgYXR0cmlidXRlc1wiLCB7ZW50aXR5OiBcImVudGl0eVwiLCBsaW5rOiBcImNvbGxlY3Rpb25cIiwgdHlwZTogW1wiaXMgYVwiXX0pO1xuXG4gIHBoYXNlLmFkZFVuaW9uKFwiZGlyZWN0aW9ubGVzcyBsaW5rc1wiLCBbXCJlbnRpdHlcIiwgXCJsaW5rXCJdKVxuICAgIC5hZGRVbmlvbk1lbWJlcihcImRpcmVjdGlvbmxlc3MgbGlua3NcIiwgXCJlbnRpdHkgbGlua3NcIilcbiAgICAuYWRkVW5pb25NZW1iZXIoXCJkaXJlY3Rpb25sZXNzIGxpbmtzXCIsIFwiZW50aXR5IGxpbmtzXCIsIHtlbnRpdHk6IFwibGlua1wiLCBsaW5rOiBcImVudGl0eVwifSk7XG5cbiAgcGhhc2UuYWRkVW5pb24oXCJjb2xsZWN0aW9uIGVudGl0aWVzXCIsIFtcImVudGl0eVwiLCBcImNvbGxlY3Rpb25cIl0pXG4gICAgLmFkZFVuaW9uTWVtYmVyKFwiY29sbGVjdGlvbiBlbnRpdGllc1wiLCBcImlzIGEgYXR0cmlidXRlc1wiKTtcblxuICBwaGFzZS5hZGRBcnRpZmFjdHMocGFyc2VEU0woYFxuICAgIChxdWVyeSA6JCR2aWV3IFwiYnM6IGVudGl0eVwiXG4gICAgICAoZW50aXR5LXBhZ2UgOmVudGl0eSBlbnRpdHkgOnBhZ2UgcGFnZSlcbiAgICAgIChwYWdlLWNvbnRlbnQgOnBhZ2UgcGFnZSA6Y29udGVudCBjb250ZW50KVxuICAgICAgKHByb2plY3QhIFwiZW50aXR5XCIgOmVudGl0eSBlbnRpdHkgOmNvbnRlbnQgY29udGVudCkpXG4gIGApKTtcblxuICBwaGFzZS5hZGRBcnRpZmFjdHMocGFyc2VEU0woYFxuICAgIChxdWVyeSA6JCR2aWV3IFwiYnM6IHVubW9kaWZpZWQgYWRkZWQgYml0c1wiXG4gICAgICAoYWRkZWQtYml0cyA6ZW50aXR5IGVudGl0eSA6Y29udGVudCBjb250ZW50KVxuICAgICAgKG5lZ2F0ZSAobWFudWFsLWVudGl0eSA6ZW50aXR5IGVudGl0eSkpXG4gICAgICAocHJvamVjdCEgXCJ1bm1vZGlmaWVkIGFkZGVkIGJpdHNcIiA6ZW50aXR5IGVudGl0eSA6Y29udGVudCBjb250ZW50KSlcbiAgYCkpO1xuXG4gIHBoYXNlLmFkZEFydGlmYWN0cyhwYXJzZURTTChgXG4gICAgKHF1ZXJ5IDokJHZpZXcgXCJiczogaXMgYSBhdHRyaWJ1dGVzXCJcbiAgICAgIChlbnRpdHktZWF2cyA6YXR0cmlidXRlIFwiaXMgYVwiIDplbnRpdHkgZW50aXR5IDp2YWx1ZSB2YWx1ZSlcbiAgICAgIChwcm9qZWN0ISBcImlzIGEgYXR0cmlidXRlc1wiIDpjb2xsZWN0aW9uIHZhbHVlIDplbnRpdHkgZW50aXR5KSlcbiAgYCkpO1xuXG4gIC8vIEBIQUNLOiB0aGlzIHZpZXcgaXMgcmVxdWlyZWQgYmVjYXVzZSB5b3UgY2FuJ3QgY3VycmVudGx5IGpvaW4gYSBzZWxlY3Qgb24gdGhlIHJlc3VsdCBvZiBhIGZ1bmN0aW9uLlxuICAvLyBzbyB3ZSBjcmVhdGUgYSB2ZXJzaW9uIG9mIHRoZSBlYXZzIHRhYmxlIHRoYXQgYWxyZWFkeSBoYXMgZXZlcnl0aGluZyBsb3dlcmNhc2VkLlxuICBwaGFzZS5hZGRBcnRpZmFjdHMocGFyc2VEU0woYFxuICAgIChxdWVyeSA6JCR2aWV3IFwiYnM6IGxvd2VyY2FzZSBlYXZzXCJcbiAgICAgIChlbnRpdHktZWF2cyA6ZW50aXR5IGVudGl0eSA6YXR0cmlidXRlIGF0dHJpYnV0ZSA6dmFsdWUgdmFsdWUpXG4gICAgICAobG93ZXJjYXNlIDp0ZXh0IHZhbHVlIDpyZXN1bHQgbG93ZXJjYXNlZClcbiAgICAgIChwcm9qZWN0ISBcImxvd2VyY2FzZSBlYXZzXCIgOmVudGl0eSBlbnRpdHkgOmF0dHJpYnV0ZSBhdHRyaWJ1dGUgOnZhbHVlIGxvd2VyY2FzZWQpKVxuICBgKSk7XG5cbiAgcGhhc2UuYWRkQXJ0aWZhY3RzKHBhcnNlRFNMKGBcbiAgICAocXVlcnkgOiQkdmlldyBcImJzOiBlYXYgZW50aXR5IGxpbmtzXCJcbiAgICAgIChlbnRpdHktZWF2cyA6ZW50aXR5IGVudGl0eSA6YXR0cmlidXRlIGF0dHJpYnV0ZSA6dmFsdWUgdmFsdWUpXG4gICAgICAoZW50aXR5IDplbnRpdHkgdmFsdWUpXG4gICAgICAocHJvamVjdCEgXCJlYXYgZW50aXR5IGxpbmtzXCIgOmVudGl0eSBlbnRpdHkgOnR5cGUgYXR0cmlidXRlIDpsaW5rIHZhbHVlKSlcbiAgYCkpO1xuXG4gIHBoYXNlLmFkZEFydGlmYWN0cyhwYXJzZURTTChgXG4gICAgKHF1ZXJ5IDokJHZpZXcgXCJiczogY29sbGVjdGlvblwiXG4gICAgICAoaXMtYS1hdHRyaWJ1dGVzIDpjb2xsZWN0aW9uIGVudGl0eSlcbiAgICAgIChxdWVyeSA6JCR2aWV3IFwiYnM6IGNvbGxlY3Rpb24gY291bnRcIlxuICAgICAgICAoaXMtYS1hdHRyaWJ1dGVzIDpjb2xsZWN0aW9uIGVudGl0eSA6ZW50aXR5IGNoaWxkKVxuICAgICAgICAoY291bnQgOmNvdW50IGNoaWxkQ291bnQpKVxuICAgICAgKHByb2plY3QhIFwiY29sbGVjdGlvblwiIDpjb2xsZWN0aW9uIGVudGl0eSA6Y291bnQgY2hpbGRDb3VudCkpXG4gIGApKTtcblxuICBwaGFzZS5hZGRUYWJsZShcInVpIHBhbmVcIiwgW1wicGFuZVwiLCBcImNvbnRhaW5zXCIsIFwia2luZFwiXSk7XG4gIGlmKGV2ZS5maW5kKFwidWkgcGFuZVwiKS5sZW5ndGggPT09IDApIHBoYXNlLmFkZEZhY3QoXCJ1aSBwYW5lXCIsIHtwYW5lOiBcInAxXCIsIGNvbnRhaW5zOiBcInBldFwiLCBraW5kOiAwfSk7XG4gIHBoYXNlLmFwcGx5KHRydWUpO1xuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gTmV3IEVudGl0eSBMb2dpY1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIHBoYXNlID0gbmV3IEJTUGhhc2UoZXZlKTtcbiAgcGhhc2UuYWRkRW50aXR5KFwiZW50aXR5XCIsIFwiZW50aXR5XCIsIFtcInN5c3RlbVwiXSk7XG4gIHBoYXNlLmFkZEVudGl0eShcImNvbGxlY3Rpb25cIiwgXCJjb2xsZWN0aW9uXCIsIFtcInN5c3RlbVwiXSk7XG4gIHBoYXNlLmFkZEFydGlmYWN0cyhwYXJzZURTTCh1bnBhZCg0KSBgXG4gICAgKHF1ZXJ5IDokJHZpZXcgXCJiczogZW50aXR5IGVhdnMgZnJvbSBlbnRpdGllc1wiXG4gICAgICAoZW50aXR5IDplbnRpdHkgZW50aXR5KVxuICAgICAgKHByb2plY3QhIFwiZW50aXR5IGVhdnNcIiA6ZW50aXR5IGVudGl0eSA6YXR0cmlidXRlIFwiaXMgYVwiIDp2YWx1ZSBcIiR7YnVpbHRpbklkKFwiZW50aXR5XCIpfVwiKSlcbiAgYCkpO1xuICBwaGFzZS5hZGRBcnRpZmFjdHMocGFyc2VEU0wodW5wYWQoNCkgYFxuICAgIChxdWVyeSA6JCR2aWV3IFwiYnM6IGVudGl0eSBlYXZzIGZyb20gY29sbGVjdGlvbnNcIlxuICAgICAgKGlzLWEtYXR0cmlidXRlcyA6Y29sbGVjdGlvbiBjb2xsKVxuICAgICAgKHByb2plY3QhIFwiZW50aXR5IGVhdnNcIiA6ZW50aXR5IGNvbGwgOmF0dHJpYnV0ZSBcImlzIGFcIiA6dmFsdWUgXCIke2J1aWx0aW5JZChcImNvbGxlY3Rpb25cIil9XCIpKVxuICBgKSk7XG4vKiAgcGhhc2UuYWRkQXJ0aWZhY3RzKHBhcnNlRFNMKHVucGFkKDQpIGBcbiAgICAocXVlcnlcbiAgICAgIChlbnRpdHkgOmVudGl0eSBlbnRpdHkpXG4gICAgICAobmVnYXRlIChxdWVyeVxuICAgICAgICAoZGlyZWN0aW9ubGVzcy1saW5rcyA6ZW50aXR5IGVudGl0eSA6bGluayBsaW5rKVxuICAgICAgICAoIT0gbGluayBcIkFVVE9HRU5FUkFURUQgZW50aXR5IFRISVMgU0hPVUxETidUIFNIT1cgVVAgQU5ZV0hFUkVcIilcbiAgICAgICAgKCE9IGxpbmsgXCJBVVRPR0VORVJBVEVEIG9ycGhhbmVkIFRISVMgU0hPVUxETidUIFNIT1cgVVAgQU5ZV0hFUkVcIilcbiAgICAgICAgKSlcbiAgICAgIChwcm9qZWN0ISBcImVudGl0eSBlYXZzXCIgOmVudGl0eSBjb2xsIDphdHRyaWJ1dGUgXCJpcyBhXCIgOnZhbHVlIFwiQVVUT0dFTkVSQVRFRCBjb2xsZWN0aW9uIFRISVMgU0hPVUxETidUIFNIT1cgVVAgQU5ZV0hFUkVcIikpXG5gKSk7Ki9cbiAgcGhhc2UuYXBwbHkodHJ1ZSk7XG4gIFxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIFVJXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgcGhhc2UgPSBuZXcgQlNQaGFzZShldmUpO1xuXG4gIC8vIEBGSVhNRTogVGhlc2Ugc2hvdWxkIHByb2JhYmx5IGJlIHVuaW9uaXplZC5cbiAgZnVuY3Rpb24gcmVzb2x2ZSh0YWJsZSwgZmllbGRzKSB7XG4gICAgcmV0dXJuIGZpZWxkcy5tYXAoKGZpZWxkKSA9PiBgJHt0YWJsZX06ICR7ZmllbGR9YCk7XG4gIH1cbiAgcGhhc2UuYWRkVGFibGUoXCJ1aSB0ZW1wbGF0ZVwiLCByZXNvbHZlKFwidWkgdGVtcGxhdGVcIiwgW1widGVtcGxhdGVcIiwgXCJwYXJlbnRcIiwgXCJpeFwiXSkpO1xuICBwaGFzZS5hZGRUYWJsZShcInVpIHRlbXBsYXRlIGJpbmRpbmdcIiwgcmVzb2x2ZShcInVpIHRlbXBsYXRlIGJpbmRpbmdcIiwgW1widGVtcGxhdGVcIiwgXCJxdWVyeVwiXSkpO1xuICBwaGFzZS5hZGRUYWJsZShcInVpIGVtYmVkXCIsIHJlc29sdmUoXCJ1aSBlbWJlZFwiLCBbXCJlbWJlZFwiLCBcInRlbXBsYXRlXCIsIFwicGFyZW50XCIsIFwiaXhcIl0pKTtcbiAgcGhhc2UuYWRkVGFibGUoXCJ1aSBlbWJlZCBzY29wZVwiLCByZXNvbHZlKFwidWkgZW1iZWQgc2NvcGVcIiwgW1wiZW1iZWRcIiwgXCJrZXlcIiwgXCJ2YWx1ZVwiXSkpO1xuICBwaGFzZS5hZGRUYWJsZShcInVpIGVtYmVkIHNjb3BlIGJpbmRpbmdcIiwgcmVzb2x2ZShcInVpIGVtYmVkIHNjb3BlIGJpbmRpbmdcIiwgW1wiZW1iZWRcIiwgXCJrZXlcIiwgXCJzb3VyY2VcIiwgXCJhbGlhc1wiXSkpO1xuICBwaGFzZS5hZGRUYWJsZShcInVpIGF0dHJpYnV0ZVwiLCByZXNvbHZlKFwidWkgYXR0cmlidXRlXCIsIFtcInRlbXBsYXRlXCIsIFwicHJvcGVydHlcIiwgXCJ2YWx1ZVwiXSkpO1xuICBwaGFzZS5hZGRUYWJsZShcInVpIGF0dHJpYnV0ZSBiaW5kaW5nXCIsIHJlc29sdmUoXCJ1aSBhdHRyaWJ1dGUgYmluZGluZ1wiLCBbXCJ0ZW1wbGF0ZVwiLCBcInByb3BlcnR5XCIsIFwic291cmNlXCIsIFwiYWxpYXNcIl0pKTtcbiAgcGhhc2UuYWRkVGFibGUoXCJ1aSBldmVudFwiLCByZXNvbHZlKFwidWkgZXZlbnRcIiwgW1widGVtcGxhdGVcIiwgXCJldmVudFwiXSkpO1xuICBwaGFzZS5hZGRUYWJsZShcInVpIGV2ZW50IHN0YXRlXCIsIHJlc29sdmUoXCJ1aSBldmVudCBzdGF0ZVwiLCBbXCJ0ZW1wbGF0ZVwiLCBcImV2ZW50XCIsIFwia2V5XCIsIFwidmFsdWVcIl0pKTtcbiAgcGhhc2UuYWRkVGFibGUoXCJ1aSBldmVudCBzdGF0ZSBiaW5kaW5nXCIsIHJlc29sdmUoXCJ1aSBldmVudCBzdGF0ZSBiaW5kaW5nXCIsIFtcInRlbXBsYXRlXCIsIFwiZXZlbnRcIiwgXCJrZXlcIiwgXCJzb3VyY2VcIiwgXCJhbGlhc1wiXSkpO1xuXG4gIHBoYXNlLmFkZFRhYmxlKFwic3lzdGVtIHVpXCIsIFtcInRlbXBsYXRlXCJdKTtcblxuICBwaGFzZS5hcHBseSh0cnVlKTtcblxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIFRlc3RpbmdcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBwaGFzZSA9IG5ldyBCU1BoYXNlKGV2ZSk7XG4gIGxldCB0ZXN0RGF0YSA9IHtcbiAgICBcInRlc3QgZGF0YVwiOiBbXSxcbiAgICBwZXQ6IFtdLFxuICAgIGV4b3RpYzogW10sXG4gICAgZGFuZ2Vyb3VzOiBbXSxcbiAgICBjYXQ6IFtcInBldFwiXSxcbiAgICBkb2c6IFtcInBldFwiXSxcbiAgICBmaXNoOiBbXCJwZXRcIl0sXG4gICAgc25ha2U6IFtcInBldFwiLCBcImV4b3RpY1wiXSxcbiAgICBrb2FsYTogW1wicGV0XCIsIFwiZXhvdGljXCJdLFxuICAgIHNsb3RoOiBbXCJwZXRcIiwgXCJleG90aWNcIl0sXG4gICAga2FuZ2Fyb286IFtcImV4b3RpY1wiXSxcbiAgICBnaXJhZmZlOiBbXCJleG90aWNcIl0sXG4gICAgZ29yaWxsYTogW1wiZXhvdGljXCIsIFwiZGFuZ2Vyb3VzXCJdLFxuXG4gICAgY29tcGFueTogW10sXG4gICAga29kb3dhOiBbXCJjb21wYW55XCJdLFxuXG4gICAgZGVwYXJ0bWVudDogW10sXG4gICAgZW5naW5lZXJpbmc6IFtcImRlcGFydG1lbnRcIl0sXG4gICAgb3BlcmF0aW9uczogW1wiZGVwYXJ0bWVudFwiXSxcbiAgICBtYWdpYzogW1wiZGVwYXJ0bWVudFwiXSxcblxuICAgIGVtcGxveWVlOiBbXSxcbiAgICBqb3NoOiBbXCJlbXBsb3llZVwiXSxcbiAgICBjb3JleTogW1wiZW1wbG95ZWVcIl0sXG4gICAgY2hyaXM6IFtcImVtcGxveWVlXCJdLFxuICAgIHJvYjogW1wiZW1wbG95ZWVcIl0sXG4gICAgZXJpYzogW1wiZW1wbG95ZWVcIl0sXG4gIH07XG4gIGxldCB0ZXN0QXR0cnMgPSB7XG4gICAgY2F0OiB7bGVuZ3RoOiA0fSxcbiAgICBkb2c6IHtsZW5ndGg6IDN9LFxuICAgIGZpc2g6IHtsZW5ndGg6IDF9LFxuICAgIHNuYWtlOiB7bGVuZ3RoOiA0fSxcbiAgICBrb2FsYToge2xlbmd0aDogM30sXG4gICAgc2xvdGg6IHtsZW5ndGg6IDN9LFxuICAgIGVuZ2luZWVyaW5nOiB7Y29tcGFueTogXCJrb2Rvd2FcIn0sXG4gICAgb3BlcmF0aW9uczoge2NvbXBhbnk6IFwia29kb3dhXCJ9LFxuICAgIG1hZ2ljOiB7Y29tcGFueTogXCJrb2Rvd2FcIn0sXG5cbiAgICBqb3NoOiB7ZGVwYXJ0bWVudDogXCJlbmdpbmVlcmluZ1wiLCBzYWxhcnk6IDd9LFxuICAgIGNvcmV5OiB7ZGVwYXJ0bWVudDogXCJlbmdpbmVlcmluZ1wiLCBzYWxhcnk6IDEwfSxcbiAgICBjaHJpczoge2RlcGFydG1lbnQ6IFwiZW5naW5lZXJpbmdcIiwgc2FsYXJ5OiAxMH0sXG4gICAgZXJpYzoge2RlcGFydG1lbnQ6IFwiZW5naW5lZXJpbmdcIiwgc2FsYXJ5OiA3fSxcbiAgICByb2I6IHtkZXBhcnRtZW50OiBcIm9wZXJhdGlvbnNcIiwgc2FsYXJ5OiAxMH0sXG4gIH07XG4gIGZvcihsZXQgZW50aXR5IGluIHRlc3REYXRhKSBwaGFzZS5hZGRFbnRpdHkoZW50aXR5LCBlbnRpdHksIFtcInRlc3QgZGF0YVwiXS5jb25jYXQodGVzdERhdGFbZW50aXR5XSksIHRlc3RBdHRyc1tlbnRpdHldLCBcIlwiKTtcblxuICAvLyBwaGFzZS5hZGRUYWJsZShcImRlcGFydG1lbnRcIiwgW1wiZGVwYXJ0bWVudFwiXSlcbiAgLy8gICAuYWRkRmFjdChcImRlcGFydG1lbnRcIiwge2RlcGFydG1lbnQ6IFwiZW5naW5lZXJpbmdcIn0pXG4gIC8vICAgLmFkZEZhY3QoXCJkZXBhcnRtZW50XCIsIHtkZXBhcnRtZW50OiBcIm9wZXJhdGlvbnNcIn0pXG4gIC8vICAgLmFkZEZhY3QoXCJkZXBhcnRtZW50XCIsIHtkZXBhcnRtZW50OiBcIm1hZ2ljXCJ9KTtcbiAgLy8gcGhhc2UuYWRkVGFibGUoXCJlbXBsb3llZVwiLCBbXCJkZXBhcnRtZW50XCIsIFwiZW1wbG95ZWVcIiwgXCJzYWxhcnlcIl0pXG4gIC8vICAgLmFkZEZhY3QoXCJlbXBsb3llZVwiLCB7ZGVwYXJ0bWVudDogXCJlbmdpbmVlcmluZ1wiLCBlbXBsb3llZTogXCJqb3NoXCIsIHNhbGFyeTogMTB9KVxuICAvLyAgIC5hZGRGYWN0KFwiZW1wbG95ZWVcIiwge2RlcGFydG1lbnQ6IFwiZW5naW5lZXJpbmdcIiwgZW1wbG95ZWU6IFwiY29yZXlcIiwgc2FsYXJ5OiAxMX0pXG4gIC8vICAgLmFkZEZhY3QoXCJlbXBsb3llZVwiLCB7ZGVwYXJ0bWVudDogXCJlbmdpbmVlcmluZ1wiLCBlbXBsb3llZTogXCJjaHJpc1wiLCBzYWxhcnk6IDd9KVxuICAvLyAgIC5hZGRGYWN0KFwiZW1wbG95ZWVcIiwge2RlcGFydG1lbnQ6IFwib3BlcmF0aW9uc1wiLCBlbXBsb3llZTogXCJyb2JcIiwgc2FsYXJ5OiA3fSk7XG5cbiAgcGhhc2UuYXBwbHkodHJ1ZSk7XG4gIHdpbmRvd1tcInBcIl0gPSBwaGFzZTtcbn0pO1xuXG5kZWNsYXJlIHZhciBleHBvcnRzO1xud2luZG93W1wiYm9vdHN0cmFwXCJdID0gZXhwb3J0cztcbiIsImRlY2xhcmUgdmFyIFZlbG9jaXR5O1xuXG5leHBvcnQgaW50ZXJmYWNlIEhhbmRsZXI8VCBleHRlbmRzIEV2ZW50PiB7XG4gIChldnQ6VCwgZWxlbTpFbGVtZW50KTogdm9pZFxufVxuZXhwb3J0IGludGVyZmFjZSBSZW5kZXJIYW5kbGVyIHtcbiAgKG5vZGU6SFRNTEVsZW1lbnQsIGVsZW06RWxlbWVudCk6IHZvaWRcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbGVtZW50IHtcbiAgdD86c3RyaW5nXG4gIGM/OnN0cmluZ1xuICBpZD86c3RyaW5nXG4gIHBhcmVudD86c3RyaW5nXG4gIGNoaWxkcmVuPzpFbGVtZW50W11cbiAgaXg/Om51bWJlclxuICBrZXk/OnN0cmluZ1xuICBkaXJ0eT86Ym9vbGVhblxuICBzZW1hbnRpYz86c3RyaW5nXG4gIHR3ZWVuPzogYW55XG4gIGVudGVyPzogYW55XG4gIGxlYXZlPzogYW55XG4gIGRlYnVnPzphbnlcblxuICAvLyBDb250ZW50XG4gIGNvbnRlbnRFZGl0YWJsZT86Ym9vbGVhblxuICBjaGVja2VkPzpib29sZWFuXG4gIGRyYWdnYWJsZT86Ym9vbGVhblxuICBocmVmPzpzdHJpbmdcbiAgc3JjPzpzdHJpbmdcbiAgZGF0YT86YW55XG4gIGRvd25sb2FkPzpzdHJpbmdcbiAgYWxsb3dmdWxsc2NyZWVuPzpib29sZWFuXG4gIHBsYWNlaG9sZGVyPzpzdHJpbmdcbiAgc2VsZWN0ZWQ/OmJvb2xlYW5cbiAgdGFiaW5kZXg/Om51bWJlclxuICB0ZXh0PzpzdHJpbmdcbiAgc3RyaWN0VGV4dD86IGJvb2xlYW5cbiAgdHlwZT86c3RyaW5nXG4gIHZhbHVlPzpzdHJpbmdcbiAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw/OnN0cmluZ1xuXG4gIHN0eWxlPzogc3RyaW5nLFxuXG4gIC8vIFN0eWxlcyAoU3RydWN0dXJlKVxuICBmbGV4PzpudW1iZXJ8c3RyaW5nXG4gIGxlZnQ/Om51bWJlcnxzdHJpbmdcbiAgdG9wPzpudW1iZXJ8c3RyaW5nXG4gIHdpZHRoPzpudW1iZXJ8c3RyaW5nXG4gIGhlaWdodD86bnVtYmVyfHN0cmluZ1xuICB0ZXh0QWxpZ24/OnN0cmluZ1xuICB0cmFuc2Zvcm0/OnN0cmluZ1xuICB2ZXJ0aWNhbEFsaWduPzpzdHJpbmdcbiAgekluZGV4PzpudW1iZXJcblxuICAvLyBTdHlsZXMgKEFlc3RoZXRpYylcbiAgYmFja2dyb3VuZENvbG9yPzpzdHJpbmdcbiAgYmFja2dyb3VuZEltYWdlPzpzdHJpbmdcbiAgYm9yZGVyPzpzdHJpbmdcbiAgYm9yZGVyQ29sb3I/OnN0cmluZ1xuICBib3JkZXJXaWR0aD86bnVtYmVyfHN0cmluZ1xuICBib3JkZXJSYWRpdXM/Om51bWJlcnxzdHJpbmdcbiAgY29sb3I/OnN0cmluZ1xuICBjb2xzcGFuPzpudW1iZXJcbiAgZm9udEZhbWlseT86c3RyaW5nXG4gIGZvbnRTaXplPzpzdHJpbmdcblxuICBvcGFjaXR5PzpudW1iZXJcblxuICAvLyBTdmdcbiAgc3ZnPzpib29sZWFuXG4gIHg/Om51bWJlcnxzdHJpbmdcbiAgeT86bnVtYmVyfHN0cmluZ1xuICBkeD86bnVtYmVyfHN0cmluZ1xuICBkeT86bnVtYmVyfHN0cmluZ1xuICBjeD86bnVtYmVyfHN0cmluZ1xuICBjeT86bnVtYmVyfHN0cmluZ1xuICByPzpudW1iZXJ8c3RyaW5nXG4gIGQ/Om51bWJlcnxzdHJpbmdcbiAgZmlsbD86c3RyaW5nXG4gIHN0cm9rZT86c3RyaW5nXG4gIHN0cm9rZVdpZHRoPzpzdHJpbmdcbiAgc3RhcnRPZmZzZXQ/Om51bWJlcnxzdHJpbmdcbiAgdGV4dEFuY2hvcj86c3RyaW5nXG4gIHZpZXdCb3g/OnN0cmluZ1xuICB4bGlua2hyZWY/OnN0cmluZ1xuXG4gIC8vIEV2ZW50c1xuICBkYmxjbGljaz86SGFuZGxlcjxNb3VzZUV2ZW50PlxuICBjbGljaz86SGFuZGxlcjxNb3VzZUV2ZW50PlxuICBjb250ZXh0bWVudT86SGFuZGxlcjxNb3VzZUV2ZW50PlxuICBtb3VzZWRvd24/OkhhbmRsZXI8TW91c2VFdmVudD5cbiAgbW91c2Vtb3ZlPzpIYW5kbGVyPE1vdXNlRXZlbnQ+XG4gIG1vdXNldXA/OkhhbmRsZXI8TW91c2VFdmVudD5cbiAgbW91c2VvdmVyPzpIYW5kbGVyPE1vdXNlRXZlbnQ+XG4gIG1vdXNlb3V0PzpIYW5kbGVyPE1vdXNlRXZlbnQ+XG4gIG1vdXNlbGVhdmU/OkhhbmRsZXI8TW91c2VFdmVudD5cbiAgbW91c2V3aGVlbD86SGFuZGxlcjxNb3VzZUV2ZW50PlxuICBkcmFnb3Zlcj86SGFuZGxlcjxNb3VzZUV2ZW50PlxuICBkcmFnc3RhcnQ/OkhhbmRsZXI8TW91c2VFdmVudD5cbiAgZHJhZ2VuZD86SGFuZGxlcjxNb3VzZUV2ZW50PlxuICBkcmFnPzpIYW5kbGVyPE1vdXNlRXZlbnQ+XG4gIGRyb3A/OkhhbmRsZXI8TW91c2VFdmVudD5cbiAgc2Nyb2xsPzpIYW5kbGVyPE1vdXNlRXZlbnQ+XG4gIGZvY3VzPzpIYW5kbGVyPEZvY3VzRXZlbnQ+XG4gIGJsdXI/OkhhbmRsZXI8Rm9jdXNFdmVudD5cbiAgaW5wdXQ/OkhhbmRsZXI8RXZlbnQ+XG4gIGNoYW5nZT86SGFuZGxlcjxFdmVudD5cbiAga2V5dXA/OkhhbmRsZXI8S2V5Ym9hcmRFdmVudD5cbiAga2V5ZG93bj86SGFuZGxlcjxLZXlib2FyZEV2ZW50PlxuXG4gIHBvc3RSZW5kZXI/OlJlbmRlckhhbmRsZXJcblxuICBbYXR0cjpzdHJpbmddOiBhbnlcbn1cblxuZnVuY3Rpb24gbm93KCkge1xuICBpZih3aW5kb3cucGVyZm9ybWFuY2UpIHtcbiAgICByZXR1cm4gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpO1xuICB9XG4gIHJldHVybiAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xufVxuXG5mdW5jdGlvbiBzaGFsbG93RXF1YWxzKGEsIGIpIHtcbiAgaWYoYSA9PT0gYikgcmV0dXJuIHRydWU7XG4gIGlmKCFhIHx8ICFiKSByZXR1cm4gZmFsc2U7XG4gIGZvcih2YXIgayBpbiBhKSB7XG4gICAgaWYoYVtrXSAhPT0gYltrXSkgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGZvcih2YXIgayBpbiBiKSB7XG4gICAgaWYoYltrXSAhPT0gYVtrXSkgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBwb3N0QW5pbWF0aW9uUmVtb3ZlKGVsZW1lbnRzKSB7XG4gIGZvcihsZXQgZWxlbSBvZiBlbGVtZW50cykge1xuICAgIGlmKGVsZW0ucGFyZW50Tm9kZSkgZWxlbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsZW0pO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBSZW5kZXJlciB7XG4gIC8vIEBUT0RPOiBBIG1vcmUgcGVyZm9ybWFudCBpbXBsZW1lbnRhdGlvbiB3b3VsZCBoYXZlIGEgd2F5IG9mIHJlbmRlcmluZyBzdWJ0cmVlcyBhbmQganVzdCBoYXZlIGEgbGFtYmRhIFJlbmRlcmVyIHRvIGNvbXBpbGUgaW50b1xuICBzdGF0aWMgX2NvbXBpbGVSZW5kZXJlcjp7W2lkOnN0cmluZ106IFJlbmRlcmVyfSA9IHt9O1xuICBzdGF0aWMgY29tcGlsZShlbGVtOkVsZW1lbnQpIHtcbiAgICBpZighZWxlbS5pZCkgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGNvbXBpbGUgZWxlbWVudCB3aXRoIGlkIFwiICsgZWxlbS5pZCk7XG4gICAgbGV0IHJlbmRlcmVyID0gUmVuZGVyZXIuX2NvbXBpbGVSZW5kZXJlcltlbGVtLmlkXTtcbiAgICBpZighcmVuZGVyZXIpIHJlbmRlcmVyID0gUmVuZGVyZXIuX2NvbXBpbGVSZW5kZXJlcltlbGVtLmlkXSA9IG5ldyBSZW5kZXJlcigpO1xuICAgIHJlbmRlcmVyLnJlbmRlcihbZWxlbV0pO1xuICAgIHJldHVybiByZW5kZXJlci5lbGVtZW50Q2FjaGVbZWxlbS5pZF07XG4gIH1cbiAgXG4gIGNvbnRlbnQ6IEhUTUxFbGVtZW50O1xuICBlbGVtZW50Q2FjaGU6IHtbaWQ6c3RyaW5nXTogSFRNTEVsZW1lbnR9O1xuICBwcmV2VHJlZTp7W2lkOnN0cmluZ106IEVsZW1lbnR9O1xuICB0cmVlOntbaWQ6c3RyaW5nXTogRWxlbWVudH07XG4gIHBvc3RSZW5kZXJzOiBFbGVtZW50W107XG4gIGxhc3REaWZmOiB7YWRkczogc3RyaW5nW10sIHVwZGF0ZXM6IHt9fTtcbiAgcXVldWVkOiBib29sZWFuO1xuICBoYW5kbGVFdmVudDogKGFueSk7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGhpcy5jb250ZW50LmNsYXNzTmFtZSA9IFwiX19yb290XCI7XG4gICAgdGhpcy5lbGVtZW50Q2FjaGUgPSB7IFwiX19yb290XCI6IHRoaXMuY29udGVudCB9O1xuICAgIHRoaXMucHJldlRyZWUgPSB7fTtcbiAgICB0aGlzLnRyZWUgPSB7fTtcbiAgICB0aGlzLnBvc3RSZW5kZXJzID0gW107XG4gICAgdGhpcy5sYXN0RGlmZiA9IHthZGRzOiBbXSwgdXBkYXRlczoge319O1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlRXZlbnQoZTogRXZlbnQpIHtcbiAgICAgIHZhciBpZCA9IChlLmN1cnJlbnRUYXJnZXQgfHwgZS50YXJnZXQpW1wiX2lkXCJdO1xuICAgICAgdmFyIGVsZW0gPSBzZWxmLnRyZWVbaWRdO1xuICAgICAgaWYgKCFlbGVtKSByZXR1cm47XG4gICAgICB2YXIgaGFuZGxlciA9IGVsZW1bZS50eXBlXTtcbiAgICAgIGlmIChoYW5kbGVyKSB7IGhhbmRsZXIoZSwgZWxlbSk7IH1cbiAgICB9O1xuICB9XG4gIHJlc2V0KCkge1xuICAgIHRoaXMucHJldlRyZWUgPSB0aGlzLnRyZWU7XG4gICAgdGhpcy50cmVlID0ge307XG4gICAgdGhpcy5wb3N0UmVuZGVycyA9IFtdO1xuICB9XG5cbiAgZG9taWZ5KCkge1xuICAgIHZhciBmYWtlUHJldjpFbGVtZW50ID0ge307IC8vY3JlYXRlIGFuIGVtcHR5IG9iamVjdCBvbmNlIGluc3RlYWQgb2YgZXZlcnkgaW5zdGFuY2Ugb2YgdGhlIGxvb3BcbiAgICB2YXIgZWxlbWVudHMgPSB0aGlzLnRyZWU7XG4gICAgdmFyIHByZXZFbGVtZW50cyA9IHRoaXMucHJldlRyZWU7XG4gICAgdmFyIGRpZmYgPSB0aGlzLmxhc3REaWZmO1xuICAgIHZhciBhZGRzID0gZGlmZi5hZGRzO1xuICAgIHZhciB1cGRhdGVzID0gZGlmZi51cGRhdGVzO1xuICAgIHZhciBlbGVtS2V5cyA9IE9iamVjdC5rZXlzKHVwZGF0ZXMpO1xuICAgIHZhciBlbGVtZW50Q2FjaGUgPSB0aGlzLmVsZW1lbnRDYWNoZTtcbiAgICB2YXIgdGVtcFR3ZWVuOmFueSA9IHt9O1xuXG4gICAgLy9DcmVhdGUgYWxsIHRoZSBuZXcgZWxlbWVudHMgdG8gZW5zdXJlIHRoYXQgdGhleSdyZSB0aGVyZSB3aGVuIHRoZXkgbmVlZCB0byBiZVxuICAgIC8vcGFyZW50ZWRcbiAgICBmb3IodmFyIGkgPSAwLCBsZW4gPSBhZGRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2YXIgaWQgPSBhZGRzW2ldO1xuICAgICAgdmFyIGN1ciA9IGVsZW1lbnRzW2lkXTtcbiAgICAgIHZhciBkaXY6IGFueTtcbiAgICAgIGlmIChjdXIuc3ZnKSB7XG4gICAgICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIGN1ci50IHx8IFwicmVjdFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoY3VyLnQgfHwgXCJkaXZcIik7XG4gICAgICB9XG4gICAgICBkaXYuX2lkID0gaWQ7XG4gICAgICBlbGVtZW50Q2FjaGVbaWRdID0gZGl2O1xuICAgICAgaWYoY3VyLmVudGVyKSB7XG4gICAgICAgIGlmKGN1ci5lbnRlci5kZWxheSkge1xuICAgICAgICAgIGN1ci5lbnRlci5kaXNwbGF5ID0gXCJhdXRvXCI7XG4gICAgICAgICAgZGl2LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIFZlbG9jaXR5KGRpdiwgY3VyLmVudGVyLCBjdXIuZW50ZXIpO1xuXG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yKHZhciBpID0gMCwgbGVuID0gZWxlbUtleXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHZhciBpZCA9IGVsZW1LZXlzW2ldO1xuICAgICAgdmFyIGN1ciA9IGVsZW1lbnRzW2lkXTtcbiAgICAgIHZhciBwcmV2ID0gcHJldkVsZW1lbnRzW2lkXSB8fCBmYWtlUHJldjtcbiAgICAgIHZhciB0eXBlID0gdXBkYXRlc1tpZF07XG4gICAgICB2YXIgZGl2O1xuICAgICAgaWYodHlwZSA9PT0gXCJyZXBsYWNlZFwiKSB7XG4gICAgICAgIHZhciBtZSA9IGVsZW1lbnRDYWNoZVtpZF07XG4gICAgICAgIGlmIChtZS5wYXJlbnROb2RlKSBtZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG1lKTtcbiAgICAgICAgaWYgKGN1ci5zdmcpIHtcbiAgICAgICAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBjdXIudCB8fCBcInJlY3RcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChjdXIudCB8fCBcImRpdlwiKTtcbiAgICAgICAgfVxuICAgICAgICBkaXYuX2lkID0gaWQ7XG4gICAgICAgIGVsZW1lbnRDYWNoZVtpZF0gPSBkaXY7XG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwicmVtb3ZlZFwiKSB7XG4gICAgICAgIC8vTk9URTogQmF0Y2hpbmcgdGhlIHJlbW92ZXMgc3VjaCB0aGF0IHlvdSBvbmx5IHJlbW92ZSB0aGUgcGFyZW50XG4gICAgICAgIC8vZGlkbid0IGFjdHVhbGx5IG1ha2UgdGhpcyBmYXN0ZXIgc3VycHJpc2luZ2x5LiBHaXZlbiB0aGF0IHRoaXNcbiAgICAgICAgLy9zdHJhdGVneSBpcyBtdWNoIHNpbXBsZXIgYW5kIHRoZXJlJ3Mgbm8gbm90aWNhYmxlIHBlcmYgZGlmZmVyZW5jZVxuICAgICAgICAvL3dlJ2xsIGp1c3QgZG8gdGhlIGR1bWIgdGhpbmcgYW5kIHJlbW92ZSBhbGwgdGhlIGNoaWxkcmVuIG9uZSBieSBvbmUuXG4gICAgICAgIHZhciBtZSA9IGVsZW1lbnRDYWNoZVtpZF1cbiAgICAgICAgaWYocHJldi5sZWF2ZSkge1xuICAgICAgICAgIHByZXYubGVhdmUuY29tcGxldGUgPSBwb3N0QW5pbWF0aW9uUmVtb3ZlO1xuICAgICAgICAgIGlmKHByZXYubGVhdmUuYWJzb2x1dGUpIHtcbiAgICAgICAgICAgIG1lLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBWZWxvY2l0eShtZSwgcHJldi5sZWF2ZSwgcHJldi5sZWF2ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihtZS5wYXJlbnROb2RlKSBtZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG1lKTtcbiAgICAgICAgZWxlbWVudENhY2hlW2lkXSA9IG51bGw7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGl2ID0gZWxlbWVudENhY2hlW2lkXTtcbiAgICAgIH1cblxuICAgICAgdmFyIHN0eWxlID0gZGl2LnN0eWxlO1xuICAgICAgaWYoY3VyLmMgIT09IHByZXYuYykgZGl2LmNsYXNzTmFtZSA9IGN1ci5jO1xuICAgICAgaWYoY3VyLmRyYWdnYWJsZSAhPT0gcHJldi5kcmFnZ2FibGUpIGRpdi5kcmFnZ2FibGUgPSBjdXIuZHJhZ2dhYmxlID09PSB1bmRlZmluZWQgPyBudWxsIDogXCJ0cnVlXCI7XG4gICAgICBpZihjdXIuY29udGVudEVkaXRhYmxlICE9PSBwcmV2LmNvbnRlbnRFZGl0YWJsZSkgZGl2LmNvbnRlbnRFZGl0YWJsZSA9IGN1ci5jb250ZW50RWRpdGFibGUgfHwgXCJpbmhlcml0XCI7XG4gICAgICBpZihjdXIuY29sc3BhbiAhPT0gcHJldi5jb2xzcGFuKSBkaXYuY29sU3BhbiA9IGN1ci5jb2xzcGFuO1xuICAgICAgaWYoY3VyLnBsYWNlaG9sZGVyICE9PSBwcmV2LnBsYWNlaG9sZGVyKSBkaXYucGxhY2Vob2xkZXIgPSBjdXIucGxhY2Vob2xkZXI7XG4gICAgICBpZihjdXIuc2VsZWN0ZWQgIT09IHByZXYuc2VsZWN0ZWQpIGRpdi5zZWxlY3RlZCA9IGN1ci5zZWxlY3RlZDtcbiAgICAgIGlmKGN1ci52YWx1ZSAhPT0gcHJldi52YWx1ZSkgZGl2LnZhbHVlID0gY3VyLnZhbHVlO1xuICAgICAgaWYoY3VyLnQgPT09IFwiaW5wdXRcIiAmJiBjdXIudHlwZSAhPT0gcHJldi50eXBlKSBkaXYudHlwZSA9IGN1ci50eXBlO1xuICAgICAgaWYoY3VyLnQgPT09IFwiaW5wdXRcIiAmJiBjdXIuY2hlY2tlZCAhPT0gcHJldi5jaGVja2VkKSBkaXYuY2hlY2tlZCA9IGN1ci5jaGVja2VkO1xuICAgICAgaWYoKGN1ci50ZXh0ICE9PSBwcmV2LnRleHQgfHwgY3VyLnN0cmljdFRleHQpICYmIGRpdi50ZXh0Q29udGVudCAhPT0gY3VyLnRleHQpIGRpdi50ZXh0Q29udGVudCA9IGN1ci50ZXh0ID09PSB1bmRlZmluZWQgPyBcIlwiIDogY3VyLnRleHQ7XG4gICAgICBpZihjdXIudGFiaW5kZXggIT09IHByZXYudGFiaW5kZXgpIGRpdi5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBjdXIudGFiaW5kZXgpO1xuICAgICAgaWYoY3VyLmhyZWYgIT09IHByZXYuaHJlZikgZGl2LnNldEF0dHJpYnV0ZShcImhyZWZcIiwgY3VyLmhyZWYpO1xuICAgICAgaWYoY3VyLnNyYyAhPT0gcHJldi5zcmMpIGRpdi5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgY3VyLnNyYyk7XG4gICAgICBpZihjdXIuZGF0YSAhPT0gcHJldi5kYXRhKSBkaXYuc2V0QXR0cmlidXRlKFwiZGF0YVwiLCBjdXIuZGF0YSk7XG4gICAgICBpZihjdXIuZG93bmxvYWQgIT09IHByZXYuZG93bmxvYWQpIGRpdi5zZXRBdHRyaWJ1dGUoXCJkb3dubG9hZFwiLCBjdXIuZG93bmxvYWQpO1xuICAgICAgaWYoY3VyLmFsbG93ZnVsbHNjcmVlbiAhPT0gcHJldi5hbGxvd2Z1bGxzY3JlZW4pIGRpdi5zZXRBdHRyaWJ1dGUoXCJhbGxvd2Z1bGxzY3JlZW5cIiwgY3VyLmFsbG93ZnVsbHNjcmVlbik7XG5cbiAgICAgIC8vIGFuaW1hdGVhYmxlIHByb3BlcnRpZXNcbiAgICAgIHZhciB0d2VlbiA9IGN1ci50d2VlbiB8fCB0ZW1wVHdlZW47XG4gICAgICBpZihjdXIuZmxleCAhPT0gcHJldi5mbGV4KSB7XG4gICAgICAgIGlmKHR3ZWVuLmZsZXgpIHRlbXBUd2Vlbi5mbGV4ID0gY3VyLmZsZXg7XG4gICAgICAgIGVsc2Ugc3R5bGUuZmxleCA9IGN1ci5mbGV4ID09PSB1bmRlZmluZWQgPyBcIlwiIDogY3VyLmZsZXg7XG4gICAgICB9XG4gICAgICBpZihjdXIubGVmdCAhPT0gcHJldi5sZWZ0KSB7XG4gICAgICAgICAgaWYodHdlZW4ubGVmdCkgdGVtcFR3ZWVuLmxlZnQgPSBjdXIubGVmdDtcbiAgICAgICAgICBlbHNlIHN0eWxlLmxlZnQgPSBjdXIubGVmdCA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IGN1ci5sZWZ0O1xuICAgICAgfVxuICAgICAgaWYoY3VyLnRvcCAhPT0gcHJldi50b3ApIHtcbiAgICAgICAgaWYodHdlZW4udG9wKSB0ZW1wVHdlZW4udG9wID0gY3VyLnRvcDtcbiAgICAgICAgZWxzZSBzdHlsZS50b3AgPSBjdXIudG9wID09PSB1bmRlZmluZWQgPyBcIlwiIDogY3VyLnRvcDtcbiAgICAgIH1cbiAgICAgIGlmKGN1ci5oZWlnaHQgIT09IHByZXYuaGVpZ2h0KSB7XG4gICAgICAgIGlmKHR3ZWVuLmhlaWdodCkgdGVtcFR3ZWVuLmhlaWdodCA9IGN1ci5oZWlnaHQ7XG4gICAgICAgIGVsc2Ugc3R5bGUuaGVpZ2h0ID0gY3VyLmhlaWdodCA9PT0gdW5kZWZpbmVkID8gXCJhdXRvXCIgOiBjdXIuaGVpZ2h0O1xuICAgICAgfVxuICAgICAgaWYoY3VyLndpZHRoICE9PSBwcmV2LndpZHRoKSB7XG4gICAgICAgIGlmKHR3ZWVuLndpZHRoKSB0ZW1wVHdlZW4ud2lkdGggPSBjdXIud2lkdGg7XG4gICAgICAgIGVsc2Ugc3R5bGUud2lkdGggPSBjdXIud2lkdGggPT09IHVuZGVmaW5lZCA/IFwiYXV0b1wiIDogY3VyLndpZHRoO1xuICAgICAgfVxuICAgICAgaWYoY3VyLnpJbmRleCAhPT0gcHJldi56SW5kZXgpIHtcbiAgICAgICAgaWYodHdlZW4uekluZGV4KSB0ZW1wVHdlZW4uekluZGV4ID0gY3VyLnpJbmRleDtcbiAgICAgICAgZWxzZSBzdHlsZS56SW5kZXggPSBjdXIuekluZGV4O1xuICAgICAgfVxuICAgICAgaWYoY3VyLmJhY2tncm91bmRDb2xvciAhPT0gcHJldi5iYWNrZ3JvdW5kQ29sb3IpIHtcbiAgICAgICAgaWYodHdlZW4uYmFja2dyb3VuZENvbG9yKSB0ZW1wVHdlZW4uYmFja2dyb3VuZENvbG9yID0gY3VyLmJhY2tncm91bmRDb2xvcjtcbiAgICAgICAgZWxzZSBzdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjdXIuYmFja2dyb3VuZENvbG9yIHx8IFwidHJhbnNwYXJlbnRcIjtcbiAgICAgIH1cbiAgICAgIGlmKGN1ci5ib3JkZXJDb2xvciAhPT0gcHJldi5ib3JkZXJDb2xvcikge1xuICAgICAgICBpZih0d2Vlbi5ib3JkZXJDb2xvcikgdGVtcFR3ZWVuLmJvcmRlckNvbG9yID0gY3VyLmJvcmRlckNvbG9yO1xuICAgICAgICBlbHNlIHN0eWxlLmJvcmRlckNvbG9yID0gY3VyLmJvcmRlckNvbG9yIHx8IFwibm9uZVwiO1xuICAgICAgfVxuICAgICAgaWYoY3VyLmJvcmRlcldpZHRoICE9PSBwcmV2LmJvcmRlcldpZHRoKSB7XG4gICAgICAgIGlmKHR3ZWVuLmJvcmRlcldpZHRoKSB0ZW1wVHdlZW4uYm9yZGVyV2lkdGggPSBjdXIuYm9yZGVyV2lkdGg7XG4gICAgICAgIGVsc2Ugc3R5bGUuYm9yZGVyV2lkdGggPSBjdXIuYm9yZGVyV2lkdGggfHwgMDtcbiAgICAgIH1cbiAgICAgIGlmKGN1ci5ib3JkZXJSYWRpdXMgIT09IHByZXYuYm9yZGVyUmFkaXVzKSB7XG4gICAgICAgIGlmKHR3ZWVuLmJvcmRlclJhZGl1cykgdGVtcFR3ZWVuLmJvcmRlclJhZGl1cyA9IGN1ci5ib3JkZXJSYWRpdXM7XG4gICAgICAgIGVsc2Ugc3R5bGUuYm9yZGVyUmFkaXVzID0gKGN1ci5ib3JkZXJSYWRpdXMgfHwgMCkgKyBcInB4XCI7XG4gICAgICB9XG4gICAgICBpZihjdXIub3BhY2l0eSAhPT0gcHJldi5vcGFjaXR5KSB7XG4gICAgICAgIGlmKHR3ZWVuLm9wYWNpdHkpIHRlbXBUd2Vlbi5vcGFjaXR5ID0gY3VyLm9wYWNpdHk7XG4gICAgICAgIGVsc2Ugc3R5bGUub3BhY2l0eSA9IGN1ci5vcGFjaXR5ID09PSB1bmRlZmluZWQgPyAxIDogY3VyLm9wYWNpdHk7XG4gICAgICB9XG4gICAgICBpZihjdXIuZm9udFNpemUgIT09IHByZXYuZm9udFNpemUpIHtcbiAgICAgICAgaWYodHdlZW4uZm9udFNpemUpIHRlbXBUd2Vlbi5mb250U2l6ZSA9IGN1ci5mb250U2l6ZTtcbiAgICAgICAgZWxzZSBzdHlsZS5mb250U2l6ZSA9IGN1ci5mb250U2l6ZTtcbiAgICAgIH1cbiAgICAgIGlmKGN1ci5jb2xvciAhPT0gcHJldi5jb2xvcikge1xuICAgICAgICBpZih0d2Vlbi5jb2xvcikgdGVtcFR3ZWVuLmNvbG9yID0gY3VyLmNvbG9yO1xuICAgICAgICBlbHNlIHN0eWxlLmNvbG9yID0gY3VyLmNvbG9yIHx8IFwiaW5oZXJpdFwiO1xuICAgICAgfVxuXG4gICAgICBsZXQgYW5pbUtleXMgPSBPYmplY3Qua2V5cyh0ZW1wVHdlZW4pO1xuICAgICAgaWYoYW5pbUtleXMubGVuZ3RoKSB7XG4gICAgICAgIFZlbG9jaXR5KGRpdiwgdGVtcFR3ZWVuLCB0d2Vlbik7XG4gICAgICAgIHRlbXBUd2VlbiA9IHt9O1xuICAgICAgfVxuXG4gICAgICAvLyBub24tYW5pbWF0aW9uIHN0eWxlIHByb3BlcnRpZXNcbiAgICAgIGlmKGN1ci5iYWNrZ3JvdW5kSW1hZ2UgIT09IHByZXYuYmFja2dyb3VuZEltYWdlKSBzdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCcke2N1ci5iYWNrZ3JvdW5kSW1hZ2V9JylgO1xuICAgICAgaWYoY3VyLmJvcmRlciAhPT0gcHJldi5ib3JkZXIpIHN0eWxlLmJvcmRlciA9IGN1ci5ib3JkZXIgfHwgXCJub25lXCI7XG4gICAgICBpZihjdXIudGV4dEFsaWduICE9PSBwcmV2LnRleHRBbGlnbikge1xuICAgICAgICBzdHlsZS5hbGlnbkl0ZW1zID0gY3VyLnRleHRBbGlnbjtcbiAgICAgICAgaWYoY3VyLnRleHRBbGlnbiA9PT0gXCJjZW50ZXJcIikge1xuICAgICAgICAgIHN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgICAgIH0gZWxzZSBpZihjdXIudGV4dEFsaWduID09PSBcImZsZXgtZW5kXCIpIHtcbiAgICAgICAgICBzdHlsZS50ZXh0QWxpZ24gPSBcInJpZ2h0XCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3R5bGUudGV4dEFsaWduID0gXCJsZWZ0XCI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmKGN1ci52ZXJ0aWNhbEFsaWduICE9PSBwcmV2LnZlcnRpY2FsQWxpZ24pIHN0eWxlLmp1c3RpZnlDb250ZW50ID0gY3VyLnZlcnRpY2FsQWxpZ247XG4gICAgICBpZihjdXIuZm9udEZhbWlseSAhPT0gcHJldi5mb250RmFtaWx5KSBzdHlsZS5mb250RmFtaWx5ID0gY3VyLmZvbnRGYW1pbHkgfHwgXCJpbmhlcml0XCI7XG4gICAgICBpZihjdXIudHJhbnNmb3JtICE9PSBwcmV2LnRyYW5zZm9ybSkgc3R5bGUudHJhbnNmb3JtID0gY3VyLnRyYW5zZm9ybSB8fCBcIm5vbmVcIjtcbiAgICAgIGlmKGN1ci5zdHlsZSAhPT0gcHJldi5zdHlsZSkgZGl2LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIGN1ci5zdHlsZSk7XG5cbiAgICAgIGlmKGN1ci5kYW5nZXJvdXNseVNldElubmVySFRNTCAhPT0gcHJldi5kYW5nZXJvdXNseVNldElubmVySFRNTCkgZGl2LmlubmVySFRNTCA9IGN1ci5kYW5nZXJvdXNseVNldElubmVySFRNTDtcblxuICAgICAgLy8gZGVidWcvcHJvZ3JhbW1hdGljIHByb3BlcnRpZXNcbiAgICAgIGlmKGN1ci5zZW1hbnRpYyAhPT0gcHJldi5zZW1hbnRpYykgZGl2LnNldEF0dHJpYnV0ZShcImRhdGEtc2VtYW50aWNcIiwgY3VyLnNlbWFudGljKTtcbiAgICAgIGlmKGN1ci5kZWJ1ZyAhPT0gcHJldi5kZWJ1ZykgZGl2LnNldEF0dHJpYnV0ZShcImRhdGEtZGVidWdcIiwgY3VyLmRlYnVnKTtcblxuICAgICAgLy8gU1ZHIHByb3BlcnRpZXNcbiAgICAgIGlmKGN1ci5zdmcpIHtcbiAgICAgICAgaWYoY3VyLmZpbGwgIT09IHByZXYuZmlsbCkgZGl2LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiZmlsbFwiLCBjdXIuZmlsbCk7XG4gICAgICAgIGlmKGN1ci5zdHJva2UgIT09IHByZXYuc3Ryb2tlKSBkaXYuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJzdHJva2VcIiwgY3VyLnN0cm9rZSk7XG4gICAgICAgIGlmKGN1ci5zdHJva2VXaWR0aCAhPT0gcHJldi5zdHJva2VXaWR0aCkgZGl2LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwic3Ryb2tlLXdpZHRoXCIsIGN1ci5zdHJva2VXaWR0aCk7XG4gICAgICAgIGlmKGN1ci5kICE9PSBwcmV2LmQpIGRpdi5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImRcIiwgY3VyLmQpO1xuICAgICAgICBpZihjdXIuYyAhPT0gcHJldi5jKSBkaXYuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJjbGFzc1wiLCBjdXIuYyk7XG4gICAgICAgIGlmKGN1ci54ICE9PSBwcmV2LngpICBkaXYuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ4XCIsIGN1ci54KTtcbiAgICAgICAgaWYoY3VyLnkgIT09IHByZXYueSkgZGl2LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwieVwiLCBjdXIueSk7XG4gICAgICAgIGlmKGN1ci5keCAhPT0gcHJldi5keCkgIGRpdi5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImR4XCIsIGN1ci5keCk7XG4gICAgICAgIGlmKGN1ci5keSAhPT0gcHJldi5keSkgZGl2LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiZHlcIiwgY3VyLmR5KTtcbiAgICAgICAgaWYoY3VyLmN4ICE9PSBwcmV2LmN4KSAgZGl2LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiY3hcIiwgY3VyLmN4KTtcbiAgICAgICAgaWYoY3VyLmN5ICE9PSBwcmV2LmN5KSBkaXYuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJjeVwiLCBjdXIuY3kpO1xuICAgICAgICBpZihjdXIuciAhPT0gcHJldi5yKSBkaXYuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJyXCIsIGN1ci5yKTtcbiAgICAgICAgaWYoY3VyLmhlaWdodCAhPT0gcHJldi5oZWlnaHQpIGRpdi5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImhlaWdodFwiLCBjdXIuaGVpZ2h0KTtcbiAgICAgICAgaWYoY3VyLndpZHRoICE9PSBwcmV2LndpZHRoKSAgZGl2LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwid2lkdGhcIiwgY3VyLndpZHRoKTtcbiAgICAgICAgaWYoY3VyLnhsaW5raHJlZiAhPT0gcHJldi54bGlua2hyZWYpICBkaXYuc2V0QXR0cmlidXRlTlMoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnLCBcImhyZWZcIiwgY3VyLnhsaW5raHJlZik7XG4gICAgICAgIGlmKGN1ci5zdGFydE9mZnNldCAhPT0gcHJldi5zdGFydE9mZnNldCkgZGl2LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwic3RhcnRPZmZzZXRcIiwgY3VyLnN0YXJ0T2Zmc2V0KTtcbiAgICAgICAgaWYoY3VyLmlkICE9PSBwcmV2LmlkKSBkaXYuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJpZFwiLCBjdXIuaWQpO1xuICAgICAgICBpZihjdXIudmlld0JveCAhPT0gcHJldi52aWV3Qm94KSBkaXYuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJ2aWV3Qm94XCIsIGN1ci52aWV3Qm94KTtcbiAgICAgICAgaWYoY3VyLnRyYW5zZm9ybSAhPT0gcHJldi50cmFuc2Zvcm0pIGRpdi5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcInRyYW5zZm9ybVwiLCBjdXIudHJhbnNmb3JtKTtcbiAgICAgICAgaWYoY3VyLmRyYWdnYWJsZSAhPT0gcHJldi5kcmFnZ2FibGUpIGRpdi5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcImRyYWdnYWJsZVwiLCBjdXIuZHJhZ2dhYmxlKTtcbiAgICAgICAgaWYoY3VyLnRleHRBbmNob3IgIT09IHByZXYudGV4dEFuY2hvcikgZGl2LnNldEF0dHJpYnV0ZU5TKG51bGwsIFwidGV4dC1hbmNob3JcIiwgY3VyLnRleHRBbmNob3IpO1xuICAgICAgfVxuXG4gICAgICAvL2V2ZW50c1xuICAgICAgaWYoY3VyLmRibGNsaWNrICE9PSBwcmV2LmRibGNsaWNrKSBkaXYub25kYmxjbGljayA9IGN1ci5kYmxjbGljayAhPT0gdW5kZWZpbmVkID8gdGhpcy5oYW5kbGVFdmVudCA6IHVuZGVmaW5lZDtcbiAgICAgIGlmKGN1ci5jbGljayAhPT0gcHJldi5jbGljaykgZGl2Lm9uY2xpY2sgPSBjdXIuY2xpY2sgIT09IHVuZGVmaW5lZCA/IHRoaXMuaGFuZGxlRXZlbnQgOiB1bmRlZmluZWQ7XG4gICAgICBpZihjdXIuY29udGV4dG1lbnUgIT09IHByZXYuY29udGV4dG1lbnUpIGRpdi5vbmNvbnRleHRtZW51ID0gY3VyLmNvbnRleHRtZW51ICE9PSB1bmRlZmluZWQgPyB0aGlzLmhhbmRsZUV2ZW50IDogdW5kZWZpbmVkO1xuICAgICAgaWYoY3VyLm1vdXNlZG93biAhPT0gcHJldi5tb3VzZWRvd24pIGRpdi5vbm1vdXNlZG93biA9IGN1ci5tb3VzZWRvd24gIT09IHVuZGVmaW5lZCA/IHRoaXMuaGFuZGxlRXZlbnQgOiB1bmRlZmluZWQ7XG4gICAgICBpZihjdXIubW91c2Vtb3ZlICE9PSBwcmV2Lm1vdXNlbW92ZSkgZGl2Lm9ubW91c2Vtb3ZlID0gY3VyLm1vdXNlbW92ZSAhPT0gdW5kZWZpbmVkID8gdGhpcy5oYW5kbGVFdmVudCA6IHVuZGVmaW5lZDtcbiAgICAgIGlmKGN1ci5tb3VzZXVwICE9PSBwcmV2Lm1vdXNldXApIGRpdi5vbm1vdXNldXAgPSBjdXIubW91c2V1cCAhPT0gdW5kZWZpbmVkID8gdGhpcy5oYW5kbGVFdmVudCA6IHVuZGVmaW5lZDtcbiAgICAgIGlmKGN1ci5tb3VzZW92ZXIgIT09IHByZXYubW91c2VvdmVyKSBkaXYub25tb3VzZW92ZXIgPSBjdXIubW91c2VvdmVyICE9PSB1bmRlZmluZWQgPyB0aGlzLmhhbmRsZUV2ZW50IDogdW5kZWZpbmVkO1xuICAgICAgaWYoY3VyLm1vdXNlb3V0ICE9PSBwcmV2Lm1vdXNlb3V0KSBkaXYub25tb3VzZW91dCA9IGN1ci5tb3VzZW91dCAhPT0gdW5kZWZpbmVkID8gdGhpcy5oYW5kbGVFdmVudCA6IHVuZGVmaW5lZDtcbiAgICAgIGlmKGN1ci5tb3VzZWxlYXZlICE9PSBwcmV2Lm1vdXNlbGVhdmUpIGRpdi5vbm1vdXNlbGVhdmUgPSBjdXIubW91c2VsZWF2ZSAhPT0gdW5kZWZpbmVkID8gdGhpcy5oYW5kbGVFdmVudCA6IHVuZGVmaW5lZDtcbiAgICAgIGlmKGN1ci5tb3VzZXdoZWVsICE9PSBwcmV2Lm1vdXNld2hlZWwpIGRpdi5vbm1vdXNlaGVlbCA9IGN1ci5tb3VzZXdoZWVsICE9PSB1bmRlZmluZWQgPyB0aGlzLmhhbmRsZUV2ZW50IDogdW5kZWZpbmVkO1xuICAgICAgaWYoY3VyLmRyYWdvdmVyICE9PSBwcmV2LmRyYWdvdmVyKSBkaXYub25kcmFnb3ZlciA9IGN1ci5kcmFnb3ZlciAhPT0gdW5kZWZpbmVkID8gdGhpcy5oYW5kbGVFdmVudCA6IHVuZGVmaW5lZDtcbiAgICAgIGlmKGN1ci5kcmFnc3RhcnQgIT09IHByZXYuZHJhZ3N0YXJ0KSBkaXYub25kcmFnc3RhcnQgPSBjdXIuZHJhZ3N0YXJ0ICE9PSB1bmRlZmluZWQgPyB0aGlzLmhhbmRsZUV2ZW50IDogdW5kZWZpbmVkO1xuICAgICAgaWYoY3VyLmRyYWdlbmQgIT09IHByZXYuZHJhZ2VuZCkgZGl2Lm9uZHJhZ2VuZCA9IGN1ci5kcmFnZW5kICE9PSB1bmRlZmluZWQgPyB0aGlzLmhhbmRsZUV2ZW50IDogdW5kZWZpbmVkO1xuICAgICAgaWYoY3VyLmRyYWcgIT09IHByZXYuZHJhZykgZGl2Lm9uZHJhZyA9IGN1ci5kcmFnICE9PSB1bmRlZmluZWQgPyB0aGlzLmhhbmRsZUV2ZW50IDogdW5kZWZpbmVkO1xuICAgICAgaWYoY3VyLmRyb3AgIT09IHByZXYuZHJvcCkgZGl2Lm9uZHJvcCA9IGN1ci5kcm9wICE9PSB1bmRlZmluZWQgPyB0aGlzLmhhbmRsZUV2ZW50IDogdW5kZWZpbmVkO1xuICAgICAgaWYoY3VyLnNjcm9sbCAhPT0gcHJldi5zY3JvbGwpIGRpdi5vbnNjcm9sbCA9IGN1ci5zY3JvbGwgIT09IHVuZGVmaW5lZCA/IHRoaXMuaGFuZGxlRXZlbnQgOiB1bmRlZmluZWQ7XG4gICAgICBpZihjdXIuZm9jdXMgIT09IHByZXYuZm9jdXMpIGRpdi5vbmZvY3VzID0gY3VyLmZvY3VzICE9PSB1bmRlZmluZWQgPyB0aGlzLmhhbmRsZUV2ZW50IDogdW5kZWZpbmVkO1xuICAgICAgaWYoY3VyLmJsdXIgIT09IHByZXYuYmx1cikgZGl2Lm9uYmx1ciA9IGN1ci5ibHVyICE9PSB1bmRlZmluZWQgPyB0aGlzLmhhbmRsZUV2ZW50IDogdW5kZWZpbmVkO1xuICAgICAgaWYoY3VyLmlucHV0ICE9PSBwcmV2LmlucHV0KSBkaXYub25pbnB1dCA9IGN1ci5pbnB1dCAhPT0gdW5kZWZpbmVkID8gdGhpcy5oYW5kbGVFdmVudCA6IHVuZGVmaW5lZDtcbiAgICAgIGlmKGN1ci5jaGFuZ2UgIT09IHByZXYuY2hhbmdlKSBkaXYub25jaGFuZ2UgPSBjdXIuY2hhbmdlICE9PSB1bmRlZmluZWQgPyB0aGlzLmhhbmRsZUV2ZW50IDogdW5kZWZpbmVkO1xuICAgICAgaWYoY3VyLmtleXVwICE9PSBwcmV2LmtleXVwKSBkaXYub25rZXl1cCA9IGN1ci5rZXl1cCAhPT0gdW5kZWZpbmVkID8gdGhpcy5oYW5kbGVFdmVudCA6IHVuZGVmaW5lZDtcbiAgICAgIGlmKGN1ci5rZXlkb3duICE9PSBwcmV2LmtleWRvd24pIGRpdi5vbmtleWRvd24gPSBjdXIua2V5ZG93biAhPT0gdW5kZWZpbmVkID8gdGhpcy5oYW5kbGVFdmVudCA6IHVuZGVmaW5lZDtcblxuICAgICAgaWYodHlwZSA9PT0gXCJhZGRlZFwiIHx8IHR5cGUgPT09IFwicmVwbGFjZWRcIiB8fCB0eXBlID09PSBcIm1vdmVkXCIpIHtcbiAgICAgICAgdmFyIHBhcmVudEVsID0gZWxlbWVudENhY2hlW2N1ci5wYXJlbnRdO1xuICAgICAgICBpZihwYXJlbnRFbCkge1xuICAgICAgICAgIGlmKGN1ci5peCA+PSBwYXJlbnRFbC5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgIHBhcmVudEVsLmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcmVudEVsLmluc2VydEJlZm9yZShkaXYsIHBhcmVudEVsLmNoaWxkcmVuW2N1ci5peF0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRpZmYoKSB7XG4gICAgdmFyIGEgPSB0aGlzLnByZXZUcmVlO1xuICAgIHZhciBiID0gdGhpcy50cmVlO1xuICAgIHZhciBhcyA9IE9iamVjdC5rZXlzKGEpO1xuICAgIHZhciBicyA9IE9iamVjdC5rZXlzKGIpO1xuICAgIHZhciB1cGRhdGVkID0ge307XG4gICAgdmFyIGFkZHMgPSBbXTtcbiAgICBmb3IodmFyIGkgPSAwLCBsZW4gPSBhcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgdmFyIGlkID0gYXNbaV07XG4gICAgICB2YXIgY3VyQSA9IGFbaWRdO1xuICAgICAgdmFyIGN1ckIgPSBiW2lkXTtcbiAgICAgIGlmKGN1ckIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB1cGRhdGVkW2lkXSA9IFwicmVtb3ZlZFwiO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmKGN1ckEudCAhPT0gY3VyQi50KSB7XG4gICAgICAgIHVwZGF0ZWRbaWRdID0gXCJyZXBsYWNlZFwiO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmKGN1ckEuaXggIT09IGN1ckIuaXggfHwgY3VyQS5wYXJlbnQgIT09IGN1ckIucGFyZW50KSB7XG4gICAgICAgIHVwZGF0ZWRbaWRdID0gXCJtb3ZlZFwiO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYoIWN1ckIuZGlydHlcbiAgICAgICAgICAmJiBjdXJBLmMgPT09IGN1ckIuY1xuICAgICAgICAgICYmIGN1ckEua2V5ID09PSBjdXJCLmtleVxuICAgICAgICAgICYmIGN1ckEuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgPT09IGN1ckIuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUxcbiAgICAgICAgICAmJiBjdXJBLnRhYmluZGV4ID09PSBjdXJCLnRhYmluZGV4XG4gICAgICAgICAgJiYgY3VyQS5ocmVmID09PSBjdXJCLmhyZWZcbiAgICAgICAgICAmJiBjdXJBLnNyYyA9PT0gY3VyQi5zcmNcbiAgICAgICAgICAmJiBjdXJBLmRhdGEgPT09IGN1ckIuZGF0YVxuICAgICAgICAgICYmIGN1ckEuZG93bmxvYWQgPT09IGN1ckIuZG93bmxvYWRcbiAgICAgICAgICAmJiBjdXJBLmFsbG93ZnVsbHNjcmVlbiA9PT0gY3VyQi5hbGxvd2Z1bGxzY3JlZW5cbiAgICAgICAgICAmJiBjdXJBLnBsYWNlaG9sZGVyID09PSBjdXJCLnBsYWNlaG9sZGVyXG4gICAgICAgICAgJiYgY3VyQS5zZWxlY3RlZCA9PT0gY3VyQi5zZWxlY3RlZFxuICAgICAgICAgICYmIGN1ckEuZHJhZ2dhYmxlID09PSBjdXJCLmRyYWdnYWJsZVxuICAgICAgICAgICYmIGN1ckEuY29udGVudEVkaXRhYmxlID09PSBjdXJCLmNvbnRlbnRFZGl0YWJsZVxuICAgICAgICAgICYmIGN1ckEudmFsdWUgPT09IGN1ckIudmFsdWVcbiAgICAgICAgICAmJiBjdXJBLnR5cGUgPT09IGN1ckIudHlwZVxuICAgICAgICAgICYmIGN1ckEuY2hlY2tlZCA9PT0gY3VyQi5jaGVja2VkXG4gICAgICAgICAgJiYgY3VyQS50ZXh0ID09PSBjdXJCLnRleHRcbiAgICAgICAgICAmJiBjdXJBLnRvcCA9PT0gY3VyQi50b3BcbiAgICAgICAgICAmJiBjdXJBLmZsZXggPT09IGN1ckIuZmxleFxuICAgICAgICAgICYmIGN1ckEubGVmdCA9PT0gY3VyQi5sZWZ0XG4gICAgICAgICAgJiYgY3VyQS53aWR0aCA9PT0gY3VyQi53aWR0aFxuICAgICAgICAgICYmIGN1ckEuaGVpZ2h0ID09PSBjdXJCLmhlaWdodFxuICAgICAgICAgICYmIGN1ckEuekluZGV4ID09PSBjdXJCLnpJbmRleFxuICAgICAgICAgICYmIGN1ckEuYmFja2dyb3VuZENvbG9yID09PSBjdXJCLmJhY2tncm91bmRDb2xvclxuICAgICAgICAgICYmIGN1ckEuYmFja2dyb3VuZEltYWdlID09PSBjdXJCLmJhY2tncm91bmRJbWFnZVxuICAgICAgICAgICYmIGN1ckEuY29sb3IgPT09IGN1ckIuY29sb3JcbiAgICAgICAgICAmJiBjdXJBLmNvbHNwYW4gPT09IGN1ckIuY29sc3BhblxuICAgICAgICAgICYmIGN1ckEuYm9yZGVyID09PSBjdXJCLmJvcmRlclxuICAgICAgICAgICYmIGN1ckEuYm9yZGVyQ29sb3IgPT09IGN1ckIuYm9yZGVyQ29sb3JcbiAgICAgICAgICAmJiBjdXJBLmJvcmRlcldpZHRoID09PSBjdXJCLmJvcmRlcldpZHRoXG4gICAgICAgICAgJiYgY3VyQS5ib3JkZXJSYWRpdXMgPT09IGN1ckIuYm9yZGVyUmFkaXVzXG4gICAgICAgICAgJiYgY3VyQS5vcGFjaXR5ID09PSBjdXJCLm9wYWNpdHlcbiAgICAgICAgICAmJiBjdXJBLmZvbnRGYW1pbHkgPT09IGN1ckIuZm9udEZhbWlseVxuICAgICAgICAgICYmIGN1ckEuZm9udFNpemUgPT09IGN1ckIuZm9udFNpemVcbiAgICAgICAgICAmJiBjdXJBLnRleHRBbGlnbiA9PT0gY3VyQi50ZXh0QWxpZ25cbiAgICAgICAgICAmJiBjdXJBLnRyYW5zZm9ybSA9PT0gY3VyQi50cmFuc2Zvcm1cbiAgICAgICAgICAmJiBjdXJBLnZlcnRpY2FsQWxpZ24gPT09IGN1ckIudmVydGljYWxBbGlnblxuICAgICAgICAgICYmIGN1ckEuc2VtYW50aWMgPT09IGN1ckIuc2VtYW50aWNcbiAgICAgICAgICAmJiBjdXJBLmRlYnVnID09PSBjdXJCLmRlYnVnXG4gICAgICAgICAgJiYgY3VyQS5zdHlsZSA9PT0gY3VyQi5zdHlsZVxuICAgICAgICAgICYmIChjdXJCLnN2ZyA9PT0gdW5kZWZpbmVkIHx8IChcbiAgICAgICAgICAgICAgY3VyQS54ID09PSBjdXJCLnhcbiAgICAgICAgICAgICAgJiYgY3VyQS55ID09PSBjdXJCLnlcbiAgICAgICAgICAgICAgJiYgY3VyQS5keCA9PT0gY3VyQi5keFxuICAgICAgICAgICAgICAmJiBjdXJBLmR5ID09PSBjdXJCLmR5XG4gICAgICAgICAgICAgICYmIGN1ckEuY3ggPT09IGN1ckIuY3hcbiAgICAgICAgICAgICAgJiYgY3VyQS5jeSA9PT0gY3VyQi5jeVxuICAgICAgICAgICAgICAmJiBjdXJBLnIgPT09IGN1ckIuclxuICAgICAgICAgICAgICAmJiBjdXJBLmQgPT09IGN1ckIuZFxuICAgICAgICAgICAgICAmJiBjdXJBLmZpbGwgPT09IGN1ckIuZmlsbFxuICAgICAgICAgICAgICAmJiBjdXJBLnN0cm9rZSA9PT0gY3VyQi5zdHJva2VcbiAgICAgICAgICAgICAgJiYgY3VyQS5zdHJva2VXaWR0aCA9PT0gY3VyQi5zdHJva2VXaWR0aFxuICAgICAgICAgICAgICAmJiBjdXJBLnN0YXJ0T2Zmc2V0ID09PSBjdXJCLnN0YXJ0T2Zmc2V0XG4gICAgICAgICAgICAgICYmIGN1ckEudGV4dEFuY2hvciA9PT0gY3VyQi50ZXh0QW5jaG9yXG4gICAgICAgICAgICAgICYmIGN1ckEudmlld0JveCA9PT0gY3VyQi52aWV3Qm94XG4gICAgICAgICAgICAgICYmIGN1ckEueGxpbmtocmVmID09PSBjdXJCLnhsaW5raHJlZikpXG4gICAgICAgICAgICAgICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHVwZGF0ZWRbaWRdID0gXCJ1cGRhdGVkXCI7XG4gICAgfVxuICAgIGZvcih2YXIgaSA9IDAsIGxlbiA9IGJzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2YXIgaWQgPSBic1tpXTtcbiAgICAgIHZhciBjdXJBID0gYVtpZF07XG4gICAgICBpZihjdXJBID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYWRkcy5wdXNoKGlkKTtcbiAgICAgICAgdXBkYXRlZFtpZF0gPSBcImFkZGVkXCI7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmxhc3REaWZmID0ge2FkZHM6IGFkZHMsIHVwZGF0ZXM6IHVwZGF0ZWR9O1xuICAgIHJldHVybiB0aGlzLmxhc3REaWZmO1xuICB9XG5cbiAgcHJlcGFyZShyb290OkVsZW1lbnQpIHtcbiAgICB2YXIgZWxlbUxlbiA9IDE7XG4gICAgdmFyIHRyZWUgPSB0aGlzLnRyZWU7XG4gICAgdmFyIGVsZW1lbnRzID0gW3Jvb3RdO1xuICAgIHZhciBlbGVtOkVsZW1lbnQ7XG4gICAgZm9yKHZhciBlbGVtSXggPSAwOyBlbGVtSXggPCBlbGVtTGVuOyBlbGVtSXgrKykge1xuICAgICAgZWxlbSA9IGVsZW1lbnRzW2VsZW1JeF07XG4gICAgICBpZihlbGVtLnBhcmVudCA9PT0gdW5kZWZpbmVkKSBlbGVtLnBhcmVudCA9IFwiX19yb290XCI7XG4gICAgICBpZihlbGVtLmlkID09PSB1bmRlZmluZWQpIGVsZW0uaWQgPSBcIl9fcm9vdF9fXCIgKyBlbGVtSXg7XG4gICAgICB0cmVlW2VsZW0uaWRdID0gZWxlbTtcbiAgICAgIGlmKGVsZW0ucG9zdFJlbmRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMucG9zdFJlbmRlcnMucHVzaChlbGVtKTtcbiAgICAgIH1cbiAgICAgIHZhciBjaGlsZHJlbiA9IGVsZW0uY2hpbGRyZW47XG4gICAgICBpZihjaGlsZHJlbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZvcih2YXIgY2hpbGRJeCA9IDAsIGxlbiA9IGNoaWxkcmVuLmxlbmd0aDsgY2hpbGRJeCA8IGxlbjsgY2hpbGRJeCsrKSB7XG4gICAgICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5bY2hpbGRJeF07XG4gICAgICAgICAgaWYoY2hpbGQgPT09IHVuZGVmaW5lZCkgY29udGludWU7XG4gICAgICAgICAgaWYoY2hpbGQuaWQgPT09IHVuZGVmaW5lZCkgeyBjaGlsZC5pZCA9IGVsZW0uaWQgKyBcIl9fXCIgKyBjaGlsZEl4OyB9XG4gICAgICAgICAgaWYoY2hpbGQuaXggPT09IHVuZGVmaW5lZCkgeyBjaGlsZC5peCA9IGNoaWxkSXg7IH1cbiAgICAgICAgICBpZihjaGlsZC5wYXJlbnQgPT09IHVuZGVmaW5lZCkgeyBjaGlsZC5wYXJlbnQgPSBlbGVtLmlkOyB9XG4gICAgICAgICAgZWxlbWVudHMucHVzaChjaGlsZCk7XG4gICAgICAgICAgZWxlbUxlbisrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cmVlO1xuICB9XG5cbiAgcG9zdERvbWlmeSgpIHtcbiAgICB2YXIgcG9zdFJlbmRlcnMgPSB0aGlzLnBvc3RSZW5kZXJzO1xuICAgIHZhciBkaWZmID0gdGhpcy5sYXN0RGlmZi51cGRhdGVzO1xuICAgIHZhciBlbGVtZW50Q2FjaGUgPSB0aGlzLmVsZW1lbnRDYWNoZTtcbiAgICBmb3IodmFyIGkgPSAwLCBsZW4gPSBwb3N0UmVuZGVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgdmFyIGVsZW0gPSBwb3N0UmVuZGVyc1tpXTtcbiAgICAgIHZhciBpZCA9IGVsZW0uaWQ7XG4gICAgICBpZihkaWZmW2lkXSA9PT0gXCJ1cGRhdGVkXCIgfHwgZGlmZltpZF0gPT09IFwiYWRkZWRcIiB8fCBkaWZmW2lkXSA9PT0gXCJyZXBsYWNlZFwiIHx8IGVsZW0uZGlydHkgfHwgZGlmZltpZF0gPT09IFwibW92ZWRcIikge1xuICAgICAgICBlbGVtLnBvc3RSZW5kZXIoZWxlbWVudENhY2hlW2VsZW0uaWRdLCBlbGVtKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZW5kZXIoZWxlbXM6RWxlbWVudFtdKSB7XG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgLy8gV2Ugc29ydCBlbGVtZW50cyBieSBkZXB0aCB0byBhbGxvdyB0aGVtIHRvIGJlIHNlbGYgcmVmZXJlbnRpYWwuXG4gICAgZWxlbXMuc29ydCgoYSwgYikgPT4gKGEucGFyZW50ID8gYS5wYXJlbnQuc3BsaXQoXCJfX1wiKS5sZW5ndGggOiAwKSAtIChiLnBhcmVudCA/IGIucGFyZW50LnNwbGl0KFwiX19cIikubGVuZ3RoIDogMCkpO1xuICAgIGxldCBzdGFydCA9IG5vdygpO1xuICAgIGZvcihsZXQgZWxlbSBvZiBlbGVtcykge1xuICAgICAgbGV0IHBvc3QgPSB0aGlzLnByZXBhcmUoZWxlbSk7XG5cbiAgICB9XG4gICAgbGV0IHByZXBhcmUgPSBub3coKTtcbiAgICBsZXQgZCA9IHRoaXMuZGlmZigpO1xuICAgIGxldCBkaWZmID0gbm93KCk7XG4gICAgdGhpcy5kb21pZnkoKTtcbiAgICBsZXQgZG9taWZ5ID0gbm93KCk7XG4gICAgdGhpcy5wb3N0RG9taWZ5KCk7XG4gICAgbGV0IHBvc3REb21pZnkgPSBub3coKTtcbiAgICBsZXQgdGltZSA9IG5vdygpIC0gc3RhcnQ7XG4gICAgaWYodGltZSA+IDUpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwic2xvdyByZW5kZXIgKD4gNW1zKTogXCIsIHRpbWUsIHtcbiAgICAgICAgcHJlcGFyZTogcHJlcGFyZSAtIHN0YXJ0LFxuICAgICAgICBkaWZmOiBkaWZmIC0gcHJlcGFyZSxcbiAgICAgICAgZG9taWZ5OiBkb21pZnkgLSBkaWZmLFxuICAgICAgICBwb3N0RG9taWZ5OiBwb3N0RG9taWZ5IC0gZG9taWZ5XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7RU5WLCBERUJVRywgdXVpZCwgdW5wYWQsIHVuZGVybGluZSwgY29lcmNlSW5wdXR9IGZyb20gXCIuL3V0aWxzXCJcbmltcG9ydCAqIGFzIHJ1bnRpbWUgZnJvbSBcIi4vcnVudGltZVwiXG5pbXBvcnQge2V2ZX0gZnJvbSBcIi4vYXBwXCJcbmltcG9ydCB7cmVwZWF0fSBmcm9tIFwiLi91dGlsc1wiXG5cbmNsYXNzIFBhcnNlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIG5hbWU6IHN0cmluZyA9IFwiUGFyc2UgRXJyb3JcIjtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgbWVzc2FnZTpzdHJpbmcsIHB1YmxpYyBsaW5lOnN0cmluZywgcHVibGljIGxpbmVJeD86bnVtYmVyLCBwdWJsaWMgY2hhckl4Om51bWJlciA9IDAsIHB1YmxpYyBsZW5ndGg6bnVtYmVyID0gbGluZSAmJiAobGluZS5sZW5ndGggLSBjaGFySXgpKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gIH1cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHVucGFkKDYpIGBcbiAgICAgICR7dGhpcy5uYW1lfTogJHt0aGlzLm1lc3NhZ2V9XG4gICAgICAke3RoaXMubGluZUl4ICE9PSB1bmRlZmluZWQgPyBgT24gbGluZSAke3RoaXMubGluZUl4ICsgMX06JHt0aGlzLmNoYXJJeH1gIDogXCJcIn1cbiAgICAgICR7dGhpcy5saW5lfVxuICAgICAgJHt1bmRlcmxpbmUodGhpcy5jaGFySXgsIHRoaXMubGVuZ3RoKX1cbiAgICBgO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlYWRXaGlsZShzdHI6c3RyaW5nLCBwYXR0ZXJuOlJlZ0V4cCwgc3RhcnRJeDpudW1iZXIpOnN0cmluZyB7XG4gIGxldCBlbmRJeCA9IHN0YXJ0SXg7XG4gIHdoaWxlKHN0cltlbmRJeF0gIT09IHVuZGVmaW5lZCAmJiBzdHJbZW5kSXhdLm1hdGNoKHBhdHRlcm4pKSBlbmRJeCsrO1xuICByZXR1cm4gc3RyLnNsaWNlKHN0YXJ0SXgsIGVuZEl4KTtcbn1cblxuZnVuY3Rpb24gcmVhZFVudGlsKHN0cjpzdHJpbmcsIHNlbnRpbmVsOnN0cmluZywgc3RhcnRJeDpudW1iZXIpOnN0cmluZztcbmZ1bmN0aW9uIHJlYWRVbnRpbChzdHI6c3RyaW5nLCBzZW50aW5lbDpzdHJpbmcsIHN0YXJ0SXg6bnVtYmVyLCB1bnNhdGlzZmllZEVycjogRXJyb3IpOnN0cmluZ3xFcnJvcjtcbmZ1bmN0aW9uIHJlYWRVbnRpbChzdHI6c3RyaW5nLCBzZW50aW5lbDpzdHJpbmcsIHN0YXJ0SXg6bnVtYmVyLCB1bnNhdGlzZmllZEVycj86IEVycm9yKTphbnkge1xuICBsZXQgZW5kSXggPSBzdHIuaW5kZXhPZihzZW50aW5lbCwgc3RhcnRJeCk7XG4gIGlmKGVuZEl4ID09PSAtMSkge1xuICAgIGlmKHVuc2F0aXNmaWVkRXJyKSByZXR1cm4gdW5zYXRpc2ZpZWRFcnI7XG4gICAgcmV0dXJuIHN0ci5zbGljZShzdGFydEl4KTtcbiAgfVxuICByZXR1cm4gc3RyLnNsaWNlKHN0YXJ0SXgsIGVuZEl4KTtcbn1cblxuZnVuY3Rpb24gcmVhZFVudGlsQW55KHN0cjpzdHJpbmcsIHNlbnRpbmVsczpzdHJpbmdbXSwgc3RhcnRJeDpudW1iZXIpOnN0cmluZztcbmZ1bmN0aW9uIHJlYWRVbnRpbEFueShzdHI6c3RyaW5nLCBzZW50aW5lbHM6c3RyaW5nW10sIHN0YXJ0SXg6bnVtYmVyLCB1bnNhdGlzZmllZEVycjogRXJyb3IpOnN0cmluZ3xFcnJvcjtcbmZ1bmN0aW9uIHJlYWRVbnRpbEFueShzdHI6c3RyaW5nLCBzZW50aW5lbHM6c3RyaW5nW10sIHN0YXJ0SXg6bnVtYmVyLCB1bnNhdGlzZmllZEVycj86IEVycm9yKTphbnkge1xuICBsZXQgZW5kSXggPSAtMTtcbiAgZm9yKGxldCBzZW50aW5lbCBvZiBzZW50aW5lbHMpIHtcbiAgICBsZXQgaXggPSBzdHIuaW5kZXhPZihzZW50aW5lbCwgc3RhcnRJeCk7XG4gICAgaWYoaXggPT09IC0xIHx8IGVuZEl4ICE9PSAtMSAmJiBpeCA+IGVuZEl4KSBjb250aW51ZTtcbiAgICBlbmRJeCA9IGl4O1xuICB9XG4gIGlmKGVuZEl4ID09PSAtMSkge1xuICAgIGlmKHVuc2F0aXNmaWVkRXJyKSByZXR1cm4gdW5zYXRpc2ZpZWRFcnI7XG4gICAgcmV0dXJuIHN0ci5zbGljZShzdGFydEl4KTtcbiAgfVxuICByZXR1cm4gc3RyLnNsaWNlKHN0YXJ0SXgsIGVuZEl4KTtcbn1cblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVUkgRFNMIFBhcnNlclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGludGVyZmFjZSBVSUVsZW0ge1xuICBpZD86IHN0cmluZ1xuICBjaGlsZHJlbj86IFVJRWxlbVtdXG4gIGVtYmVkZGVkPzoge30gLy8gVW5kZWZpbmVkIG9yIHRoZSByZXN0cmljdGVkIHNjb3BlIG9mIHRoZSBlbWJlZGRlZCBjaGlsZC5cbiAgYmluZGluZz86IHN0cmluZ1xuICBiaW5kaW5nS2luZD86IHN0cmluZ1xuICBhdHRyaWJ1dGVzPzoge31cbiAgZXZlbnRzPzoge1tldmVudDpzdHJpbmddOiB7fX1cbn1cblxuLy8gZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVUkoc3RyOnN0cmluZyk6VUlFbGVtIHtcbi8vICAgbGV0IHJvb3Q6VUlFbGVtID0ge307XG4vLyAgIGxldCBlcnJvcnMgPSBbXTtcbi8vICAgbGV0IGxpbmVJeCA9IDA7XG4vLyAgIGxldCBsaW5lcyA9IHN0ci5zcGxpdChcIlxcblwiKTtcbi8vICAgbGV0IHN0YWNrOntpbmRlbnQ6IG51bWJlciwgZWxlbTogVUlFbGVtfVtdID0gW3tpbmRlbnQ6IC0yLCBlbGVtOiByb290fV07XG4vLyAgIC8vIEBGSVhNRTogQ2h1bmsgaW50byBlbGVtZW50IGNodW5rcyBpbnN0ZWFkIG9mIGxpbmVzIHRvIGVuYWJsZSBpbi1hcmd1bWVudCBjb250aW51YXRpb24uXG4vLyAgIGZvcihsZXQgbGluZSBvZiBsaW5lcykge1xuLy8gICAgIGxldCBjaGFySXggPSAwO1xuLy8gICAgIHdoaWxlKGxpbmVbY2hhckl4XSA9PT0gXCIgXCIpIGNoYXJJeCsrO1xuLy8gICAgIGxldCBpbmRlbnQgPSBjaGFySXg7XG4vLyAgICAgaWYobGluZVtjaGFySXhdID09PSB1bmRlZmluZWQpICBjb250aW51ZTtcbi8vICAgICBsZXQgcGFyZW50OlVJRWxlbTtcbi8vICAgICBmb3IobGV0IHN0YWNrSXggPSBzdGFjay5sZW5ndGggLSAxOyBzdGFja0l4ID49IDA7IHN0YWNrSXgtLSkge1xuLy8gICAgICAgaWYoaW5kZW50ID4gc3RhY2tbc3RhY2tJeF0uaW5kZW50KSB7XG4vLyAgICAgICAgIHBhcmVudCA9IHN0YWNrW3N0YWNrSXhdLmVsZW07XG4vLyAgICAgICAgIGJyZWFrO1xuLy8gICAgICAgfSBlbHNlIHN0YWNrLnBvcCgpO1xuLy8gICAgIH1cbi8vICAgICBsZXQga2V5d29yZCA9IHJlYWRVbnRpbChsaW5lLCBcIiBcIiwgY2hhckl4KTtcbi8vICAgICBjaGFySXggKz0ga2V5d29yZC5sZW5ndGg7XG5cbi8vICAgICBpZihrZXl3b3JkWzBdID09PSBcIn5cIiB8fCBrZXl3b3JkWzBdID09PSBcIiVcIikgeyAvLyBIYW5kbGUgYmluZGluZ1xuLy8gICAgICAgY2hhckl4IC09IGtleXdvcmQubGVuZ3RoIC0gMTtcbi8vICAgICAgIGxldCBraW5kID0ga2V5d29yZFswXSA9PT0gXCJ+XCIgPyBcInBsYW5cIiA6IFwicXVlcnlcIjtcbi8vICAgICAgIGlmKCFwYXJlbnQuYmluZGluZykge1xuLy8gICAgICAgICBwYXJlbnQuYmluZGluZyA9IGxpbmUuc2xpY2UoY2hhckl4KTtcbi8vICAgICAgICAgcGFyZW50LmJpbmRpbmdLaW5kID0ga2luZDtcbi8vICAgICAgIH0gZWxzZSBpZihraW5kID09PSBwYXJlbnQuYmluZGluZ0tpbmQpIHBhcmVudC5iaW5kaW5nICs9IFwiXFxuXCIgKyBsaW5lLnNsaWNlKGNoYXJJeCk7XG4vLyAgICAgICBlbHNlIHtcbi8vICAgICAgICAgZXJyb3JzLnB1c2gobmV3IFBhcnNlRXJyb3IoYFVJIG11c3QgYmUgYm91bmQgdG8gYSBzaW5nbGUgdHlwZSBvZiBxdWVyeS5gLCBsaW5lLCBsaW5lSXgpKTtcbi8vICAgICAgICAgY29udGludWU7XG4vLyAgICAgICB9XG4vLyAgICAgICBjaGFySXggPSBsaW5lLmxlbmd0aDtcblxuLy8gICAgIH0gZWxzZSBpZihrZXl3b3JkWzBdID09PSBcIkBcIikgeyAvLyBIYW5kbGUgZXZlbnRcbi8vICAgICAgIGNoYXJJeCAtPSBrZXl3b3JkLmxlbmd0aCAtIDE7XG4vLyAgICAgICBsZXQgZXJyO1xuLy8gICAgICAgd2hpbGUobGluZVtjaGFySXhdID09PSBcIiBcIikgY2hhckl4Kys7XG4vLyAgICAgICBsZXQgbGFzdEl4ID0gY2hhckl4O1xuLy8gICAgICAgbGV0IGV2ZW50UmF3ID0gcmVhZFVudGlsKGxpbmUsIFwie1wiLCBjaGFySXgpO1xuLy8gICAgICAgY2hhckl4ICs9IGV2ZW50UmF3Lmxlbmd0aDtcbi8vICAgICAgIGxldCBldmVudCA9IGV2ZW50UmF3LnRyaW0oKTtcblxuLy8gICAgICAgaWYoIWV2ZW50KSBlcnIgPSBuZXcgUGFyc2VFcnJvcihgVUkgZXZlbnQgbXVzdCBzcGVjaWZ5IGEgdmFsaWQgZXZlbnQgbmFtZWAsIGxpbmUsIGxpbmVJeCwgbGFzdEl4LCBldmVudFJhdy5sZW5ndGgpO1xuLy8gICAgICAgbGV0IHN0YXRlO1xuLy8gICAgICAgW3N0YXRlLCBjaGFySXhdID0gZ2V0TWFwQXJncyhsaW5lLCBsaW5lSXgsIGNoYXJJeCk7XG4vLyAgICAgICBpZihzdGF0ZSBpbnN0YW5jZW9mIEVycm9yICYmICFlcnIpIGVyciA9IHN0YXRlO1xuLy8gICAgICAgaWYoZXJyKSB7XG4vLyAgICAgICAgIGVycm9ycy5wdXNoKGVycik7XG4vLyAgICAgICAgIGxpbmVJeCsrO1xuLy8gICAgICAgICBjb250aW51ZTtcbi8vICAgICAgIH1cblxuLy8gICAgICAgaWYoIXBhcmVudC5ldmVudHMpIHBhcmVudC5ldmVudHMgPSB7fTtcbi8vICAgICAgIHBhcmVudC5ldmVudHNbZXZlbnRdID0gc3RhdGU7XG5cbi8vICAgICB9IGVsc2UgaWYoa2V5d29yZFswXSA9PT0gXCI+XCIpIHsgLy8gSGFuZGxlIGVtYmVkXG4vLyAgICAgICBjaGFySXggLT0ga2V5d29yZC5sZW5ndGggLSAxO1xuLy8gICAgICAgbGV0IGVycjtcbi8vICAgICAgIHdoaWxlKGxpbmVbY2hhckl4XSA9PT0gXCIgXCIpIGNoYXJJeCsrO1xuLy8gICAgICAgbGV0IGxhc3RJeCA9IGNoYXJJeDtcbi8vICAgICAgIGxldCBlbWJlZElkUmF3ID0gcmVhZFVudGlsKGxpbmUsIFwie1wiLCBjaGFySXgpO1xuLy8gICAgICAgY2hhckl4ICs9IGVtYmVkSWRSYXcubGVuZ3RoO1xuLy8gICAgICAgbGV0IGVtYmVkSWQgPSBlbWJlZElkUmF3LnRyaW0oKTtcblxuLy8gICAgICAgaWYoIWVtYmVkSWQpIGVyciA9IG5ldyBQYXJzZUVycm9yKGBVSSBlbWJlZCBtdXN0IHNwZWNpZnkgYSB2YWxpZCBlbGVtZW50IGlkYCwgbGluZSwgbGluZUl4LCBsYXN0SXgsIGVtYmVkSWRSYXcubGVuZ3RoKTtcbi8vICAgICAgIGxldCBzY29wZTtcbi8vICAgICAgIFtzY29wZSA9IHt9LCBjaGFySXhdID0gZ2V0TWFwQXJncyhsaW5lLCBsaW5lSXgsIGNoYXJJeCk7XG4vLyAgICAgICBpZihzY29wZSBpbnN0YW5jZW9mIEVycm9yICYmICFlcnIpIGVyciA9IHNjb3BlO1xuLy8gICAgICAgaWYoZXJyKSB7XG4vLyAgICAgICAgIGVycm9ycy5wdXNoKGVycik7XG4vLyAgICAgICAgIGxpbmVJeCsrO1xuLy8gICAgICAgICBjb250aW51ZTtcbi8vICAgICAgIH1cblxuLy8gICAgICAgbGV0IGVsZW0gPSB7ZW1iZWRkZWQ6IHNjb3BlLCBpZDogZW1iZWRJZH07XG4vLyAgICAgICBpZighcGFyZW50LmNoaWxkcmVuKSBwYXJlbnQuY2hpbGRyZW4gPSBbXTtcbi8vICAgICAgIHBhcmVudC5jaGlsZHJlbi5wdXNoKGVsZW0pO1xuLy8gICAgICAgc3RhY2sucHVzaCh7aW5kZW50LCBlbGVtfSk7XG5cbi8vICAgICB9IGVsc2UgeyAvLyBIYW5kbGUgZWxlbWVudFxuLy8gICAgICAgbGV0IGVycjtcbi8vICAgICAgIGlmKCFrZXl3b3JkKSBlcnIgPSBuZXcgUGFyc2VFcnJvcihgVUkgZWxlbWVudCBtdXN0IHNwZWNpZnkgYSB2YWxpZCB0YWcgbmFtZWAsIGxpbmUsIGxpbmVJeCwgY2hhckl4LCAwKTtcbi8vICAgICAgIHdoaWxlKGxpbmVbY2hhckl4XSA9PT0gXCIgXCIpIGNoYXJJeCsrO1xuLy8gICAgICAgbGV0IGNsYXNzZXNSYXcgPSByZWFkVW50aWwobGluZSwgXCJ7XCIsIGNoYXJJeCk7XG4vLyAgICAgICBjaGFySXggKz0gY2xhc3Nlc1Jhdy5sZW5ndGg7XG4vLyAgICAgICBsZXQgY2xhc3NlcyA9IGNsYXNzZXNSYXcudHJpbSgpO1xuXG4vLyAgICAgICBsZXQgYXR0cmlidXRlcztcbi8vICAgICAgIFthdHRyaWJ1dGVzID0ge30sIGNoYXJJeF0gPSBnZXRNYXBBcmdzKGxpbmUsIGxpbmVJeCwgY2hhckl4KTtcbi8vICAgICAgIGlmKGF0dHJpYnV0ZXMgaW5zdGFuY2VvZiBFcnJvciAmJiAhZXJyKSBlcnIgPSBhdHRyaWJ1dGVzO1xuLy8gICAgICAgaWYoZXJyKSB7XG4vLyAgICAgICAgIGVycm9ycy5wdXNoKGVycik7XG4vLyAgICAgICAgIGxpbmVJeCsrO1xuLy8gICAgICAgICBjb250aW51ZTtcbi8vICAgICAgIH1cbi8vICAgICAgIGF0dHJpYnV0ZXNbXCJ0XCJdID0ga2V5d29yZDtcbi8vICAgICAgIGlmKGNsYXNzZXMpIGF0dHJpYnV0ZXNbXCJjXCJdID0gY2xhc3Nlcztcbi8vICAgICAgIGxldCBlbGVtOlVJRWxlbSA9IHtpZDogYXR0cmlidXRlc1tcImlkXCJdLCBhdHRyaWJ1dGVzfTtcbi8vICAgICAgIGlmKCFwYXJlbnQuY2hpbGRyZW4pIHBhcmVudC5jaGlsZHJlbiA9IFtdO1xuLy8gICAgICAgcGFyZW50LmNoaWxkcmVuLnB1c2goZWxlbSk7XG4vLyAgICAgICBzdGFjay5wdXNoKHtpbmRlbnQsIGVsZW19KTtcbi8vICAgICB9XG5cbi8vICAgICBsaW5lSXgrKztcbi8vICAgfVxuXG4vLyAgIGlmKGVycm9ycy5sZW5ndGgpIHtcbi8vICAgICBmb3IobGV0IGVyciBvZiBlcnJvcnMpIHtcbi8vICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbi8vICAgICB9XG4vLyAgIH1cbi8vICAgcmV0dXJuIHJvb3Q7XG4vLyB9XG5cblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gRXZlIERTTCBQYXJzZXJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmVudW0gVE9LRU5fVFlQRSB7IEVYUFIsIElERU5USUZJRVIsIEtFWVdPUkQsIFNUUklORywgTElURVJBTCB9O1xuZXhwb3J0IGNsYXNzIFRva2VuIHtcbiAgc3RhdGljIFRZUEUgPSBUT0tFTl9UWVBFO1xuICBzdGF0aWMgaWRlbnRpZmllcih2YWx1ZTpzdHJpbmcsIGxpbmVJeD86IG51bWJlciwgY2hhckl4PzogbnVtYmVyKSB7XG4gICAgcmV0dXJuIG5ldyBUb2tlbihUb2tlbi5UWVBFLklERU5USUZJRVIsIHZhbHVlLCBsaW5lSXgsIGNoYXJJeCk7XG4gIH1cbiAgc3RhdGljIGtleXdvcmQodmFsdWU6c3RyaW5nLCBsaW5lSXg/OiBudW1iZXIsIGNoYXJJeD86IG51bWJlcikge1xuICAgIHJldHVybiBuZXcgVG9rZW4oVG9rZW4uVFlQRS5LRVlXT1JELCB2YWx1ZSwgbGluZUl4LCBjaGFySXgpO1xuICB9XG4gIHN0YXRpYyBzdHJpbmcodmFsdWU6c3RyaW5nLCBsaW5lSXg/OiBudW1iZXIsIGNoYXJJeD86IG51bWJlcikge1xuICAgIHJldHVybiBuZXcgVG9rZW4oVG9rZW4uVFlQRS5TVFJJTkcsIHZhbHVlLCBsaW5lSXgsIGNoYXJJeCk7XG4gIH1cbiAgc3RhdGljIGxpdGVyYWwodmFsdWU6YW55LCBsaW5lSXg/OiBudW1iZXIsIGNoYXJJeD86IG51bWJlcikge1xuICAgIHJldHVybiBuZXcgVG9rZW4oVG9rZW4uVFlQRS5MSVRFUkFMLCB2YWx1ZSwgbGluZUl4LCBjaGFySXgpO1xuICB9XG5cbiAgY29uc3RydWN0b3IocHVibGljIHR5cGU/OiBUT0tFTl9UWVBFLCBwdWJsaWMgdmFsdWU/OiBhbnksIHB1YmxpYyBsaW5lSXg/OiBudW1iZXIsIHB1YmxpYyBjaGFySXg/OiBudW1iZXIpIHt9XG4gIHRvU3RyaW5nKCkge1xuICAgIGlmKHRoaXMudHlwZSA9PT0gVG9rZW4uVFlQRS5LRVlXT1JEKSByZXR1cm4gYDoke3RoaXMudmFsdWV9YDtcbiAgICBlbHNlIGlmKHRoaXMudHlwZSA9PT0gVG9rZW4uVFlQRS5TVFJJTkcpIHJldHVybiBgXCIke3RoaXMudmFsdWV9XCJgO1xuICAgIGVsc2UgcmV0dXJuIHRoaXMudmFsdWUudG9TdHJpbmcoKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgU2V4cHIge1xuICBzdGF0aWMgbGlzdCh2YWx1ZTooVG9rZW58U2V4cHIpW10gPSBbXSwgbGluZUl4PzogbnVtYmVyLCBjaGFySXg/OiBudW1iZXIsIHN5bnRheD86IGJvb2xlYW4pIHtcbiAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKCk7XG4gICAgdmFsdWUudW5zaGlmdChUb2tlbi5pZGVudGlmaWVyKFwibGlzdFwiLCBsaW5lSXgsIGNoYXJJeCA/IGNoYXJJeCArIDEgOiB1bmRlZmluZWQpKTtcbiAgICByZXR1cm4gbmV3IFNleHByKHZhbHVlLCBsaW5lSXgsIGNoYXJJeCwgc3ludGF4ID8gXCJsaXN0XCIgOiB1bmRlZmluZWQpO1xuICB9XG4gIHN0YXRpYyBoYXNoKHZhbHVlOihUb2tlbnxTZXhwcilbXSA9IFtdLCBsaW5lSXg/OiBudW1iZXIsIGNoYXJJeD86IG51bWJlciwgc3ludGF4PzogYm9vbGVhbikge1xuICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoKTtcbiAgICB2YWx1ZS51bnNoaWZ0KFRva2VuLmlkZW50aWZpZXIoXCJoYXNoXCIsIGxpbmVJeCwgY2hhckl4ID8gY2hhckl4ICsgMSA6IHVuZGVmaW5lZCkpO1xuICAgIHJldHVybiBuZXcgU2V4cHIodmFsdWUsIGxpbmVJeCwgY2hhckl4LCBzeW50YXggPyBcImhhc2hcIiA6IHVuZGVmaW5lZCk7XG4gIH1cbiAgc3RhdGljIGFzU2V4cHJzKHZhbHVlczooVG9rZW58U2V4cHIpW10pOlNleHByW10ge1xuICAgIGZvcihsZXQgcmF3IG9mIHZhbHVlcykge1xuICAgICBpZighKHJhdyBpbnN0YW5jZW9mIFNleHByKSkgdGhyb3cgbmV3IFBhcnNlRXJyb3IoYEFsbCB0b3AgbGV2ZWwgZW50cmllcyBtdXN0IGJlIGV4cHJlc3Npb25zIChnb3QgJHtyYXd9KWAsIHVuZGVmaW5lZCwgcmF3LmxpbmVJeCwgcmF3LmNoYXJJeCk7XG4gICAgICBlbHNlIHtcbiAgICAgICAgbGV0IG9wID0gcmF3Lm9wZXJhdG9yO1xuICAgICAgICBpZihvcC50eXBlICE9PSBUb2tlbi5UWVBFLklERU5USUZJRVIpXG4gICAgICAgICAgdGhyb3cgbmV3IFBhcnNlRXJyb3IoYEFsbCBleHByZXNzaW9ucyBtdXN0IGJlZ2luIHdpdGggYW4gaWRlbnRpZmllcmAsIHVuZGVmaW5lZCwgcmF3LmxpbmVJeCwgcmF3LmNoYXJJeCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiA8U2V4cHJbXT52YWx1ZXM7XG4gIH1cblxuICBwdWJsaWMgdHlwZSA9IFRva2VuLlRZUEUuRVhQUjtcbiAgcHVibGljIHZhbHVlOihUb2tlbnxTZXhwcilbXTtcblxuICBjb25zdHJ1Y3Rvcih2YWw/OiAoVG9rZW58U2V4cHIpW10sIHB1YmxpYyBsaW5lSXg/OiBudW1iZXIsIHB1YmxpYyBjaGFySXg/OiBudW1iZXIsIHB1YmxpYyBzeW50YXggPSBcImV4cHJcIikge1xuICAgIGlmKHZhbCkgdGhpcy52YWx1ZSA9IHZhbC5zbGljZSgpO1xuICB9XG4gIHRvU3RyaW5nKCkge1xuICAgIGxldCBjb250ZW50ID0gdGhpcy52YWx1ZSAmJiB0aGlzLnZhbHVlLm1hcCgodG9rZW4pID0+IHRva2VuLnRvU3RyaW5nKCkpLmpvaW4oXCIgXCIpO1xuICAgIGxldCBhcmdzQ29udGVudCA9IHRoaXMudmFsdWUgJiYgdGhpcy5hcmd1bWVudHMubWFwKCh0b2tlbikgPT4gdG9rZW4udG9TdHJpbmcoKSkuam9pbihcIiBcIik7XG4gICAgaWYodGhpcy5zeW50YXggPT09IFwiaGFzaFwiKSByZXR1cm4gYHske2FyZ3NDb250ZW50fX1gO1xuICAgIGVsc2UgaWYodGhpcy5zeW50YXggPT09IFwibGlzdFwiKSByZXR1cm4gYFske2FyZ3NDb250ZW50fV1gO1xuICAgIGVsc2UgcmV0dXJuIGAoJHtjb250ZW50fSlgO1xuICB9XG5cbiAgcHVzaCh2YWw6VG9rZW58U2V4cHIpIHtcbiAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZSB8fCBbXTtcbiAgICByZXR1cm4gdGhpcy52YWx1ZS5wdXNoKHZhbCk7XG4gIH1cbiAgbnRoKG4sIHZhbD86VG9rZW58U2V4cHIpIHtcbiAgICBpZih2YWwpIHtcbiAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlIHx8IFtdO1xuICAgICAgcmV0dXJuIHRoaXMudmFsdWVbbl0gPSB2YWw7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnZhbHVlICYmIHRoaXMudmFsdWVbbl07XG4gIH1cbiAgZ2V0IG9wZXJhdG9yKCkge1xuICAgIHJldHVybiB0aGlzLnZhbHVlICYmIHRoaXMudmFsdWVbMF07XG4gIH1cbiAgc2V0IG9wZXJhdG9yKG9wOiBUb2tlbnxTZXhwcikge1xuICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlIHx8IFtdO1xuICAgIHRoaXMudmFsdWVbMF0gPSBvcDtcbiAgfVxuICBnZXQgYXJndW1lbnRzKCkge1xuICAgIHJldHVybiB0aGlzLnZhbHVlICYmIHRoaXMudmFsdWUuc2xpY2UoMSk7XG4gIH1cbiAgc2V0IGFyZ3VtZW50cyhhcmdzOiAoVG9rZW58U2V4cHIpW10pIHtcbiAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZSB8fCBbXTtcbiAgICB0aGlzLnZhbHVlLmxlbmd0aCA9IDE7XG4gICAgdGhpcy52YWx1ZS5wdXNoLmFwcGx5KHRoaXMudmFsdWUsIGFyZ3MpO1xuICB9XG4gIGdldCBsZW5ndGgoKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWUgJiYgdGhpcy52YWx1ZS5sZW5ndGg7XG4gIH1cbn1cblxuY29uc3QgVE9LRU5fVE9fVFlQRSA9IHtcbiAgXCIoXCI6IFwiZXhwclwiLFxuICBcIilcIjogXCJleHByXCIsXG4gIFwiW1wiOiBcImxpc3RcIixcbiAgXCJdXCI6IFwibGlzdFwiLFxuICBcIntcIjogXCJoYXNoXCIsXG4gIFwifVwiOiBcImhhc2hcIlxufTtcblxubGV0IGh5Z2llbmljU3ltYm9sQ291bnRlciA9IDA7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWFkU2V4cHJzKHRleHQ6c3RyaW5nKTpTZXhwciB7XG4gIGxldCByb290ID0gU2V4cHIubGlzdCgpO1xuICBsZXQgdG9rZW46VG9rZW47XG4gIGxldCBzZXhwcjpTZXhwciA9IHJvb3Q7XG4gIGxldCBzZXhwcnM6U2V4cHJbXSA9IFtyb290XTtcblxuICBsZXQgbGluZXMgPSB0ZXh0LnNwbGl0KFwiXFxuXCIpO1xuICBsZXQgbGluZUl4ID0gMDtcbiAgbGV0IG1vZGU6c3RyaW5nO1xuICBmb3IobGV0IGxpbmUgb2YgbGluZXMpIHtcbiAgICBsZXQgbGluZSA9IGxpbmVzW2xpbmVJeF07XG4gICAgbGV0IGNoYXJJeCA9IDA7XG5cbiAgICBpZihtb2RlID09PSBcInN0cmluZ1wiKSB0b2tlbi52YWx1ZSArPSBcIlxcblwiO1xuXG4gICAgd2hpbGUoY2hhckl4IDwgbGluZS5sZW5ndGgpIHtcbiAgICAgIGlmKG1vZGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaWYobGluZVtjaGFySXhdID09PSBcIlxcXCJcIiAmJiBsaW5lW2NoYXJJeCAtIDFdICE9PSBcIlxcXFxcIikge1xuICAgICAgICAgIHNleHByLnB1c2godG9rZW4pO1xuICAgICAgICAgIHRva2VuID0gbW9kZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBjaGFySXgrKztcblxuICAgICAgICB9IGVsc2UgdG9rZW4udmFsdWUgKz0gbGluZVtjaGFySXgrK107XG5cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGxldCBwYWRkaW5nID0gcmVhZFdoaWxlKGxpbmUsIC9cXHMvLCBjaGFySXgpO1xuICAgICAgY2hhckl4ICs9IHBhZGRpbmcubGVuZ3RoO1xuICAgICAgaWYocGFkZGluZy5sZW5ndGgpIHtcbiAgICAgICAgaWYodG9rZW4pIHNleHByLnB1c2godG9rZW4pO1xuICAgICAgICB0b2tlbiA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGlmKGNoYXJJeCA+PSBsaW5lLmxlbmd0aCkgY29udGludWU7XG5cbiAgICAgIGlmKGxpbmVbY2hhckl4XSA9PT0gXCI7XCIpIHtcbiAgICAgICAgY2hhckl4ID0gbGluZS5sZW5ndGg7XG5cbiAgICAgIH0gZWxzZSBpZihsaW5lW2NoYXJJeF0gPT09IFwiXFxcIlwiKSB7XG4gICAgICAgIGlmKCFzZXhwci5sZW5ndGgpIHRocm93IG5ldyBQYXJzZUVycm9yKGBMaXRlcmFsIG11c3QgYmUgYW4gYXJndW1lbnQgaW4gYSBzZXhwci5gLCBsaW5lLCBsaW5lSXgsIGNoYXJJeCk7XG4gICAgICAgIG1vZGUgPSBcInN0cmluZ1wiO1xuICAgICAgICB0b2tlbiA9IFRva2VuLnN0cmluZyhcIlwiLCBsaW5lSXgsIGNoYXJJeCk7XG4gICAgICAgIGNoYXJJeCsrO1xuXG4gICAgICB9IGVsc2UgaWYobGluZVtjaGFySXhdID09PSBcIjpcIikge1xuICAgICAgICBpZighc2V4cHIubGVuZ3RoKSB0aHJvdyBuZXcgUGFyc2VFcnJvcihgTGl0ZXJhbCBtdXN0IGJlIGFuIGFyZ3VtZW50IGluIGEgc2V4cHIuYCwgbGluZSwgbGluZUl4LCBjaGFySXgpO1xuICAgICAgICBsZXQga2V5d29yZCA9IHJlYWRVbnRpbEFueShsaW5lLCBbXCIgXCIsIFwiKVwiLCBcIl1cIiwgXCJ9XCJdLCArK2NoYXJJeCk7XG4gICAgICAgIHNleHByLnB1c2goVG9rZW4ua2V5d29yZChrZXl3b3JkLCBsaW5lSXgsIGNoYXJJeCAtIDEpKTtcbiAgICAgICAgY2hhckl4ICs9IGtleXdvcmQubGVuZ3RoO1xuXG4gICAgICB9IGVsc2UgaWYobGluZVtjaGFySXhdID09PSBcIihcIiB8fCBsaW5lW2NoYXJJeF0gPT09IFwiW1wiIHx8IGxpbmVbY2hhckl4XSA9PT0gXCJ7XCIpIHtcbiAgICAgICAgaWYodG9rZW4pIHRocm93IG5ldyBQYXJzZUVycm9yKGBTZXhwciBhcmd1bWVudHMgbXVzdCBiZSBzcGFjZSBzZXBhcmF0ZWQuYCwgbGluZSwgbGluZUl4LCBjaGFySXgpO1xuICAgICAgICBsZXQgdHlwZSA9IFRPS0VOX1RPX1RZUEVbbGluZVtjaGFySXhdXTtcbiAgICAgICAgaWYodHlwZSA9PT0gXCJoYXNoXCIpIHNleHByID0gU2V4cHIuaGFzaCh1bmRlZmluZWQsIGxpbmVJeCwgY2hhckl4KTtcbiAgICAgICAgZWxzZSBpZih0eXBlID09PSBcImxpc3RcIikgc2V4cHIgPSBTZXhwci5saXN0KHVuZGVmaW5lZCwgbGluZUl4LCBjaGFySXgpO1xuICAgICAgICBlbHNlIHNleHByID0gbmV3IFNleHByKHVuZGVmaW5lZCwgbGluZUl4LCBjaGFySXgpO1xuICAgICAgICBzZXhwci5zeW50YXggPSB0eXBlO1xuICAgICAgICBzZXhwcnMucHVzaChzZXhwcik7XG4gICAgICAgIGNoYXJJeCsrO1xuXG4gICAgICB9IGVsc2UgaWYobGluZVtjaGFySXhdID09PSBcIilcIiB8fCBsaW5lW2NoYXJJeF0gPT09IFwiXVwiIHx8IGxpbmVbY2hhckl4XSA9PT0gXCJ9XCIpIHtcbiAgICAgICAgbGV0IGNoaWxkID0gc2V4cHJzLnBvcCgpO1xuICAgICAgICBsZXQgdHlwZSA9IFRPS0VOX1RPX1RZUEVbbGluZVtjaGFySXhdXTtcbiAgICAgICAgaWYoY2hpbGQuc3ludGF4ICE9PSB0eXBlKSB0aHJvdyBuZXcgUGFyc2VFcnJvcihgTXVzdCB0ZXJtaW5hdGUgJHtjaGlsZC5zeW50YXh9IGJlZm9yZSB0ZXJtaW5hdGluZyAke3R5cGV9YCwgbGluZSwgbGluZUl4LCBjaGFySXgpO1xuICAgICAgICBzZXhwciA9IHNleHByc1tzZXhwcnMubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmKCFzZXhwcikgdGhyb3cgbmV3IFBhcnNlRXJyb3IoYFRvbyBtYW55IGNsb3NpbmcgcGFyZW5zYCwgbGluZSwgbGluZUl4LCBjaGFySXgpO1xuICAgICAgICBzZXhwci5wdXNoKGNoaWxkKTtcbiAgICAgICAgY2hhckl4Kys7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBsaXRlcmFsID0gcmVhZFVudGlsQW55KGxpbmUsIFtcIiBcIiwgXCIpXCIsIFwiXVwiLCBcIn1cIl0sIGNoYXJJeCk7XG4gICAgICAgIGxldCBsZW5ndGggPSBsaXRlcmFsLmxlbmd0aDtcbiAgICAgICAgbGl0ZXJhbCA9IGNvZXJjZUlucHV0KGxpdGVyYWwpO1xuICAgICAgICBsZXQgdHlwZSA9IHR5cGVvZiBsaXRlcmFsID09PSBcInN0cmluZ1wiID8gXCJpZGVudGlmaWVyXCIgOiBcImxpdGVyYWxcIjtcbiAgICAgICAgaWYoIXNleHByLmxlbmd0aCAmJiB0eXBlICE9PSBcImlkZW50aWZpZXJcIikgdGhyb3cgbmV3IFBhcnNlRXJyb3IoYEV4cHIgbXVzdCBiZWdpbiB3aXRoIGlkZW50aWZpZXIuYCwgbGluZSwgbGluZUl4LCBjaGFySXgpO1xuICAgICAgICBpZih0eXBlID09PSBcImlkZW50aWZpZXJcIikge1xuICAgICAgICAgIGxldCBkb3RJeCA9IGxpdGVyYWwuaW5kZXhPZihcIi5cIik7XG4gICAgICAgICAgaWYoZG90SXggIT09IC0xKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQ6U2V4cHIgPSBuZXcgU2V4cHIoW1xuICAgICAgICAgICAgICBUb2tlbi5pZGVudGlmaWVyKFwiZ2V0XCIsIGxpbmVJeCwgY2hhckl4ICsgMSksXG4gICAgICAgICAgICAgIFRva2VuLmlkZW50aWZpZXIobGl0ZXJhbC5zbGljZSgwLCBkb3RJeCksIGxpbmVJeCwgY2hhckl4ICsgMyksXG4gICAgICAgICAgICAgIFRva2VuLnN0cmluZyhsaXRlcmFsLnNsaWNlKGRvdEl4ICsgMSksIGxpbmVJeCwgY2hhckl4ICsgNSArIGRvdEl4KVxuICAgICAgICAgICAgXSwgbGluZUl4LCBjaGFySXgpO1xuICAgICAgICAgICAgc2V4cHIucHVzaChjaGlsZCk7XG5cbiAgICAgICAgICB9IGVsc2Ugc2V4cHIucHVzaChUb2tlbi5pZGVudGlmaWVyKGxpdGVyYWwsIGxpbmVJeCwgY2hhckl4KSk7XG5cbiAgICAgICAgfSBlbHNlIHNleHByLnB1c2goVG9rZW4ubGl0ZXJhbChsaXRlcmFsLCBsaW5lSXgsIGNoYXJJeCkpO1xuICAgICAgICBjaGFySXggKz0gbGVuZ3RoO1xuICAgICAgfVxuICAgIH1cbiAgICBsaW5lSXgrKztcbiAgfVxuICBpZih0b2tlbikgdGhyb3cgbmV3IFBhcnNlRXJyb3IoYFVudGVybWluYXRlZCAke1RPS0VOX1RZUEVbdG9rZW4udHlwZV19IHRva2VuYCwgbGluZXNbbGluZUl4IC0gMV0sIGxpbmVJeCAtIDEpO1xuICBsZXQgbGFzdEl4ID0gbGluZXMubGVuZ3RoIC0gMTtcbiAgaWYoc2V4cHJzLmxlbmd0aCA+IDEpIHRocm93IG5ldyBQYXJzZUVycm9yKGBUb28gZmV3IGNsb3NpbmcgcGFyZW5zYCwgbGluZXNbbGFzdEl4XSwgbGFzdEl4LCBsaW5lc1tsYXN0SXhdLmxlbmd0aCk7XG5cbiAgcmV0dXJuIHJvb3Q7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWNyb2V4cGFuZERTTChzZXhwcjpTZXhwcik6U2V4cHIge1xuICAvLyBAVE9ETzogSW1wbGVtZW50IG1lLlxuICBsZXQgb3AgPSBzZXhwci5vcGVyYXRvcjtcbiAgaWYob3AudmFsdWUgPT09IFwiZWF2XCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJAVE9ETzogSW1wbGVtZW50IG1lIVwiKTtcblxuICB9IGVsc2UgaWYob3AudmFsdWUgPT09IFwib25lLW9mXCIpIHtcbiAgICAvLyAob25lLW9mIChxdWVyeSAuLi5ib2R5KSAocXVlcnkgLi4uYm9keSkgLi4uKSA9PlxuICAgIC8vICh1bmlvblxuICAgIC8vICAgKGRlZiBxMSAocXVlcnkgLi4uYm9keTEpKVxuICAgIC8vICAgKGRlZiBxMiAocXVlcnkgKG5lZ2F0ZSBxMSkgLi4uYm9keTIpKSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJAVE9ETzogSW1wbGVtZW50IG1lIVwiKTtcblxuICB9IGVsc2UgaWYob3AudmFsdWUgPT09IFwibmVnYXRlXCIpIHtcbiAgICBpZihzZXhwci5sZW5ndGggPiAyKSB0aHJvdyBuZXcgUGFyc2VFcnJvcihgTmVnYXRlIG9ubHkgdGFrZXMgYSBzaW5nbGUgYm9keWAsIHVuZGVmaW5lZCwgc2V4cHIubGluZUl4LCBzZXhwci5jaGFySXgpO1xuICAgIGxldCBzZWxlY3QgPSBtYWNyb2V4cGFuZERTTChTZXhwci5hc1NleHBycyhzZXhwci5hcmd1bWVudHMpWzBdKTtcbiAgICBzZWxlY3QucHVzaChUb2tlbi5rZXl3b3JkKFwiJCRuZWdhdGVkXCIpKTtcbiAgICBzZWxlY3QucHVzaChUb2tlbi5saXRlcmFsKHRydWUpKTtcbiAgICByZXR1cm4gc2VsZWN0O1xuXG4gIH0gZWxzZSBpZihbXCJoYXNoXCIsIFwibGlzdFwiLCBcImdldFwiLCBcImRlZlwiLCBcInF1ZXJ5XCIsIFwidW5pb25cIiwgXCJzZWxlY3RcIiwgXCJtZW1iZXJcIiwgXCJwcm9qZWN0IVwiLCBcImluc2VydCFcIiwgXCJyZW1vdmUhXCIsIFwibG9hZCFcIl0uaW5kZXhPZihvcC52YWx1ZSkgPT09IC0xKSB7XG4gICAgLy8gKGZvby1iYXIgOmEgNSkgPT4gKHNlbGVjdCBcImZvbyBiYXJcIiA6YSA1KVxuICAgIGxldCBzb3VyY2UgPSBvcDtcbiAgICBzb3VyY2UudHlwZSA9IFRva2VuLlRZUEUuU1RSSU5HO1xuICAgIHNvdXJjZS52YWx1ZSA9IHNvdXJjZS52YWx1ZS5yZXBsYWNlKC8oLj8pLSguKS9nLCBcIiQxICQyXCIpO1xuICAgIGxldCBhcmdzID0gc2V4cHIuYXJndW1lbnRzO1xuICAgIGFyZ3MudW5zaGlmdChzb3VyY2UpO1xuICAgIHNleHByLmFyZ3VtZW50cyA9IGFyZ3M7XG4gICAgc2V4cHIub3BlcmF0b3IgPSBUb2tlbi5pZGVudGlmaWVyKFwic2VsZWN0XCIpO1xuICB9XG4gIHJldHVybiBzZXhwcjtcbn1cbmVudW0gVkFMVUUgeyBOVUxMLCBTQ0FMQVIsIFNFVCwgVklFVyB9O1xuZXhwb3J0IHR5cGUgQXJ0aWZhY3RzID0ge2NoYW5nZXNldD86IHJ1bnRpbWUuRGlmZiwgdmlld3M6IHtbcXVlcnk6c3RyaW5nXTogcnVudGltZS5RdWVyeXxydW50aW1lLlVuaW9ufX07XG50eXBlIFZhcmlhYmxlID0ge25hbWU6IHN0cmluZywgdHlwZTogVkFMVUUsIHN0YXRpYz86IGJvb2xlYW4sIHZhbHVlPzogYW55LCBwcm9qZWN0aW9uPzogc3RyaW5nLCBjb25zdHJhaW50czogW3N0cmluZywgc3RyaW5nXVtdfTtcbnR5cGUgVmFyaWFibGVDb250ZXh0ID0gVmFyaWFibGVbXTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRFNMKHRleHQ6c3RyaW5nKTpBcnRpZmFjdHMge1xuICBsZXQgYXJ0aWZhY3RzOkFydGlmYWN0cyA9IHt2aWV3czoge319O1xuICBsZXQgbGluZXMgPSB0ZXh0LnNwbGl0KFwiXFxuXCIpO1xuICBsZXQgcm9vdCA9IHJlYWRTZXhwcnModGV4dCk7XG5cbiAgZm9yKGxldCByYXcgb2YgU2V4cHIuYXNTZXhwcnMocm9vdC5hcmd1bWVudHMpKSBwYXJzZURTTFNleHByKHJhdywgYXJ0aWZhY3RzKTtcbiAgcmV0dXJuIGFydGlmYWN0cztcbn1cblxudHlwZSBTZXhwclJlc3VsdCA9IHt0eXBlOlZBTFVFLCB2YWx1ZT86YW55LCBwcm9qZWN0ZWQ/OmFueSwgY29udGV4dD86YW55LCBtYXBwaW5ncz86YW55LCBhZ2dyZWdhdGVkPzpib29sZWFufTtcbmZ1bmN0aW9uIHBhcnNlRFNMU2V4cHIocmF3OlNleHByLCBhcnRpZmFjdHM6QXJ0aWZhY3RzLCBjb250ZXh0PzpWYXJpYWJsZUNvbnRleHQsIHBhcmVudD86cnVudGltZS5RdWVyeXxydW50aW1lLlVuaW9uLCByZXN1bHRWYXJpYWJsZT86c3RyaW5nKTpTZXhwclJlc3VsdCB7XG4gIGlmKHBhcmVudCBpbnN0YW5jZW9mIHJ1bnRpbWUuUXVlcnkpIHZhciBxdWVyeSA9IHBhcmVudDtcbiAgZWxzZSB2YXIgdW5pb24gPSA8cnVudGltZS5Vbmlvbj5wYXJlbnQ7XG4gIGxldCBzZXhwciA9IG1hY3JvZXhwYW5kRFNMKHJhdyk7XG4gIGxldCBvcCA9IHNleHByLm9wZXJhdG9yO1xuICBpZihvcC50eXBlICE9PSBUb2tlbi5UWVBFLklERU5USUZJRVIpXG4gICAgdGhyb3cgbmV3IFBhcnNlRXJyb3IoYEV2YWx1YXRlZCBzZXhwciBtdXN0IGJlZ2luIHdpdGggYW4gaWRlbnRpZmllciAoJyR7b3B9JyBpcyBhICR7VG9rZW4uVFlQRVtvcC50eXBlXX0pYCwgXCJcIiwgcmF3LmxpbmVJeCwgcmF3LmNoYXJJeCk7XG5cbiAgaWYob3AudmFsdWUgPT09IFwibGlzdFwiKSB7XG4gICAgbGV0IHskJGJvZHl9ID0gcGFyc2VBcmd1bWVudHMoc2V4cHIsIHVuZGVmaW5lZCwgXCIkJGJvZHlcIik7XG4gICAgcmV0dXJuIHt0eXBlOiBWQUxVRS5TQ0FMQVIsIHZhbHVlOiAoPGFueT4kJGJvZHkpLm1hcCgodG9rZW4sIGl4KSA9PiByZXNvbHZlVG9rZW5WYWx1ZShgbGlzdCBpdGVtICR7aXh9YCwgdG9rZW4sIGNvbnRleHQpKX07XG4gIH1cbiAgaWYob3AudmFsdWUgPT09IFwiaGFzaFwiKSB7XG4gICAgbGV0IGFyZ3MgPSBwYXJzZUFyZ3VtZW50cyhzZXhwcik7XG4gICAgZm9yKGxldCBhcmcgaW4gYXJncykgYXJnc1thcmddID0gcmVzb2x2ZVRva2VuVmFsdWUoYGhhc2ggaXRlbSAke2FyZ31gLCBhcmdzW2FyZ10sIGNvbnRleHQpO1xuICAgIHJldHVybiB7dHlwZTogVkFMVUUuU0VULCB2YWx1ZTogYXJnc307XG4gIH1cblxuICBpZihvcC52YWx1ZSA9PT0gXCJpbnNlcnQhXCIpIHtcbiAgICAgIGxldCBjaGFuZ2VzZXQgPSBhcnRpZmFjdHMuY2hhbmdlc2V0IHx8IGV2ZS5kaWZmKCk7XG4gICAgICBmb3IobGV0IGFyZyBvZiBzZXhwci5hcmd1bWVudHMpIHtcbiAgICAgICAgICBsZXQgdGFibGUgPSBhcmcudmFsdWVbMF07XG4gICAgICAgICAgbGV0IGZhY3QgPSB7fTtcbiAgICAgICAgICBmb3IobGV0IGl4ID0gMTsgaXggPCBhcmcudmFsdWUubGVuZ3RoOyBpeCArPSAyKSB7XG4gICAgICAgICAgICAgIGxldCBrZXkgPSBhcmcudmFsdWVbaXhdO1xuICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBhcmcudmFsdWVbaXgrMV07XG4gICAgICAgICAgICAgIGZhY3Rba2V5LnZhbHVlXSA9IHZhbHVlLnZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjaGFuZ2VzZXQuYWRkKHRhYmxlLnZhbHVlLCBmYWN0KTtcbiAgICAgIH1cbiAgICAgIGFydGlmYWN0cy5jaGFuZ2VzZXQgPSBjaGFuZ2VzZXQ7XG4gICAgICByZXR1cm47XG4gIH1cblxuICBpZihvcC52YWx1ZSA9PT0gXCJyZW1vdmUhXCIpIHtcbiAgICAgIGxldCBjaGFuZ2VzZXQgPSBhcnRpZmFjdHMuY2hhbmdlc2V0IHx8IGV2ZS5kaWZmKCk7XG4gICAgICBmb3IobGV0IGFyZyBvZiBzZXhwci5hcmd1bWVudHMpIHtcbiAgICAgICAgICBsZXQgdGFibGUgPSBhcmcudmFsdWVbMF07XG4gICAgICAgICAgbGV0IGZhY3QgPSB7fTtcbiAgICAgICAgICBmb3IobGV0IGl4ID0gMTsgaXggPCBhcmcudmFsdWUubGVuZ3RoOyBpeCArPSAyKSB7XG4gICAgICAgICAgICAgIGxldCBrZXkgPSBhcmcudmFsdWVbaXhdO1xuICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBhcmcudmFsdWVbaXgrMV07XG4gICAgICAgICAgICAgIGZhY3Rba2V5LnZhbHVlXSA9IHZhbHVlLnZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjaGFuZ2VzZXQucmVtb3ZlKHRhYmxlLnZhbHVlLCBmYWN0KTtcbiAgICAgIH1cbiAgICAgIGFydGlmYWN0cy5jaGFuZ2VzZXQgPSBjaGFuZ2VzZXQ7XG4gICAgICByZXR1cm47XG4gIH1cblxuICBpZihvcC52YWx1ZSA9PT0gXCJsb2FkIVwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCIobG9hZCEgLi4pIGhhcyBub3QgYmVlbiBpbXBsZW1lbnRlZCB5ZXRcIik7XG4gIH1cblxuICBpZihvcC52YWx1ZSA9PT0gXCJxdWVyeVwiKSB7XG4gICAgbGV0IG5ldWVDb250ZXh0OlZhcmlhYmxlQ29udGV4dCA9IFtdO1xuICAgIGxldCB7JCR2aWV3LCAkJG5lZ2F0ZWQsICQkYm9keX0gPSBwYXJzZUFyZ3VtZW50cyhzZXhwciwgdW5kZWZpbmVkLCBcIiQkYm9keVwiKTtcbiAgICBsZXQgcXVlcnlJZCA9ICQkdmlldyA/IHJlc29sdmVUb2tlblZhbHVlKFwidmlld1wiLCAkJHZpZXcsIGNvbnRleHQsIFZBTFVFLlNDQUxBUikgOiB1dWlkKCk7XG4gICAgbGV0IG5ldWUgPSBuZXcgcnVudGltZS5RdWVyeShldmUsIHF1ZXJ5SWQpO1xuICAgIG5ldWVbXCJkaXNwbGF5TmFtZVwiXSA9IHNleHByLnRvU3RyaW5nKCk7XG4gICAgaWYoREVCVUcuaW5zdHJ1bWVudFF1ZXJ5KSBpbnN0cnVtZW50UXVlcnkobmV1ZSwgREVCVUcuaW5zdHJ1bWVudFF1ZXJ5KTtcbiAgICBhcnRpZmFjdHMudmlld3NbcXVlcnlJZF0gPSBuZXVlO1xuICAgIGxldCBhZ2dyZWdhdGVkID0gZmFsc2U7XG4gICAgZm9yKGxldCByYXcgb2YgU2V4cHIuYXNTZXhwcnMoPGFueT4kJGJvZHkpKSB7XG4gICAgICBsZXQgc3RhdGUgPSBwYXJzZURTTFNleHByKHJhdywgYXJ0aWZhY3RzLCBuZXVlQ29udGV4dCwgbmV1ZSk7XG4gICAgICBpZihzdGF0ZSAmJiBzdGF0ZS5hZ2dyZWdhdGVkKSBhZ2dyZWdhdGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBsZXQgcHJvamVjdGlvbk1hcCA9IG5ldWUucHJvamVjdGlvbk1hcDtcbiAgICBsZXQgcHJvamVjdGVkID0gdHJ1ZTtcbiAgICBpZighcHJvamVjdGlvbk1hcCkge1xuICAgICAgcHJvamVjdGlvbk1hcCA9IHt9O1xuICAgICAgcHJvamVjdGVkID0gZmFsc2U7XG4gICAgICBmb3IobGV0IHZhcmlhYmxlIG9mIG5ldWVDb250ZXh0KSBwcm9qZWN0aW9uTWFwW3ZhcmlhYmxlLm5hbWVdID0gdmFyaWFibGUudmFsdWU7XG4gICAgfVxuICAgIGlmKE9iamVjdC5rZXlzKHByb2plY3Rpb25NYXApLmxlbmd0aCkgbmV1ZS5wcm9qZWN0KHByb2plY3Rpb25NYXApO1xuXG4gICAgLy8gSm9pbiBzdWJxdWVyeSB0byBwYXJlbnQuXG4gICAgaWYocGFyZW50KSB7XG4gICAgICBsZXQgc2VsZWN0ID0gbmV3IFNleHByKFtUb2tlbi5pZGVudGlmaWVyKHF1ZXJ5ID8gXCJzZWxlY3RcIiA6IFwibWVtYmVyXCIpLCBUb2tlbi5zdHJpbmcocXVlcnlJZCldLCByYXcubGluZUl4LCByYXcuY2hhckl4KTtcbiAgICAgIGxldCBncm91cHMgPSBbXTtcblxuICAgICAgZm9yKGxldCB2YXJpYWJsZSBvZiBuZXVlQ29udGV4dCkge1xuICAgICAgICBpZihwcm9qZWN0ZWQgJiYgIXZhcmlhYmxlLnByb2plY3Rpb24pIGNvbnRpbnVlO1xuICAgICAgICBsZXQgZmllbGQgPSB2YXJpYWJsZS5wcm9qZWN0aW9uIHx8IHZhcmlhYmxlLm5hbWU7XG4gICAgICAgIHNlbGVjdC5wdXNoKFRva2VuLmtleXdvcmQoZmllbGQpKTtcbiAgICAgICAgaWYocXVlcnkpIHNlbGVjdC5wdXNoKFRva2VuLmlkZW50aWZpZXIodmFyaWFibGUubmFtZSkpO1xuICAgICAgICBlbHNlIHNlbGVjdC5wdXNoKFNleHByLmxpc3QoW1Rva2VuLnN0cmluZyhmaWVsZCldKSk7XG5cbiAgICAgICAgaWYoY29udGV4dCkge1xuICAgICAgICAgIGZvcihsZXQgcGFyZW50VmFyIG9mIGNvbnRleHQpIHtcbiAgICAgICAgICAgIGlmKHBhcmVudFZhci5uYW1lID09PSB2YXJpYWJsZS5uYW1lKSBncm91cHMucHVzaCh2YXJpYWJsZS52YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmKCQkbmVnYXRlZCkge1xuICAgICAgICBzZWxlY3QucHVzaChUb2tlbi5rZXl3b3JkKFwiJCRuZWdhdGVkXCIpKTtcbiAgICAgICAgc2VsZWN0LnB1c2goJCRuZWdhdGVkKTtcbiAgICAgIH1cbiAgICAgIGlmKGdyb3Vwcy5sZW5ndGggJiYgYWdncmVnYXRlZCkgbmV1ZS5ncm91cChncm91cHMpO1xuICAgICAgcGFyc2VEU0xTZXhwcihzZWxlY3QsIGFydGlmYWN0cywgY29udGV4dCwgcGFyZW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4ge3ZhbHVlOiBxdWVyeUlkLCB0eXBlOiBWQUxVRS5WSUVXLCBwcm9qZWN0ZWQsIGNvbnRleHQ6IG5ldWVDb250ZXh0fTtcbiAgfVxuXG4gIGlmKG9wLnZhbHVlID09PSBcInVuaW9uXCIpIHtcbiAgICBsZXQgeyQkdmlldywgJCRib2R5LCAkJG5lZ2F0ZWR9ID0gcGFyc2VBcmd1bWVudHMoc2V4cHIsIHVuZGVmaW5lZCwgXCIkJGJvZHlcIik7XG4gICAgbGV0IHVuaW9uSWQgPSAkJHZpZXcgPyByZXNvbHZlVG9rZW5WYWx1ZShcInZpZXdcIiwgJCR2aWV3LCBjb250ZXh0LCBWQUxVRS5TQ0FMQVIpIDogdXVpZCgpO1xuICAgIGxldCBuZXVlID0gbmV3IHJ1bnRpbWUuVW5pb24oZXZlLCB1bmlvbklkKTtcbiAgICBpZihERUJVRy5pbnN0cnVtZW50UXVlcnkpIGluc3RydW1lbnRRdWVyeShuZXVlLCBERUJVRy5pbnN0cnVtZW50UXVlcnkpO1xuICAgIGFydGlmYWN0cy52aWV3c1t1bmlvbklkXSA9IG5ldWU7XG4gICAgbGV0IG1hcHBpbmdzID0ge307XG4gICAgZm9yKGxldCByYXcgb2YgU2V4cHIuYXNTZXhwcnMoPGFueT4kJGJvZHkpKSB7XG4gICAgICBsZXQgY2hpbGQgPSBtYWNyb2V4cGFuZERTTChyYXcpO1xuICAgICAgaWYoY2hpbGQub3BlcmF0b3IudmFsdWUgIT09IFwicXVlcnlcIiAmJiBjaGlsZC5vcGVyYXRvci52YWx1ZSAhPT0gXCJ1bmlvblwiKVxuICAgICAgICB0aHJvdyBuZXcgUGFyc2VFcnJvcihcIlVuaW9ucyBtYXkgb25seSBjb250YWluIHF1ZXJpZXNcIiwgXCJcIiwgcmF3LmxpbmVJeCwgcmF3LmNoYXJJeCk7XG4gICAgICBsZXQgcmVzID0gcGFyc2VEU0xTZXhwcihjaGlsZCwgYXJ0aWZhY3RzLCBjb250ZXh0LCBuZXVlKTtcbiAgICAgIGZvcihsZXQgdmFyaWFibGUgb2YgcmVzLmNvbnRleHQpIHtcbiAgICAgICAgaWYocmVzLnByb2plY3RlZCAmJiAhdmFyaWFibGUucHJvamVjdGlvbikgY29udGludWU7XG4gICAgICAgIGxldCBmaWVsZCA9IHZhcmlhYmxlLnByb2plY3Rpb24gfHwgdmFyaWFibGUubmFtZTtcbiAgICAgICAgaWYoIW1hcHBpbmdzW2ZpZWxkXSkgbWFwcGluZ3NbZmllbGRdID0ge307XG4gICAgICAgIG1hcHBpbmdzW2ZpZWxkXVt2YXJpYWJsZS5uYW1lXSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSm9pbiBzdWJ1bmlvbiB0byBwYXJlbnRcbiAgICBpZihwYXJlbnQpIHtcbiAgICAgIGxldCBzZWxlY3QgPSBuZXcgU2V4cHIoW1Rva2VuLmlkZW50aWZpZXIocXVlcnkgPyBcInNlbGVjdFwiIDogXCJtZW1iZXJcIiksIFRva2VuLnN0cmluZyh1bmlvbklkKV0sIHJhdy5saW5lSXgsIHJhdy5jaGFySXgpO1xuICAgICAgIGZvcihsZXQgZmllbGQgaW4gbWFwcGluZ3MpIHtcbiAgICAgICAgIGxldCBtYXBwaW5nVmFyaWFibGVzID0gT2JqZWN0LmtleXMobWFwcGluZ3NbZmllbGRdKTtcbiAgICAgICAgIGlmKG1hcHBpbmdWYXJpYWJsZXMubGVuZ3RoID4gMSlcbiAgICAgICAgICB0aHJvdyBuZXcgUGFyc2VFcnJvcihcbiAgICAgICAgICAgIGBBbGwgdmFyaWFibGVzIHByb2plY3RlZCB0byBhIHNpbmdsZSB1bmlvbiBmaWVsZCBtdXN0IGhhdmUgdGhlIHNhbWUgbmFtZS4gRmllbGQgJyR7ZmllbGR9JyBoYXMgJHttYXBwaW5nVmFyaWFibGVzLmxlbmd0aH0gZmllbGRzICgke21hcHBpbmdWYXJpYWJsZXMuam9pbihcIiwgXCIpfSlgLCBcIlwiLCByYXcubGluZUl4LCByYXcuY2hhckl4KTtcbiAgICAgICAgc2VsZWN0LnB1c2goVG9rZW4ua2V5d29yZChmaWVsZCkpO1xuICAgICAgICBzZWxlY3QucHVzaChUb2tlbi5pZGVudGlmaWVyKG1hcHBpbmdWYXJpYWJsZXNbMF0pKTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coXCJ1bmlvbiBzZWxlY3RcIiwgc2VsZWN0LnRvU3RyaW5nKCkpO1xuICAgICAgcGFyc2VEU0xTZXhwcihzZWxlY3QsIGFydGlmYWN0cywgY29udGV4dCwgcGFyZW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4ge3R5cGU6IFZBTFVFLlZJRVcsIHZhbHVlOiB1bmlvbklkLCBtYXBwaW5nc307XG4gIH1cblxuICBpZihvcC52YWx1ZSA9PT0gXCJtZW1iZXJcIikge1xuICAgIGlmKCF1bmlvbikgdGhyb3cgbmV3IFBhcnNlRXJyb3IoYENhbm5vdCBhZGQgbWVtYmVyIHRvIG5vbi11bmlvbiBwYXJlbnRgLCBcIlwiLCByYXcubGluZUl4LCByYXcuY2hhckl4KTtcbiAgICBsZXQgYXJncyA9IHBhcnNlQXJndW1lbnRzKHNleHByLCBbXCIkJHZpZXdcIl0pO1xuICAgIGxldCB7JCR2aWV3LCAkJG5lZ2F0ZWR9ID0gYXJncztcbiAgICBsZXQgdmlldyA9IHJlc29sdmVUb2tlblZhbHVlKFwidmlld1wiLCAkJHZpZXcsIGNvbnRleHQsIFZBTFVFLlNDQUxBUik7XG4gICAgaWYodmlldyA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgUGFyc2VFcnJvcihcIk11c3Qgc3BlY2lmeSBhIHZpZXcgdG8gYmUgdW5pb25lZFwiLCBcIlwiLCByYXcubGluZUl4LCByYXcuY2hhckl4KTtcblxuICAgIGxldCBqb2luID0ge307XG4gICAgZm9yKGxldCBhcmcgaW4gYXJncykge1xuICAgICAgaWYoYXJnID09PSBcIiQkdmlld1wiIHx8IGFyZyA9PT0gXCIkJG5lZ2F0ZWRcIikgY29udGludWU7XG4gICAgICBqb2luW2FyZ10gPSByZXNvbHZlVG9rZW5WYWx1ZShcIm1lbWJlciBmaWVsZFwiLCBhcmdzW2FyZ10sIGNvbnRleHQpO1xuICAgIH1cbiAgICBpZihydW50aW1lLlF1ZXJ5RnVuY3Rpb25zW3ZpZXddKSB0aHJvdyBuZXcgUGFyc2VFcnJvcihgQ2Fubm90IHVuaW9uIHByaW1pdGl2ZSB2aWV3ICcke3ZpZXd9J2AsIFwiXCIsIHJhdy5saW5lSXgsIHJhdy5jaGFySXgpO1xuICAgIHVuaW9uLnVuaW9uKHZpZXcsIGpvaW4pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmKCFwYXJlbnQpIHRocm93IG5ldyBQYXJzZUVycm9yKGBOb24tcXVlcnkgb3IgdW5pb24gc2V4cHJzIG11c3QgYmUgY29udGFpbmVkIHdpdGhpbiBhIHF1ZXJ5IG9yIHVuaW9uYCwgXCJcIiwgcmF3LmxpbmVJeCwgcmF3LmNoYXJJeCk7XG5cbiAgaWYob3AudmFsdWUgPT09IFwic2VsZWN0XCIpIHtcbiAgICBpZighcXVlcnkpIHRocm93IG5ldyBQYXJzZUVycm9yKGBDYW5ub3QgYWRkIHNlbGVjdCB0byBub24tcXVlcnkgcGFyZW50YCwgXCJcIiwgcmF3LmxpbmVJeCwgcmF3LmNoYXJJeCk7XG4gICAgbGV0IHNlbGVjdElkID0gdXVpZCgpO1xuICAgIGxldCAkJHZpZXcgPSBnZXRBcmd1bWVudChzZXhwciwgXCIkJHZpZXdcIiwgW1wiJCR2aWV3XCJdKTtcbiAgICBsZXQgdmlldyA9IHJlc29sdmVUb2tlblZhbHVlKFwidmlld1wiLCAkJHZpZXcsIGNvbnRleHQsIFZBTFVFLlNDQUxBUik7XG4gICAgaWYodmlldyA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgUGFyc2VFcnJvcihcIk11c3Qgc3BlY2lmeSBhIHZpZXcgdG8gYmUgc2VsZWN0ZWRcIiwgXCJcIiwgcmF3LmxpbmVJeCwgcmF3LmNoYXJJeCk7XG4gICAgbGV0IHByaW1pdGl2ZSA9IHJ1bnRpbWUuUXVlcnlGdW5jdGlvbnNbdmlld11cbiAgICAvL0BUT0RPOiBNb3ZlIHRoaXMgdG8gYW4gZXZlIHRhYmxlIHRvIGFsbG93IHVzZXIgZGVmaW5lZCBkZWZhdWx0c1xuICAgIGxldCBhcmdzID0gcGFyc2VBcmd1bWVudHMoc2V4cHIsIFtcIiQkdmlld1wiXS5jb25jYXQoZ2V0RGVmYXVsdHModmlldykpKTtcbiAgICBsZXQgeyQkbmVnYXRlZH0gPSBhcmdzO1xuXG4gICAgbGV0IGpvaW4gPSB7fTtcbiAgICBmb3IobGV0IGFyZyBpbiBhcmdzKSB7XG4gICAgICBsZXQgdmFsdWUgPSBhcmdzW2FyZ107XG4gICAgICBsZXQgdmFyaWFibGU7XG4gICAgICBpZihhcmcgPT09IFwiJCR2aWV3XCIgfHwgYXJnID09PSBcIiQkbmVnYXRlZFwiKSBjb250aW51ZTtcblxuICAgICAgaWYodmFsdWUgaW5zdGFuY2VvZiBUb2tlbiAmJiB2YWx1ZS50eXBlICE9PSBUb2tlbi5UWVBFLklERU5USUZJRVIpIHtcbiAgICAgICAgam9pblthcmddID0gYXJnc1thcmddLnZhbHVlO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYodmFsdWUgaW5zdGFuY2VvZiBTZXhwcikge1xuICAgICAgICBsZXQgcmVzdWx0ID0gcGFyc2VEU0xTZXhwcih2YWx1ZSwgYXJ0aWZhY3RzLCBjb250ZXh0LCBwYXJlbnQsIGAkJHRlbXAtJHtoeWdpZW5pY1N5bWJvbENvdW50ZXIrK30tJHthcmd9YCk7XG4gICAgICAgIGlmKCFyZXN1bHQgfHwgcmVzdWx0LnR5cGUgPT09IFZBTFVFLk5VTEwpIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHNldCBwYXJhbWV0ZXIgJyR7YXJnfScgdG8gbnVsbCB2YWx1ZSAnJHt2YWx1ZS50b1N0cmluZygpfSdgKTtcbiAgICAgICAgaWYocmVzdWx0LnR5cGUgPT09IFZBTFVFLlZJRVcpIHtcbiAgICAgICAgICBsZXQgdmlldyA9IHJlc3VsdC52YWx1ZTtcbiAgICAgICAgICBsZXQgcmVzdWx0RmllbGQgPSBnZXRSZXN1bHQodmlldyk7XG4gICAgICAgICAgaWYoIXJlc3VsdEZpZWxkKSB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBzZXQgcGFyYW1ldGVyICcke2FyZ30nIHRvIHNlbGVjdCB3aXRob3V0IGRlZmF1bHQgcmVzdWx0IGZpZWxkYCk7XG4gICAgICAgICAgZm9yKGxldCBjdXJWYXIgb2YgY29udGV4dCkge1xuICAgICAgICAgICAgZm9yKGxldCBjb25zdHJhaW50IG9mIGN1clZhci5jb25zdHJhaW50cykge1xuICAgICAgICAgICAgICBpZihjb25zdHJhaW50WzBdID09PSB2aWV3ICYmIGNvbnN0cmFpbnRbMV0gPT09IHJlc3VsdEZpZWxkKSB7XG4gICAgICAgICAgICAgICAgdmFyaWFibGUgPSBjdXJWYXI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB2YXJpYWJsZSA9IGdldERTTFZhcmlhYmxlKHZhbHVlLnZhbHVlLCBjb250ZXh0KTtcblxuICAgICAgaWYodmFyaWFibGUpIHtcbiAgICAgICAgam9pblthcmddID0gdmFyaWFibGUudmFsdWU7XG4gICAgICAgIHZhcmlhYmxlLmNvbnN0cmFpbnRzLnB1c2goW3ZpZXcsIGFyZ10pO1xuICAgICAgfVxuICAgICAgZWxzZSBpZigkJG5lZ2F0ZWQgJiYgJCRuZWdhdGVkLnZhbHVlKVxuICAgICAgICB0aHJvdyBuZXcgUGFyc2VFcnJvcihgQ2Fubm90IGJpbmQgZmllbGQgaW4gbmVnYXRlZCBzZWxlY3QgdG8gdW5kZWZpbmVkIHZhcmlhYmxlICcke3ZhbHVlLnZhbHVlfSdgLCBcIlwiLCByYXcubGluZUl4LCByYXcuY2hhckl4KTtcbiAgICAgIGVsc2UgY29udGV4dC5wdXNoKHtuYW1lOiB2YWx1ZS52YWx1ZSwgdHlwZTogVkFMVUUuU0NBTEFSLCB2YWx1ZTogW3NlbGVjdElkLCBhcmddLCBjb25zdHJhaW50czogW1t2aWV3LCBhcmddXX0pOyAvLyBAVE9ETzogZG9lcyB0aGlzIG5vdCBuZWVkIHRvIGFkZCB0byB0aGUgam9pbiBtYXA/XG4gICAgfVxuXG4gICAgbGV0IHJlc3VsdEZpZWxkID0gZ2V0UmVzdWx0KHZpZXcpO1xuICAgIGlmKHJlc3VsdFZhcmlhYmxlICYmIHJlc3VsdEZpZWxkICYmICFqb2luW3Jlc3VsdEZpZWxkXSkge1xuICAgICAgam9pbltyZXN1bHRGaWVsZF0gPSBbc2VsZWN0SWQsIHJlc3VsdEZpZWxkXTtcbiAgICAgIGNvbnRleHQucHVzaCh7bmFtZTogcmVzdWx0VmFyaWFibGUsIHR5cGU6IFZBTFVFLlNDQUxBUiwgdmFsdWU6IFtzZWxlY3RJZCwgcmVzdWx0RmllbGRdLCBjb25zdHJhaW50czogW1t2aWV3LCByZXN1bHRGaWVsZF1dfSk7XG4gICAgfVxuXG4gICAgaWYocHJpbWl0aXZlKSB7XG4gICAgICBpZigkJG5lZ2F0ZWQpIHtcbiAgICAgICAgaWYocHJpbWl0aXZlLmludmVyc2UpIHZpZXcgPSBwcmltaXRpdmUuaW52ZXJzZTtcbiAgICAgICAgZWxzZSB0aHJvdyBuZXcgUGFyc2VFcnJvcihgQ2Fubm90IGludmVydCBwcmltaXRpdmUgY2FsY3VsYXRpb24gJyR7dmlld30nYCwgXCJcIiwgcmF3LmxpbmVJeCwgcmF3LmNoYXJJeCk7XG4gICAgICB9XG4gICAgICBpZihwcmltaXRpdmUuYWdncmVnYXRlKSBxdWVyeS5hZ2dyZWdhdGUodmlldywgam9pbiwgc2VsZWN0SWQpO1xuICAgICAgZWxzZSBxdWVyeS5jYWxjdWxhdGUodmlldywgam9pbiwgc2VsZWN0SWQpO1xuICAgIH0gZWxzZSBpZigkJG5lZ2F0ZWQpIHF1ZXJ5LmRlc2VsZWN0KHZpZXcsIGpvaW4pO1xuICAgIGVsc2UgcXVlcnkuc2VsZWN0KHZpZXcsIGpvaW4sIHNlbGVjdElkKTtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogVkFMVUUuVklFVyxcbiAgICAgIHZhbHVlOiB2aWV3LFxuICAgICAgYWdncmVnYXRlZDogcHJpbWl0aXZlICYmIHByaW1pdGl2ZS5hZ2dyZWdhdGVcbiAgICB9O1xuICB9XG5cbiAgaWYob3AudmFsdWUgPT09IFwicHJvamVjdCFcIikge1xuICAgIGxldCBhcmdzID0gcGFyc2VBcmd1bWVudHMoc2V4cHIsIFtcIiQkdmlld1wiXSk7XG4gICAgbGV0IHskJHZpZXcsICQkbmVnYXRlZH0gPSBhcmdzO1xuXG4gICAgbGV0IHByb2plY3Rpb25NYXAgPSB7fTtcbiAgICBmb3IobGV0IGFyZyBpbiBhcmdzKSB7XG4gICAgICBsZXQgdmFsdWUgPSBhcmdzW2FyZ107XG4gICAgICBpZihhcmcgPT09IFwiJCR2aWV3XCIgfHwgYXJnID09PSBcIiQkbmVnYXRlZFwiKSBjb250aW51ZTtcbiAgICAgIGlmKHZhbHVlLnR5cGUgIT09IFRva2VuLlRZUEUuSURFTlRJRklFUikge1xuICAgICAgICBwcm9qZWN0aW9uTWFwW2FyZ10gPSBhcmdzW2FyZ10udmFsdWU7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBsZXQgdmFyaWFibGUgPSBnZXREU0xWYXJpYWJsZSh2YWx1ZS52YWx1ZSwgY29udGV4dCk7XG4gICAgICBpZih2YXJpYWJsZSkge1xuICAgICAgICBpZih2YXJpYWJsZS5zdGF0aWMpIHByb2plY3Rpb25NYXBbYXJnXSA9IHZhcmlhYmxlLnZhbHVlO1xuICAgICAgICBlbHNlIGlmKCEkJHZpZXcpIHtcbiAgICAgICAgICB2YXJpYWJsZS5wcm9qZWN0aW9uID0gYXJnO1xuICAgICAgICAgIHByb2plY3Rpb25NYXBbYXJnXSA9IHZhcmlhYmxlLnZhbHVlO1xuICAgICAgICB9IGVsc2UgcHJvamVjdGlvbk1hcFthcmddID0gW3ZhcmlhYmxlLm5hbWVdO1xuICAgICAgfSBlbHNlIHRocm93IG5ldyBQYXJzZUVycm9yKGBDYW5ub3QgYmluZCBwcm9qZWN0ZWQgZmllbGQgdG8gdW5kZWZpbmVkIHZhcmlhYmxlICcke3ZhbHVlLnZhbHVlfSdgLCBcIlwiLCByYXcubGluZUl4LCByYXcuY2hhckl4KTtcbiAgICB9XG5cbiAgICBsZXQgdmlldyA9IHJlc29sdmVUb2tlblZhbHVlKFwidmlld1wiLCAkJHZpZXcsIGNvbnRleHQsIFZBTFVFLlNDQUxBUik7XG4gICAgaWYodmlldyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZihxdWVyeS5wcm9qZWN0aW9uTWFwKSB0aHJvdyBuZXcgUGFyc2VFcnJvcihcIlF1ZXJ5IGNhbiBvbmx5IHNlbGYtcHJvamVjdCBvbmNlXCIsIFwiXCIsIHJhdy5saW5lSXgsIHJhdy5jaGFySXgpO1xuICAgICAgaWYoJCRuZWdhdGVkICYmICQkbmVnYXRlZC52YWx1ZSkgdGhyb3cgbmV3IFBhcnNlRXJyb3IoYENhbm5vdCBuZWdhdGUgc2VsZi1wcm9qZWN0aW9uYCwgXCJcIiwgcmF3LmxpbmVJeCwgcmF3LmNoYXJJeCk7XG4gICAgICAvLyBQcm9qZWN0IHNlbGZcbiAgICAgIHF1ZXJ5LnByb2plY3QocHJvamVjdGlvbk1hcCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCB1bmlvbiA9IDxydW50aW1lLlVuaW9uPmFydGlmYWN0cy52aWV3c1t2aWV3XSB8fCBuZXcgcnVudGltZS5VbmlvbihldmUsIHZpZXcpO1xuICAgICAgaWYoREVCVUcuaW5zdHJ1bWVudFF1ZXJ5ICYmICFhcnRpZmFjdHMudmlld3Nbdmlld10pIGluc3RydW1lbnRRdWVyeSh1bmlvbiwgREVCVUcuaW5zdHJ1bWVudFF1ZXJ5KTtcbiAgICAgIGFydGlmYWN0cy52aWV3c1t2aWV3XSA9IHVuaW9uO1xuXG4gICAgICAvLyBpZigkJG5lZ2F0ZWQgJiYgJCRuZWdhdGVkLnZhbHVlKSB1bmlvbi51bnVuaW9uKHF1ZXJ5SWQsIHByb2plY3Rpb25NYXApO1xuICAgICAgaWYoJCRuZWdhdGVkICYmICQkbmVnYXRlZC52YWx1ZSlcbiAgICAgICAgdGhyb3cgbmV3IFBhcnNlRXJyb3IoYFVuaW9uIHByb2plY3Rpb25zIG1heSBub3QgYmUgbmVnYXRlZCBpbiB0aGUgY3VycmVudCBydW50aW1lYCwgXCJcIiwgcmF3LmxpbmVJeCwgcmF3LmNoYXJJeCk7XG4gICAgICBlbHNlIHVuaW9uLnVuaW9uKHF1ZXJ5Lm5hbWUsIHByb2plY3Rpb25NYXApO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICB0aHJvdyBuZXcgUGFyc2VFcnJvcihgVW5rbm93biBEU0wgb3BlcmF0b3IgJyR7b3AudmFsdWV9J2AsIFwiXCIsIHJhdy5saW5lSXgsIHJhdy5jaGFySXgpO1xufVxuXG5mdW5jdGlvbiByZXNvbHZlVG9rZW5WYWx1ZShuYW1lOnN0cmluZywgdG9rZW46VG9rZW58U2V4cHIsIGNvbnRleHQ6VmFyaWFibGVDb250ZXh0LCB0eXBlPzpWQUxVRSkge1xuICBpZighdG9rZW4pIHJldHVybjtcbiAgaWYodG9rZW4gaW5zdGFuY2VvZiBTZXhwcikgcmV0dXJuIHBhcnNlRFNMU2V4cHIodG9rZW4sIHVuZGVmaW5lZCwgY29udGV4dCk7XG4gIGlmKHRva2VuIGluc3RhbmNlb2YgVG9rZW4gJiYgdG9rZW4udHlwZSA9PT0gVG9rZW4uVFlQRS5JREVOVElGSUVSKSB7XG4gICAgbGV0IHZhcmlhYmxlID0gZ2V0RFNMVmFyaWFibGUodG9rZW4udmFsdWUsIGNvbnRleHQsIFZBTFVFLlNDQUxBUik7XG4gICAgaWYoIXZhcmlhYmxlKSB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBiaW5kICR7bmFtZX0gdG8gdW5kZWZpbmVkIHZhcmlhYmxlICcke3Rva2VuLnZhbHVlfSdgKTtcbiAgICBpZighdmFyaWFibGUuc3RhdGljKSB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBiaW5kICR7bmFtZX0gdG8gZHluYW1pYyB2YXJpYWJsZSAnJHt0b2tlbi52YWx1ZX0nYCk7XG4gICAgcmV0dXJuIHZhcmlhYmxlLnZhbHVlO1xuICB9XG4gIHJldHVybiB0b2tlbi52YWx1ZTtcbn1cblxuZnVuY3Rpb24gZ2V0RFNMVmFyaWFibGUobmFtZTpzdHJpbmcsIGNvbnRleHQ6VmFyaWFibGVDb250ZXh0LCB0eXBlPzpWQUxVRSk6VmFyaWFibGUge1xuICBpZighY29udGV4dCkgcmV0dXJuO1xuICBmb3IobGV0IHZhcmlhYmxlIG9mIGNvbnRleHQpIHtcbiAgICBpZih2YXJpYWJsZS5uYW1lID09PSBuYW1lKSB7XG4gICAgICBpZih2YXJpYWJsZS5zdGF0aWMgPT09IGZhbHNlKSB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBzdGF0aWNhbGx5IGxvb2sgdXAgZHluYW1pYyB2YXJpYWJsZSAnJHtuYW1lfSdgKTtcbiAgICAgIGlmKHR5cGUgIT09IHVuZGVmaW5lZCAmJiB2YXJpYWJsZS50eXBlICE9PSB0eXBlKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIHZhcmlhYmxlICcke25hbWV9JyB0byBoYXZlIHR5cGUgJyR7dHlwZX0nLCBidXQgaW5zdGVhZCBoYXMgdHlwZSAnJHt2YXJpYWJsZS50eXBlfSdgKTtcbiAgICAgIHJldHVybiB2YXJpYWJsZTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RGVmYXVsdHModmlldzpzdHJpbmcpOnN0cmluZ1tdIHtcbiAgcmV0dXJuIChydW50aW1lLlF1ZXJ5RnVuY3Rpb25zW3ZpZXddICYmIHJ1bnRpbWUuUXVlcnlGdW5jdGlvbnNbdmlld10ucGFyYW1zKSB8fCBbXTtcbn1cbmZ1bmN0aW9uIGdldFJlc3VsdCh2aWV3OnN0cmluZyk6c3RyaW5nIHtcbiAgcmV0dXJuIHJ1bnRpbWUuUXVlcnlGdW5jdGlvbnNbdmlld10gJiYgcnVudGltZS5RdWVyeUZ1bmN0aW9uc1t2aWV3XS5yZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBcmd1bWVudChyb290OlNleHByLCBwYXJhbTpzdHJpbmcsIGRlZmF1bHRzPzogc3RyaW5nW10pOlRva2VufFNleHByIHtcbiAgbGV0IGl4ID0gMTtcbiAgbGV0IGRlZmF1bHRJeCA9IDA7XG4gIGZvcihsZXQgaXggPSAxLCBjdXIgPSByb290Lm50aChpeCk7IGl4IDwgcm9vdC5sZW5ndGg7IGl4KyspIHtcbiAgICBpZihjdXIudHlwZSA9PT0gVG9rZW4uVFlQRS5LRVlXT1JEKSB7XG4gICAgICBpZihjdXIudmFsdWUgPT09IHBhcmFtKSByZXR1cm4gcm9vdC5udGgoaXggKyAxKTtcbiAgICAgIGVsc2UgaXggKyAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZihkZWZhdWx0cyAmJiBkZWZhdWx0SXggPCBkZWZhdWx0cy5sZW5ndGgpIHtcbiAgICAgICAgbGV0IGtleXdvcmQgPSBkZWZhdWx0c1tkZWZhdWx0SXgrK107XG4gICAgICAgIGlmKGtleXdvcmQgPT09IHBhcmFtKSByZXR1cm4gY3VyO1xuICAgICAgICBlbHNlIGl4ICsgMTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBFcnJvcihgUGFyYW0gJyR7cGFyYW19JyBub3QgaW4gc2V4cHIgJHtyb290LnRvU3RyaW5nKCl9YCk7XG4gICAgfVxuICB9XG4gIHRocm93IG5ldyBFcnJvcihgUGFyYW0gJyR7cGFyYW19JyBub3QgaW4gc2V4cHIgJHtyb290LnRvU3RyaW5nKCl9YCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUFyZ3VtZW50cyhyb290OlNleHByLCBkZWZhdWx0cz86c3RyaW5nW10sIHJlc3Q/OnN0cmluZyk6e1trZXl3b3JkOnN0cmluZ106IFRva2VufFNleHByfSB7XG4gIGxldCBhcmdzOmFueSA9IHt9O1xuICBsZXQgZGVmYXVsdEl4ID0gMDtcbiAgbGV0IGtleXdvcmQ7XG4gIGxldCBrd2FyZyA9IGZhbHNlO1xuICBmb3IobGV0IHJhdyBvZiByb290LmFyZ3VtZW50cykge1xuICAgIGlmKHJhdy50eXBlID09PSBUb2tlbi5UWVBFLktFWVdPUkQpIHtcbiAgICAgIGlmKGtleXdvcmQpIHRocm93IG5ldyBFcnJvcihgS2V5d29yZHMgbWF5IG5vdCBiZSB2YWx1ZXMgJyR7cmF3fSdgKTtcbiAgICAgIGVsc2Uga2V5d29yZCA9IHJhdy52YWx1ZTtcbiAgICB9IGVsc2UgaWYoa2V5d29yZCkge1xuICAgICAgaWYoYXJnc1trZXl3b3JkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGFyZ3Nba2V5d29yZF0gPSByYXc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZighKGFyZ3Nba2V5d29yZF0gaW5zdGFuY2VvZiBBcnJheSkpIGFyZ3Nba2V5d29yZF0gPSBbYXJnc1trZXl3b3JkXV07XG4gICAgICAgIGFyZ3Nba2V5d29yZF0ucHVzaChyYXcpO1xuICAgICAgfVxuICAgICAga2V5d29yZCA9IHVuZGVmaW5lZDtcbiAgICAgIGRlZmF1bHRJeCA9IGRlZmF1bHRzID8gZGVmYXVsdHMubGVuZ3RoIDogMDtcbiAgICAgIGt3YXJnID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYoZGVmYXVsdHMgJiYgZGVmYXVsdEl4IDwgZGVmYXVsdHMubGVuZ3RoKSB7XG4gICAgICBhcmdzW2RlZmF1bHRzW2RlZmF1bHRJeCsrXV0gPSByYXc7XG4gICAgfSBlbHNlIGlmKHJlc3QpIHtcbiAgICAgIGFyZ3NbcmVzdF0gPSBhcmdzW3Jlc3RdIHx8IFtdO1xuICAgICAgYXJnc1tyZXN0XS5wdXNoKHJhdyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmKGt3YXJnKSB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3Qgc3BlY2lmeSBhbiBhcmcgYWZ0ZXIgYSBrd2FyZ1wiKTtcbiAgICAgIGVsc2UgaWYoZGVmYXVsdEl4KSB0aHJvdyBuZXcgRXJyb3IoYFRvbyBtYW55IGFyZ3MsIGV4cGVjdGVkOiAke2RlZmF1bHRzLmxlbmd0aH0sIGdvdDogJHtkZWZhdWx0SXggKyAxfWApO1xuICAgICAgZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3Qgc3BlY2lmeSBhbiBhcmcgd2l0aG91dCBkZWZhdWx0IGtleXMgc3BlY2lmaWVkXCIpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhcmdzO1xufVxuXG5kZWNsYXJlIHZhciBleHBvcnRzO1xuaWYoRU5WID09PSBcImJyb3dzZXJcIikgd2luZG93W1wicGFyc2VyXCJdID0gZXhwb3J0cztcblxuZXhwb3J0IGZ1bmN0aW9uIGluc3RydW1lbnRRdWVyeShxOmFueSwgaW5zdHJ1bWVudD86RnVuY3Rpb258Ym9vbGVhbikge1xuICBsZXQgaW5zdHJ1bWVudGF0aW9uOkZ1bmN0aW9uID0gPEZ1bmN0aW9uPmluc3RydW1lbnQ7XG4gIGlmKCFpbnN0cnVtZW50IHx8IGluc3RydW1lbnQgPT09IHRydWUpIGluc3RydW1lbnRhdGlvbiA9IChmbiwgYXJncykgPT4gY29uc29sZS5sb2coXCIqXCIsIGZuLCBcIjpcIiwgYXJncyk7XG4gIGxldCBrZXlzID0gW107XG4gIGZvcihsZXQga2V5IGluIHEpIGtleXMucHVzaChrZXkpO1xuICBrZXlzLmZvckVhY2goKGZuKSA9PiB7XG4gICAgaWYoIXEuY29uc3RydWN0b3IucHJvdG90eXBlLmhhc093blByb3BlcnR5KGZuKSB8fCB0eXBlb2YgcVtmbl0gIT09IFwiZnVuY3Rpb25cIikgcmV0dXJuO1xuICAgIHZhciBvbGQgPSBxW2ZuXTtcbiAgICBxW2ZuXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgaW5zdHJ1bWVudGF0aW9uKGZuLCBhcmd1bWVudHMpO1xuICAgICAgcmV0dXJuIG9sZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBxO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXNEaWZmKGl4ZXIsIGFydGlmYWN0czpBcnRpZmFjdHMpIHtcbiAgbGV0IHZpZXdzID0gYXJ0aWZhY3RzLnZpZXdzO1xuICBsZXQgZGlmZiA9IGl4ZXIuZGlmZigpO1xuICBmb3IobGV0IGlkIGluIHZpZXdzKSBkaWZmLm1lcmdlKHZpZXdzW2lkXS5jaGFuZ2VzZXQoZXZlKSk7XG4gIHJldHVybiBkaWZmO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlBc0RpZmZzKGFydGlmYWN0czpBcnRpZmFjdHMpIHtcbiAgbGV0IHZpZXdzID0gYXJ0aWZhY3RzLnZpZXdzO1xuICBmb3IobGV0IGlkIGluIHZpZXdzKSBldmUuYXBwbHlEaWZmKHZpZXdzW2lkXS5jaGFuZ2VzZXQoZXZlKSk7XG4gIGNvbnNvbGUubG9nKFwiQXBwbGllZCBkaWZmcyBmb3I6XCIpO1xuICBmb3IobGV0IGlkIGluIHZpZXdzKSBjb25zb2xlLmxvZyhcIiAgKiBcIiwgdmlld3NbaWRdIGluc3RhbmNlb2YgcnVudGltZS5RdWVyeSA/IFwiUXVlcnlcIiA6IFwiVW5pb25cIiwgdmlld3NbaWRdLm5hbWUpO1xuICByZXR1cm4gYXJ0aWZhY3RzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9nQXJ0aWZhY3RzKGFydGlmYWN0czpBcnRpZmFjdHMpIHtcbiAgZm9yKGxldCB2aWV3IGluIGFydGlmYWN0cy52aWV3cykgY29uc29sZS5sb2codmlldywgXCJcXG5cIiwgZXZlLmZpbmQodmlldykpO1xufVxuIiwiaW1wb3J0IHtFTlYsIHV1aWR9IGZyb20gXCIuL3V0aWxzXCI7XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBSdW50aW1lXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZGVjbGFyZSB2YXIgZXhwb3J0cztcbmxldCBydW50aW1lID0gZXhwb3J0cztcblxuZXhwb3J0IHZhciBNQVhfTlVNQkVSID0gOTAwNzE5OTI1NDc0MDk5MTtcbmV4cG9ydCB2YXIgSU5DUkVNRU5UQUwgPSBmYWxzZTtcblxuZnVuY3Rpb24gb2JqZWN0c0lkZW50aWNhbChhOntba2V5OnN0cmluZ106IGFueX0sIGI6e1trZXk6c3RyaW5nXTogYW55fSk6Ym9vbGVhbiB7XG4gIHZhciBhS2V5cyA9IE9iamVjdC5rZXlzKGEpO1xuICBmb3IodmFyIGtleSBvZiBhS2V5cykge1xuICAgIC8vVE9ETzogaGFuZGxlIG5vbi1zY2FsYXIgdmFsdWVzXG4gICAgaWYoYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaW5kZXhPZkZhY3QoaGF5c3RhY2ssIG5lZWRsZSkge1xuICBsZXQgaXggPSAwO1xuICBmb3IobGV0IGZhY3Qgb2YgaGF5c3RhY2spIHtcbiAgICBpZihmYWN0Ll9faWQgPT09IG5lZWRsZS5fX2lkKSB7XG4gICAgICByZXR1cm4gaXg7XG4gICAgfVxuICAgIGl4Kys7XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRmFjdChoYXlzdGFjaywgbmVlZGxlKSB7XG4gIGxldCBpeCA9IGluZGV4T2ZGYWN0KGhheXN0YWNrLCBuZWVkbGUpO1xuICBpZihpeCA+IC0xKSBoYXlzdGFjay5zcGxpY2UoaXgsIDEpO1xuICByZXR1cm4gaGF5c3RhY2s7XG59XG5cbmZ1bmN0aW9uIGRpZmZBZGRzQW5kUmVtb3ZlcyhhZGRzLCByZW1vdmVzKSB7XG4gIGxldCBsb2NhbEhhc2ggPSB7fTtcbiAgbGV0IGhhc2hUb0ZhY3QgPSB7fTtcbiAgbGV0IGhhc2hlcyA9IFtdO1xuICBmb3IobGV0IGFkZCBvZiBhZGRzKSB7XG4gICAgbGV0IGhhc2ggPSBhZGQuX19pZDtcbiAgICBpZihsb2NhbEhhc2hbaGFzaF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgbG9jYWxIYXNoW2hhc2hdID0gMTtcbiAgICAgIGhhc2hUb0ZhY3RbaGFzaF0gPSBhZGQ7XG4gICAgICBoYXNoZXMucHVzaChoYXNoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9jYWxIYXNoW2hhc2hdKys7XG4gICAgfVxuICAgIGFkZC5fX2lkID0gaGFzaDtcbiAgfVxuICBmb3IobGV0IHJlbW92ZSBvZiByZW1vdmVzKSB7XG4gICAgbGV0IGhhc2ggPSByZW1vdmUuX19pZDtcbiAgICBpZihsb2NhbEhhc2hbaGFzaF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgbG9jYWxIYXNoW2hhc2hdID0gLTE7XG4gICAgICBoYXNoVG9GYWN0W2hhc2hdID0gcmVtb3ZlO1xuICAgICAgaGFzaGVzLnB1c2goaGFzaCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2FsSGFzaFtoYXNoXS0tO1xuICAgIH1cbiAgICByZW1vdmUuX19pZCA9IGhhc2g7XG4gIH1cbiAgbGV0IHJlYWxBZGRzID0gW107XG4gIGxldCByZWFsUmVtb3ZlcyA9IFtdO1xuICBmb3IobGV0IGhhc2ggb2YgaGFzaGVzKSB7XG4gICAgbGV0IGNvdW50ID0gbG9jYWxIYXNoW2hhc2hdO1xuICAgIGlmKGNvdW50ID4gMCkge1xuICAgICAgbGV0IGZhY3QgPSBoYXNoVG9GYWN0W2hhc2hdO1xuICAgICAgcmVhbEFkZHMucHVzaChmYWN0KTtcbiAgICB9IGVsc2UgaWYoY291bnQgPCAwKSB7XG4gICAgICBsZXQgZmFjdCA9IGhhc2hUb0ZhY3RbaGFzaF07XG4gICAgICByZWFsUmVtb3Zlcy5wdXNoKGZhY3QpO1xuICAgIH1cbiAgfVxuICByZXR1cm4ge2FkZHM6cmVhbEFkZHMsIHJlbW92ZXM6cmVhbFJlbW92ZXN9O1xufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZUVxdWFsaXR5Rm4oa2V5cykge1xuICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwiYVwiLCBcImJcIiwgIGByZXR1cm4gJHtrZXlzLm1hcChmdW5jdGlvbihrZXksIGl4KSB7XG4gICAgaWYoa2V5LmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuICAgICAgcmV0dXJuIGBhWycke2tleVswXX0nXVsnJHtrZXlbMV19J10gPT09IGJbJyR7a2V5WzBdfSddWycke2tleVsxXX0nXWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBgYVtcIiR7a2V5fVwiXSA9PT0gYltcIiR7a2V5fVwiXWA7XG4gICAgfVxuICB9KS5qb2luKFwiICYmIFwiKX07YClcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVTdHJpbmdGbihrZXlzKSB7XG4gIGxldCBrZXlTdHJpbmdzID0gW107XG4gIGZvcihsZXQga2V5IG9mIGtleXMpIHtcbiAgICBpZihrZXkuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG4gICAgICBrZXlTdHJpbmdzLnB1c2goYGFbJyR7a2V5WzBdfSddWycke2tleVsxXX0nXWApO1xuICAgIH0gZWxzZSB7XG4gICAgICBrZXlTdHJpbmdzLnB1c2goYGFbJyR7a2V5fSddYCk7XG4gICAgfVxuICB9XG4gIGxldCBmaW5hbCA9IGtleVN0cmluZ3Muam9pbignICsgXCJ8XCIgKyAnKTtcbiAgcmV0dXJuIG5ldyBGdW5jdGlvbihcImFcIiwgIGByZXR1cm4gJHtmaW5hbH07YCk7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlVW5wcm9qZWN0ZWRTb3J0ZXJDb2RlKHVucHJvamVjdGVkU2l6ZSwgc29ydHMpIHtcbiAgbGV0IGNvbmRpdGlvbnMgPSBbXTtcbiAgbGV0IHBhdGggPSBbXTtcbiAgbGV0IGRpc3RhbmNlID0gdW5wcm9qZWN0ZWRTaXplO1xuICBmb3IobGV0IHNvcnQgb2Ygc29ydHMpIHtcbiAgICBsZXQgY29uZGl0aW9uID0gXCJcIjtcbiAgICBmb3IobGV0IHByZXYgb2YgcGF0aCkge1xuICAgICAgbGV0IFt0YWJsZSwga2V5XSA9IHByZXY7XG4gICAgICBjb25kaXRpb24gKz0gYHVucHJvamVjdGVkW2otJHtkaXN0YW5jZSAtIHRhYmxlfV1bJyR7a2V5fSddID09PSBpdGVtJHt0YWJsZX1bJyR7a2V5fSddICYmIGA7XG4gICAgfVxuICAgIGxldCBbdGFibGUsIGtleSwgZGlyXSA9IHNvcnQ7XG4gICAgbGV0IG9wID0gXCI+XCI7XG4gICAgaWYoZGlyID09PSBcImRlc2NlbmRpbmdcIikge1xuICAgICAgb3AgPSBcIjxcIjtcbiAgICB9XG4gICAgY29uZGl0aW9uICs9IGB1bnByb2plY3RlZFtqLSR7ZGlzdGFuY2UgLSB0YWJsZX1dWycke2tleX0nXSAke29wfSBpdGVtJHt0YWJsZX1bJyR7a2V5fSddYDtcbiAgICBjb25kaXRpb25zLnB1c2goY29uZGl0aW9uKTtcbiAgICBwYXRoLnB1c2goc29ydCk7XG4gIH1cbiAgbGV0IGl0ZW1zID0gW107XG4gIGxldCByZXBvc2l0aW9uZWQgPSBbXTtcbiAgbGV0IGl0ZW1Bc3NpZ25tZW50cyA9IFtdO1xuICBmb3IobGV0IGl4ID0gMDsgaXggPCBkaXN0YW5jZTsgaXgrKykge1xuICAgIGl0ZW1zLnB1c2goYGl0ZW0ke2l4fSA9IHVucHJvamVjdGVkW2orJHtpeH1dYCk7XG4gICAgcmVwb3NpdGlvbmVkLnB1c2goYHVucHJvamVjdGVkW2orJHtpeH1dID0gdW5wcm9qZWN0ZWRbaiAtICR7ZGlzdGFuY2UgLSBpeH1dYCk7XG4gICAgaXRlbUFzc2lnbm1lbnRzLnB1c2goKGB1bnByb2plY3RlZFtqKyR7aXh9XSA9IGl0ZW0ke2l4fWApKTtcbiAgfVxuICByZXR1cm4gYGZvciAodmFyIGkgPSAwLCBsZW4gPSB1bnByb2plY3RlZC5sZW5ndGg7IGkgPCBsZW47IGkgKz0gJHtkaXN0YW5jZX0pIHtcbiAgICAgIHZhciBqID0gaSwgJHtpdGVtcy5qb2luKFwiLCBcIil9O1xuICAgICAgZm9yKDsgaiA+ICR7ZGlzdGFuY2UgLSAxfSAmJiAoJHtjb25kaXRpb25zLmpvaW4oXCIgfHwgXCIpfSk7IGogLT0gJHtkaXN0YW5jZX0pIHtcbiAgICAgICAgJHtyZXBvc2l0aW9uZWQuam9pbihcIjtcXG5cIil9XG4gICAgICB9XG4gICAgICAke2l0ZW1Bc3NpZ25tZW50cy5qb2luKFwiO1xcblwiKX1cbiAgfWA7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlQ29sbGVjdG9yKGtleXMpIHtcbiAgbGV0IGNvZGUgPSBgdmFyIHJ1bnRpbWUgPSB0aGlzO1xcbmA7XG4gIGxldCBpeCA9IDA7XG4gIGxldCBjaGVja3MgPSBcIlwiO1xuICBsZXQgcmVtb3ZlcyA9IFwidmFyIGN1ciA9IGluZGV4XCI7XG4gIGZvcihsZXQga2V5IG9mIGtleXMpIHtcbiAgICBpZihrZXkuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG4gICAgICByZW1vdmVzICs9IGBbcmVtb3ZlWycke2tleVswXX0nXVsnJHtrZXlbMV19J11dYDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlcyArPSBgW3JlbW92ZVsnJHtrZXl9J11dYDtcbiAgICB9XG4gIH1cbiAgcmVtb3ZlcyArPSBcIjtcXG5ydW50aW1lLnJlbW92ZUZhY3QoY3VyLCByZW1vdmUpO1wiO1xuICBmb3IobGV0IGtleSBvZiBrZXlzKSB7XG4gICAgaXgrKztcbiAgICBpZihrZXkuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG4gICAgICBjaGVja3MgKz0gYHZhbHVlID0gYWRkWycke2tleVswXX0nXVsnJHtrZXlbMV19J11cXG5gO1xuICAgIH0gZWxzZSB7XG4gICAgICBjaGVja3MgKz0gYHZhbHVlID0gYWRkWycke2tleX0nXVxcbmA7XG4gICAgfVxuICAgIGxldCBwYXRoID0gYGN1cnNvclt2YWx1ZV1gO1xuICAgIGNoZWNrcyArPSBgaWYoISR7cGF0aH0pICR7cGF0aH0gPSBgO1xuICAgIGlmKGl4ID09PSBrZXlzLmxlbmd0aCkge1xuICAgICAgY2hlY2tzICs9IFwiW11cXG5cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgY2hlY2tzICs9IFwie31cXG5cIjtcbiAgICB9XG4gICAgY2hlY2tzICs9IGBjdXJzb3IgPSAke3BhdGh9XFxuYDtcbiAgfVxuICBjb2RlICs9IGBcbmZvcih2YXIgaXggPSAwLCBsZW4gPSByZW1vdmVzLmxlbmd0aDsgaXggPCBsZW47IGl4KyspIHtcbnZhciByZW1vdmUgPSByZW1vdmVzW2l4XTtcbiR7cmVtb3Zlc31cbn1cbmZvcih2YXIgaXggPSAwLCBsZW4gPSBhZGRzLmxlbmd0aDsgaXggPCBsZW47IGl4KyspIHtcbnZhciBhZGQgPSBhZGRzW2l4XTtcbnZhciBjdXJzb3IgPSBpbmRleDtcbnZhciB2YWx1ZTtcbiR7Y2hlY2tzfSAgY3Vyc29yLnB1c2goYWRkKTtcbn1cbnJldHVybiBpbmRleDtgXG4gIHJldHVybiAobmV3IEZ1bmN0aW9uKFwiaW5kZXhcIiwgXCJhZGRzXCIsIFwicmVtb3Zlc1wiLCBjb2RlKSkuYmluZChydW50aW1lKTtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVDb2xsZWN0b3IyKGtleXMpIHtcbiAgbGV0IGhhc2hQYXJ0cyA9IFtdO1xuICBmb3IobGV0IGtleSBvZiBrZXlzKSB7XG4gICAgaWYoa2V5LmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuICAgICAgaGFzaFBhcnRzLnB1c2goYGFkZFsnJHtrZXlbMF19J11bJyR7a2V5WzFdfSddYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhhc2hQYXJ0cy5wdXNoKGBhZGRbJyR7a2V5fSddYCk7XG4gICAgfVxuICB9XG4gIGxldCBjb2RlID0gYFxuICAgIHZhciBpeENhY2hlID0gY2FjaGUuaXg7XG4gICAgdmFyIGlkQ2FjaGUgPSBjYWNoZS5pZDtcbiAgICBmb3IodmFyIGl4ID0gMCwgbGVuID0gcmVtb3Zlcy5sZW5ndGg7IGl4IDwgbGVuOyBpeCsrKSB7XG4gICAgICB2YXIgcmVtb3ZlID0gcmVtb3Zlc1tpeF07XG4gICAgICB2YXIgaWQgPSByZW1vdmUuX19pZDtcbiAgICAgIHZhciBrZXkgPSBpZENhY2hlW2lkXTtcbiAgICAgIHZhciBmYWN0SXggPSBpeENhY2hlW2lkXTtcbiAgICAgIHZhciBmYWN0cyA9IGluZGV4W2tleV07XG4gICAgICAvL3N3YXAgdGhlIGxhc3QgZmFjdCB3aXRoIHRoaXMgb25lIHRvIHByZXZlbnQgaG9sZXNcbiAgICAgIHZhciBsYXN0RmFjdCA9IGZhY3RzLnBvcCgpO1xuICAgICAgaWYobGFzdEZhY3QgJiYgbGFzdEZhY3QuX19pZCAhPT0gcmVtb3ZlLl9faWQpIHtcbiAgICAgICAgZmFjdHNbZmFjdEl4XSA9IGxhc3RGYWN0O1xuICAgICAgICBpeENhY2hlW2xhc3RGYWN0Ll9faWRdID0gZmFjdEl4O1xuICAgICAgfSBlbHNlIGlmKGZhY3RzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWxldGUgaW5kZXhba2V5XTtcbiAgICAgIH1cbiAgICAgIGRlbGV0ZSBpZENhY2hlW2lkXTtcbiAgICAgIGRlbGV0ZSBpeENhY2hlW2lkXTtcbiAgICB9XG4gICAgZm9yKHZhciBpeCA9IDAsIGxlbiA9IGFkZHMubGVuZ3RoOyBpeCA8IGxlbjsgaXgrKykge1xuICAgICAgdmFyIGFkZCA9IGFkZHNbaXhdO1xuICAgICAgdmFyIGlkID0gYWRkLl9faWQ7XG4gICAgICB2YXIga2V5ID0gaWRDYWNoZVtpZF0gPSAke2hhc2hQYXJ0cy5qb2luKFwiICsgJ3wnICsgXCIpfTtcbiAgICAgIGlmKGluZGV4W2tleV0gPT09IHVuZGVmaW5lZCkgaW5kZXhba2V5XSA9IFtdO1xuICAgICAgdmFyIGFyciA9IGluZGV4W2tleV07XG4gICAgICBpeENhY2hlW2lkXSA9IGFyci5sZW5ndGg7XG4gICAgICBhcnIucHVzaChhZGQpO1xuICAgIH1cbiAgICByZXR1cm4gaW5kZXg7YDtcbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwiaW5kZXhcIiwgXCJhZGRzXCIsIFwicmVtb3Zlc1wiLCBcImNhY2hlXCIsIGNvZGUpO1xufVxuXG5mdW5jdGlvbiBtZXJnZUFycmF5cyhhcywgYnMpIHtcbiAgbGV0IGl4ID0gYXMubGVuZ3RoO1xuICBsZXQgc3RhcnQgPSBpeDtcbiAgZm9yKGxldCBiIG9mIGJzKSB7XG4gICAgYXNbaXhdID0gYnNbaXggLSBzdGFydF07XG4gICAgaXgrKztcbiAgfVxuICByZXR1cm4gYXM7XG59XG5cbmV4cG9ydCBjbGFzcyBEaWZmIHtcbiAgdGFibGVzO1xuICBsZW5ndGg7XG4gIGl4ZXI7XG4gIG1ldGE7XG4gIGNvbnN0cnVjdG9yKGl4ZXIpIHtcbiAgICB0aGlzLml4ZXIgPSBpeGVyO1xuICAgIHRoaXMudGFibGVzID0ge307XG4gICAgdGhpcy5sZW5ndGggPSAwO1xuICAgIHRoaXMubWV0YSA9IHt9O1xuICB9XG4gIGVuc3VyZVRhYmxlKHRhYmxlKSB7XG4gICAgbGV0IHRhYmxlRGlmZiA9IHRoaXMudGFibGVzW3RhYmxlXTtcbiAgICBpZighdGFibGVEaWZmKSB7XG4gICAgICB0YWJsZURpZmYgPSB0aGlzLnRhYmxlc1t0YWJsZV0gPSB7YWRkczogW10sIHJlbW92ZXM6IFtdfTtcbiAgICB9XG4gICAgcmV0dXJuIHRhYmxlRGlmZjtcbiAgfVxuICBhZGQodGFibGUsIG9iaikge1xuICAgIGxldCB0YWJsZURpZmYgPSB0aGlzLmVuc3VyZVRhYmxlKHRhYmxlKTtcbiAgICB0aGlzLmxlbmd0aCsrO1xuICAgIHRhYmxlRGlmZi5hZGRzLnB1c2gob2JqKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBhZGRNYW55KHRhYmxlLCBvYmpzKSB7XG4gICAgbGV0IHRhYmxlRGlmZiA9IHRoaXMuZW5zdXJlVGFibGUodGFibGUpO1xuICAgIHRoaXMubGVuZ3RoICs9IG9ianMubGVuZ3RoO1xuICAgIG1lcmdlQXJyYXlzKHRhYmxlRGlmZi5hZGRzLCBvYmpzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICByZW1vdmVGYWN0cyh0YWJsZSwgb2Jqcykge1xuICAgIGxldCB0YWJsZURpZmYgPSB0aGlzLmVuc3VyZVRhYmxlKHRhYmxlKTtcbiAgICB0aGlzLmxlbmd0aCArPSBvYmpzLmxlbmd0aDtcbiAgICBtZXJnZUFycmF5cyh0YWJsZURpZmYucmVtb3Zlcywgb2Jqcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcmVtb3ZlKHRhYmxlLCBxdWVyeT8pIHtcbiAgICBsZXQgdGFibGVEaWZmID0gdGhpcy5lbnN1cmVUYWJsZSh0YWJsZSk7XG4gICAgbGV0IGZvdW5kID0gdGhpcy5peGVyLmZpbmQodGFibGUsIHF1ZXJ5KTtcbiAgICB0aGlzLmxlbmd0aCArPSBmb3VuZC5sZW5ndGg7XG4gICAgbWVyZ2VBcnJheXModGFibGVEaWZmLnJlbW92ZXMsIGZvdW5kKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBtZXJnZShkaWZmKSB7XG4gICAgZm9yKGxldCB0YWJsZSBpbiBkaWZmLnRhYmxlcykge1xuICAgICAgbGV0IHRhYmxlRGlmZiA9IGRpZmYudGFibGVzW3RhYmxlXTtcbiAgICAgIHRoaXMuYWRkTWFueSh0YWJsZSwgdGFibGVEaWZmLmFkZHMpO1xuICAgICAgdGhpcy5yZW1vdmVGYWN0cyh0YWJsZSwgdGFibGVEaWZmLnJlbW92ZXMpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICByZXZlcnNlKCkge1xuICAgIGxldCByZXZlcnNlZCA9IG5ldyBEaWZmKHRoaXMuaXhlcik7XG4gICAgZm9yKGxldCB0YWJsZSBpbiB0aGlzLnRhYmxlcykge1xuICAgICAgbGV0IGRpZmYgPSB0aGlzLnRhYmxlc1t0YWJsZV07XG4gICAgICByZXZlcnNlZC5hZGRNYW55KHRhYmxlLCBkaWZmLnJlbW92ZXMpO1xuICAgICAgcmV2ZXJzZWQucmVtb3ZlRmFjdHModGFibGUsIGRpZmYuYWRkcyk7XG4gICAgfVxuICAgIHJldHVybiByZXZlcnNlZDtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgSW5kZXhlciB7XG4gIHRhYmxlcztcbiAgZ2xvYmFsQ291bnQ7XG4gIGVkYlRhYmxlcztcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy50YWJsZXMgPSB7fTtcbiAgICB0aGlzLmdsb2JhbENvdW50ID0gMDtcbiAgICB0aGlzLmVkYlRhYmxlcyA9IHt9O1xuICB9XG4gIGFkZFRhYmxlKG5hbWUsIGtleXMgPSBbXSkge1xuICAgIGxldCB0YWJsZSA9IHRoaXMudGFibGVzW25hbWVdO1xuICAgIGtleXMgPSBrZXlzLmZpbHRlcigoa2V5KSA9PiBrZXkgIT09IFwiX19pZFwiKTtcbiAgICBpZih0YWJsZSAmJiBrZXlzLmxlbmd0aCkge1xuICAgICAgdGFibGUuZmllbGRzID0ga2V5cztcbiAgICAgIHRhYmxlLnN0cmluZ2lmeSA9IGdlbmVyYXRlU3RyaW5nRm4oa2V5cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhYmxlID0gdGhpcy50YWJsZXNbbmFtZV0gPSB7dGFibGU6IFtdLCBoYXNoVG9JeDoge30sIGZhY3RIYXNoOiB7fSwgaW5kZXhlczoge30sIHRyaWdnZXJzOiB7fSwgZmllbGRzOiBrZXlzLCBzdHJpbmdpZnk6IGdlbmVyYXRlU3RyaW5nRm4oa2V5cyksIGtleUxvb2t1cDoge319O1xuICAgICAgdGhpcy5lZGJUYWJsZXNbbmFtZV0gPSB0cnVlO1xuICAgIH1cbiAgICBmb3IobGV0IGtleSBvZiBrZXlzKSB7XG4gICAgICBpZihrZXkuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG4gICAgICAgIHRhYmxlLmtleUxvb2t1cFtrZXlbMF1dID0ga2V5O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFibGUua2V5TG9va3VwW2tleV0gPSBrZXk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0YWJsZTtcbiAgfVxuICBjbGVhclRhYmxlKG5hbWUpIHtcbiAgICBsZXQgdGFibGUgPSB0aGlzLnRhYmxlc1tuYW1lXTtcbiAgICBpZighdGFibGUpIHJldHVybjtcblxuICAgIHRhYmxlLnRhYmxlID0gW107XG4gICAgdGFibGUuZmFjdEhhc2ggPSB7fTtcbiAgICBmb3IobGV0IGluZGV4TmFtZSBpbiB0YWJsZS5pbmRleGVzKSB7XG4gICAgICB0YWJsZS5pbmRleGVzW2luZGV4TmFtZV0uaW5kZXggPSB7fTtcbiAgICAgIHRhYmxlLmluZGV4ZXNbaW5kZXhOYW1lXS5jYWNoZSA9IHtpZDoge30sIGl4OiB7fX07XG4gICAgfVxuICB9XG4gIHVwZGF0ZVRhYmxlKHRhYmxlSWQsIGFkZHMsIHJlbW92ZXMpIHtcbiAgICBsZXQgdGFibGUgPSB0aGlzLnRhYmxlc1t0YWJsZUlkXTtcbiAgICBpZighdGFibGUgfHwgIXRhYmxlLmZpZWxkcy5sZW5ndGgpIHtcbiAgICAgIGxldCBleGFtcGxlID0gYWRkc1swXSB8fCByZW1vdmVzWzBdO1xuICAgICAgdGFibGUgPSB0aGlzLmFkZFRhYmxlKHRhYmxlSWQsIE9iamVjdC5rZXlzKGV4YW1wbGUpKTtcbiAgICB9XG4gICAgbGV0IHN0cmluZ2lmeSA9IHRhYmxlLnN0cmluZ2lmeTtcbiAgICBsZXQgZmFjdHMgPSB0YWJsZS50YWJsZTtcbiAgICBsZXQgZmFjdEhhc2ggPSB0YWJsZS5mYWN0SGFzaDtcbiAgICBsZXQgaGFzaFRvSXggPSB0YWJsZS5oYXNoVG9JeDtcbiAgICBsZXQgbG9jYWxIYXNoID0ge307XG4gICAgbGV0IGhhc2hUb0ZhY3QgPSB7fTtcbiAgICBsZXQgaGFzaGVzID0gW107XG4gICAgZm9yKGxldCBhZGQgb2YgYWRkcykge1xuICAgICAgbGV0IGhhc2ggPSBhZGQuX19pZCB8fCBzdHJpbmdpZnkoYWRkKTtcbiAgICAgIGlmKGxvY2FsSGFzaFtoYXNoXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGxvY2FsSGFzaFtoYXNoXSA9IDE7XG4gICAgICAgIGhhc2hUb0ZhY3RbaGFzaF0gPSBhZGQ7XG4gICAgICAgIGhhc2hlcy5wdXNoKGhhc2gpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9jYWxIYXNoW2hhc2hdKys7XG4gICAgICB9XG4gICAgICBhZGQuX19pZCA9IGhhc2g7XG4gICAgfVxuICAgIGZvcihsZXQgcmVtb3ZlIG9mIHJlbW92ZXMpIHtcbiAgICAgIGxldCBoYXNoID0gcmVtb3ZlLl9faWQgfHwgc3RyaW5naWZ5KHJlbW92ZSk7XG4gICAgICBpZihsb2NhbEhhc2hbaGFzaF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBsb2NhbEhhc2hbaGFzaF0gPSAtMTtcbiAgICAgICAgaGFzaFRvRmFjdFtoYXNoXSA9IHJlbW92ZTtcbiAgICAgICAgaGFzaGVzLnB1c2goaGFzaCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2NhbEhhc2hbaGFzaF0tLTtcbiAgICAgIH1cbiAgICAgIHJlbW92ZS5fX2lkID0gaGFzaDtcbiAgICB9XG4gICAgbGV0IHJlYWxBZGRzID0gW107XG4gICAgbGV0IHJlYWxSZW1vdmVzID0gW107XG4gICAgZm9yKGxldCBoYXNoIG9mIGhhc2hlcykge1xuICAgICAgbGV0IGNvdW50ID0gbG9jYWxIYXNoW2hhc2hdO1xuICAgICAgaWYoY291bnQgPiAwICYmICFmYWN0SGFzaFtoYXNoXSkge1xuICAgICAgICBsZXQgZmFjdCA9IGhhc2hUb0ZhY3RbaGFzaF07XG4gICAgICAgIHJlYWxBZGRzLnB1c2goZmFjdCk7XG4gICAgICAgIGZhY3RzLnB1c2goZmFjdCk7XG4gICAgICAgIGZhY3RIYXNoW2hhc2hdID0gZmFjdDtcbiAgICAgICAgaGFzaFRvSXhbaGFzaF0gPSBmYWN0cy5sZW5ndGggLSAxO1xuICAgICAgfSBlbHNlIGlmKGNvdW50IDwgMCAmJiBmYWN0SGFzaFtoYXNoXSkge1xuICAgICAgICBsZXQgZmFjdCA9IGhhc2hUb0ZhY3RbaGFzaF07XG4gICAgICAgIGxldCBpeCA9IGhhc2hUb0l4W2hhc2hdO1xuICAgICAgICAvL3N3YXAgdGhlIGxhc3QgZmFjdCB3aXRoIHRoaXMgb25lIHRvIHByZXZlbnQgaG9sZXNcbiAgICAgICAgbGV0IGxhc3RGYWN0ID0gZmFjdHMucG9wKCk7XG4gICAgICAgIGlmKGxhc3RGYWN0ICYmIGxhc3RGYWN0Ll9faWQgIT09IGZhY3QuX19pZCkge1xuICAgICAgICAgIGZhY3RzW2l4XSA9IGxhc3RGYWN0O1xuICAgICAgICAgIGhhc2hUb0l4W2xhc3RGYWN0Ll9faWRdID0gaXg7XG4gICAgICAgIH1cbiAgICAgICAgcmVhbFJlbW92ZXMucHVzaChmYWN0KTtcbiAgICAgICAgZGVsZXRlIGZhY3RIYXNoW2hhc2hdO1xuICAgICAgICBkZWxldGUgaGFzaFRvSXhbaGFzaF07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7YWRkczpyZWFsQWRkcywgcmVtb3ZlczpyZWFsUmVtb3Zlc307XG4gIH1cblxuICBjb2xsZWN0b3Ioa2V5cykge1xuICAgIHJldHVybiB7XG4gICAgICBpbmRleDoge30sXG4gICAgICBjYWNoZToge2lkOiB7fSwgaXg6IHt9fSxcbiAgICAgIGhhc2hlcjogZ2VuZXJhdGVTdHJpbmdGbihrZXlzKSxcbiAgICAgIGNvbGxlY3Q6IGdlbmVyYXRlQ29sbGVjdG9yMihrZXlzKSxcbiAgICB9XG4gIH1cbiAgZmFjdFRvSW5kZXgodGFibGUsIGZhY3QpIHtcbiAgICBsZXQga2V5cyA9IE9iamVjdC5rZXlzKGZhY3QpO1xuICAgIGlmKCFrZXlzLmxlbmd0aCkgcmV0dXJuIHRhYmxlLnRhYmxlLnNsaWNlKCk7XG4gICAgbGV0IGluZGV4ID0gdGhpcy5pbmRleCh0YWJsZSwga2V5cyk7XG4gICAgbGV0IHJlc3VsdCA9IGluZGV4LmluZGV4W2luZGV4Lmhhc2hlcihmYWN0KV07XG4gICAgaWYocmVzdWx0KSB7XG4gICAgICByZXR1cm4gcmVzdWx0LnNsaWNlKCk7XG4gICAgfVxuICAgIHJldHVybiBbXTtcbiAgfVxuICBleGVjRGlmZihkaWZmOiBEaWZmKToge3RyaWdnZXJzOiBhbnksIHJlYWxEaWZmczogYW55fSB7XG4gICAgbGV0IHRyaWdnZXJzID0ge307XG4gICAgbGV0IHJlYWxEaWZmcyA9IHt9O1xuICAgIGxldCB0YWJsZUlkcyA9IE9iamVjdC5rZXlzKGRpZmYudGFibGVzKTtcbiAgICBmb3IobGV0IHRhYmxlSWQgb2YgdGFibGVJZHMpIHtcbiAgICAgIGxldCB0YWJsZURpZmYgPSBkaWZmLnRhYmxlc1t0YWJsZUlkXTtcbiAgICAgIGlmKHRhYmxlRGlmZi5hZGRzLmxlbmd0aCA9PT0gMCAmJiB0YWJsZURpZmYucmVtb3Zlcy5sZW5ndGggPT09IDApIGNvbnRpbnVlO1xuICAgICAgbGV0IHJlYWxEaWZmID0gdGhpcy51cGRhdGVUYWJsZSh0YWJsZUlkLCB0YWJsZURpZmYuYWRkcywgdGFibGVEaWZmLnJlbW92ZXMpO1xuICAgICAgLy8gZ28gdGhyb3VnaCBhbGwgdGhlIGluZGV4ZXMgYW5kIHVwZGF0ZSB0aGVtLlxuICAgICAgbGV0IHRhYmxlID0gdGhpcy50YWJsZXNbdGFibGVJZF07XG4gICAgICBsZXQgaW5kZXhlcyA9IE9iamVjdC5rZXlzKHRhYmxlLmluZGV4ZXMpO1xuICAgICAgZm9yKGxldCBpbmRleE5hbWUgb2YgaW5kZXhlcykge1xuICAgICAgICBsZXQgaW5kZXggPSB0YWJsZS5pbmRleGVzW2luZGV4TmFtZV07XG4gICAgICAgIGluZGV4LmNvbGxlY3QoaW5kZXguaW5kZXgsIHJlYWxEaWZmLmFkZHMsIHJlYWxEaWZmLnJlbW92ZXMsIGluZGV4LmNhY2hlKTtcbiAgICAgIH1cbiAgICAgIGxldCBjdXJUcmlnZ2VycyA9IE9iamVjdC5rZXlzKHRhYmxlLnRyaWdnZXJzKTtcbiAgICAgIGZvcihsZXQgdHJpZ2dlck5hbWUgb2YgY3VyVHJpZ2dlcnMpIHtcbiAgICAgICAgbGV0IHRyaWdnZXIgPSB0YWJsZS50cmlnZ2Vyc1t0cmlnZ2VyTmFtZV07XG4gICAgICAgIHRyaWdnZXJzW3RyaWdnZXJOYW1lXSA9IHRyaWdnZXI7XG4gICAgICB9XG4gICAgICByZWFsRGlmZnNbdGFibGVJZF0gPSByZWFsRGlmZjtcbiAgICB9XG4gICAgcmV0dXJuIHt0cmlnZ2VycywgcmVhbERpZmZzfTtcbiAgfVxuICBleGVjVHJpZ2dlcih0cmlnZ2VyKSB7XG4gICAgbGV0IHRhYmxlID0gdGhpcy50YWJsZSh0cmlnZ2VyLm5hbWUpXG4gICAgLy8gc2luY2Ugdmlld3MgbWlnaHQgYmUgY2hhbmdlZCBkdXJpbmcgdGhlIHRyaWdnZXJpbmcgcHJvY2Vzcywgd2Ugd2FudCB0byBmYXZvclxuICAgIC8vIGp1c3QgdXNpbmcgdGhlIHZpZXcgaXRzZWxmIGFzIHRoZSB0cmlnZ2VyIGlmIGl0IGlzIG9uZS4gT3RoZXJ3aXNlLCB3ZSB1c2UgdGhlXG4gICAgLy8gdHJpZ2dlcidzIGV4ZWMgZnVuY3Rpb24uIFRoaXMgZW5zdXJlcyB0aGF0IGlmIGEgdmlldyBpcyByZWNvbXBpbGVkIGFuZCBhZGRlZFxuICAgIC8vIHRoYXQgYW55IGFscmVhZHkgcXVldWVkIHRyaWdnZXJzIHdpbGwgdXNlIHRoZSB1cGRhdGVkIHZlcnNpb24gb2YgdGhlIHZpZXcgaW5zdGVhZFxuICAgIC8vIG9mIHRoZSBvbGQgcXVldWVkIG9uZS5cbiAgICBsZXQge3Jlc3VsdHMgPSB1bmRlZmluZWQsIHVucHJvamVjdGVkID0gdW5kZWZpbmVkfSA9ICh0YWJsZS52aWV3ID8gdGFibGUudmlldy5leGVjKCkgOiB0cmlnZ2VyLmV4ZWModGhpcykpIHx8IHt9O1xuICAgIGlmKCFyZXN1bHRzKSByZXR1cm47XG4gICAgbGV0IHByZXZSZXN1bHRzID0gdGFibGUuZmFjdEhhc2g7XG4gICAgbGV0IHByZXZIYXNoZXMgPSBPYmplY3Qua2V5cyhwcmV2UmVzdWx0cyk7XG4gICAgdGFibGUudW5wcm9qZWN0ZWQgPSB1bnByb2plY3RlZDtcbiAgICBpZihyZXN1bHRzKSB7XG4gICAgICBsZXQgZGlmZiA9IG5ldyBEaWZmKHRoaXMpO1xuICAgICAgdGhpcy5jbGVhclRhYmxlKHRyaWdnZXIubmFtZSk7XG4gICAgICBkaWZmLmFkZE1hbnkodHJpZ2dlci5uYW1lLCByZXN1bHRzKTtcbiAgICAgIGxldCB7dHJpZ2dlcnN9ID0gdGhpcy5leGVjRGlmZihkaWZmKTtcbiAgICAgIGxldCBuZXdIYXNoZXMgPSB0YWJsZS5mYWN0SGFzaDtcbiAgICAgIGlmKHByZXZIYXNoZXMubGVuZ3RoID09PSBPYmplY3Qua2V5cyhuZXdIYXNoZXMpLmxlbmd0aCkge1xuICAgICAgICBsZXQgc2FtZSA9IHRydWU7XG4gICAgICAgIGZvcihsZXQgaGFzaCBvZiBwcmV2SGFzaGVzKSB7XG4gICAgICAgICAgaWYoIW5ld0hhc2hlc1toYXNoXSkge1xuICAgICAgICAgICAgc2FtZSA9IGZhbHNlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzYW1lID8gdW5kZWZpbmVkIDogdHJpZ2dlcnM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJpZ2dlcnM7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICB0cmFuc2l0aXZlbHlDbGVhclRyaWdnZXJzKHN0YXJ0aW5nVHJpZ2dlcnMpIHtcbiAgICBsZXQgY2xlYXJlZCA9IHt9O1xuICAgIGxldCByZW1haW5pbmcgPSBPYmplY3Qua2V5cyhzdGFydGluZ1RyaWdnZXJzKTtcblxuICAgIGZvcihsZXQgaXggPSAwOyBpeCA8IHJlbWFpbmluZy5sZW5ndGg7IGl4KyspIHtcbiAgICAgIGxldCB0cmlnZ2VyID0gcmVtYWluaW5nW2l4XTtcbiAgICAgIGlmKGNsZWFyZWRbdHJpZ2dlcl0pIGNvbnRpbnVlO1xuICAgICAgdGhpcy5jbGVhclRhYmxlKHRyaWdnZXIpO1xuICAgICAgY2xlYXJlZFt0cmlnZ2VyXSA9IHRydWU7XG4gICAgICByZW1haW5pbmcucHVzaC5hcHBseShyZW1haW5pbmcsIE9iamVjdC5rZXlzKHRoaXMudGFibGUodHJpZ2dlcikudHJpZ2dlcnMpKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiQ0xFQVJFRDogXCIsIHRyaWdnZXIpO1xuICAgIH1cbiAgICByZXR1cm4gY2xlYXJlZDtcbiAgfVxuICBleGVjVHJpZ2dlcnModHJpZ2dlcnMpIHtcbiAgICBsZXQgbmV3VHJpZ2dlcnMgPSB7fTtcbiAgICBsZXQgcmV0cmlnZ2VyID0gZmFsc2U7XG4gICAgZm9yKGxldCB0cmlnZ2VyTmFtZSBpbiB0cmlnZ2Vycykge1xuICAgICAgLy8gY29uc29sZS5sb2coXCJDYWxsaW5nOlwiLCB0cmlnZ2VyTmFtZSk7XG4gICAgICBsZXQgdHJpZ2dlciA9IHRyaWdnZXJzW3RyaWdnZXJOYW1lXTtcbiAgICAgIGxldCBuZXh0Um91bmQgPSB0aGlzLmV4ZWNUcmlnZ2VyKHRyaWdnZXIpO1xuICAgICAgaWYobmV4dFJvdW5kKSB7XG4gICAgICAgIHJldHJpZ2dlciA9IHRydWU7XG4gICAgICAgIGZvcihsZXQgdHJpZ2dlciBpbiBuZXh0Um91bmQpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIlF1ZXVpbmc6XCIsIHRyaWdnZXIpO1xuICAgICAgICAgIG5ld1RyaWdnZXJzW3RyaWdnZXJdID0gbmV4dFJvdW5kW3RyaWdnZXJdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmKHJldHJpZ2dlcikge1xuICAgICAgcmV0dXJuIG5ld1RyaWdnZXJzO1xuICAgIH1cbiAgfVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyBJbmRleGVyIFB1YmxpYyBBUElcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgc2VyaWFsaXplKGFzT2JqZWN0Pykge1xuICAgIGxldCBkdW1wID0ge307XG4gICAgZm9yKGxldCB0YWJsZU5hbWUgaW4gdGhpcy50YWJsZXMpIHtcbiAgICAgIGxldCB0YWJsZSA9IHRoaXMudGFibGVzW3RhYmxlTmFtZV07XG4gICAgICBpZighdGFibGUuaXNWaWV3KSB7XG4gICAgICAgIGR1bXBbdGFibGVOYW1lXSA9IHRhYmxlLnRhYmxlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZihhc09iamVjdCkge1xuICAgICAgcmV0dXJuIGR1bXA7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkdW1wKTtcbiAgfVxuICBsb2FkKHNlcmlhbGl6ZWQpIHtcbiAgICBsZXQgZHVtcCA9IEpTT04ucGFyc2Uoc2VyaWFsaXplZCk7XG4gICAgbGV0IGRpZmYgPSB0aGlzLmRpZmYoKTtcbiAgICBmb3IobGV0IHRhYmxlTmFtZSBpbiBkdW1wKSB7XG4gICAgICBkaWZmLmFkZE1hbnkodGFibGVOYW1lLCBkdW1wW3RhYmxlTmFtZV0pO1xuICAgIH1cbiAgICBpZihJTkNSRU1FTlRBTCkge1xuICAgICAgdGhpcy5hcHBseURpZmZJbmNyZW1lbnRhbChkaWZmKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hcHBseURpZmYoZGlmZik7XG4gICAgfVxuICB9XG4gIGRpZmYoKSB7XG4gICAgcmV0dXJuIG5ldyBEaWZmKHRoaXMpO1xuICB9XG4gIGFwcGx5RGlmZihkaWZmOkRpZmYpIHtcbiAgICBpZihJTkNSRU1FTlRBTCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXBwbHlEaWZmSW5jcmVtZW50YWwoZGlmZik7XG4gICAgfVxuICAgIGxldCB7dHJpZ2dlcnMsIHJlYWxEaWZmc30gPSB0aGlzLmV4ZWNEaWZmKGRpZmYpO1xuICAgIGxldCBjbGVhcmVkO1xuICAgIGxldCByb3VuZCA9IDA7XG4gICAgaWYodHJpZ2dlcnMpIGNsZWFyZWQgPSB0aGlzLnRyYW5zaXRpdmVseUNsZWFyVHJpZ2dlcnModHJpZ2dlcnMpO1xuICAgIHdoaWxlKHRyaWdnZXJzKSB7XG4gICAgICBmb3IobGV0IHRyaWdnZXIgaW4gdHJpZ2dlcnMpIHtcbiAgICAgICAgY2xlYXJlZFt0cmlnZ2VyXSA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgLy8gY29uc29sZS5ncm91cChgUk9VTkQgJHtyb3VuZH1gKTtcbiAgICAgIHRyaWdnZXJzID0gdGhpcy5leGVjVHJpZ2dlcnModHJpZ2dlcnMpO1xuICAgICAgcm91bmQrKztcbiAgICAgIC8vIGNvbnNvbGUuZ3JvdXBFbmQoKTtcbiAgICB9XG4gICAgZm9yKGxldCB0cmlnZ2VyIG9mIE9iamVjdC5rZXlzKGNsZWFyZWQpKSB7XG4gICAgICBpZighY2xlYXJlZFt0cmlnZ2VyXSkgY29udGludWU7XG4gICAgICBsZXQgdmlldyA9IHRoaXMudGFibGUodHJpZ2dlcikudmlldztcbiAgICAgIGlmKHZpZXcpIHtcbiAgICAgICAgdGhpcy5leGVjVHJpZ2dlcih2aWV3KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgdGFibGUodGFibGVJZCkge1xuICAgIGxldCB0YWJsZSA9IHRoaXMudGFibGVzW3RhYmxlSWRdO1xuICAgIGlmKHRhYmxlKSByZXR1cm4gdGFibGU7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFibGUodGFibGVJZCk7XG4gIH1cbiAgaW5kZXgodGFibGVPcklkOnN0cmluZ3x7fSwga2V5czphbnlbXSkge1xuICAgIGxldCB0YWJsZTtcbiAgICBpZih0eXBlb2YgdGFibGVPcklkID09PSBcInN0cmluZ1wiKSB0YWJsZSA9IHRoaXMudGFibGUodGFibGVPcklkKTtcbiAgICBlbHNlIHRhYmxlID0gdGFibGVPcklkO1xuICAgIGtleXMuc29ydCgpO1xuICAgIGxldCBpbmRleE5hbWUgPSBrZXlzLmZpbHRlcigoa2V5KSA9PiBrZXkgIT09IFwiX19pZFwiKS5qb2luKFwifFwiKTtcbiAgICBsZXQgaW5kZXggPSB0YWJsZS5pbmRleGVzW2luZGV4TmFtZV07XG4gICAgaWYoIWluZGV4KSB7XG4gICAgICBsZXQgdGFibGVLZXlzID0gW107XG4gICAgICBmb3IobGV0IGtleSBvZiBrZXlzKSB7XG4gICAgICAgIHRhYmxlS2V5cy5wdXNoKHRhYmxlLmtleUxvb2t1cFtrZXldIHx8IGtleSk7XG4gICAgICB9XG4gICAgICBpbmRleCA9IHRhYmxlLmluZGV4ZXNbaW5kZXhOYW1lXSA9IHRoaXMuY29sbGVjdG9yKHRhYmxlS2V5cyk7XG4gICAgICBpbmRleC5jb2xsZWN0KGluZGV4LmluZGV4LCB0YWJsZS50YWJsZSwgW10sIGluZGV4LmNhY2hlKTtcbiAgICB9XG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG4gIGZpbmQodGFibGVJZCwgcXVlcnk/KSB7XG4gICAgbGV0IHRhYmxlID0gdGhpcy50YWJsZXNbdGFibGVJZF07XG4gICAgaWYoIXRhYmxlKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfSBlbHNlIGlmKCFxdWVyeSkge1xuICAgICAgcmV0dXJuIHRhYmxlLnRhYmxlLnNsaWNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmZhY3RUb0luZGV4KHRhYmxlLCBxdWVyeSk7XG4gICAgfVxuICB9XG4gIGZpbmRPbmUodGFibGVJZCwgcXVlcnk/KSB7XG4gICAgcmV0dXJuIHRoaXMuZmluZCh0YWJsZUlkLCBxdWVyeSlbMF07XG4gIH1cbiAgcXVlcnkobmFtZSA9IFwidW5rbm93blwiKSB7XG4gICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLCBuYW1lKTtcbiAgfVxuICB1bmlvbihuYW1lKSB7XG4gICAgcmV0dXJuIG5ldyBVbmlvbih0aGlzLCBuYW1lKTtcbiAgfVxuICB0cmlnZ2VyKG5hbWU6c3RyaW5nLCB0YWJsZTpzdHJpbmd8c3RyaW5nW10sIGV4ZWM6KGl4ZXI6SW5kZXhlcikgPT4gdm9pZCwgZXhlY0luY3JlbWVudGFsPzooY2hhbmdlczphbnkpID0+IGFueSkge1xuICAgIGxldCB0YWJsZXMgPSAodHlwZW9mIHRhYmxlID09PSBcInN0cmluZ1wiKSA/IFt0YWJsZV0gOiB0YWJsZTtcbiAgICBsZXQgdHJpZ2dlciA9IHtuYW1lLCB0YWJsZXMsIGV4ZWMsIGV4ZWNJbmNyZW1lbnRhbH07XG4gICAgZm9yKGxldCB0YWJsZUlkIG9mIHRhYmxlcykge1xuICAgICAgbGV0IHRhYmxlID0gdGhpcy50YWJsZSh0YWJsZUlkKTtcbiAgICAgIHRhYmxlLnRyaWdnZXJzW25hbWVdID0gdHJpZ2dlcjtcbiAgICB9XG4gICAgaWYoIUlOQ1JFTUVOVEFMKSB7XG4gICAgICBsZXQgbmV4dFJvdW5kID0gdGhpcy5leGVjVHJpZ2dlcih0cmlnZ2VyKTtcbiAgICAgIHdoaWxlKG5leHRSb3VuZCkge1xuICAgICAgICBuZXh0Um91bmQgPSB0aGlzLmV4ZWNUcmlnZ2VycyhuZXh0Um91bmQpO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYoIXRhYmxlcy5sZW5ndGgpIHsgcmV0dXJuIGV4ZWModGhpcyk7IH1cbiAgICAgIGxldCBpbml0aWFsID0ge1t0YWJsZXNbMF1dOiB7YWRkczogdGhpcy50YWJsZXNbdGFibGVzWzBdXS50YWJsZSwgcmVtb3ZlczogW119fTtcbiAgICAgIGxldCB7dHJpZ2dlcnMsIGNoYW5nZXN9ID0gdGhpcy5leGVjVHJpZ2dlckluY3JlbWVudGFsKHRyaWdnZXIsIGluaXRpYWwpO1xuICAgICAgd2hpbGUodHJpZ2dlcnMpIHtcbiAgICAgICAgbGV0IHJlc3VsdHMgPSB0aGlzLmV4ZWNUcmlnZ2Vyc0luY3JlbWVudGFsKHRyaWdnZXJzLCBjaGFuZ2VzKTtcbiAgICAgICAgaWYoIXJlc3VsdHMpIGJyZWFrXG4gICAgICAgIHRyaWdnZXJzID0gcmVzdWx0cy50cmlnZ2VycztcbiAgICAgICAgY2hhbmdlcyA9IHJlc3VsdHMuY2hhbmdlcztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc1ZpZXcocXVlcnk6UXVlcnl8VW5pb24pIHtcbiAgICBsZXQgbmFtZSA9IHF1ZXJ5Lm5hbWU7XG4gICAgaWYodGhpcy50YWJsZXNbbmFtZV0pIHtcbiAgICAgIHRoaXMucmVtb3ZlVmlldyhuYW1lKTtcbiAgICB9XG4gICAgbGV0IHZpZXcgPSB0aGlzLnRhYmxlKG5hbWUpO1xuICAgIHRoaXMuZWRiVGFibGVzW25hbWVdID0gZmFsc2U7XG4gICAgdmlldy52aWV3ID0gcXVlcnk7XG4gICAgdmlldy5pc1ZpZXcgPSB0cnVlO1xuICAgIHRoaXMudHJpZ2dlcihuYW1lLCBxdWVyeS50YWJsZXMsIHF1ZXJ5LmV4ZWMuYmluZChxdWVyeSksIHF1ZXJ5LmV4ZWNJbmNyZW1lbnRhbC5iaW5kKHF1ZXJ5KSk7XG4gIH1cbiAgcmVtb3ZlVmlldyhpZDpzdHJpbmcpIHtcbiAgICBmb3IobGV0IHRhYmxlIG9mIHRoaXMudGFibGVzKSB7XG4gICAgICBkZWxldGUgdGFibGUudHJpZ2dlcnNbaWRdO1xuICAgIH1cbiAgfVxuICB0b3RhbEZhY3RzKCkge1xuICAgIGxldCB0b3RhbCA9IDA7XG4gICAgZm9yKGxldCB0YWJsZU5hbWUgaW4gdGhpcy50YWJsZXMpIHtcbiAgICAgIHRvdGFsICs9IHRoaXMudGFibGVzW3RhYmxlTmFtZV0udGFibGUubGVuZ3RoO1xuICAgIH1cbiAgICByZXR1cm4gdG90YWw7XG4gIH1cbiAgZmFjdHNQZXJUYWJsZSgpIHtcbiAgICBsZXQgaW5mbyA9IHt9O1xuICAgIGZvcihsZXQgdGFibGVOYW1lIGluIHRoaXMudGFibGVzKSB7XG4gICAgICBpbmZvW3RhYmxlTmFtZV0gPSB0aGlzLnRhYmxlc1t0YWJsZU5hbWVdLnRhYmxlLmxlbmd0aDtcbiAgICB9XG4gICAgcmV0dXJuIGluZm87XG4gIH1cblxuICBhcHBseURpZmZJbmNyZW1lbnRhbChkaWZmOkRpZmYpIHtcbiAgICBpZihkaWZmLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgIC8vIGNvbnNvbGUubG9nKFwiRElGRiBTSVpFOiBcIiwgZGlmZi5sZW5ndGgsIGRpZmYpO1xuXHRcdGxldCB7dHJpZ2dlcnMsIHJlYWxEaWZmc30gPSB0aGlzLmV4ZWNEaWZmKGRpZmYpO1xuXHRcdGxldCByb3VuZCA9IDA7XG4gICAgbGV0IGNoYW5nZXMgPSByZWFsRGlmZnM7XG5cdFx0d2hpbGUodHJpZ2dlcnMpIHtcblx0XHQgIC8vIGNvbnNvbGUuZ3JvdXAoYFJPVU5EICR7cm91bmR9YCk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcIkNIQU5HRVM6IFwiLCBjaGFuZ2VzKTtcblx0XHQgIGxldCByZXN1bHRzID0gdGhpcy5leGVjVHJpZ2dlcnNJbmNyZW1lbnRhbCh0cmlnZ2VycywgY2hhbmdlcyk7XG4gICAgICAvLyBjb25zb2xlLmdyb3VwRW5kKCk7XG4gICAgICBpZighcmVzdWx0cykgYnJlYWtcbiAgICAgIHRyaWdnZXJzID0gcmVzdWx0cy50cmlnZ2VycztcbiAgICAgIGNoYW5nZXMgPSByZXN1bHRzLmNoYW5nZXNcblx0XHQgIHJvdW5kKys7XG5cdFx0fVxuXHR9XG5cbiAgZXhlY1RyaWdnZXJJbmNyZW1lbnRhbCh0cmlnZ2VyLCBjaGFuZ2VzKTphbnkge1xuICAgIGxldCB0YWJsZSA9IHRoaXMudGFibGUodHJpZ2dlci5uYW1lKTtcbiAgICBsZXQgYWRkcywgcHJvdmVuYW5jZSwgcmVtb3ZlcywgaW5mbztcbiAgICBpZih0cmlnZ2VyLmV4ZWNJbmNyZW1lbnRhbCkge1xuICAgICAgaW5mbyA9IHRyaWdnZXIuZXhlY0luY3JlbWVudGFsKGNoYW5nZXMsIHRhYmxlKSB8fCB7fTtcbiAgICAgIGFkZHMgPSBpbmZvLmFkZHM7XG4gICAgICByZW1vdmVzID0gaW5mby5yZW1vdmVzO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cmlnZ2VyLmV4ZWMoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IGRpZmYgPSBuZXcgcnVudGltZS5EaWZmKHRoaXMpO1xuICAgIGlmKGFkZHMubGVuZ3RoKSB7XG4gICAgICBkaWZmLmFkZE1hbnkodHJpZ2dlci5uYW1lLCBhZGRzKTtcbiAgICB9XG4gICAgaWYocmVtb3Zlcy5sZW5ndGgpIHtcbiAgICAgIGRpZmYucmVtb3ZlRmFjdHModHJpZ2dlci5uYW1lLCByZW1vdmVzKTtcbiAgICB9XG4gICAgbGV0IHVwZGF0ZWQgPSB0aGlzLmV4ZWNEaWZmKGRpZmYpO1xuICAgIGxldCB7cmVhbERpZmZzfSA9IHVwZGF0ZWQ7XG4gICAgaWYocmVhbERpZmZzW3RyaWdnZXIubmFtZV0gJiYgKHJlYWxEaWZmc1t0cmlnZ2VyLm5hbWVdLmFkZHMubGVuZ3RoIHx8IHJlYWxEaWZmc1t0cmlnZ2VyLm5hbWVdLnJlbW92ZXMpKSB7XG4gICAgICByZXR1cm4ge2NoYW5nZXM6IHJlYWxEaWZmc1t0cmlnZ2VyLm5hbWVdLCB0cmlnZ2VyczogdXBkYXRlZC50cmlnZ2Vyc307XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gIH1cblxuICBleGVjVHJpZ2dlcnNJbmNyZW1lbnRhbCh0cmlnZ2VycywgY2hhbmdlcykge1xuICAgIGxldCBuZXdUcmlnZ2VycyA9IHt9O1xuICAgIGxldCBuZXh0Q2hhbmdlcyA9IHt9O1xuICAgIGxldCByZXRyaWdnZXIgPSBmYWxzZTtcbiAgICBsZXQgdHJpZ2dlcktleXMgPSBPYmplY3Qua2V5cyh0cmlnZ2Vycyk7XG4gICAgZm9yKGxldCB0cmlnZ2VyTmFtZSBvZiB0cmlnZ2VyS2V5cykge1xuICAgICAgLy8gY29uc29sZS5sb2coXCJDYWxsaW5nOlwiLCB0cmlnZ2VyTmFtZSk7XG4gICAgICBsZXQgdHJpZ2dlciA9IHRyaWdnZXJzW3RyaWdnZXJOYW1lXTtcbiAgICAgIGxldCBuZXh0Um91bmQgPSB0aGlzLmV4ZWNUcmlnZ2VySW5jcmVtZW50YWwodHJpZ2dlciwgY2hhbmdlcyk7XG4gICAgICBpZihuZXh0Um91bmQgJiYgbmV4dFJvdW5kLmNoYW5nZXMpIHtcbiAgICAgICAgbmV4dENoYW5nZXNbdHJpZ2dlck5hbWVdID0gbmV4dFJvdW5kLmNoYW5nZXM7XG4gICAgICAgIGlmKG5leHRSb3VuZC50cmlnZ2Vycykge1xuXG4gICAgICAgICAgbGV0IG5leHRSb3VuZEtleXMgPSBPYmplY3Qua2V5cyhuZXh0Um91bmQudHJpZ2dlcnMpO1xuICAgICAgICAgIGZvcihsZXQgdHJpZ2dlciBvZiBuZXh0Um91bmRLZXlzKSB7XG4gICAgICAgICAgICBpZih0cmlnZ2VyICYmIG5leHRSb3VuZC50cmlnZ2Vyc1t0cmlnZ2VyXSkge1xuICAgICAgICAgICAgICByZXRyaWdnZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIlF1ZXVpbmc6XCIsIHRyaWdnZXIpO1xuICAgICAgICAgICAgICBuZXdUcmlnZ2Vyc1t0cmlnZ2VyXSA9IG5leHRSb3VuZC50cmlnZ2Vyc1t0cmlnZ2VyXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYocmV0cmlnZ2VyKSB7XG4gICAgICByZXR1cm4ge2NoYW5nZXM6IG5leHRDaGFuZ2VzLCB0cmlnZ2VyczogbmV3VHJpZ2dlcnN9O1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkUHJvdmVuYW5jZVRhYmxlKGl4ZXIpIHtcbiAgbGV0IHRhYmxlID0gaXhlci5hZGRUYWJsZShcInByb3ZlbmFuY2VcIiwgW1widGFibGVcIiwgW1wicm93XCIsIFwiX19pZFwiXSwgXCJyb3cgaW5zdGFuY2VcIiwgXCJzb3VyY2VcIiwgW1wic291cmNlIHJvd1wiLCBcIl9faWRcIl1dKTtcbiAgLy8gZ2VuZXJhdGUgc29tZSBpbmRleGVzIHRoYXQgd2Uga25vdyB3ZSdyZSBnb2luZyB0byBuZWVkIHVwZnJvbnRcbiAgaXhlci5pbmRleChcInByb3ZlbmFuY2VcIiwgW1widGFibGVcIiwgXCJyb3dcIl0pO1xuICBpeGVyLmluZGV4KFwicHJvdmVuYW5jZVwiLCBbXCJ0YWJsZVwiLCBcInJvdyBpbnN0YW5jZVwiXSk7XG4gIGl4ZXIuaW5kZXgoXCJwcm92ZW5hbmNlXCIsIFtcInRhYmxlXCIsIFwic291cmNlXCIsIFwic291cmNlIHJvd1wiXSk7XG4gIGl4ZXIuaW5kZXgoXCJwcm92ZW5hbmNlXCIsIFtcInRhYmxlXCJdKTtcbiAgcmV0dXJuIGl4ZXI7XG59XG5cbmZ1bmN0aW9uIG1hcHBpbmdUb0RpZmYoZGlmZiwgYWN0aW9uLCBtYXBwaW5nLCBhbGlhc2VzLCByZXZlcnNlTG9va3VwKSB7XG4gIGZvcihsZXQgZnJvbSBpbiBtYXBwaW5nKSB7XG4gICAgbGV0IHRvID0gbWFwcGluZ1tmcm9tXTtcbiAgICBpZih0by5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgIGxldCBzb3VyY2UgPSB0b1swXTtcbiAgICAgIGlmKHR5cGVvZiBzb3VyY2UgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgc291cmNlID0gYWxpYXNlc1tyZXZlcnNlTG9va3VwW3NvdXJjZV1dO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291cmNlID0gYWxpYXNlc1tzb3VyY2VdO1xuICAgICAgfVxuICAgICAgZGlmZi5hZGQoXCJhY3Rpb24gbWFwcGluZ1wiLCB7YWN0aW9uLCBmcm9tLCBcInRvIHNvdXJjZVwiOiBzb3VyY2UsIFwidG8gZmllbGRcIjogdG9bMV19KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGlmZi5hZGQoXCJhY3Rpb24gbWFwcGluZyBjb25zdGFudFwiLCB7YWN0aW9uLCBmcm9tLCB2YWx1ZTogdG99KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRpZmY7XG59XG5cbmV4cG9ydCB2YXIgUXVlcnlGdW5jdGlvbnMgPSB7fVxudmFyIFNUUklQX0NPTU1FTlRTID0gLygoXFwvXFwvLiokKXwoXFwvXFwqW1xcc1xcU10qP1xcKlxcLykpL21nO1xudmFyIEFSR1VNRU5UX05BTUVTID0gLyhbXlxccyxdKykvZztcbmZ1bmN0aW9uIGdldFBhcmFtTmFtZXMoZnVuYykge1xuICB2YXIgZm5TdHIgPSBmdW5jLnRvU3RyaW5nKCkucmVwbGFjZShTVFJJUF9DT01NRU5UUywgJycpO1xuICB2YXIgcmVzdWx0ID0gZm5TdHIuc2xpY2UoZm5TdHIuaW5kZXhPZignKCcpKzEsIGZuU3RyLmluZGV4T2YoJyknKSkubWF0Y2goQVJHVU1FTlRfTkFNRVMpO1xuICBpZihyZXN1bHQgPT09IG51bGwpXG4gICAgcmVzdWx0ID0gW107XG4gIHJldHVybiByZXN1bHQ7XG59XG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lKG5hbWUsIG9wdHMsIGZ1bmMpIHtcbiAgbGV0IHBhcmFtcyA9IGdldFBhcmFtTmFtZXMoZnVuYyk7XG4gIG9wdHMubmFtZSA9IG5hbWU7XG4gIG9wdHMucGFyYW1zID0gcGFyYW1zO1xuICBvcHRzLmZ1bmMgPSBmdW5jO1xuICBRdWVyeUZ1bmN0aW9uc1tuYW1lXSA9IG9wdHM7XG59XG5cbmV4cG9ydCBjbGFzcyBRdWVyeSB7XG4gIHRhYmxlcztcbiAgam9pbnM7XG4gIGRpcnR5O1xuICBjb21waWxlZDtcbiAgaXhlcjtcbiAgYWxpYXNlcztcbiAgZnVuY3M7XG4gIG5hbWU7XG4gIHByb2plY3Rpb25NYXA7XG4gIGxpbWl0SW5mbztcbiAgZ3JvdXBzO1xuICBzb3J0cztcbiAgYWdncmVnYXRlcztcbiAgdW5wcm9qZWN0ZWRTaXplO1xuICBoYXNPcmRpbmFsO1xuICBpbmNyZW1lbnRhbFJvd0ZpbmRlcjtcblxuICBzdGF0aWMgcmVtb3ZlKHZpZXc6IHN0cmluZywgaXhlcjpJbmRleGVyKSB7XG4gICAgbGV0IGRpZmYgPSBpeGVyLmRpZmYoKTtcbiAgICBkaWZmLnJlbW92ZShcInZpZXdcIiwge3ZpZXd9KTtcbiAgICBmb3IobGV0IGFjdGlvbkl0ZW0gb2YgaXhlci5maW5kKFwiYWN0aW9uXCIsIHt2aWV3fSkpIHtcbiAgICAgIGxldCBhY3Rpb24gPSBhY3Rpb25JdGVtLmFjdGlvbjtcbiAgICAgIGRpZmYucmVtb3ZlKFwiYWN0aW9uXCIsIHthY3Rpb259KTtcbiAgICAgIGRpZmYucmVtb3ZlKFwiYWN0aW9uIHNvdXJjZVwiLCB7YWN0aW9ufSk7XG4gICAgICBkaWZmLnJlbW92ZShcImFjdGlvbiBtYXBwaW5nXCIsIHthY3Rpb259KTtcbiAgICAgIGRpZmYucmVtb3ZlKFwiYWN0aW9uIG1hcHBpbmcgY29uc3RhbnRcIiwge2FjdGlvbn0pO1xuICAgICAgZGlmZi5yZW1vdmUoXCJhY3Rpb24gbWFwcGluZyBzb3J0ZWRcIiwge2FjdGlvbn0pO1xuICAgICAgZGlmZi5yZW1vdmUoXCJhY3Rpb24gbWFwcGluZyBsaW1pdFwiLCB7YWN0aW9ufSk7XG4gICAgfVxuICAgIHJldHVybiBkaWZmO1xuICB9XG5cbiAgY29uc3RydWN0b3IoaXhlciwgbmFtZSA9IFwidW5rbm93blwiKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLml4ZXIgPSBpeGVyO1xuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICAgIHRoaXMudGFibGVzID0gW107XG4gICAgdGhpcy5qb2lucyA9IFtdO1xuICAgIHRoaXMuYWxpYXNlcyA9IHt9O1xuICAgIHRoaXMuZnVuY3MgPSBbXTtcbiAgICB0aGlzLmFnZ3JlZ2F0ZXMgPSBbXTtcbiAgICB0aGlzLnVucHJvamVjdGVkU2l6ZSA9IDA7XG4gICAgdGhpcy5oYXNPcmRpbmFsID0gZmFsc2U7XG4gIH1cbiAgY2hhbmdlc2V0KGl4ZXI6SW5kZXhlcikge1xuICAgIGxldCBkaWZmID0gaXhlci5kaWZmKCk7XG4gICAgbGV0IGFsaWFzZXMgPSB7fTtcbiAgICBsZXQgcmV2ZXJzZUxvb2t1cCA9IHt9O1xuICAgIGZvcihsZXQgYWxpYXMgaW4gdGhpcy5hbGlhc2VzKSB7XG4gICAgICByZXZlcnNlTG9va3VwW3RoaXMuYWxpYXNlc1thbGlhc11dID0gYWxpYXM7XG4gICAgfVxuICAgIGxldCB2aWV3ID0gdGhpcy5uYW1lO1xuICAgIGRpZmYuYWRkKFwidmlld1wiLCB7dmlldywga2luZDogXCJxdWVyeVwifSk7XG4gICAgLy9qb2luc1xuICAgIGZvcihsZXQgam9pbiBvZiB0aGlzLmpvaW5zKSB7XG4gICAgICBsZXQgYWN0aW9uID0gdXVpZCgpO1xuICAgICAgYWxpYXNlc1tqb2luLmFzXSA9IGFjdGlvbjtcbiAgICAgIGlmKCFqb2luLm5lZ2F0ZWQpIHtcbiAgICAgICAgZGlmZi5hZGQoXCJhY3Rpb25cIiwge3ZpZXcsIGFjdGlvbiwga2luZDogXCJzZWxlY3RcIiwgaXg6IGpvaW4uaXh9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpZmYuYWRkKFwiYWN0aW9uXCIsIHt2aWV3LCBhY3Rpb24sIGtpbmQ6IFwiZGVzZWxlY3RcIiwgaXg6IGpvaW4uaXh9KTtcbiAgICAgIH1cbiAgICAgIGRpZmYuYWRkKFwiYWN0aW9uIHNvdXJjZVwiLCB7YWN0aW9uLCBcInNvdXJjZSB2aWV3XCI6IGpvaW4udGFibGV9KTtcbiAgICAgIG1hcHBpbmdUb0RpZmYoZGlmZiwgYWN0aW9uLCBqb2luLmpvaW4sIGFsaWFzZXMsIHJldmVyc2VMb29rdXApO1xuICAgIH1cbiAgICAvL2Z1bmN0aW9uc1xuICAgIGZvcihsZXQgZnVuYyBvZiB0aGlzLmZ1bmNzKSB7XG4gICAgICBsZXQgYWN0aW9uID0gdXVpZCgpO1xuICAgICAgYWxpYXNlc1tmdW5jLmFzXSA9IGFjdGlvbjtcbiAgICAgIGRpZmYuYWRkKFwiYWN0aW9uXCIsIHt2aWV3LCBhY3Rpb24sIGtpbmQ6IFwiY2FsY3VsYXRlXCIsIGl4OiBmdW5jLml4fSk7XG4gICAgICBkaWZmLmFkZChcImFjdGlvbiBzb3VyY2VcIiwge2FjdGlvbiwgXCJzb3VyY2Ugdmlld1wiOiBmdW5jLm5hbWV9KTtcbiAgICAgIG1hcHBpbmdUb0RpZmYoZGlmZiwgYWN0aW9uLCBmdW5jLmFyZ3MsIGFsaWFzZXMsIHJldmVyc2VMb29rdXApO1xuICAgIH1cbiAgICAvL2FnZ3JlZ2F0ZXNcbiAgICBmb3IobGV0IGFnZyBvZiB0aGlzLmFnZ3JlZ2F0ZXMpIHtcbiAgICAgIGxldCBhY3Rpb24gPSB1dWlkKCk7XG4gICAgICBhbGlhc2VzW2FnZy5hc10gPSBhY3Rpb247XG4gICAgICBkaWZmLmFkZChcImFjdGlvblwiLCB7dmlldywgYWN0aW9uLCBraW5kOiBcImFnZ3JlZ2F0ZVwiLCBpeDogYWdnLml4fSk7XG4gICAgICBkaWZmLmFkZChcImFjdGlvbiBzb3VyY2VcIiwge2FjdGlvbiwgXCJzb3VyY2Ugdmlld1wiOiBhZ2cubmFtZX0pO1xuICAgICAgbWFwcGluZ1RvRGlmZihkaWZmLCBhY3Rpb24sIGFnZy5hcmdzLCBhbGlhc2VzLCByZXZlcnNlTG9va3VwKTtcbiAgICB9XG4gICAgLy9zb3J0XG4gICAgaWYodGhpcy5zb3J0cykge1xuICAgICAgbGV0IGFjdGlvbiA9IHV1aWQoKTtcbiAgICAgIGRpZmYuYWRkKFwiYWN0aW9uXCIsIHt2aWV3LCBhY3Rpb24sIGtpbmQ6IFwic29ydFwiLCBpeDogTUFYX05VTUJFUn0pO1xuICAgICAgbGV0IGl4ID0gMDtcbiAgICAgIGZvcihsZXQgc29ydCBvZiB0aGlzLnNvcnRzKSB7XG4gICAgICAgIGxldCBbc291cmNlLCBmaWVsZCwgZGlyZWN0aW9uXSA9IHNvcnQ7XG4gICAgICAgIGlmKHR5cGVvZiBzb3VyY2UgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICBzb3VyY2UgPSBhbGlhc2VzW3JldmVyc2VMb29rdXBbc291cmNlXV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc291cmNlID0gYWxpYXNlc1tzb3VyY2VdO1xuICAgICAgICB9XG4gICAgICAgIGRpZmYuYWRkKFwiYWN0aW9uIG1hcHBpbmcgc29ydGVkXCIsIHthY3Rpb24sIGl4LCBzb3VyY2UsIGZpZWxkLCBkaXJlY3Rpb259KTtcbiAgICAgICAgaXgrKztcbiAgICAgIH1cbiAgICB9XG4gICAgLy9ncm91cFxuICAgIGlmKHRoaXMuZ3JvdXBzKSB7XG4gICAgICBsZXQgYWN0aW9uID0gdXVpZCgpO1xuICAgICAgZGlmZi5hZGQoXCJhY3Rpb25cIiwge3ZpZXcsIGFjdGlvbiwga2luZDogXCJncm91cFwiLCBpeDogTUFYX05VTUJFUn0pO1xuICAgICAgbGV0IGl4ID0gMDtcbiAgICAgIGZvcihsZXQgZ3JvdXAgb2YgdGhpcy5ncm91cHMpIHtcbiAgICAgICAgbGV0IFtzb3VyY2UsIGZpZWxkXSA9IGdyb3VwO1xuICAgICAgICBpZih0eXBlb2Ygc291cmNlID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgc291cmNlID0gYWxpYXNlc1tyZXZlcnNlTG9va3VwW3NvdXJjZV1dO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNvdXJjZSA9IGFsaWFzZXNbc291cmNlXTtcbiAgICAgICAgfVxuICAgICAgICBkaWZmLmFkZChcImFjdGlvbiBtYXBwaW5nIHNvcnRlZFwiLCB7YWN0aW9uLCBpeCwgc291cmNlLCBmaWVsZCwgZGlyZWN0aW9uOiBcImFzY2VuZGluZ1wifSk7XG4gICAgICAgIGl4Kys7XG4gICAgICB9XG4gICAgfVxuICAgIC8vbGltaXRcbiAgICBpZih0aGlzLmxpbWl0SW5mbykge1xuICAgICAgbGV0IGFjdGlvbiA9IHV1aWQoKTtcbiAgICAgIGRpZmYuYWRkKFwiYWN0aW9uXCIsIHt2aWV3LCBhY3Rpb24sIGtpbmQ6IFwibGltaXRcIiwgaXg6IE1BWF9OVU1CRVJ9KTtcbiAgICAgIGZvcihsZXQgbGltaXRUeXBlIGluIHRoaXMubGltaXRJbmZvKSB7XG4gICAgICAgIGRpZmYuYWRkKFwiYWN0aW9uIG1hcHBpbmcgbGltaXRcIiwge2FjdGlvbiwgXCJsaW1pdCB0eXBlXCI6IGxpbWl0VHlwZSwgdmFsdWU6IHRoaXMubGltaXRJbmZvW2xpbWl0VHlwZV19KTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy9wcm9qZWN0aW9uXG4gICAgaWYodGhpcy5wcm9qZWN0aW9uTWFwKSB7XG4gICAgICBsZXQgYWN0aW9uID0gdXVpZCgpO1xuICAgICAgZGlmZi5hZGQoXCJhY3Rpb25cIiwge3ZpZXcsIGFjdGlvbiwga2luZDogXCJwcm9qZWN0XCIsIGl4OiBNQVhfTlVNQkVSfSk7XG4gICAgICBtYXBwaW5nVG9EaWZmKGRpZmYsIGFjdGlvbiwgdGhpcy5wcm9qZWN0aW9uTWFwLCBhbGlhc2VzLCByZXZlcnNlTG9va3VwKTtcbiAgICB9XG4gICAgcmV0dXJuIGRpZmY7XG4gIH1cbiAgdmFsaWRhdGVGaWVsZHModGFibGVOYW1lLCBqb2luT2JqZWN0KSB7XG4gICAgbGV0IHRhYmxlID0gdGhpcy5peGVyLnRhYmxlKHRhYmxlTmFtZSk7XG4gICAgZm9yIChsZXQgZmllbGQgaW4gam9pbk9iamVjdCkge1xuICAgICAgaWYgKHRhYmxlLmZpZWxkcy5sZW5ndGggJiYgIXRhYmxlLmtleUxvb2t1cFtmaWVsZF0pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUYWJsZSAnJHt0YWJsZU5hbWV9JyBkb2Vzbid0IGhhdmUgYSBmaWVsZCAnJHtmaWVsZH0nLlxcblxcbkF2YWlsYWJsZSBmaWVsZHM6ICR7dGFibGUuZmllbGRzLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgIH1cbiAgICAgIGxldCBqb2luSW5mbyA9IGpvaW5PYmplY3RbZmllbGRdO1xuICAgICAgaWYoam9pbkluZm8uY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG4gICAgICAgIGxldCBbam9pbk51bWJlciwgcmVmZXJlbmNlZEZpZWxkXSA9IGpvaW5JbmZvO1xuICAgICAgICBpZiAodHlwZW9mIGpvaW5OdW1iZXIgIT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICBqb2luTnVtYmVyID0gdGhpcy5hbGlhc2VzW2pvaW5OdW1iZXJdO1xuICAgICAgICB9XG4gICAgICAgIGxldCBqb2luID0gdGhpcy5qb2luc1tqb2luTnVtYmVyXTtcbiAgICAgICAgaWYgKGpvaW4gJiYgam9pbi5peCA9PT0gam9pbk51bWJlcikge1xuICAgICAgICAgIGxldCByZWZlcmVuY2VkVGFibGUgPSB0aGlzLml4ZXIudGFibGUoam9pbi50YWJsZSk7XG4gICAgICAgICAgaWYgKCFyZWZlcmVuY2VkVGFibGUuZmllbGRzLmxlbmd0aCkgY29udGludWU7XG4gICAgICAgICAgaWYgKCFyZWZlcmVuY2VkVGFibGUua2V5TG9va3VwW3JlZmVyZW5jZWRGaWVsZF0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGFibGUgJyR7am9pbi50YWJsZX0nIGRvZXNuJ3QgaGF2ZSBhIGZpZWxkICcke3JlZmVyZW5jZWRGaWVsZH0nLlxcblxcbkF2YWlsYWJsZSBmaWVsZHM6ICR7cmVmZXJlbmNlZFRhYmxlLmZpZWxkcy5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHNlbGVjdCh0YWJsZSwgam9pbiwgYXM/KSB7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gICAgaWYoYXMpIHtcbiAgICAgIHRoaXMuYWxpYXNlc1thc10gPSBPYmplY3Qua2V5cyh0aGlzLmFsaWFzZXMpLmxlbmd0aDtcbiAgICB9XG4gICAgdGhpcy51bnByb2plY3RlZFNpemUrKztcbiAgICB0aGlzLnRhYmxlcy5wdXNoKHRhYmxlKTtcbiAgICB0aGlzLnZhbGlkYXRlRmllbGRzKHRhYmxlLCBqb2luKTtcbiAgICB0aGlzLmpvaW5zLnB1c2goe25lZ2F0ZWQ6IGZhbHNlLCB0YWJsZSwgam9pbiwgYXMsIGl4OiB0aGlzLmFsaWFzZXNbYXNdfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZGVzZWxlY3QodGFibGUsIGpvaW4pIHtcbiAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICB0aGlzLnRhYmxlcy5wdXNoKHRhYmxlKTtcbiAgICB0aGlzLnZhbGlkYXRlRmllbGRzKHRhYmxlLCBqb2luKTtcbiAgICB0aGlzLmpvaW5zLnB1c2goe25lZ2F0ZWQ6IHRydWUsIHRhYmxlLCBqb2luLCBpeDogdGhpcy5qb2lucy5sZW5ndGggKiAxMDAwfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgY2FsY3VsYXRlKGZ1bmNOYW1lLCBhcmdzLCBhcz8pIHtcbiAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICBpZihhcykge1xuICAgICAgdGhpcy5hbGlhc2VzW2FzXSA9IE9iamVjdC5rZXlzKHRoaXMuYWxpYXNlcykubGVuZ3RoO1xuICAgIH1cbiAgICBpZighUXVlcnlGdW5jdGlvbnNbZnVuY05hbWVdLmZpbHRlcikge1xuICAgICAgdGhpcy51bnByb2plY3RlZFNpemUrKztcbiAgICB9XG4gICAgdGhpcy5mdW5jcy5wdXNoKHtuYW1lOiBmdW5jTmFtZSwgYXJncywgYXMsIGl4OiB0aGlzLmFsaWFzZXNbYXNdfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcHJvamVjdChwcm9qZWN0aW9uTWFwKSB7XG4gICAgdGhpcy5wcm9qZWN0aW9uTWFwID0gcHJvamVjdGlvbk1hcDtcbiAgICB0aGlzLnZhbGlkYXRlRmllbGRzKHVuZGVmaW5lZCwgcHJvamVjdGlvbk1hcCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZ3JvdXAoZ3JvdXBzKSB7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gICAgaWYoZ3JvdXBzWzBdICYmIGdyb3Vwc1swXS5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgIHRoaXMuZ3JvdXBzID0gZ3JvdXBzO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZighdGhpcy5ncm91cHMpIHRoaXMuZ3JvdXBzID0gW107XG4gICAgICB0aGlzLmdyb3Vwcy5wdXNoKGdyb3Vwcyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHNvcnQoc29ydHMpIHtcbiAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICBpZihzb3J0c1swXSAmJiBzb3J0c1swXS5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgIHRoaXMuc29ydHMgPSBzb3J0cztcbiAgICB9IGVsc2Uge1xuICAgICAgaWYoIXRoaXMuc29ydHMpIHRoaXMuc29ydHMgPSBbXTtcbiAgICAgIHRoaXMuc29ydHMucHVzaChzb3J0cyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGxpbWl0KGxpbWl0SW5mbzphbnkpIHtcbiAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICBpZighdGhpcy5saW1pdEluZm8pIHtcbiAgICAgIHRoaXMubGltaXRJbmZvID0ge307XG4gICAgfVxuICAgIGZvcihsZXQga2V5IGluIGxpbWl0SW5mbykge1xuICAgICAgdGhpcy5saW1pdEluZm9ba2V5XSA9IGxpbWl0SW5mb1trZXldO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBhZ2dyZWdhdGUoZnVuY05hbWUsIGFyZ3MsIGFzPykge1xuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICAgIGlmKGFzKSB7XG4gICAgICB0aGlzLmFsaWFzZXNbYXNdID0gT2JqZWN0LmtleXModGhpcy5hbGlhc2VzKS5sZW5ndGg7XG4gICAgfVxuICAgIHRoaXMudW5wcm9qZWN0ZWRTaXplKys7XG4gICAgdGhpcy5hZ2dyZWdhdGVzLnB1c2goe25hbWU6IGZ1bmNOYW1lLCBhcmdzLCBhcywgaXg6IHRoaXMuYWxpYXNlc1thc119KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBvcmRpbmFsKCkge1xuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICAgIHRoaXMuaGFzT3JkaW5hbCA9IHRydWU7XG4gICAgdGhpcy51bnByb2plY3RlZFNpemUrKztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBhcHBseUFsaWFzZXMoam9pbk1hcCkge1xuICAgIGZvcihsZXQgZmllbGQgaW4gam9pbk1hcCkge1xuICAgICAgbGV0IGpvaW5JbmZvID0gam9pbk1hcFtmaWVsZF07XG4gICAgICBpZihqb2luSW5mby5jb25zdHJ1Y3RvciAhPT0gQXJyYXkgfHwgdHlwZW9mIGpvaW5JbmZvWzBdID09PSBcIm51bWJlclwiKSBjb250aW51ZTtcbiAgICAgIGxldCBqb2luVGFibGUgPSBqb2luSW5mb1swXTtcbiAgICAgIGlmKGpvaW5UYWJsZSA9PT0gXCJvcmRpbmFsXCIpIHtcbiAgICAgICAgam9pbkluZm9bMF0gPSB0aGlzLnVucHJvamVjdGVkU2l6ZSAtIDE7XG4gICAgICB9IGVsc2UgaWYodGhpcy5hbGlhc2VzW2pvaW5UYWJsZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBqb2luSW5mb1swXSA9IHRoaXMuYWxpYXNlc1tqb2luVGFibGVdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhbGlhcyB1c2VkOiBcIiArIGpvaW5UYWJsZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHRvQVNUKCkge1xuICAgIGxldCBjdXJzb3IgPSB7dHlwZTogXCJxdWVyeVwiLFxuICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdfTtcbiAgICBsZXQgcm9vdCA9IGN1cnNvcjtcbiAgICBsZXQgcmVzdWx0cyA9IFtdO1xuICAgIC8vIGJ5IGRlZmF1bHQgdGhlIG9ubHkgdGhpbmcgd2UgcmV0dXJuIGFyZSB0aGUgdW5wcm9qZWN0ZWQgcmVzdWx0c1xuICAgIGxldCByZXR1cm5zID0gW1widW5wcm9qZWN0ZWRcIiwgXCJwcm92ZW5hbmNlXCJdO1xuXG4gICAgLy8gd2UgbmVlZCBhbiBhcnJheSB0byBzdG9yZSBvdXIgdW5wcm9qZWN0ZWQgcmVzdWx0c1xuICAgIHJvb3QuY2hpbGRyZW4ucHVzaCh7dHlwZTogXCJkZWNsYXJhdGlvblwiLCB2YXI6IFwidW5wcm9qZWN0ZWRcIiwgdmFsdWU6IFwiW11cIn0pO1xuICAgIHJvb3QuY2hpbGRyZW4ucHVzaCh7dHlwZTogXCJkZWNsYXJhdGlvblwiLCB2YXI6IFwicHJvdmVuYW5jZVwiLCB2YWx1ZTogXCJbXVwifSk7XG4gICAgcm9vdC5jaGlsZHJlbi5wdXNoKHt0eXBlOiBcImRlY2xhcmF0aW9uXCIsIHZhcjogXCJwcm9qZWN0ZWRcIiwgdmFsdWU6IFwie31cIn0pO1xuXG4gICAgLy8gcnVuIHRocm91Z2ggZWFjaCB0YWJsZSBuZXN0ZWQgaW4gdGhlIG9yZGVyIHRoZXkgd2VyZSBnaXZlbiBkb2luZyBwYWlyd2lzZVxuICAgIC8vIGpvaW5zIGFsb25nIHRoZSB3YXkuXG4gICAgZm9yKGxldCBqb2luIG9mIHRoaXMuam9pbnMpIHtcbiAgICAgIGxldCB7dGFibGUsIGl4LCBuZWdhdGVkfSA9IGpvaW47XG4gICAgICBsZXQgY3VyID0ge1xuICAgICAgICB0eXBlOiBcInNlbGVjdFwiLFxuICAgICAgICB0YWJsZSxcbiAgICAgICAgcGFzc2VkOiBpeCA9PT0gMCxcbiAgICAgICAgaXgsXG4gICAgICAgIG5lZ2F0ZWQsXG4gICAgICAgIGNoaWxkcmVuOiBbXSxcbiAgICAgICAgam9pbjogZmFsc2UsXG4gICAgICB9O1xuICAgICAgLy8gd2Ugb25seSB3YW50IHRvIGVhdCB0aGUgY29zdCBvZiBkZWFsaW5nIHdpdGggaW5kZXhlc1xuICAgICAgLy8gaWYgd2UgYXJlIGFjdHVhbGx5IGpvaW5pbmcgb24gc29tZXRoaW5nXG4gICAgICBsZXQgam9pbk1hcCA9IGpvaW4uam9pbjtcbiAgICAgIHRoaXMuYXBwbHlBbGlhc2VzKGpvaW5NYXApO1xuICAgICAgaWYoam9pbk1hcCAmJiBPYmplY3Qua2V5cyhqb2luTWFwKS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgcm9vdC5jaGlsZHJlbi51bnNoaWZ0KHt0eXBlOiBcImRlY2xhcmF0aW9uXCIsIHZhcjogYHF1ZXJ5JHtpeH1gLCB2YWx1ZTogXCJ7fVwifSk7XG4gICAgICAgIGN1ci5qb2luID0gam9pbk1hcDtcbiAgICAgIH1cbiAgICAgIGN1cnNvci5jaGlsZHJlbi5wdXNoKGN1cik7XG4gICAgICBpZighbmVnYXRlZCkge1xuICAgICAgICByZXN1bHRzLnB1c2goe3R5cGU6IFwic2VsZWN0XCIsIGl4fSk7XG4gICAgICB9XG5cbiAgICAgIGN1cnNvciA9IGN1cjtcbiAgICB9XG4gICAgLy8gYXQgdGhlIGJvdHRvbSBvZiB0aGUgam9pbnMsIHdlIGNhbGN1bGF0ZSBhbGwgdGhlIGZ1bmN0aW9ucyBiYXNlZCBvbiB0aGUgdmFsdWVzXG4gICAgLy8gY29sbGVjdGVkXG4gICAgZm9yKGxldCBmdW5jIG9mIHRoaXMuZnVuY3MpIHtcbiAgICAgIGxldCB7YXJncywgbmFtZSwgaXh9ID0gZnVuYztcbiAgICAgIGxldCBmdW5jSW5mbyA9IFF1ZXJ5RnVuY3Rpb25zW25hbWVdO1xuICAgICAgdGhpcy5hcHBseUFsaWFzZXMoYXJncyk7XG4gICAgICByb290LmNoaWxkcmVuLnVuc2hpZnQoe3R5cGU6IFwiZnVuY3Rpb25EZWNsYXJhdGlvblwiLCBpeCwgaW5mbzogZnVuY0luZm99KTtcbiAgICAgIGlmKGZ1bmNJbmZvLm11bHRpIHx8IGZ1bmNJbmZvLmZpbHRlcikge1xuICAgICAgICBsZXQgbm9kZSA9IHt0eXBlOiBcImZ1bmN0aW9uQ2FsbE11bHRpUmV0dXJuXCIsIGl4LCBhcmdzLCBpbmZvOiBmdW5jSW5mbywgY2hpbGRyZW46IFtdfTtcbiAgICAgICAgY3Vyc29yLmNoaWxkcmVuLnB1c2gobm9kZSk7XG4gICAgICAgIGN1cnNvciA9IG5vZGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJzb3IuY2hpbGRyZW4ucHVzaCh7dHlwZTogXCJmdW5jdGlvbkNhbGxcIiwgaXgsIGFyZ3MsIGluZm86IGZ1bmNJbmZvLCBjaGlsZHJlbjogW119KTtcbiAgICAgIH1cbiAgICAgIGlmKCFmdW5jSW5mby5ub1JldHVybiAmJiAhZnVuY0luZm8uZmlsdGVyKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaCh7dHlwZTogXCJmdW5jdGlvblwiLCBpeH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIG5vdyB0aGF0IHdlJ3JlIGF0IHRoZSBib3R0b20gb2YgdGhlIGpvaW4sIHN0b3JlIHRoZSB1bnByb2plY3RlZCByZXN1bHRcbiAgICBjdXJzb3IuY2hpbGRyZW4ucHVzaCh7dHlwZTogXCJyZXN1bHRcIiwgcmVzdWx0c30pO1xuXG4gICAgLy9BZ2dyZWdhdGlvblxuICAgIC8vc29ydCB0aGUgdW5wcm9qZWN0ZWQgcmVzdWx0cyBiYXNlZCBvbiBncm91cGluZ3MgYW5kIHRoZSBnaXZlbiBzb3J0c1xuICAgIGxldCBzb3J0cyA9IFtdO1xuICAgIGxldCBhbHJlYWR5U29ydGVkID0ge307XG4gICAgaWYodGhpcy5ncm91cHMpIHtcbiAgICAgIHRoaXMuYXBwbHlBbGlhc2VzKHRoaXMuZ3JvdXBzKTtcbiAgICAgIGZvcihsZXQgZ3JvdXAgb2YgdGhpcy5ncm91cHMpIHtcbiAgICAgICAgbGV0IFt0YWJsZSwgZmllbGRdID0gZ3JvdXA7XG4gICAgICAgIHNvcnRzLnB1c2goZ3JvdXApO1xuICAgICAgICBhbHJlYWR5U29ydGVkW2Ake3RhYmxlfXwke2ZpZWxkfWBdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYodGhpcy5zb3J0cykge1xuICAgICAgdGhpcy5hcHBseUFsaWFzZXModGhpcy5zb3J0cyk7XG4gICAgICBmb3IobGV0IHNvcnQgb2YgdGhpcy5zb3J0cykge1xuICAgICAgICBsZXQgW3RhYmxlLCBmaWVsZF0gPSBzb3J0O1xuICAgICAgICBpZighYWxyZWFkeVNvcnRlZFtgJHt0YWJsZX18JHtmaWVsZH1gXSkge1xuICAgICAgICAgIHNvcnRzLnB1c2goc29ydCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIHNpemUgPSB0aGlzLnVucHJvamVjdGVkU2l6ZTtcbiAgICBpZihzb3J0cy5sZW5ndGgpIHtcbiAgICAgIHJvb3QuY2hpbGRyZW4ucHVzaCh7dHlwZTogXCJzb3J0XCIsIHNvcnRzLCBzaXplLCBjaGlsZHJlbjogW119KTtcbiAgICB9XG4gICAgLy90aGVuIHdlIG5lZWQgdG8gcnVuIHRocm91Z2ggdGhlIHNvcnRlZCBpdGVtcyBhbmQgZG8gdGhlIGFnZ3JlZ2F0ZSBhcyBhIGZvbGQuXG4gICAgaWYodGhpcy5hZ2dyZWdhdGVzLmxlbmd0aCB8fCBzb3J0cy5sZW5ndGggfHwgdGhpcy5saW1pdEluZm8gfHwgdGhpcy5oYXNPcmRpbmFsKSB7XG4gICAgICAvLyB3ZSBuZWVkIHRvIHN0b3JlIGdyb3VwIGluZm8gZm9yIHBvc3QgcHJvY2Vzc2luZyBvZiB0aGUgdW5wcm9qZWN0ZWQgcmVzdWx0c1xuICAgICAgLy8gdGhpcyB3aWxsIGluZGljYXRlIHdoYXQgZ3JvdXAgbnVtYmVyLCBpZiBhbnksIHRoYXQgZWFjaCB1bnByb2plY3RlZCByZXN1bHQgYmVsb25ncyB0b1xuICAgICAgcm9vdC5jaGlsZHJlbi51bnNoaWZ0KHt0eXBlOiBcImRlY2xhcmF0aW9uXCIsIHZhcjogXCJncm91cEluZm9cIiwgdmFsdWU6IFwiW11cIn0pO1xuICAgICAgcmV0dXJucy5wdXNoKFwiZ3JvdXBJbmZvXCIpO1xuICAgICAgbGV0IGFnZ3JlZ2F0ZUNoaWxkcmVuID0gW107XG4gICAgICBmb3IobGV0IGZ1bmMgb2YgdGhpcy5hZ2dyZWdhdGVzKSB7XG4gICAgICAgIGxldCB7YXJncywgbmFtZSwgaXh9ID0gZnVuYztcbiAgICAgICAgbGV0IGZ1bmNJbmZvID0gUXVlcnlGdW5jdGlvbnNbbmFtZV07XG4gICAgICAgIHRoaXMuYXBwbHlBbGlhc2VzKGFyZ3MpO1xuICAgICAgICByb290LmNoaWxkcmVuLnVuc2hpZnQoe3R5cGU6IFwiZnVuY3Rpb25EZWNsYXJhdGlvblwiLCBpeCwgaW5mbzogZnVuY0luZm99KTtcbiAgICAgICAgYWdncmVnYXRlQ2hpbGRyZW4ucHVzaCh7dHlwZTogXCJmdW5jdGlvbkNhbGxcIiwgaXgsIHJlc3VsdHNJeDogcmVzdWx0cy5sZW5ndGgsIGFyZ3MsIGluZm86IGZ1bmNJbmZvLCB1bnByb2plY3RlZDogdHJ1ZSwgY2hpbGRyZW46IFtdfSk7XG4gICAgICAgIHJlc3VsdHMucHVzaCh7dHlwZTogXCJwbGFjZWhvbGRlclwifSk7XG4gICAgICB9XG4gICAgICBpZih0aGlzLmhhc09yZGluYWwgPT09IHRydWUpIHtcbiAgICAgICAgYWdncmVnYXRlQ2hpbGRyZW4ucHVzaCh7dHlwZTogXCJvcmRpbmFsXCJ9KTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKHt0eXBlOiBcInBsYWNlaG9sZGVyXCJ9KTtcbiAgICAgIH1cbiAgICAgIGxldCBhZ2dyZWdhdGUgPSB7dHlwZTogXCJhZ2dyZWdhdGUgbG9vcFwiLCBncm91cHM6IHRoaXMuZ3JvdXBzLCBsaW1pdDogdGhpcy5saW1pdEluZm8sIHNpemUsIGNoaWxkcmVuOiBhZ2dyZWdhdGVDaGlsZHJlbn07XG4gICAgICByb290LmNoaWxkcmVuLnB1c2goYWdncmVnYXRlKTtcbiAgICAgIGN1cnNvciA9IGFnZ3JlZ2F0ZTtcbiAgICB9XG5cblxuICAgIGlmKHRoaXMucHJvamVjdGlvbk1hcCkge1xuICAgICAgdGhpcy5hcHBseUFsaWFzZXModGhpcy5wcm9qZWN0aW9uTWFwKTtcbiAgICAgIHJvb3QuY2hpbGRyZW4udW5zaGlmdCh7dHlwZTogXCJkZWNsYXJhdGlvblwiLCB2YXI6IFwicmVzdWx0c1wiLCB2YWx1ZTogXCJbXVwifSk7XG4gICAgICBpZihJTkNSRU1FTlRBTCkge1xuICAgICAgICBjdXJzb3IuY2hpbGRyZW4ucHVzaCh7dHlwZTogXCJwcm92ZW5hbmNlXCJ9KTtcbiAgICAgIH1cbiAgICAgIGN1cnNvci5jaGlsZHJlbi5wdXNoKHt0eXBlOiBcInByb2plY3Rpb25cIiwgcHJvamVjdGlvbk1hcDogdGhpcy5wcm9qZWN0aW9uTWFwLCB1bnByb2plY3RlZDogdGhpcy5hZ2dyZWdhdGVzLmxlbmd0aH0pO1xuICAgICAgcmV0dXJucy5wdXNoKFwicmVzdWx0c1wiKTtcbiAgICB9XG5cbiAgICByb290LmNoaWxkcmVuLnB1c2goe3R5cGU6IFwicmV0dXJuXCIsIHZhcnM6IHJldHVybnN9KTtcbiAgICByZXR1cm4gcm9vdDtcbiAgfVxuICBjb21waWxlUGFyYW1TdHJpbmcoZnVuY0luZm8sIGFyZ3MsIHVucHJvamVjdGVkID0gZmFsc2UpIHtcbiAgICBsZXQgY29kZSA9IFwiXCI7XG4gICAgbGV0IHBhcmFtcyA9IGZ1bmNJbmZvLnBhcmFtcztcbiAgICBpZih1bnByb2plY3RlZCkgcGFyYW1zID0gcGFyYW1zLnNsaWNlKDEpO1xuICAgIGZvcihsZXQgcGFyYW0gb2YgcGFyYW1zKSB7XG4gICAgICBsZXQgYXJnID0gYXJnc1twYXJhbV07XG4gICAgICBsZXQgYXJnQ29kZTtcbiAgICAgIGlmKGFyZy5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgICAgbGV0IHByb3BlcnR5ID0gXCJcIjtcbiAgICAgICAgaWYoYXJnWzFdKSB7XG4gICAgICAgICAgcHJvcGVydHkgPSBgWycke2FyZ1sxXX0nXWA7XG4gICAgICAgIH1cbiAgICAgICAgaWYoIXVucHJvamVjdGVkKSB7XG4gICAgICAgICAgYXJnQ29kZSA9IGByb3cke2FyZ1swXX0ke3Byb3BlcnR5fWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXJnQ29kZSA9IGB1bnByb2plY3RlZFtpeCArICR7YXJnWzBdfV0ke3Byb3BlcnR5fWA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFyZ0NvZGUgPSBKU09OLnN0cmluZ2lmeShhcmcpO1xuICAgICAgfVxuICAgICAgY29kZSArPSBgJHthcmdDb2RlfSwgYDtcbiAgICB9XG4gICAgcmV0dXJuIGNvZGUuc3Vic3RyaW5nKDAsY29kZS5sZW5ndGggLSAyKTtcbiAgfVxuICBjb21waWxlQVNUKHJvb3QpIHtcbiAgICBsZXQgY29kZSA9IFwiXCI7XG4gICAgbGV0IHR5cGUgPSByb290LnR5cGU7XG4gICAgc3dpdGNoKHR5cGUpIHtcbiAgICAgIGNhc2UgXCJxdWVyeVwiOlxuICAgICAgICBmb3IodmFyIGNoaWxkIG9mIHJvb3QuY2hpbGRyZW4pIHtcbiAgICAgICAgICBjb2RlICs9IHRoaXMuY29tcGlsZUFTVChjaGlsZCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiZGVjbGFyYXRpb25cIjpcbiAgICAgICAgY29kZSArPSBgdmFyICR7cm9vdC52YXJ9ID0gJHtyb290LnZhbHVlfTtcXG5gO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJmdW5jdGlvbkRlY2xhcmF0aW9uXCI6XG4gICAgICAgIGNvZGUgKz0gYHZhciBmdW5jJHtyb290Lml4fSA9IFF1ZXJ5RnVuY3Rpb25zWycke3Jvb3QuaW5mby5uYW1lfSddLmZ1bmM7XFxuYDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiZnVuY3Rpb25DYWxsXCI6XG4gICAgICAgIHZhciBpeCA9IHJvb3QuaXg7XG4gICAgICAgIHZhciBwcmV2ID0gXCJcIjtcbiAgICAgICAgaWYocm9vdC51bnByb2plY3RlZCkge1xuICAgICAgICAgIHByZXYgPSBgcm93JHtpeH1gO1xuICAgICAgICAgIGlmKHJvb3QuaW5mby5wYXJhbXMubGVuZ3RoID4gMSkgcHJldiArPSBcIixcIlxuICAgICAgICB9XG4gICAgICAgIGNvZGUgKz0gYHZhciByb3cke2l4fSA9IGZ1bmMke2l4fSgke3ByZXZ9JHt0aGlzLmNvbXBpbGVQYXJhbVN0cmluZyhyb290LmluZm8sIHJvb3QuYXJncywgcm9vdC51bnByb2plY3RlZCl9KTtcXG5gO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJmdW5jdGlvbkNhbGxNdWx0aVJldHVyblwiOlxuICAgICAgICB2YXIgaXggPSByb290Lml4O1xuICAgICAgICBjb2RlICs9IGB2YXIgcm93cyR7aXh9ID0gZnVuYyR7aXh9KCR7dGhpcy5jb21waWxlUGFyYW1TdHJpbmcocm9vdC5pbmZvLCByb290LmFyZ3MpfSk7XFxuYDtcbiAgICAgICAgY29kZSArPSBgZm9yKHZhciBmdW5jUmVzdWx0SXgke2l4fSA9IDAsIGZ1bmNMZW4ke2l4fSA9IHJvd3Mke2l4fS5sZW5ndGg7IGZ1bmNSZXN1bHRJeCR7aXh9IDwgZnVuY0xlbiR7aXh9OyBmdW5jUmVzdWx0SXgke2l4fSsrKSB7XFxuYFxuICAgICAgICBjb2RlICs9IGB2YXIgcm93JHtpeH0gPSByb3dzJHtpeH1bZnVuY1Jlc3VsdEl4JHtpeH1dO1xcbmA7XG4gICAgICAgIGZvcih2YXIgY2hpbGQgb2Ygcm9vdC5jaGlsZHJlbikge1xuICAgICAgICAgIGNvZGUgKz0gdGhpcy5jb21waWxlQVNUKGNoaWxkKTtcbiAgICAgICAgfVxuICAgICAgICBjb2RlICs9IFwifVxcblwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJzZWxlY3RcIjpcbiAgICAgICAgdmFyIGl4ID0gcm9vdC5peDtcbiAgICAgICAgaWYocm9vdC5wYXNzZWQpIHtcbiAgICAgICAgICBjb2RlICs9IGB2YXIgcm93cyR7aXh9ID0gcm9vdFJvd3M7XFxuYDtcbiAgICAgICAgfSBlbHNlIGlmKHJvb3Quam9pbikge1xuICAgICAgICAgIGZvcihsZXQga2V5IGluIHJvb3Quam9pbikge1xuICAgICAgICAgICAgbGV0IG1hcHBpbmcgPSByb290LmpvaW5ba2V5XTtcbiAgICAgICAgICAgIGlmKG1hcHBpbmcuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG4gICAgICAgICAgICAgIGxldCBbdGFibGVJeCwgdmFsdWVdID0gbWFwcGluZztcbiAgICAgICAgICAgICAgY29kZSArPSBgcXVlcnkke2l4fVsnJHtrZXl9J10gPSByb3cke3RhYmxlSXh9Wycke3ZhbHVlfSddO1xcbmA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb2RlICs9IGBxdWVyeSR7aXh9Wycke2tleX0nXSA9ICR7SlNPTi5zdHJpbmdpZnkobWFwcGluZyl9O1xcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvZGUgKz0gYHZhciByb3dzJHtpeH0gPSBpeGVyLmZhY3RUb0luZGV4KGl4ZXIudGFibGUoJyR7cm9vdC50YWJsZX0nKSwgcXVlcnkke2l4fSk7XFxuYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb2RlICs9IGB2YXIgcm93cyR7aXh9ID0gaXhlci50YWJsZSgnJHtyb290LnRhYmxlfScpLnRhYmxlO1xcbmA7XG4gICAgICAgIH1cbiAgICAgICAgaWYoIXJvb3QubmVnYXRlZCkge1xuICAgICAgICAgIGNvZGUgKz0gYGZvcih2YXIgcm93SXgke2l4fSA9IDAsIHJvd3NMZW4ke2l4fSA9IHJvd3Mke2l4fS5sZW5ndGg7IHJvd0l4JHtpeH0gPCByb3dzTGVuJHtpeH07IHJvd0l4JHtpeH0rKykge1xcbmBcbiAgICAgICAgICBjb2RlICs9IGB2YXIgcm93JHtpeH0gPSByb3dzJHtpeH1bcm93SXgke2l4fV07XFxuYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb2RlICs9IGBpZighcm93cyR7aXh9Lmxlbmd0aCkge1xcbmBcbiAgICAgICAgfVxuICAgICAgICBmb3IodmFyIGNoaWxkIG9mIHJvb3QuY2hpbGRyZW4pIHtcbiAgICAgICAgICBjb2RlICs9IHRoaXMuY29tcGlsZUFTVChjaGlsZCk7XG4gICAgICAgIH1cbiAgICAgICAgY29kZSArPSBcIn1cXG5cIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwicmVzdWx0XCI6XG4gICAgICAgIHZhciByZXN1bHRzID0gW107XG4gICAgICAgIGZvcih2YXIgcmVzdWx0IG9mIHJvb3QucmVzdWx0cykge1xuICAgICAgICAgIGlmKHJlc3VsdC50eXBlID09PSBcInBsYWNlaG9sZGVyXCIpIHtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChcInVuZGVmaW5lZFwiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGl4ID0gcmVzdWx0Lml4O1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGByb3cke2l4fWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb2RlICs9IGB1bnByb2plY3RlZC5wdXNoKCR7cmVzdWx0cy5qb2luKFwiLCBcIil9KTtcXG5gO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJzb3J0XCI6XG4gICAgICAgIGNvZGUgKz0gZ2VuZXJhdGVVbnByb2plY3RlZFNvcnRlckNvZGUocm9vdC5zaXplLCByb290LnNvcnRzKStcIlxcblwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJhZ2dyZWdhdGUgbG9vcFwiOlxuICAgICAgICB2YXIgcHJvamVjdGlvbiA9IFwiXCI7XG4gICAgICAgIHZhciBhZ2dyZWdhdGVDYWxscyA9IFtdO1xuICAgICAgICB2YXIgYWdncmVnYXRlU3RhdGVzID0gW107XG4gICAgICAgIHZhciBhZ2dyZWdhdGVSZXNldHMgPSBbXTtcbiAgICAgICAgdmFyIHVucHJvamVjdGVkID0ge307XG4gICAgICAgIHZhciBvcmRpbmFsOnN0cmluZ3xib29sZWFuID0gZmFsc2U7XG4gICAgICAgIHZhciBwcm92ZW5hbmNlQ29kZTtcbiAgICAgICAgZm9yKGxldCBhZ2cgb2Ygcm9vdC5jaGlsZHJlbikge1xuICAgICAgICAgIGlmKGFnZy50eXBlID09PSBcImZ1bmN0aW9uQ2FsbFwiKSB7XG4gICAgICAgICAgICB1bnByb2plY3RlZFthZ2cuaXhdID0gdHJ1ZTtcbiAgICAgICAgICAgIGxldCBjb21waWxlZCA9IHRoaXMuY29tcGlsZUFTVChhZ2cpO1xuICAgICAgICAgICAgY29tcGlsZWQgKz0gYFxcbnVucHJvamVjdGVkW2l4ICsgJHthZ2cucmVzdWx0c0l4fV0gPSByb3cke2FnZy5peH07XFxuYDtcbiAgICAgICAgICAgIGFnZ3JlZ2F0ZUNhbGxzLnB1c2goY29tcGlsZWQpO1xuICAgICAgICAgICAgYWdncmVnYXRlU3RhdGVzLnB1c2goYHZhciByb3cke2FnZy5peH0gPSB7fTtgKTtcbiAgICAgICAgICAgIGFnZ3JlZ2F0ZVJlc2V0cy5wdXNoKGByb3cke2FnZy5peH0gPSB7fTtgKTtcbiAgICAgICAgICB9IGVsc2UgaWYoYWdnLnR5cGUgPT09IFwicHJvamVjdGlvblwiKSB7XG4gICAgICAgICAgICBhZ2cudW5wcm9qZWN0ZWQgPSB1bnByb2plY3RlZDtcbiAgICAgICAgICAgIHByb2plY3Rpb24gPSB0aGlzLmNvbXBpbGVBU1QoYWdnKTtcbiAgICAgICAgICB9IGVsc2UgaWYoYWdnLnR5cGUgPT09IFwib3JkaW5hbFwiKSB7XG4gICAgICAgICAgICBvcmRpbmFsID0gYHVucHJvamVjdGVkW2l4KyR7dGhpcy51bnByb2plY3RlZFNpemUgLSAxfV0gPSByZXN1bHRDb3VudDtcXG5gO1xuICAgICAgICAgIH0gZWxzZSBpZihhZ2cudHlwZSA9PT0gXCJwcm92ZW5hbmNlXCIpIHtcbiAgICAgICAgICAgIHByb3ZlbmFuY2VDb2RlID0gdGhpcy5jb21waWxlQVNUKGFnZyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBhZ2dyZWdhdGVDYWxsc0NvZGUgPSBhZ2dyZWdhdGVDYWxscy5qb2luKFwiXCIpO1xuXG4gICAgICAgIHZhciBkaWZmZXJlbnRHcm91cENoZWNrcyA9IFtdO1xuICAgICAgICB2YXIgZ3JvdXBDaGVjayA9IGBmYWxzZWA7XG4gICAgICAgIGlmKHJvb3QuZ3JvdXBzKSB7XG4gICAgICAgICAgZm9yKGxldCBncm91cCBvZiByb290Lmdyb3Vwcykge1xuICAgICAgICAgICAgbGV0IFt0YWJsZSwgZmllbGRdID0gZ3JvdXA7XG4gICAgICAgICAgICBkaWZmZXJlbnRHcm91cENoZWNrcy5wdXNoKGB1bnByb2plY3RlZFtuZXh0SXggKyAke3RhYmxlfV1bJyR7ZmllbGR9J10gIT09IHVucHJvamVjdGVkW2l4ICsgJHt0YWJsZX1dWycke2ZpZWxkfSddYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGdyb3VwQ2hlY2sgPSBgKCR7ZGlmZmVyZW50R3JvdXBDaGVja3Muam9pbihcIiB8fCBcIil9KWA7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVzdWx0c0NoZWNrID0gXCJcIjtcbiAgICAgICAgaWYocm9vdC5saW1pdCAmJiByb290LmxpbWl0LnJlc3VsdHMpIHtcbiAgICAgICAgICBsZXQgbGltaXRWYWx1ZSA9IHJvb3QubGltaXQucmVzdWx0cztcbiAgICAgICAgICBsZXQgb2Zmc2V0ID0gcm9vdC5saW1pdC5vZmZzZXQ7XG4gICAgICAgICAgaWYob2Zmc2V0KSB7XG4gICAgICAgICAgICBsaW1pdFZhbHVlICs9IG9mZnNldDtcbiAgICAgICAgICAgIHByb2plY3Rpb24gPSBgaWYocmVzdWx0Q291bnQgPj0gJHtvZmZzZXR9KSB7XG4gICAgICAgICAgICAgICR7cHJvamVjdGlvbn1cbiAgICAgICAgICAgIH1gO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHRzQ2hlY2sgPSBgaWYocmVzdWx0Q291bnQgPT09ICR7bGltaXRWYWx1ZX0pIGJyZWFrO2A7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGdyb3VwTGltaXRDaGVjayA9IFwiXCI7XG4gICAgICAgIGlmKHJvb3QubGltaXQgJiYgcm9vdC5saW1pdC5wZXJHcm91cCAmJiByb290Lmdyb3Vwcykge1xuICAgICAgICAgIGxldCBsaW1pdFZhbHVlID0gcm9vdC5saW1pdC5wZXJHcm91cDtcbiAgICAgICAgICBsZXQgb2Zmc2V0ID0gcm9vdC5saW1pdC5vZmZzZXQ7XG4gICAgICAgICAgaWYob2Zmc2V0KSB7XG4gICAgICAgICAgICBsaW1pdFZhbHVlICs9IG9mZnNldDtcbiAgICAgICAgICAgIGFnZ3JlZ2F0ZUNhbGxzQ29kZSA9IGBpZihwZXJHcm91cENvdW50ID49ICR7b2Zmc2V0fSkge1xuICAgICAgICAgICAgICAke2FnZ3JlZ2F0ZUNhbGxzQ29kZX1cbiAgICAgICAgICAgIH1gO1xuICAgICAgICAgIH1cbiAgICAgICAgICBncm91cExpbWl0Q2hlY2sgPSBgaWYocGVyR3JvdXBDb3VudCA9PT0gJHtsaW1pdFZhbHVlfSkge1xuICAgICAgICAgICAgd2hpbGUoIWRpZmZlcmVudEdyb3VwKSB7XG4gICAgICAgICAgICAgIG5leHRJeCArPSAke3Jvb3Quc2l6ZX07XG4gICAgICAgICAgICAgIGlmKG5leHRJeCA+PSBsZW4pIGJyZWFrO1xuICAgICAgICAgICAgICBncm91cEluZm9bbmV4dEl4XSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgZGlmZmVyZW50R3JvdXAgPSAke2dyb3VwQ2hlY2t9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1gO1xuICAgICAgICB9XG4gICAgICAgIHZhciBncm91cERpZmZlcmVuY2UgPSBcIlwiO1xuICAgICAgICB2YXIgZ3JvdXBJbmZvID0gXCJcIjtcbiAgICAgICAgaWYodGhpcy5ncm91cHMpIHtcbiAgICAgICAgICBncm91cEluZm8gPSBcImdyb3VwSW5mb1tpeF0gPSByZXN1bHRDb3VudDtcIjtcbiAgICAgICAgICBsZXQgZ3JvdXBQcm9qZWN0aW9uID0gYCR7cHJvamVjdGlvbn1yZXN1bHRDb3VudCsrO2BcbiAgICAgICAgICBpZihyb290LmxpbWl0ICYmIHJvb3QubGltaXQub2Zmc2V0KSB7XG4gICAgICAgICAgICBncm91cFByb2plY3Rpb24gPSBgaWYocGVyR3JvdXBDb3VudCA+ICR7cm9vdC5saW1pdC5vZmZzZXR9KSB7XG4gICAgICAgICAgICAgICR7Z3JvdXBQcm9qZWN0aW9ufVxuICAgICAgICAgICAgfWA7XG4gICAgICAgICAgICBncm91cEluZm8gPSBgaWYocGVyR3JvdXBDb3VudCA+PSAke3Jvb3QubGltaXQub2Zmc2V0fSkge1xuICAgICAgICAgICAgICAke2dyb3VwSW5mb31cbiAgICAgICAgICAgIH1gO1xuICAgICAgICAgIH1cbiAgICAgICAgICBncm91cERpZmZlcmVuY2UgPSBgXG4gICAgICAgICAgcGVyR3JvdXBDb3VudCsrXG4gICAgICAgICAgdmFyIGRpZmZlcmVudEdyb3VwID0gJHtncm91cENoZWNrfTtcbiAgICAgICAgICAke2dyb3VwTGltaXRDaGVja31cbiAgICAgICAgICBpZihkaWZmZXJlbnRHcm91cCkge1xuICAgICAgICAgICAgJHtncm91cFByb2plY3Rpb259XG4gICAgICAgICAgICAke2FnZ3JlZ2F0ZVJlc2V0cy5qb2luKFwiXFxuXCIpfVxuICAgICAgICAgICAgcGVyR3JvdXBDb3VudCA9IDA7XG4gICAgICAgICAgfVxcbmA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZ3JvdXBEaWZmZXJlbmNlID0gXCJyZXN1bHRDb3VudCsrO1xcblwiO1xuICAgICAgICAgIGdyb3VwSW5mbyA9IFwiZ3JvdXBJbmZvW2l4XSA9IDA7XCJcbiAgICAgICAgfVxuICAgICAgICAvLyBpZiB0aGVyZSBhcmUgbmVpdGhlciBhZ2dyZWdhdGVzIHRvIGNhbGN1bGF0ZSBub3IgZ3JvdXBzIHRvIGJ1aWxkLFxuICAgICAgICAvLyB0aGVuIHdlIGp1c3QgbmVlZCB0byB3b3JyeSBhYm91dCBsaW1pdGluZ1xuICAgICAgICBpZighdGhpcy5ncm91cHMgJiYgYWdncmVnYXRlQ2FsbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgY29kZSA9IGB2YXIgaXggPSAwO1xuICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdENvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgIHZhciBsZW4gPSB1bnByb2plY3RlZC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICB3aGlsZShpeCA8IGxlbikge1xuICAgICAgICAgICAgICAgICAgICAke3Jlc3VsdHNDaGVja31cbiAgICAgICAgICAgICAgICAgICAgJHtvcmRpbmFsIHx8IFwiXCJ9XG4gICAgICAgICAgICAgICAgICAgICR7cHJvdmVuYW5jZUNvZGV9XG4gICAgICAgICAgICAgICAgICAgICR7cHJvamVjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJbmZvW2l4XSA9IHJlc3VsdENvdW50O1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICBpeCArPSAke3Jvb3Quc2l6ZX07XG4gICAgICAgICAgICAgICAgICB9XFxuYDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjb2RlID0gYHZhciByZXN1bHRDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIHBlckdyb3VwQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgIHZhciBpeCA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIG5leHRJeCA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGxlbiA9IHVucHJvamVjdGVkLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAke2FnZ3JlZ2F0ZVN0YXRlcy5qb2luKFwiXFxuXCIpfVxuICAgICAgICAgICAgICAgIHdoaWxlKGl4IDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgICAke2FnZ3JlZ2F0ZUNhbGxzQ29kZX1cbiAgICAgICAgICAgICAgICAgICR7Z3JvdXBJbmZvfVxuICAgICAgICAgICAgICAgICAgJHtvcmRpbmFsIHx8IFwiXCJ9XG4gICAgICAgICAgICAgICAgICAke3Byb3ZlbmFuY2VDb2RlfVxuICAgICAgICAgICAgICAgICAgaWYoaXggKyAke3Jvb3Quc2l6ZX0gPT09IGxlbikge1xuICAgICAgICAgICAgICAgICAgICAke3Byb2plY3Rpb259XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgbmV4dEl4ICs9ICR7cm9vdC5zaXplfTtcbiAgICAgICAgICAgICAgICAgICR7Z3JvdXBEaWZmZXJlbmNlfVxuICAgICAgICAgICAgICAgICAgJHtyZXN1bHRzQ2hlY2t9XG4gICAgICAgICAgICAgICAgICBpeCA9IG5leHRJeDtcbiAgICAgICAgICAgICAgICB9XFxuYDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwicHJvamVjdGlvblwiOlxuICAgICAgICB2YXIgcHJvamVjdGVkVmFycyA9IFtdO1xuICAgICAgICB2YXIgaWRTdHJpbmdQYXJ0cyA9IFtdO1xuICAgICAgICBmb3IobGV0IG5ld0ZpZWxkIGluIHJvb3QucHJvamVjdGlvbk1hcCkge1xuICAgICAgICAgIGxldCBtYXBwaW5nID0gcm9vdC5wcm9qZWN0aW9uTWFwW25ld0ZpZWxkXTtcbiAgICAgICAgICBsZXQgdmFsdWUgPSBcIlwiO1xuICAgICAgICAgIGlmKG1hcHBpbmcuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG4gICAgICAgICAgICBpZihtYXBwaW5nWzFdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgdmFsdWUgPSBgdW5wcm9qZWN0ZWRbaXggKyAke21hcHBpbmdbMF19XWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYoIXJvb3QudW5wcm9qZWN0ZWQgfHwgcm9vdC51bnByb2plY3RlZFttYXBwaW5nWzBdXSkge1xuICAgICAgICAgICAgICB2YWx1ZSA9IGByb3cke21hcHBpbmdbMF19Wycke21hcHBpbmdbMV19J11gO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFsdWUgPSBgdW5wcm9qZWN0ZWRbaXggKyAke21hcHBpbmdbMF19XVsnJHttYXBwaW5nWzFdfSddYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsdWUgPSBKU09OLnN0cmluZ2lmeShtYXBwaW5nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcHJvamVjdGVkVmFycy5wdXNoKGBwcm9qZWN0ZWRbJyR7bmV3RmllbGQucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpfSddID0gJHt2YWx1ZX1gKTtcbiAgICAgICAgICBpZFN0cmluZ1BhcnRzLnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvZGUgKz0gcHJvamVjdGVkVmFycy5qb2luKFwiO1xcblwiKSArIFwiXFxuXCI7XG4gICAgICAgIGNvZGUgKz0gYHByb2plY3RlZC5fX2lkID0gJHtpZFN0cmluZ1BhcnRzLmpvaW4oYCArIFwifFwiICsgYCl9O1xcbmA7XG4gICAgICAgIGNvZGUgKz0gYHJlc3VsdHMucHVzaChwcm9qZWN0ZWQpO1xcbmA7XG4gICAgICAgIGNvZGUgKz0gYHByb2plY3RlZCA9IHt9O1xcbmA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInByb3ZlbmFuY2VcIjpcbiAgICAgICAgdmFyIHByb3ZlbmFuY2UgPSBcInZhciBwcm92ZW5hbmNlX19pZCA9ICcnO1xcblwiO1xuICAgICAgICB2YXIgaWRzID0gW107XG4gICAgICAgIGZvcihsZXQgam9pbiBvZiB0aGlzLmpvaW5zKSB7XG4gICAgICAgICAgaWYoam9pbi5uZWdhdGVkKSBjb250aW51ZTtcbiAgICAgICAgICBwcm92ZW5hbmNlICs9IGBwcm92ZW5hbmNlX19pZCA9IHRhYmxlSWQgKyAnfCcgKyBwcm9qZWN0ZWQuX19pZCArICd8JyArIHJvd0luc3RhbmNlICsgJ3wke2pvaW4udGFibGV9fCcgKyByb3cke2pvaW4uaXh9Ll9faWQ7IFxcbmA7XG4gICAgICAgICAgcHJvdmVuYW5jZSArPSBgcHJvdmVuYW5jZS5wdXNoKHt0YWJsZTogdGFibGVJZCwgcm93OiBwcm9qZWN0ZWQsIFwicm93IGluc3RhbmNlXCI6IHJvd0luc3RhbmNlLCBzb3VyY2U6IFwiJHtqb2luLnRhYmxlfVwiLCBcInNvdXJjZSByb3dcIjogcm93JHtqb2luLml4fX0pO1xcbmA7XG4gICAgICAgICAgaWRzLnB1c2goYHJvdyR7am9pbi5peH0uX19pZGApO1xuICAgICAgICB9XG4gICAgICAgIGNvZGUgPSBgdmFyIHJvd0luc3RhbmNlID0gJHtpZHMuam9pbihcIiArICd8JyArIFwiKX07XG4gICAgICAgICR7cHJvdmVuYW5jZX1gO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJyZXR1cm5cIjpcbiAgICAgICAgdmFyIHJldHVybnMgPSBbXTtcbiAgICAgICAgZm9yKGxldCBjdXJWYXIgb2Ygcm9vdC52YXJzKSB7XG4gICAgICAgICAgcmV0dXJucy5wdXNoKGAke2N1clZhcn06ICR7Y3VyVmFyfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvZGUgKz0gYHJldHVybiB7JHtyZXR1cm5zLmpvaW4oXCIsIFwiKX19O2A7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gY29kZTtcbiAgfVxuICAvLyBnaXZlbiBhIHNldCBvZiBjaGFuZ2VzIGFuZCBhIGpvaW4gb3JkZXIsIGRldGVybWluZSB0aGUgcm9vdCBmYWN0cyB0aGF0IG5lZWRcbiAgLy8gdG8gYmUgam9pbmVkIGFnYWluIHRvIGNvdmVyIGFsbCB0aGUgYWRkc1xuICByZXZlcnNlSm9pbihqb2lucykge1xuICAgIGxldCBjaGFuZ2VkID0gam9pbnNbMF07XG4gICAgbGV0IHJldmVyc2VKb2luTWFwID0ge307XG4gICAgLy8gY29sbGVjdCBhbGwgdGhlIGNvbnN0cmFpbnRzIGFuZCByZXZlcnNlIHRoZW1cbiAgICBmb3IgKGxldCBqb2luIG9mIGpvaW5zKSB7XG4gICAgICBmb3IgKGxldCBrZXkgaW4gam9pbi5qb2luKSB7XG4gICAgICAgIGxldCBbc291cmNlLCBmaWVsZF0gPSBqb2luLmpvaW5ba2V5XTtcbiAgICAgICAgaWYgKHNvdXJjZSA8PSBjaGFuZ2VkLml4KSB7XG4gICAgICAgICAgaWYgKCFyZXZlcnNlSm9pbk1hcFtzb3VyY2VdKSB7XG4gICAgICAgICAgICByZXZlcnNlSm9pbk1hcFtzb3VyY2VdID0ge307XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKCFyZXZlcnNlSm9pbk1hcFtzb3VyY2VdW2ZpZWxkXSkgcmV2ZXJzZUpvaW5NYXBbc291cmNlXVtmaWVsZF0gPSBbam9pbi5peCwga2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB2YXIgcmVjdXJzZSA9IChqb2lucywgam9pbkl4KSA9PiB7XG4gICAgICB2YXIgY29kZSA9IFwiXCI7XG4gICAgICBpZiAoam9pbkl4ID49IGpvaW5zLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gXCJvdGhlcnMucHVzaChyb3cwKVwiO1xuICAgICAgfVxuICAgICAgbGV0IHt0YWJsZSwgaXgsIG5lZ2F0ZWR9ID0gam9pbnNbam9pbkl4XTtcbiAgICAgIGxldCBqb2luTWFwID0gam9pbnNbam9pbkl4XS5qb2luO1xuICAgICAgLy8gd2Ugb25seSBjYXJlIGFib3V0IHRoaXMgZ3V5IGlmIGhlJ3Mgam9pbmVkIHdpdGggYXQgbGVhc3Qgb25lIHRoaW5nXG4gICAgICBpZiAoIXJldmVyc2VKb2luTWFwW2l4XSAmJiBqb2luSXggPCBqb2lucy5sZW5ndGggLSAxKSByZXR1cm4gcmVjdXJzZShqb2lucywgam9pbkl4ICsgMSk7XG4gICAgICBlbHNlIGlmKCFyZXZlcnNlSm9pbk1hcCkgcmV0dXJuIFwiXCI7XG4gICAgICBsZXQgbWFwcGluZ3MgPSBbXTtcbiAgICAgIGZvciAobGV0IGtleSBpbiByZXZlcnNlSm9pbk1hcFtpeF0pIHtcbiAgICAgICAgbGV0IFtzb3VyY2VJeCwgZmllbGRdID0gcmV2ZXJzZUpvaW5NYXBbaXhdW2tleV07XG4gICAgICAgIGlmKHNvdXJjZUl4ID09PSBjaGFuZ2VkLml4IHx8IHJldmVyc2VKb2luTWFwW3NvdXJjZUl4XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgbWFwcGluZ3MucHVzaChgJyR7a2V5fSc6IHJvdyR7c291cmNlSXh9Wycke2ZpZWxkfSddYCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvcihsZXQga2V5IGluIGpvaW5NYXApIHtcbiAgICAgICAgbGV0IHZhbHVlID0gam9pbk1hcFtrZXldO1xuICAgICAgICBpZih2YWx1ZS5jb25zdHJ1Y3RvciAhPT0gQXJyYXkpIHtcbiAgICAgICAgICBtYXBwaW5ncy5wdXNoKGAnJHtrZXl9JzogJHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChuZWdhdGVkKSB7XG4gICAgICAgIC8vQFRPRE86IGRlYWwgd2l0aCBuZWdhdGlvbjtcbiAgICAgIH1cbiAgICAgIGNvZGUgKz0gYFxuICAgICAgICAgICAgdmFyIHJvd3Mke2l4fSA9IGV2ZS5maW5kKCcke3RhYmxlfScsIHske21hcHBpbmdzLmpvaW4oXCIsIFwiKSB9fSk7XG4gICAgICAgICAgICBmb3IodmFyIHJvd3NJeCR7aXh9ID0gMCwgcm93c0xlbiR7aXh9ID0gcm93cyR7aXh9Lmxlbmd0aDsgcm93c0l4JHtpeH0gPCByb3dzTGVuJHtpeH07IHJvd3NJeCR7aXh9KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93JHtpeH0gPSByb3dzJHtpeH1bcm93c0l4JHtpeH1dO1xuICAgICAgICAgICAgICAgICR7cmVjdXJzZShqb2lucywgam9pbkl4ICsgMSkgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHJldHVybiBjb2RlO1xuICAgIH1cbiAgICByZXR1cm4gcmVjdXJzZShqb2lucywgMSk7XG5cdH1cbiAgY29tcGlsZUluY3JlbWVudGFsUm93RmluZGVyQ29kZSgpIHtcbiAgICAgIGxldCBjb2RlID0gXCJ2YXIgb3RoZXJzID0gW107XFxuXCI7XG4gICAgICBsZXQgcmV2ZXJzZWQgPSB0aGlzLmpvaW5zLnNsaWNlKCkucmV2ZXJzZSgpO1xuICAgICAgbGV0IGNoZWNrcyA9IFtdO1xuICAgICAgbGV0IGl4ID0gMDtcbiAgICAgIGZvciAobGV0IGpvaW4gb2YgcmV2ZXJzZWQpIHtcbiAgICAgICAgICAvLyB3ZSBkb24ndCB3YW50IHRvIGRvIHRoaXMgZm9yIHRoZSByb290XG4gICAgICAgICAgaWYgKGl4ID09PSByZXZlcnNlZC5sZW5ndGggLSAxKSBicmVhaztcbiAgICAgICAgICBjaGVja3MucHVzaChgXG5cdFx0XHRpZihjaGFuZ2VzW1wiJHtqb2luLnRhYmxlfVwiXSAmJiBjaGFuZ2VzW1wiJHtqb2luLnRhYmxlfVwiXS5hZGRzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1ckNoYW5nZXMke2pvaW4uaXh9ID0gY2hhbmdlc1tcIiR7am9pbi50YWJsZX1cIl0uYWRkcztcbiAgICAgICAgICAgICAgICBmb3IodmFyIGNoYW5nZUl4JHtqb2luLml4fSA9IDAsIGNoYW5nZUxlbiR7am9pbi5peH0gPSBjdXJDaGFuZ2VzJHtqb2luLml4fS5sZW5ndGg7IGNoYW5nZUl4JHtqb2luLml4fSA8IGNoYW5nZUxlbiR7am9pbi5peH07IGNoYW5nZUl4JHtqb2luLml4fSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3cke2pvaW4uaXh9ID0gY3VyQ2hhbmdlcyR7am9pbi5peH1bY2hhbmdlSXgke2pvaW4uaXh9XTtcblx0XHRcdFx0XHQke3RoaXMucmV2ZXJzZUpvaW4ocmV2ZXJzZWQuc2xpY2UoaXgpKX1cblx0XHRcdFx0fVxuXHRcdFx0fWApO1xuICAgICAgICAgIGl4Kys7XG4gICAgICB9XG4gICAgICBjb2RlICs9IGNoZWNrcy5qb2luKFwiIGVsc2VcIik7XG4gICAgICB2YXIgbGFzdCA9IHJldmVyc2VkW2l4XTtcbiAgICAgIGNvZGUgKz0gYFxuXHRcdFx0aWYoY2hhbmdlc1tcIiR7bGFzdC50YWJsZX1cIl0gJiYgY2hhbmdlc1tcIiR7bGFzdC50YWJsZX1cIl0uYWRkcykge1xuICAgICAgICAgICAgICAgIHZhciBjdXJDaGFuZ2VzID0gY2hhbmdlc1tcIiR7bGFzdC50YWJsZX1cIl0uYWRkcztcblx0XHRcdFx0Zm9yKHZhciBjaGFuZ2VJeCA9IDAsIGNoYW5nZUxlbiA9IGN1ckNoYW5nZXMubGVuZ3RoOyBjaGFuZ2VJeCA8IGNoYW5nZUxlbjsgY2hhbmdlSXgrKykge1xuXHRcdFx0XHRcdG90aGVycy5wdXNoKGN1ckNoYW5nZXNbY2hhbmdlSXhdKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG90aGVycztgO1xuICAgICAgcmV0dXJuIGNvZGU7XG4gIH1cbiAgaW5jcmVtZW50YWxSZW1vdmUoY2hhbmdlcykge1xuICAgIGxldCBpeGVyID0gdGhpcy5peGVyO1xuICAgIGxldCByb3dzVG9Qb3N0Q2hlY2sgPSBbXTtcbiAgICBsZXQgcHJvdmVuYW5jZURpZmYgPSB0aGlzLml4ZXIuZGlmZigpO1xuICAgIGxldCByZW1vdmVzID0gW107XG4gICAgbGV0IGluZGV4ZXMgPSBpeGVyLnRhYmxlKFwicHJvdmVuYW5jZVwiKS5pbmRleGVzO1xuICAgIGxldCBzb3VyY2VSb3dMb29rdXAgPSBpbmRleGVzW1wic291cmNlfHNvdXJjZSByb3d8dGFibGVcIl0uaW5kZXg7XG4gICAgbGV0IHJvd0luc3RhbmNlTG9va3VwID0gaW5kZXhlc1tcInJvdyBpbnN0YW5jZXx0YWJsZVwiXS5pbmRleDtcbiAgICBsZXQgdGFibGVSb3dMb29rdXAgPSBpbmRleGVzW1wicm93fHRhYmxlXCJdLmluZGV4O1xuICAgIGxldCBwcm92ZW5hbmNlUmVtb3ZlcyA9IFtdO1xuICAgIGxldCB2aXNpdGVkID0ge31cbiAgICBmb3IobGV0IGpvaW4gb2YgdGhpcy5qb2lucykge1xuICAgICAgbGV0IGNoYW5nZSA9IGNoYW5nZXNbam9pbi50YWJsZV07XG4gICAgICBpZighdmlzaXRlZFtqb2luLnRhYmxlXSAmJiBjaGFuZ2UgJiYgY2hhbmdlLnJlbW92ZXMubGVuZ3RoKSB7XG4gICAgICAgIHZpc2l0ZWRbam9pbi50YWJsZV0gPSB0cnVlO1xuICAgICAgICBmb3IobGV0IHJlbW92ZSBvZiBjaGFuZ2UucmVtb3Zlcykge1xuICAgICAgICAgIGxldCBwcm92ZW5hbmNlcyA9IHNvdXJjZVJvd0xvb2t1cFtqb2luLnRhYmxlICsgJ3wnICsgcmVtb3ZlLl9faWQgKyAnfCcgKyB0aGlzLm5hbWVdXG4gICAgICAgICAgaWYocHJvdmVuYW5jZXMpIHtcbiAgICAgICAgICAgIGZvcihsZXQgcHJvdmVuYW5jZSBvZiBwcm92ZW5hbmNlcykge1xuICAgICAgICAgICAgICBpZighdmlzaXRlZFtwcm92ZW5hbmNlW1wicm93IGluc3RhbmNlXCJdXSkge1xuICAgICAgICAgICAgICAgIHZpc2l0ZWRbcHJvdmVuYW5jZVtcInJvdyBpbnN0YW5jZVwiXV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGxldCByZWxhdGVkUHJvdmVuYW5jZSA9IHJvd0luc3RhbmNlTG9va3VwW3Byb3ZlbmFuY2VbXCJyb3cgaW5zdGFuY2VcIl0gKyAnfCcgKyBwcm92ZW5hbmNlLnRhYmxlXTtcbiAgICAgICAgICAgICAgICBmb3IobGV0IHJlbGF0ZWQgb2YgcmVsYXRlZFByb3ZlbmFuY2UpIHtcbiAgICAgICAgICAgICAgICAgIHByb3ZlbmFuY2VSZW1vdmVzLnB1c2gocmVsYXRlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJvd3NUb1Bvc3RDaGVjay5wdXNoKHByb3ZlbmFuY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBwcm92ZW5hbmNlRGlmZi5yZW1vdmVGYWN0cyhcInByb3ZlbmFuY2VcIiwgcHJvdmVuYW5jZVJlbW92ZXMpO1xuICAgIGl4ZXIuYXBwbHlEaWZmSW5jcmVtZW50YWwocHJvdmVuYW5jZURpZmYpO1xuICAgIGxldCBpc0VkYiA9IGl4ZXIuZWRiVGFibGVzO1xuICAgIGZvcihsZXQgcm93IG9mIHJvd3NUb1Bvc3RDaGVjaykge1xuICAgICAgbGV0IHN1cHBvcnRzID0gdGFibGVSb3dMb29rdXBbcm93LnJvdy5fX2lkICsgJ3wnICsgcm93LnRhYmxlXTtcbiAgICAgIGlmKCFzdXBwb3J0cyB8fCBzdXBwb3J0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmVtb3Zlcy5wdXNoKHJvdy5yb3cpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVtb3ZlcztcbiAgfVxuICBjYW5CZUluY3JlbWVudGFsKCkge1xuICAgIGlmKHRoaXMuYWdncmVnYXRlcy5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICBpZih0aGlzLnNvcnRzKSByZXR1cm4gZmFsc2U7XG4gICAgaWYodGhpcy5ncm91cHMpIHJldHVybiBmYWxzZTtcbiAgICBpZih0aGlzLmxpbWl0SW5mbykgcmV0dXJuIGZhbHNlO1xuICAgIGZvcihsZXQgam9pbiBvZiB0aGlzLmpvaW5zKSB7XG4gICAgICBpZihqb2luLm5lZ2F0ZWQpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYoIXRoaXMuam9pbnMubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgY29tcGlsZSgpIHtcbiAgICBsZXQgYXN0ID0gdGhpcy50b0FTVCgpO1xuICAgIGxldCBjb2RlID0gdGhpcy5jb21waWxlQVNUKGFzdCk7XG4gICAgdGhpcy5jb21waWxlZCA9IG5ldyBGdW5jdGlvbihcIml4ZXJcIiwgXCJRdWVyeUZ1bmN0aW9uc1wiLCBcInRhYmxlSWRcIiwgXCJyb290Um93c1wiLCBjb2RlKTtcbiAgICBpZih0aGlzLmNhbkJlSW5jcmVtZW50YWwoKSkge1xuICAgICAgdGhpcy5pbmNyZW1lbnRhbFJvd0ZpbmRlciA9IG5ldyBGdW5jdGlvbihcImNoYW5nZXNcIiwgdGhpcy5jb21waWxlSW5jcmVtZW50YWxSb3dGaW5kZXJDb2RlKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmluY3JlbWVudGFsUm93RmluZGVyID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICB0aGlzLmRpcnR5ID0gZmFsc2U7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZXhlYygpIHtcbiAgICBpZih0aGlzLmRpcnR5KSB7XG4gICAgICB0aGlzLmNvbXBpbGUoKTtcbiAgICB9XG4gICAgbGV0IHJvb3QgPSB0aGlzLmpvaW5zWzBdO1xuICAgIGxldCByb3dzO1xuICAgIGlmKHJvb3QpIHtcbiAgICAgIHJvd3MgPSB0aGlzLml4ZXIuZmluZChyb290LnRhYmxlLCByb290LmpvaW4pO1xuICAgIH0gZWxzZSB7XG4gICAgICByb3dzID0gW107XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNvbXBpbGVkKHRoaXMuaXhlciwgUXVlcnlGdW5jdGlvbnMsIHRoaXMubmFtZSwgcm93cyk7XG4gIH1cbiAgZXhlY0luY3JlbWVudGFsKGNoYW5nZXMsIHRhYmxlKToge3Byb3ZlbmFuY2U6IGFueVtdLCBhZGRzOiBhbnlbXSwgcmVtb3ZlczogYW55W119IHtcbiAgICBpZih0aGlzLmRpcnR5KSB7XG4gICAgICB0aGlzLmNvbXBpbGUoKTtcbiAgICB9XG4gICAgaWYodGhpcy5pbmNyZW1lbnRhbFJvd0ZpbmRlcikge1xuICAgICAgbGV0IHBvdGVudGlhbFJvd3MgPSB0aGlzLmluY3JlbWVudGFsUm93RmluZGVyKGNoYW5nZXMpO1xuICAgICAgLy8gaWYgdGhlIHJvb3Qgc2VsZWN0IGhhcyBzb21lIGNvbnN0YW50IGZpbHRlcnMsIHRoZW5cbiAgICAgIC8vIHRoZSBhYm92ZSByb3dzIG5lZWQgdG8gYmUgZmlsdGVyZWQgZG93biB0byBvbmx5IHRob3NlIHRoYXRcbiAgICAgIC8vIG1hdGNoLlxuICAgICAgbGV0IHJvd3MgPSBbXTtcbiAgICAgIGxldCByb290ID0gdGhpcy5qb2luc1swXTtcbiAgICAgIGxldCByb290S2V5cyA9IE9iamVjdC5rZXlzKHJvb3Quam9pbik7XG4gICAgICBpZihyb290S2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJvd0xvb3A6IGZvcihsZXQgcm93IG9mIHBvdGVudGlhbFJvd3MpIHtcbiAgICAgICAgICBmb3IobGV0IGtleSBvZiByb290S2V5cykge1xuICAgICAgICAgICAgaWYocm93W2tleV0gIT09IHJvb3Quam9pbltrZXldKSBjb250aW51ZSByb3dMb29wO1xuICAgICAgICAgIH1cbiAgICAgICAgICByb3dzLnB1c2gocm93KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcm93cyA9IHBvdGVudGlhbFJvd3M7XG4gICAgICB9XG4gICAgICBsZXQgcmVzdWx0cyA9IHRoaXMuY29tcGlsZWQodGhpcy5peGVyLCBRdWVyeUZ1bmN0aW9ucywgdGhpcy5uYW1lLCByb3dzKTtcbiAgICAgIGxldCBhZGRzID0gW107XG4gICAgICBsZXQgcHJldkhhc2hlcyA9IHRhYmxlLmZhY3RIYXNoO1xuICAgICAgbGV0IHByZXZLZXlzID0gT2JqZWN0LmtleXMocHJldkhhc2hlcyk7XG4gICAgICBsZXQgc3VnZ2VzdGVkUmVtb3ZlcyA9IHRoaXMuaW5jcmVtZW50YWxSZW1vdmUoY2hhbmdlcyk7XG4gICAgICBsZXQgcmVhbERpZmYgPSBkaWZmQWRkc0FuZFJlbW92ZXMocmVzdWx0cy5yZXN1bHRzLCBzdWdnZXN0ZWRSZW1vdmVzKTtcbiAgICAgIGZvcihsZXQgcmVzdWx0IG9mIHJlYWxEaWZmLmFkZHMpIHtcbiAgICAgICAgbGV0IGlkID0gcmVzdWx0Ll9faWQ7XG4gICAgICAgIGlmKHByZXZIYXNoZXNbaWRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBhZGRzLnB1c2gocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IGRpZmYgPSB0aGlzLml4ZXIuZGlmZigpO1xuICAgICAgZGlmZi5hZGRNYW55KFwicHJvdmVuYW5jZVwiLCByZXN1bHRzLnByb3ZlbmFuY2UpO1xuICAgICAgdGhpcy5peGVyLmFwcGx5RGlmZkluY3JlbWVudGFsKGRpZmYpO1xuICAgICAgLy8gY29uc29sZS5sb2coXCJJTkMgUFJPViBESUZGXCIsIHRoaXMubmFtZSwgZGlmZi5sZW5ndGgpO1xuICAgICAgcmV0dXJuIHtwcm92ZW5hbmNlOiByZXN1bHRzLnByb3ZlbmFuY2UsIGFkZHMsIHJlbW92ZXM6IHJlYWxEaWZmLnJlbW92ZXN9O1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgcmVzdWx0cyA9IHRoaXMuZXhlYygpO1xuICAgICAgbGV0IGFkZHMgPSBbXTtcbiAgICAgIGxldCByZW1vdmVzID0gW107XG4gICAgICBsZXQgcHJldkhhc2hlcyA9IHRhYmxlLmZhY3RIYXNoO1xuICAgICAgbGV0IHByZXZLZXlzID0gT2JqZWN0LmtleXMocHJldkhhc2hlcyk7XG4gICAgICBsZXQgbmV3SGFzaGVzID0ge307XG4gICAgICBmb3IobGV0IHJlc3VsdCBvZiByZXN1bHRzLnJlc3VsdHMpIHtcbiAgICAgICAgbGV0IGlkID0gcmVzdWx0Ll9faWQ7XG4gICAgICAgIG5ld0hhc2hlc1tpZF0gPSByZXN1bHQ7XG4gICAgICAgIGlmKHByZXZIYXNoZXNbaWRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBhZGRzLnB1c2gocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yKGxldCBoYXNoIG9mIHByZXZLZXlzKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IG5ld0hhc2hlc1toYXNoXTtcbiAgICAgICAgaWYodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICByZW1vdmVzLnB1c2gocHJldkhhc2hlc1toYXNoXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxldCByZWFsRGlmZiA9IGRpZmZBZGRzQW5kUmVtb3ZlcyhhZGRzLCByZW1vdmVzKTtcbiAgICAgIGxldCBkaWZmID0gdGhpcy5peGVyLmRpZmYoKTtcbiAgICAgIGRpZmYucmVtb3ZlKFwicHJvdmVuYW5jZVwiLCB7dGFibGU6IHRoaXMubmFtZX0pO1xuICAgICAgZGlmZi5hZGRNYW55KFwicHJvdmVuYW5jZVwiLCByZXN1bHRzLnByb3ZlbmFuY2UpO1xuICAgICAgdGhpcy5peGVyLmFwcGx5RGlmZkluY3JlbWVudGFsKGRpZmYpO1xuICAgICAgLy8gY29uc29sZS5sb2coXCJGVUxMIFBST1YgU0laRVwiLCB0aGlzLm5hbWUsIGRpZmYubGVuZ3RoKTtcbiAgICAgIHJldHVybiB7cHJvdmVuYW5jZTogcmVzdWx0cy5wcm92ZW5hbmNlLCBhZGRzOiByZWFsRGlmZi5hZGRzLCByZW1vdmVzOiByZWFsRGlmZi5yZW1vdmVzfTtcbiAgICB9XG4gIH1cbiAgZGVidWcoKSB7XG4gICAgY29uc29sZS5sb2codGhpcy5jb21waWxlQVNUKHRoaXMudG9BU1QoKSkpO1xuICAgIGNvbnNvbGUudGltZShcImV4ZWNcIik7XG4gICAgdmFyIHJlc3VsdHMgPSB0aGlzLmV4ZWMoKTtcbiAgICBjb25zb2xlLnRpbWVFbmQoXCJleGVjXCIpO1xuICAgIGNvbnNvbGUubG9nKHJlc3VsdHMpO1xuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBVbmlvbiB7XG4gIG5hbWU7XG4gIHRhYmxlcztcbiAgc291cmNlcztcbiAgaXNTdGF0ZWZ1bDtcbiAgaGFzaGVyO1xuICBkaXJ0eTtcbiAgcHJldjtcbiAgY29tcGlsZWQ7XG4gIGl4ZXI7XG4gIGNvbnN0cnVjdG9yKGl4ZXIsIG5hbWUgPSBcInVua25vd25cIikge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5peGVyID0gaXhlcjtcbiAgICB0aGlzLnRhYmxlcyA9IFtdO1xuICAgIHRoaXMuc291cmNlcyA9IFtdO1xuICAgIHRoaXMuaXNTdGF0ZWZ1bCA9IGZhbHNlO1xuICAgIHRoaXMucHJldiA9IHtyZXN1bHRzOiBbXSwgaGFzaGVzOiB7fX07XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gIH1cbiAgY2hhbmdlc2V0KGl4ZXI6SW5kZXhlcikge1xuICAgIGxldCBkaWZmID0gaXhlci5kaWZmKCk7XG4gICAgZGlmZi5hZGQoXCJ2aWV3XCIsIHt2aWV3OiB0aGlzLm5hbWUsIGtpbmQ6IFwidW5pb25cIn0pO1xuICAgIGZvcihsZXQgc291cmNlIG9mIHRoaXMuc291cmNlcykge1xuICAgICAgaWYoc291cmNlLnR5cGUgPT09IFwiK1wiKSB7XG4gICAgICAgIGxldCBhY3Rpb24gPSB1dWlkKCk7XG4gICAgICAgIGRpZmYuYWRkKFwiYWN0aW9uXCIsIHt2aWV3OiB0aGlzLm5hbWUsIGFjdGlvbiwga2luZDogXCJ1bmlvblwiLCAgaXg6IDB9KTtcbiAgICAgICAgZGlmZi5hZGQoXCJhY3Rpb24gc291cmNlXCIsIHthY3Rpb24sIFwic291cmNlIHZpZXdcIjogc291cmNlLnRhYmxlfSk7XG4gICAgICAgIGZvcihsZXQgZmllbGQgaW4gc291cmNlLm1hcHBpbmcpIHtcbiAgICAgICAgICBsZXQgbWFwcGVkID0gc291cmNlLm1hcHBpbmdbZmllbGRdO1xuICAgICAgICAgIGlmKG1hcHBlZC5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIGRpZmYuYWRkKFwiYWN0aW9uIG1hcHBpbmdcIiwge2FjdGlvbiwgZnJvbTogZmllbGQsIFwidG8gc291cmNlXCI6IHNvdXJjZS50YWJsZSwgXCJ0byBmaWVsZFwiOiBtYXBwZWRbMF19KVxuICAgICAgICAgIGVsc2UgZGlmZi5hZGQoXCJhY3Rpb24gbWFwcGluZyBjb25zdGFudFwiLCB7YWN0aW9uLCBmcm9tOiBmaWVsZCwgdmFsdWU6IG1hcHBlZH0pO1xuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gc291cmNlIHR5cGU6ICcke3NvdXJjZS50eXBlfSdgKTtcbiAgICB9XG4gICAgcmV0dXJuIGRpZmY7XG4gIH1cbiAgZW5zdXJlSGFzaGVyKG1hcHBpbmcpIHtcbiAgICBpZighdGhpcy5oYXNoZXIpIHtcbiAgICAgIHRoaXMuaGFzaGVyID0gZ2VuZXJhdGVTdHJpbmdGbihPYmplY3Qua2V5cyhtYXBwaW5nKSk7XG4gICAgfVxuICB9XG4gIHVuaW9uKHRhYmxlTmFtZSwgbWFwcGluZykge1xuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICAgIHRoaXMuZW5zdXJlSGFzaGVyKG1hcHBpbmcpO1xuICAgIHRoaXMudGFibGVzLnB1c2godGFibGVOYW1lKTtcbiAgICB0aGlzLnNvdXJjZXMucHVzaCh7dHlwZTogXCIrXCIsIHRhYmxlOiB0YWJsZU5hbWUsIG1hcHBpbmd9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICB0b0FTVCgpIHtcbiAgICBsZXQgcm9vdCA9IHt0eXBlOiBcInVuaW9uXCIsIGNoaWxkcmVuOiBbXX07XG4gICAgcm9vdC5jaGlsZHJlbi5wdXNoKHt0eXBlOiBcImRlY2xhcmF0aW9uXCIsIHZhcjogXCJyZXN1bHRzXCIsIHZhbHVlOiBcIltdXCJ9KTtcbiAgICByb290LmNoaWxkcmVuLnB1c2goe3R5cGU6IFwiZGVjbGFyYXRpb25cIiwgdmFyOiBcInByb3ZlbmFuY2VcIiwgdmFsdWU6IFwiW11cIn0pO1xuXG4gICAgbGV0IGhhc2hlc1ZhbHVlID0gXCJ7fVwiO1xuICAgIGlmKHRoaXMuaXNTdGF0ZWZ1bCkge1xuICAgICAgICBoYXNoZXNWYWx1ZSA9IFwicHJldkhhc2hlc1wiO1xuICAgIH1cbiAgICByb290LmNoaWxkcmVuLnB1c2goe3R5cGU6IFwiZGVjbGFyYXRpb25cIiwgdmFyOiBcImhhc2hlc1wiLCB2YWx1ZTogaGFzaGVzVmFsdWV9KTtcblxuICAgIGxldCBpeCA9IDA7XG4gICAgZm9yKGxldCBzb3VyY2Ugb2YgdGhpcy5zb3VyY2VzKSB7XG4gICAgICBsZXQgYWN0aW9uO1xuICAgICAgaWYoc291cmNlLnR5cGUgPT09IFwiK1wiKSB7XG4gICAgICAgIGFjdGlvbiA9IHt0eXBlOiBcInJlc3VsdFwiLCBpeCwgY2hpbGRyZW46IFt7dHlwZTogXCJwcm92ZW5hbmNlXCIsIHNvdXJjZSwgaXh9XX07XG4gICAgICB9XG4gICAgICByb290LmNoaWxkcmVuLnB1c2goe1xuICAgICAgICB0eXBlOiBcInNvdXJjZVwiLFxuICAgICAgICBpeCxcbiAgICAgICAgdGFibGU6IHNvdXJjZS50YWJsZSxcbiAgICAgICAgbWFwcGluZzogc291cmNlLm1hcHBpbmcsXG4gICAgICAgIGNoaWxkcmVuOiBbYWN0aW9uXSxcbiAgICAgIH0pO1xuICAgICAgaXgrKztcbiAgICB9XG4gICAgcm9vdC5jaGlsZHJlbi5wdXNoKHt0eXBlOiBcImhhc2hlc1RvUmVzdWx0c1wifSk7XG4gICAgcm9vdC5jaGlsZHJlbi5wdXNoKHt0eXBlOiBcInJldHVyblwiLCB2YXJzOiBbXCJyZXN1bHRzXCIsIFwiaGFzaGVzXCIsIFwicHJvdmVuYW5jZVwiXX0pO1xuICAgIHJldHVybiByb290O1xuICB9XG4gIGNvbXBpbGVBU1Qocm9vdCkge1xuICAgIGxldCBjb2RlID0gXCJcIjtcbiAgICBsZXQgdHlwZSA9IHJvb3QudHlwZTtcbiAgICBzd2l0Y2godHlwZSkge1xuICAgICAgY2FzZSBcInVuaW9uXCI6XG4gICAgICAgIGZvcih2YXIgY2hpbGQgb2Ygcm9vdC5jaGlsZHJlbikge1xuICAgICAgICAgIGNvZGUgKz0gdGhpcy5jb21waWxlQVNUKGNoaWxkKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJkZWNsYXJhdGlvblwiOlxuICAgICAgICBjb2RlICs9IGB2YXIgJHtyb290LnZhcn0gPSAke3Jvb3QudmFsdWV9O1xcbmA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInNvdXJjZVwiOlxuICAgICAgICB2YXIgaXggPSByb290Lml4O1xuICAgICAgICBsZXQgbWFwcGluZ0l0ZW1zID0gW107XG4gICAgICAgIGZvcihsZXQga2V5IGluIHJvb3QubWFwcGluZykge1xuICAgICAgICAgIGxldCBtYXBwaW5nID0gcm9vdC5tYXBwaW5nW2tleV07XG4gICAgICAgICAgbGV0IHZhbHVlO1xuICAgICAgICAgIGlmKG1hcHBpbmcuY29uc3RydWN0b3IgPT09IEFycmF5ICYmIG1hcHBpbmcubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBsZXQgW2ZpZWxkXSA9IG1hcHBpbmc7XG4gICAgICAgICAgICB2YWx1ZSA9IGBzb3VyY2VSb3cke2l4fVsnJHtmaWVsZH0nXWA7XG4gICAgICAgICAgfSBlbHNlIGlmKG1hcHBpbmcuY29uc3RydWN0b3IgPT09IEFycmF5ICYmIG1hcHBpbmcubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICBsZXQgW18sIGZpZWxkXSA9IG1hcHBpbmc7XG4gICAgICAgICAgICB2YWx1ZSA9IGBzb3VyY2VSb3cke2l4fVsnJHtmaWVsZH0nXWA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhbHVlID0gSlNPTi5zdHJpbmdpZnkobWFwcGluZyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1hcHBpbmdJdGVtcy5wdXNoKGAnJHtrZXl9JzogJHt2YWx1ZX1gKVxuICAgICAgICB9XG4gICAgICAgIGNvZGUgKz0gYHZhciBzb3VyY2VSb3dzJHtpeH0gPSBjaGFuZ2VzWycke3Jvb3QudGFibGUucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpfSddO1xcbmA7XG4gICAgICAgIGNvZGUgKz0gYGZvcih2YXIgcm93SXgke2l4fSA9IDAsIHJvd3NMZW4ke2l4fSA9IHNvdXJjZVJvd3Mke2l4fS5sZW5ndGg7IHJvd0l4JHtpeH0gPCByb3dzTGVuJHtpeH07IHJvd0l4JHtpeH0rKykge1xcbmBcbiAgICAgICAgY29kZSArPSBgdmFyIHNvdXJjZVJvdyR7aXh9ID0gc291cmNlUm93cyR7aXh9W3Jvd0l4JHtpeH1dO1xcbmA7XG4gICAgICAgIGNvZGUgKz0gYHZhciBtYXBwZWRSb3cke2l4fSA9IHske21hcHBpbmdJdGVtcy5qb2luKFwiLCBcIil9fTtcXG5gXG4gICAgICAgIGZvcih2YXIgY2hpbGQgb2Ygcm9vdC5jaGlsZHJlbikge1xuICAgICAgICAgIGNvZGUgKz0gdGhpcy5jb21waWxlQVNUKGNoaWxkKTtcbiAgICAgICAgfVxuICAgICAgICBjb2RlICs9IFwifVxcblwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJyZXN1bHRcIjpcbiAgICAgICAgdmFyIGl4ID0gcm9vdC5peDtcbiAgICAgICAgY29kZSArPSBgdmFyIGhhc2gke2l4fSA9IGhhc2hlcihtYXBwZWRSb3cke2l4fSk7XFxuYDtcbiAgICAgICAgY29kZSArPSBgbWFwcGVkUm93JHtpeH0uX19pZCA9IGhhc2gke2l4fTtcXG5gO1xuICAgICAgICBjb2RlICs9IGBoYXNoZXNbaGFzaCR7aXh9XSA9IG1hcHBlZFJvdyR7aXh9O1xcbmA7XG4gICAgICAgIGZvcih2YXIgY2hpbGQgb2Ygcm9vdC5jaGlsZHJlbikge1xuICAgICAgICAgIGNvZGUgKz0gdGhpcy5jb21waWxlQVNUKGNoaWxkKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJyZW1vdmVSZXN1bHRcIjpcbiAgICAgICAgdmFyIGl4ID0gcm9vdC5peDtcbiAgICAgICAgY29kZSArPSBgaGFzaGVzW2hhc2hlcihtYXBwZWRSb3cke2l4fSldID0gZmFsc2U7XFxuYDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiaGFzaGVzVG9SZXN1bHRzXCI6XG4gICAgICAgIGNvZGUgKz0gXCJ2YXIgaGFzaEtleXMgPSBPYmplY3Qua2V5cyhoYXNoZXMpO1xcblwiO1xuICAgICAgICBjb2RlICs9IFwiZm9yKHZhciBoYXNoS2V5SXggPSAwLCBoYXNoS2V5TGVuID0gaGFzaEtleXMubGVuZ3RoOyBoYXNoS2V5SXggPCBoYXNoS2V5TGVuOyBoYXNoS2V5SXgrKykge1xcblwiO1xuICAgICAgICBjb2RlICs9IFwidmFyIGN1ckhhc2hLZXkgPSBoYXNoS2V5c1toYXNoS2V5SXhdO1wiXG4gICAgICAgIGNvZGUgKz0gXCJ2YXIgdmFsdWUgPSBoYXNoZXNbY3VySGFzaEtleV07XFxuXCI7XG4gICAgICAgIGNvZGUgKz0gXCJpZih2YWx1ZSAhPT0gZmFsc2UpIHtcXG5cIjtcbiAgICAgICAgY29kZSArPSBcInZhbHVlLl9faWQgPSBjdXJIYXNoS2V5O1xcblwiO1xuICAgICAgICBjb2RlICs9IFwicmVzdWx0cy5wdXNoKHZhbHVlKTtcXG5cIjtcbiAgICAgICAgY29kZSArPSBcIn1cXG5cIjtcbiAgICAgICAgY29kZSArPSBcIn1cXG5cIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwicHJvdmVuYW5jZVwiOlxuICAgICAgICB2YXIgc291cmNlID0gcm9vdC5zb3VyY2UudGFibGU7XG4gICAgICAgIHZhciBpeCA9IHJvb3QuaXg7XG4gICAgICAgIHZhciBwcm92ZW5hbmNlID0gXCJ2YXIgcHJvdmVuYW5jZV9faWQgPSAnJztcXG5cIjtcbiAgICAgICAgcHJvdmVuYW5jZSArPSBgcHJvdmVuYW5jZV9faWQgPSAnJHt0aGlzLm5hbWUucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpfXwnICsgbWFwcGVkUm93JHtpeH0uX19pZCArICd8JyArIHJvd0luc3RhbmNlICsgJ3wke3NvdXJjZS5yZXBsYWNlKC8nL2csIFwiXFxcXCdcIil9fCcgKyBzb3VyY2VSb3cke2l4fS5fX2lkOyBcXG5gO1xuICAgICAgICBwcm92ZW5hbmNlICs9IGBwcm92ZW5hbmNlLnB1c2goe3RhYmxlOiAnJHt0aGlzLm5hbWUucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpfScsIHJvdzogbWFwcGVkUm93JHtpeH0sIFwicm93IGluc3RhbmNlXCI6IHJvd0luc3RhbmNlLCBzb3VyY2U6IFwiJHtzb3VyY2UucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpfVwiLCBcInNvdXJjZSByb3dcIjogc291cmNlUm93JHtpeH19KTtcXG5gO1xuICAgICAgICBjb2RlID0gYHZhciByb3dJbnN0YW5jZSA9IFwiJHtzb3VyY2UucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpfXxcIiArIG1hcHBlZFJvdyR7aXh9Ll9faWQ7XG4gICAgICAgICR7cHJvdmVuYW5jZX1gO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJyZXR1cm5cIjpcbiAgICAgICAgY29kZSArPSBgcmV0dXJuIHske3Jvb3QudmFycy5tYXAoKG5hbWUpID0+IGAke25hbWV9OiAke25hbWV9YCkuam9pbihcIiwgXCIpfX07YDtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBjb2RlO1xuICB9XG4gIGNvbXBpbGUoKSB7XG4gICAgbGV0IGFzdCA9IHRoaXMudG9BU1QoKTtcbiAgICBsZXQgY29kZSA9IHRoaXMuY29tcGlsZUFTVChhc3QpO1xuICAgIHRoaXMuY29tcGlsZWQgPSBuZXcgRnVuY3Rpb24oXCJpeGVyXCIsIFwiaGFzaGVyXCIsIFwiY2hhbmdlc1wiLCBjb2RlKTtcbiAgICB0aGlzLmRpcnR5ID0gZmFsc2U7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZGVidWcoKSB7XG4gICAgbGV0IGNvZGUgPSB0aGlzLmNvbXBpbGVBU1QodGhpcy50b0FTVCgpKTtcbiAgICBjb25zb2xlLmxvZyhjb2RlKTtcbiAgICByZXR1cm4gY29kZTtcbiAgfVxuICBleGVjKCkge1xuICAgIGlmKHRoaXMuZGlydHkpIHtcbiAgICAgIHRoaXMuY29tcGlsZSgpO1xuICAgIH1cbiAgICBsZXQgY2hhbmdlcyA9IHt9XG4gICAgZm9yKGxldCBzb3VyY2Ugb2YgdGhpcy5zb3VyY2VzKSB7XG4gICAgICBjaGFuZ2VzW3NvdXJjZS50YWJsZV0gPSB0aGlzLml4ZXIudGFibGUoc291cmNlLnRhYmxlKS50YWJsZTtcbiAgICB9XG4gICAgbGV0IHJlc3VsdHMgPSB0aGlzLmNvbXBpbGVkKHRoaXMuaXhlciwgdGhpcy5oYXNoZXIsIGNoYW5nZXMpO1xuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG4gIGluY3JlbWVudGFsUmVtb3ZlKGNoYW5nZXMpIHtcbiAgICBsZXQgaXhlciA9IHRoaXMuaXhlcjtcbiAgICBsZXQgcm93c1RvUG9zdENoZWNrID0gW107XG4gICAgbGV0IHByb3ZlbmFuY2VEaWZmID0gdGhpcy5peGVyLmRpZmYoKTtcbiAgICBsZXQgcmVtb3ZlcyA9IFtdO1xuICAgIGxldCBpbmRleGVzID0gaXhlci50YWJsZShcInByb3ZlbmFuY2VcIikuaW5kZXhlcztcbiAgICBsZXQgc291cmNlUm93TG9va3VwID0gaW5kZXhlc1tcInNvdXJjZXxzb3VyY2Ugcm93fHRhYmxlXCJdLmluZGV4O1xuICAgIGxldCByb3dJbnN0YW5jZUxvb2t1cCA9IGluZGV4ZXNbXCJyb3cgaW5zdGFuY2V8dGFibGVcIl0uaW5kZXg7XG4gICAgbGV0IHRhYmxlUm93TG9va3VwID0gaW5kZXhlc1tcInJvd3x0YWJsZVwiXS5pbmRleDtcbiAgICBsZXQgcHJvdmVuYW5jZVJlbW92ZXMgPSBbXTtcbiAgICBsZXQgdmlzaXRlZCA9IHt9XG4gICAgZm9yKGxldCBzb3VyY2Ugb2YgdGhpcy5zb3VyY2VzKSB7XG4gICAgICBsZXQgY2hhbmdlID0gY2hhbmdlc1tzb3VyY2UudGFibGVdO1xuICAgICAgaWYoIXZpc2l0ZWRbc291cmNlLnRhYmxlXSAmJiBjaGFuZ2UgJiYgY2hhbmdlLnJlbW92ZXMubGVuZ3RoKSB7XG4gICAgICAgIHZpc2l0ZWRbc291cmNlLnRhYmxlXSA9IHRydWU7XG4gICAgICAgIGZvcihsZXQgcmVtb3ZlIG9mIGNoYW5nZS5yZW1vdmVzKSB7XG4gICAgICAgICAgbGV0IHByb3ZlbmFuY2VzID0gc291cmNlUm93TG9va3VwW3NvdXJjZS50YWJsZSArICd8JyArIHJlbW92ZS5fX2lkICsgJ3wnICsgdGhpcy5uYW1lXVxuICAgICAgICAgIGlmKHByb3ZlbmFuY2VzKSB7XG4gICAgICAgICAgICBmb3IobGV0IHByb3ZlbmFuY2Ugb2YgcHJvdmVuYW5jZXMpIHtcbiAgICAgICAgICAgICAgaWYoIXZpc2l0ZWRbcHJvdmVuYW5jZVtcInJvdyBpbnN0YW5jZVwiXV0pIHtcbiAgICAgICAgICAgICAgICB2aXNpdGVkW3Byb3ZlbmFuY2VbXCJyb3cgaW5zdGFuY2VcIl1dID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBsZXQgcmVsYXRlZFByb3ZlbmFuY2UgPSByb3dJbnN0YW5jZUxvb2t1cFtwcm92ZW5hbmNlW1wicm93IGluc3RhbmNlXCJdICsgJ3wnICsgcHJvdmVuYW5jZS50YWJsZV07XG4gICAgICAgICAgICAgICAgZm9yKGxldCByZWxhdGVkIG9mIHJlbGF0ZWRQcm92ZW5hbmNlKSB7XG4gICAgICAgICAgICAgICAgICBwcm92ZW5hbmNlUmVtb3Zlcy5wdXNoKHJlbGF0ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByb3dzVG9Qb3N0Q2hlY2sucHVzaChwcm92ZW5hbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcHJvdmVuYW5jZURpZmYucmVtb3ZlRmFjdHMoXCJwcm92ZW5hbmNlXCIsIHByb3ZlbmFuY2VSZW1vdmVzKTtcbiAgICBpeGVyLmFwcGx5RGlmZkluY3JlbWVudGFsKHByb3ZlbmFuY2VEaWZmKTtcbiAgICBsZXQgaXNFZGIgPSBpeGVyLmVkYlRhYmxlcztcbiAgICBmb3IobGV0IHJvdyBvZiByb3dzVG9Qb3N0Q2hlY2spIHtcbiAgICAgIGxldCBzdXBwb3J0cyA9IHRhYmxlUm93TG9va3VwW3Jvdy5yb3cuX19pZCArICd8JyArIHJvdy50YWJsZV07XG4gICAgICBpZighc3VwcG9ydHMgfHwgc3VwcG9ydHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJlbW92ZXMucHVzaChyb3cucm93KTtcbiAgICAgIH0gZWxzZSBpZih0aGlzLnNvdXJjZXMubGVuZ3RoID4gMikge1xuICAgICAgICBsZXQgc3VwcG9ydHNUb1JlbW92ZSA9IFtdO1xuICAgICAgICAvLyBvdGhlcndpc2UgaWYgdGhlcmUgYXJlIHN1cHBvcnRzLCB0aGVuIHdlIG5lZWQgdG8gd2FsayB0aGUgc3VwcG9ydFxuICAgICAgICAvLyBncmFwaCBiYWNrd2FyZHMgYW5kIG1ha2Ugc3VyZSBldmVyeSBzdXBwb3J0aW5nIHJvdyB0ZXJtaW5hdGVzIGF0IGFuXG4gICAgICAgIC8vIGVkYiB2YWx1ZS4gSWYgbm90LCB0aGVuIHRoYXQgc3VwcG9ydCBhbHNvIG5lZWRzIHRvIGJlIHJlbW92ZWRcbiAgICAgICAgZm9yKGxldCBzdXBwb3J0IG9mIHN1cHBvcnRzKSB7XG4gICAgICAgICAgLy8gaWYgdGhlIHN1cHBvcnQgaXMgYWxyZWFkeSBhbiBlZGIsIHdlJ3JlIGdvb2QgdG8gZ28uXG4gICAgICAgICAgaWYoaXNFZGJbc3VwcG9ydC5zb3VyY2VdKSBjb250aW51ZTtcbiAgICAgICAgICBpZighdGFibGVSb3dMb29rdXBbc3VwcG9ydFtcInNvdXJjZSByb3dcIl0uX19pZCArICd8JyArIHN1cHBvcnQuc291cmNlXSkge1xuICAgICAgICAgICAgc3VwcG9ydHNUb1JlbW92ZS5wdXNoKHN1cHBvcnQpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGdldCBhbGwgdGhlIHN1cHBvcnRzIGZvciB0aGlzIHN1cHBvcnRcbiAgICAgICAgICBsZXQgbm9kZXMgPSB0YWJsZVJvd0xvb2t1cFtzdXBwb3J0W1wic291cmNlIHJvd1wiXS5fX2lkICsgJ3wnICsgc3VwcG9ydC5zb3VyY2VdLnNsaWNlKCk7XG4gICAgICAgICAgbGV0IG5vZGVJeCA9IDA7XG4gICAgICAgICAgLy8gaXRlcmF0ZSB0aHJvdWdoIGFsbCB0aGUgbm9kZXMsIGlmIHRoZXkgaGF2ZSBmdXJ0aGVyIHN1cHBvcnRzIHRoZW5cbiAgICAgICAgICAvLyBhc3N1bWUgdGhpcyBub2RlIGlzIG9rIGFuZCBhZGQgdGhvc2Ugc3VwcG9ydHMgdG8gdGhlIGxpc3Qgb2Ygbm9kZXMgdG9cbiAgICAgICAgICAvLyBjaGVjay4gSWYgd2UgcnVuIGludG8gYSBub2RlIHdpdGggbm8gc3VwcG9ydHMgaXQgbXVzdCBlaXRoZXIgYmUgYW4gZWRiXG4gICAgICAgICAgLy8gb3IgaXQncyB1bnN1cHBvcnRlZCBhbmQgdGhpcyByb3cgaW5zdGFuY2UgbmVlZHMgdG8gYmUgcmVtb3ZlZC5cbiAgICAgICAgICB3aGlsZShub2RlSXggPCBub2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCBub2RlID0gbm9kZXNbbm9kZUl4XTtcbiAgICAgICAgICAgIGlmKGlzRWRiW25vZGUuc291cmNlXSkge1xuICAgICAgICAgICAgICBub2RlSXgrKztcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbm9kZVN1cHBvcnRzID0gdGFibGVSb3dMb29rdXBbbm9kZVtcInNvdXJjZSByb3dcIl0uX19pZCArICd8JyArIG5vZGUuc291cmNlXTtcbiAgICAgICAgICAgIGlmKCFub2RlU3VwcG9ydHMgfHwgbm9kZVN1cHBvcnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICBzdXBwb3J0c1RvUmVtb3ZlLnB1c2goc3VwcG9ydCk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZm9yKGxldCBub2RlU3VwcG9ydCBvZiBub2RlU3VwcG9ydHMpIHtcbiAgICAgICAgICAgICAgICBub2Rlcy5wdXNoKG5vZGVTdXBwb3J0KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBub2RlSXgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYoc3VwcG9ydHNUb1JlbW92ZS5sZW5ndGgpIHtcbiAgICAgICAgICAvLyB3ZSBuZWVkIHRvIHJlbW92ZSBhbGwgdGhlIHN1cHBvcnRzXG4gICAgICAgICAgbGV0IHByb3ZlbmFuY2VSZW1vdmVzID0gW107XG4gICAgICAgICAgZm9yKGxldCBzdXBwb3J0IG9mIHN1cHBvcnRzVG9SZW1vdmUpIHtcbiAgICAgICAgICAgIGxldCByZWxhdGVkUHJvdmVuYW5jZSA9IHJvd0luc3RhbmNlTG9va3VwW3N1cHBvcnRbXCJyb3cgaW5zdGFuY2VcIl0gKyAnfCcgKyBzdXBwb3J0LnRhYmxlXTtcbiAgICAgICAgICAgIGZvcihsZXQgcmVsYXRlZCBvZiByZWxhdGVkUHJvdmVuYW5jZSkge1xuICAgICAgICAgICAgICBwcm92ZW5hbmNlUmVtb3Zlcy5wdXNoKHJlbGF0ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgZGlmZiA9IGl4ZXIuZGlmZigpO1xuICAgICAgICAgIGRpZmYucmVtb3ZlRmFjdHMoXCJwcm92ZW5hbmNlXCIsIHByb3ZlbmFuY2VSZW1vdmVzKTtcbiAgICAgICAgICBpeGVyLmFwcGx5RGlmZkluY3JlbWVudGFsKGRpZmYpO1xuICAgICAgICAgIC8vIG5vdyB0aGF0IGFsbCB0aGUgdW5zdXBwb3J0ZWQgcHJvdmVuYW5jZXMgaGF2ZSBiZWVuIHJlbW92ZWQsIGNoZWNrIGlmIHRoZXJlJ3MgYW55dGhpbmdcbiAgICAgICAgICAvLyBsZWZ0LlxuICAgICAgICAgIGlmKCF0YWJsZVJvd0xvb2t1cFtyb3cucm93Ll9faWQgKyAnfCcgKyByb3cudGFibGVdIHx8IHRhYmxlUm93TG9va3VwW3Jvdy5yb3cuX19pZCArICd8JyArIHJvdy50YWJsZV0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZW1vdmVzLnB1c2gocm93LnJvdyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZW1vdmVzO1xuICB9XG4gIGV4ZWNJbmNyZW1lbnRhbChjaGFuZ2VzLCB0YWJsZSk6IHtwcm92ZW5hbmNlOiBhbnlbXSwgYWRkczogYW55W10sIHJlbW92ZXM6IGFueVtdfSB7XG4gICAgaWYodGhpcy5kaXJ0eSkge1xuICAgICAgdGhpcy5jb21waWxlKCk7XG4gICAgfVxuXG4gICAgbGV0IHNvdXJjZUNoYW5nZXMgPSB7fVxuICAgIGZvcihsZXQgc291cmNlIG9mIHRoaXMuc291cmNlcykge1xuICAgICAgbGV0IHZhbHVlO1xuICAgICAgaWYoIWNoYW5nZXNbc291cmNlLnRhYmxlXSkge1xuICAgICAgICB2YWx1ZSA9IFtdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSBjaGFuZ2VzW3NvdXJjZS50YWJsZV0uYWRkcztcbiAgICAgIH1cbiAgICAgIHNvdXJjZUNoYW5nZXNbc291cmNlLnRhYmxlXSA9IHZhbHVlO1xuICAgIH1cbiAgICBsZXQgcmVzdWx0cyA9IHRoaXMuY29tcGlsZWQodGhpcy5peGVyLCB0aGlzLmhhc2hlciwgc291cmNlQ2hhbmdlcyk7XG4gICAgbGV0IGFkZHMgPSBbXTtcbiAgICBsZXQgcHJldkhhc2hlcyA9IHRhYmxlLmZhY3RIYXNoO1xuICAgIGxldCBwcmV2S2V5cyA9IE9iamVjdC5rZXlzKHByZXZIYXNoZXMpO1xuICAgIGxldCBzdWdnZXN0ZWRSZW1vdmVzID0gdGhpcy5pbmNyZW1lbnRhbFJlbW92ZShjaGFuZ2VzKTtcbiAgICBsZXQgcmVhbERpZmYgPSBkaWZmQWRkc0FuZFJlbW92ZXMocmVzdWx0cy5yZXN1bHRzLCBzdWdnZXN0ZWRSZW1vdmVzKTtcbiAgICBmb3IobGV0IHJlc3VsdCBvZiByZWFsRGlmZi5hZGRzKSB7XG4gICAgICBsZXQgaWQgPSByZXN1bHQuX19pZDtcbiAgICAgIGlmKHByZXZIYXNoZXNbaWRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYWRkcy5wdXNoKHJlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBkaWZmID0gdGhpcy5peGVyLmRpZmYoKTtcbiAgICBkaWZmLmFkZE1hbnkoXCJwcm92ZW5hbmNlXCIsIHJlc3VsdHMucHJvdmVuYW5jZSk7XG4gICAgdGhpcy5peGVyLmFwcGx5RGlmZkluY3JlbWVudGFsKGRpZmYpO1xuICAgIHJldHVybiB7cHJvdmVuYW5jZTogcmVzdWx0cy5wcm92ZW5hbmNlLCBhZGRzLCByZW1vdmVzOiByZWFsRGlmZi5yZW1vdmVzfTtcbiAgfVxufVxuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQnVpbHRpbiBQcmltaXRpdmVzXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5ydW50aW1lLmRlZmluZShcImNvdW50XCIsIHthZ2dyZWdhdGU6IHRydWUsIHJlc3VsdDogXCJjb3VudFwifSwgZnVuY3Rpb24ocHJldikge1xuICBpZighcHJldi5jb3VudCkge1xuICAgIHByZXYuY291bnQgPSAwO1xuICB9XG4gIHByZXYuY291bnQrKztcbiAgcmV0dXJuIHByZXY7XG59KTtcblxucnVudGltZS5kZWZpbmUoXCJzdW1cIiwge2FnZ3JlZ2F0ZTogdHJ1ZSwgcmVzdWx0OiBcInN1bVwifSwgZnVuY3Rpb24ocHJldiwgdmFsdWUpIHtcbiAgaWYoIXByZXYuc3VtKSB7XG4gICAgcHJldi5zdW0gPSAwO1xuICB9XG4gIHByZXYuc3VtICs9IHZhbHVlO1xuICByZXR1cm4gcHJldjtcbn0pO1xuXG5ydW50aW1lLmRlZmluZShcImF2ZXJhZ2VcIiwge2FnZ3JlZ2F0ZTogdHJ1ZSwgcmVzdWx0OiBcImF2ZXJhZ2VcIn0sIGZ1bmN0aW9uKHByZXYsIHZhbHVlKSB7XG4gIGlmKCFwcmV2LnN1bSkge1xuICAgIHByZXYuc3VtID0gMDtcbiAgICBwcmV2LmNvdW50ID0gMDtcbiAgfVxuICBwcmV2LmNvdW50Kys7XG4gIHByZXYuc3VtICs9IHZhbHVlO1xuICBwcmV2LmF2ZXJhZ2UgPSBwcmV2LnN1bSAvIHByZXYuY291bnQ7XG4gIHJldHVybiBwcmV2O1xufSk7XG5cbnJ1bnRpbWUuZGVmaW5lKFwibG93ZXJjYXNlXCIsIHtyZXN1bHQ6IFwibG93ZXJjYXNlXCJ9LCBmdW5jdGlvbih0ZXh0KSB7XG4gIGlmKHR5cGVvZiB0ZXh0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIHtyZXN1bHQ6IHRleHQudG9Mb3dlckNhc2UoKX07XG4gIH1cbiAgcmV0dXJuIHtyZXN1bHQ6IHRleHR9O1xufSlcblxucnVudGltZS5kZWZpbmUoXCI9XCIsIHtmaWx0ZXI6IHRydWUsIGludmVyc2U6IFwiIT1cIn0sIGZ1bmN0aW9uKGEsIGIpIHtcbiAgcmV0dXJuIGEgPT09IGIgPyBydW50aW1lLlNVQ0NFRUQgOiBydW50aW1lLkZBSUw7XG59KTtcblxucnVudGltZS5kZWZpbmUoXCIhPVwiLCB7ZmlsdGVyOiB0cnVlLCBpbnZlcnNlOiBcIj1cIn0sIGZ1bmN0aW9uKGEsIGIpIHtcbiAgcmV0dXJuIGEgIT09IGIgPyBydW50aW1lLlNVQ0NFRUQgOiBydW50aW1lLkZBSUw7XG59KTtcblxucnVudGltZS5kZWZpbmUoXCI+XCIsIHtmaWx0ZXI6IHRydWUsIGludmVyc2U6IFwiPD1cIn0sIGZ1bmN0aW9uKGEsIGIpIHtcbiAgcmV0dXJuIGEgPiBiID8gcnVudGltZS5TVUNDRUVEIDogcnVudGltZS5GQUlMO1xufSk7XG5cbnJ1bnRpbWUuZGVmaW5lKFwiPFwiLCB7ZmlsdGVyOiB0cnVlLCBpbnZlcnNlOiBcIj49XCJ9LCBmdW5jdGlvbihhLCBiKSB7XG4gIHJldHVybiBhIDwgYiA/IHJ1bnRpbWUuU1VDQ0VFRCA6IHJ1bnRpbWUuRkFJTDtcbn0pO1xuXG5ydW50aW1lLmRlZmluZShcIj49XCIsIHtmaWx0ZXI6IHRydWUsIGludmVyc2U6IFwiPFwifSwgZnVuY3Rpb24oYSwgYikge1xuICByZXR1cm4gYSA+PSBiID8gcnVudGltZS5TVUNDRUVEIDogcnVudGltZS5GQUlMO1xufSk7XG5cbnJ1bnRpbWUuZGVmaW5lKFwiPD1cIiwge2ZpbHRlcjogdHJ1ZSwgaW52ZXJzZTogXCI+XCJ9LCBmdW5jdGlvbihhLCBiKSB7XG4gIHJldHVybiBhIDw9IGIgPyBydW50aW1lLlNVQ0NFRUQgOiBydW50aW1lLkZBSUw7XG59KTtcblxucnVudGltZS5kZWZpbmUoXCIrXCIsIHtyZXN1bHQ6IFwicmVzdWx0XCJ9LCBmdW5jdGlvbihhLCBiKSB7XG4gIHJldHVybiB7cmVzdWx0OiBhICsgYn07XG59KTtcblxucnVudGltZS5kZWZpbmUoXCItXCIsIHtyZXN1bHQ6IFwicmVzdWx0XCJ9LCBmdW5jdGlvbihhLCBiKSB7XG4gIHJldHVybiB7cmVzdWx0OiBhIC0gYn07XG59KTtcblxucnVudGltZS5kZWZpbmUoXCIqXCIsIHtyZXN1bHQ6IFwicmVzdWx0XCJ9LCBmdW5jdGlvbihhLCBiKSB7XG4gIHJldHVybiB7cmVzdWx0OiBhICogYn07XG59KTtcblxucnVudGltZS5kZWZpbmUoXCIvXCIsIHtyZXN1bHQ6IFwicmVzdWx0XCJ9LCBmdW5jdGlvbihhLCBiKSB7XG4gIHJldHVybiB7cmVzdWx0OiBhIC8gYn07XG59KTtcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEFTVCBhbmQgY29tcGlsZXJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vIHZpZXc6IHZpZXcsIGtpbmRbdW5pb258cXVlcnl8dGFibGVdXG4vLyBhY3Rpb246IHZpZXcsIGFjdGlvbiwga2luZFtzZWxlY3R8Y2FsY3VsYXRlfHByb2plY3R8dW5pb258dW51bmlvbnxzdGF0ZWZ1bHxsaW1pdHxzb3J0fGdyb3VwfGFnZ3JlZ2F0ZV0sIGl4XG4vLyBhY3Rpb24gc291cmNlOiBhY3Rpb24sIHNvdXJjZSB2aWV3XG4vLyBhY3Rpb24gbWFwcGluZzogYWN0aW9uLCBmcm9tLCB0byBzb3VyY2UsIHRvIGZpZWxkXG4vLyBhY3Rpb24gbWFwcGluZyBjb25zdGFudDogYWN0aW9uLCBmcm9tLCB2YWx1ZVxuXG5mdW5jdGlvbiBhZGRSZWNvbXBpbGVUcmlnZ2VycyhldmUpIHtcblxuICB2YXIgcmVjb21waWxlVHJpZ2dlciA9IHtcbiAgICBleGVjOiAoaXhlcikgPT4ge1xuICAgICAgZm9yKGxldCB2aWV3IG9mIGl4ZXIuZmluZChcInZpZXdcIikpIHtcbiAgICAgICAgaWYodmlldy5raW5kID09PSBcInRhYmxlXCIpIGNvbnRpbnVlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGxldCBxdWVyeSA9IGNvbXBpbGUoaXhlciwgdmlldy52aWV3KTtcbiAgICAgICAgICBpeGVyLmFzVmlldyhxdWVyeSk7XG4gICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJCQUQgUVVFUlkgSU4gVEhFIERCIDooXCIpO1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJWaWV3IElkOiBcIiArIHZpZXcudmlldyk7XG4gICAgICAgICAgY29uc29sZS5sb2coZS5zdGFjayk7XG4gICAgICAgICAgaXhlci5hcHBseURpZmYoUXVlcnkucmVtb3ZlKHZpZXcudmlldywgaXhlcikpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuICB9XG5cbiAgZXZlLmFkZFRhYmxlKFwidmlld1wiLCBbXCJ2aWV3XCIsIFwia2luZFwiXSk7XG4gIGV2ZS5hZGRUYWJsZShcImFjdGlvblwiLCBbXCJ2aWV3XCIsIFwiYWN0aW9uXCIsIFwia2luZFwiLCBcIml4XCJdKTtcbiAgZXZlLmFkZFRhYmxlKFwiYWN0aW9uIHNvdXJjZVwiLCBbXCJhY3Rpb25cIiwgXCJzb3VyY2Ugdmlld1wiXSk7XG4gIGV2ZS5hZGRUYWJsZShcImFjdGlvbiBtYXBwaW5nXCIsIFtcImFjdGlvblwiLCBcImZyb21cIiwgXCJ0byBzb3VyY2VcIiwgXCJ0byBmaWVsZFwiXSk7XG4gIGV2ZS5hZGRUYWJsZShcImFjdGlvbiBtYXBwaW5nIGNvbnN0YW50XCIsIFtcImFjdGlvblwiLCBcImZyb21cIiwgXCJ2YWx1ZVwiXSk7XG4gIGV2ZS5hZGRUYWJsZShcImFjdGlvbiBtYXBwaW5nIHNvcnRlZFwiLCBbXCJhY3Rpb25cIiwgXCJpeFwiLCBcInNvdXJjZVwiLCBcImZpZWxkXCIsIFwiZGlyZWN0aW9uXCJdKTtcbiAgZXZlLmFkZFRhYmxlKFwiYWN0aW9uIG1hcHBpbmcgbGltaXRcIiwgW1wiYWN0aW9uXCIsIFwibGltaXQgdHlwZVwiLCBcInZhbHVlXCJdKTtcblxuICBldmUudGFibGUoXCJ2aWV3XCIpLnRyaWdnZXJzW1wicmVjb21waWxlXCJdID0gcmVjb21waWxlVHJpZ2dlcjtcbiAgZXZlLnRhYmxlKFwiYWN0aW9uXCIpLnRyaWdnZXJzW1wicmVjb21waWxlXCJdID0gcmVjb21waWxlVHJpZ2dlcjtcbiAgZXZlLnRhYmxlKFwiYWN0aW9uIHNvdXJjZVwiKS50cmlnZ2Vyc1tcInJlY29tcGlsZVwiXSA9IHJlY29tcGlsZVRyaWdnZXI7XG4gIGV2ZS50YWJsZShcImFjdGlvbiBtYXBwaW5nXCIpLnRyaWdnZXJzW1wicmVjb21waWxlXCJdID0gcmVjb21waWxlVHJpZ2dlcjtcbiAgZXZlLnRhYmxlKFwiYWN0aW9uIG1hcHBpbmcgY29uc3RhbnRcIikudHJpZ2dlcnNbXCJyZWNvbXBpbGVcIl0gPSByZWNvbXBpbGVUcmlnZ2VyO1xuICBldmUudGFibGUoXCJhY3Rpb24gbWFwcGluZyBzb3J0ZWRcIikudHJpZ2dlcnNbXCJyZWNvbXBpbGVcIl0gPSByZWNvbXBpbGVUcmlnZ2VyO1xuICBldmUudGFibGUoXCJhY3Rpb24gbWFwcGluZyBsaW1pdFwiKS50cmlnZ2Vyc1tcInJlY29tcGlsZVwiXSA9IHJlY29tcGlsZVRyaWdnZXI7XG5cbiAgcmV0dXJuIGV2ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBpbGUoaXhlciwgdmlld0lkKSB7XG4gIGxldCB2aWV3ID0gaXhlci5maW5kT25lKFwidmlld1wiLCB7dmlldzogdmlld0lkfSk7XG4gIGlmKCF2aWV3KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBObyB2aWV3IGZvdW5kIGZvciAke3ZpZXdJZH0uYCk7XG4gIH1cbiAgbGV0IGNvbXBpbGVkID0gaXhlclt2aWV3LmtpbmRdKHZpZXdJZCk7XG4gIGxldCBhY3Rpb25zID0gaXhlci5maW5kKFwiYWN0aW9uXCIsIHt2aWV3OiB2aWV3SWR9KTtcbiAgaWYoIWFjdGlvbnMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFZpZXcgJHt2aWV3SWR9IGhhcyBubyBhY3Rpb25zLmApO1xuICB9XG4gIC8vIHNvcnQgYWN0aW9ucyBieSBpeFxuICBhY3Rpb25zLnNvcnQoKGEsIGIpID0+IGEuaXggLSBiLml4KTtcbiAgZm9yKGxldCBhY3Rpb24gb2YgYWN0aW9ucykge1xuICAgIGxldCBhY3Rpb25LaW5kID0gYWN0aW9uLmtpbmQ7XG4gICAgaWYoYWN0aW9uS2luZCA9PT0gXCJsaW1pdFwiKSB7XG4gICAgICBsZXQgbGltaXQgPSB7fTtcbiAgICAgIGZvcihsZXQgbGltaXRNYXBwaW5nIG9mIGl4ZXIuZmluZChcImFjdGlvbiBtYXBwaW5nIGxpbWl0XCIsIHthY3Rpb246IGFjdGlvbi5hY3Rpb259KSkge1xuICAgICAgICBsaW1pdFtsaW1pdE1hcHBpbmdbXCJsaW1pdCB0eXBlXCJdXSA9IGxpbWl0TWFwcGluZ1tcInZhbHVlXCJdO1xuICAgICAgfVxuICAgICAgY29tcGlsZWQubGltaXQobGltaXQpO1xuICAgIH0gZWxzZSBpZihhY3Rpb25LaW5kID09PSBcInNvcnRcIiB8fCBhY3Rpb25LaW5kID09PSBcImdyb3VwXCIpIHtcbiAgICAgIGxldCBzb3J0ZWQgPSBbXTtcbiAgICAgIGxldCBtYXBwaW5ncyA9IGl4ZXIuZmluZChcImFjdGlvbiBtYXBwaW5nIHNvcnRlZFwiLCB7YWN0aW9uOiBhY3Rpb24uYWN0aW9ufSk7XG4gICAgICBtYXBwaW5ncy5zb3J0KChhLCBiKSA9PiBhLml4IC0gYi5peCk7XG4gICAgICBmb3IobGV0IG1hcHBpbmcgb2YgbWFwcGluZ3MpIHtcbiAgICAgICAgc29ydGVkLnB1c2goW21hcHBpbmdbXCJzb3VyY2VcIl0sIG1hcHBpbmdbXCJmaWVsZFwiXSwgbWFwcGluZ1tcImRpcmVjdGlvblwiXV0pO1xuICAgICAgfVxuICAgICAgaWYoc29ydGVkLmxlbmd0aCkge1xuICAgICAgICBjb21waWxlZFthY3Rpb25LaW5kXShzb3J0ZWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2FjdGlvbktpbmR9IHdpdGhvdXQgYW55IG1hcHBpbmdzOiAke2FjdGlvbi5hY3Rpb259YClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IG1hcHBpbmdzID0gaXhlci5maW5kKFwiYWN0aW9uIG1hcHBpbmdcIiwge2FjdGlvbjogYWN0aW9uLmFjdGlvbn0pO1xuICAgICAgbGV0IG1hcHBpbmdPYmplY3QgPSB7fTtcbiAgICAgIGZvcihsZXQgbWFwcGluZyBvZiBtYXBwaW5ncykge1xuICAgICAgICBsZXQgc291cmNlID0gbWFwcGluZ1tcInRvIHNvdXJjZVwiXTtcbiAgICAgICAgbGV0IGZpZWxkID0gbWFwcGluZ1tcInRvIGZpZWxkXCJdO1xuICAgICAgICBpZihhY3Rpb25LaW5kID09PSBcInVuaW9uXCIgfHwgYWN0aW9uS2luZCA9PT0gXCJ1bnVuaW9uXCIpIHtcbiAgICAgICAgICBtYXBwaW5nT2JqZWN0W21hcHBpbmcuZnJvbV0gPSBbZmllbGRdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1hcHBpbmdPYmplY3RbbWFwcGluZy5mcm9tXSA9IFtzb3VyY2UsIGZpZWxkXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IGNvbnN0YW50cyA9IGl4ZXIuZmluZChcImFjdGlvbiBtYXBwaW5nIGNvbnN0YW50XCIsIHthY3Rpb246IGFjdGlvbi5hY3Rpb259KTtcbiAgICAgIGZvcihsZXQgY29uc3RhbnQgb2YgY29uc3RhbnRzKSB7XG4gICAgICAgIG1hcHBpbmdPYmplY3RbY29uc3RhbnQuZnJvbV0gPSBjb25zdGFudC52YWx1ZTtcbiAgICAgIH1cbiAgICAgIGxldCBzb3VyY2UgPSBpeGVyLmZpbmRPbmUoXCJhY3Rpb24gc291cmNlXCIsIHthY3Rpb246IGFjdGlvbi5hY3Rpb259KTtcbiAgICAgIGlmKCFzb3VyY2UgJiYgYWN0aW9uS2luZCAhPT0gXCJwcm9qZWN0XCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2FjdGlvbktpbmR9IGFjdGlvbiB3aXRob3V0IGEgc291cmNlIGluICcke3ZpZXdJZH0nYCk7XG4gICAgICB9XG4gICAgICBpZihhY3Rpb25LaW5kICE9PSBcInByb2plY3RcIikge1xuICAgICAgICBjb21waWxlZFthY3Rpb25LaW5kXShzb3VyY2VbXCJzb3VyY2Ugdmlld1wiXSwgbWFwcGluZ09iamVjdCwgYWN0aW9uLmFjdGlvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb21waWxlZFthY3Rpb25LaW5kXShtYXBwaW5nT2JqZWN0KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNvbXBpbGVkO1xufVxuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gUHVibGljIEFQSVxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNvbnN0IFNVQ0NFRUQgPSBbe3N1Y2Nlc3M6IHRydWV9XTtcbmV4cG9ydCBjb25zdCBGQUlMID0gW107XG5cbmV4cG9ydCBmdW5jdGlvbiBpbmRleGVyKCkge1xuICBsZXQgaXhlciA9IG5ldyBJbmRleGVyKCk7XG4gIGFkZFByb3ZlbmFuY2VUYWJsZShpeGVyKTtcbiAgYWRkUmVjb21waWxlVHJpZ2dlcnMoaXhlcik7XG4gIHJldHVybiBpeGVyO1xufVxuXG5pZihFTlYgPT09IFwiYnJvd3NlclwiKSB3aW5kb3dbXCJydW50aW1lXCJdID0gZXhwb3J0cztcbiIsImltcG9ydCB7dW5wYWQsIHJlcGVhdCwgREVCVUcsIHV1aWR9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQge0VsZW1lbnQsIEhhbmRsZXJ9IGZyb20gXCIuL21pY3JvUmVhY3RcIjtcbmltcG9ydCB7SW5kZXhlciwgUXVlcnl9IGZyb20gXCIuL3J1bnRpbWVcIjtcblxuZnVuY3Rpb24gcmVzb2x2ZSh0YWJsZSwgZmFjdCkge1xuICBsZXQgbmV1ZSA9IHt9O1xuICBmb3IobGV0IGZpZWxkIGluIGZhY3QpXG4gICAgbmV1ZVtgJHt0YWJsZX06ICR7ZmllbGR9YF0gPSBmYWN0W2ZpZWxkXTtcbiAgcmV0dXJuIG5ldWU7XG59XG5mdW5jdGlvbiBodW1hbml6ZSh0YWJsZSwgZmFjdCkge1xuICBsZXQgbmV1ZSA9IHt9O1xuICBmb3IobGV0IGZpZWxkIGluIGZhY3QpXG4gICAgbmV1ZVtmaWVsZC5zbGljZSh0YWJsZS5sZW5ndGggKyAyKV0gPSBmYWN0W2ZpZWxkXTtcbiAgcmV0dXJuIG5ldWU7XG59XG5cbmZ1bmN0aW9uIHJlc29sdmVkQWRkKGNoYW5nZXNldCwgdGFibGUsIGZhY3QpIHtcbiAgcmV0dXJuIGNoYW5nZXNldC5hZGQodGFibGUsIHJlc29sdmUodGFibGUsIGZhY3QpKTtcbn1cbmZ1bmN0aW9uIHJlc29sdmVkUmVtb3ZlKGNoYW5nZXNldCwgdGFibGUsIGZhY3QpIHtcbiAgcmV0dXJuIGNoYW5nZXNldC5yZW1vdmUodGFibGUsIHJlc29sdmUodGFibGUsIGZhY3QpKTtcbn1cbmZ1bmN0aW9uIGh1bWFuaXplZEZpbmQoaXhlcjpJbmRleGVyLCB0YWJsZSwgcXVlcnkpIHtcbiAgbGV0IHJlc3VsdHMgPSBbXTtcbiAgZm9yKGxldCBmYWN0IG9mIGl4ZXIuZmluZCh0YWJsZSwgcmVzb2x2ZSh0YWJsZSwgcXVlcnkpKSkgcmVzdWx0cy5wdXNoKGh1bWFuaXplKHRhYmxlLCBmYWN0KSk7XG4gIGxldCBkaWFnID0ge307XG4gIGZvcihsZXQgdGFibGUgaW4gaXhlci50YWJsZXMpIGRpYWdbdGFibGVdID0gaXhlci50YWJsZXNbdGFibGVdLnRhYmxlLmxlbmd0aDtcbiAgcmV0dXJuIHJlc3VsdHM7XG59XG5cbmV4cG9ydCBjbGFzcyBVSSB7XG4gIHByb3RlY3RlZCBfYmluZGluZzpRdWVyeTtcbiAgcHJvdGVjdGVkIF9lbWJlZGRlZDp7fTtcbiAgcHJvdGVjdGVkIF9jaGlsZHJlbjpVSVtdID0gW107XG4gIHByb3RlY3RlZCBfYXR0cmlidXRlczp7fSA9IHt9O1xuICBwcm90ZWN0ZWQgX2V2ZW50czp7fSA9IHt9O1xuXG4gIHByb3RlY3RlZCBfcGFyZW50OlVJO1xuXG4gIHN0YXRpYyByZW1vdmUodGVtcGxhdGU6c3RyaW5nLCBpeGVyOkluZGV4ZXIpIHtcbiAgICBsZXQgY2hhbmdlc2V0ID0gaXhlci5kaWZmKCk7XG4gICAgcmVzb2x2ZWRSZW1vdmUoY2hhbmdlc2V0LCBcInVpIHRlbXBsYXRlXCIsIHt0ZW1wbGF0ZX0pO1xuICAgIHJlc29sdmVkUmVtb3ZlKGNoYW5nZXNldCwgXCJ1aSB0ZW1wbGF0ZSBiaW5kaW5nXCIsIHt0ZW1wbGF0ZX0pO1xuICAgIGxldCBiaW5kaW5ncyA9IGh1bWFuaXplZEZpbmQoaXhlciwgXCJ1aSB0ZW1wbGF0ZSBiaW5kaW5nXCIsIHt0ZW1wbGF0ZX0pO1xuICAgIGZvcihsZXQgYmluZGluZyBvZiBiaW5kaW5ncykgY2hhbmdlc2V0Lm1lcmdlKFF1ZXJ5LnJlbW92ZShiaW5kaW5nLmJpbmRpbmcsIGl4ZXIpKTtcbiAgICByZXNvbHZlZFJlbW92ZShjaGFuZ2VzZXQsIFwidWkgZW1iZWRcIiwge3RlbXBsYXRlfSk7XG4gICAgbGV0IGVtYmVkcyA9IGh1bWFuaXplZEZpbmQoaXhlciwgXCJ1aSBlbWJlZFwiLCB7dGVtcGxhdGV9KTtcbiAgICBmb3IobGV0IGVtYmVkIG9mIGVtYmVkcykge1xuICAgICAgcmVzb2x2ZWRSZW1vdmUoY2hhbmdlc2V0LCBcInVpIGVtYmVkIHNjb3BlXCIsIHt0ZW1wbGF0ZSwgZW1iZWQ6IGVtYmVkLmVtYmVkfSk7XG4gICAgICByZXNvbHZlZFJlbW92ZShjaGFuZ2VzZXQsIFwidWkgZW1iZWQgc2NvcGUgYmluZGluZ1wiLCB7dGVtcGxhdGUsIGVtYmVkOiBlbWJlZC5lbWJlZH0pO1xuICAgIH1cbiAgICByZXNvbHZlZFJlbW92ZShjaGFuZ2VzZXQsIFwidWkgYXR0cmlidXRlXCIsIHt0ZW1wbGF0ZX0pO1xuICAgIHJlc29sdmVkUmVtb3ZlKGNoYW5nZXNldCwgXCJ1aSBhdHRyaWJ1dGUgYmluZGluZ1wiLCB7dGVtcGxhdGV9KTtcbiAgICByZXNvbHZlZFJlbW92ZShjaGFuZ2VzZXQsIFwidWkgZXZlbnRcIiwge3RlbXBsYXRlfSk7XG4gICAgbGV0IGV2ZW50cyA9IGh1bWFuaXplZEZpbmQoaXhlciwgXCJ1aSBldmVudFwiLCB7dGVtcGxhdGV9KTtcbiAgICBmb3IobGV0IGV2ZW50IG9mIGV2ZW50cykge1xuICAgICAgcmVzb2x2ZWRSZW1vdmUoY2hhbmdlc2V0LCBcInVpIGV2ZW50IHN0YXRlXCIsIHt0ZW1wbGF0ZSwgZXZlbnQ6IGV2ZW50LmV2ZW50fSk7XG4gICAgICByZXNvbHZlZFJlbW92ZShjaGFuZ2VzZXQsIFwidWkgZXZlbnQgc3RhdGUgYmluZGluZ1wiLCB7dGVtcGxhdGUsIGV2ZW50OiBldmVudC5ldmVudH0pO1xuICAgIH1cblxuICAgIGZvcihsZXQgY2hpbGQgb2YgaHVtYW5pemVkRmluZChpeGVyLCBcInVpIHRlbXBsYXRlXCIsIHtwYXJlbnQ6IHRlbXBsYXRlfSkpIGNoYW5nZXNldC5tZXJnZShVSS5yZW1vdmUoY2hpbGQudGVtcGxhdGUsIGl4ZXIpKTtcbiAgICByZXR1cm4gY2hhbmdlc2V0O1xuICB9XG5cbiAgY29uc3RydWN0b3IocHVibGljIGlkKSB7XG5cbiAgfVxuICBjb3B5KCkge1xuICAgIGxldCBuZXVlID0gbmV3IFVJKHRoaXMuaWQpO1xuICAgIG5ldWUuX2JpbmRpbmcgPSB0aGlzLl9iaW5kaW5nO1xuICAgIG5ldWUuX2VtYmVkZGVkID0gdGhpcy5fZW1iZWRkZWQ7XG4gICAgbmV1ZS5fY2hpbGRyZW4gPSB0aGlzLl9jaGlsZHJlbjtcbiAgICBuZXVlLl9hdHRyaWJ1dGVzID0gdGhpcy5fYXR0cmlidXRlcztcbiAgICBuZXVlLl9ldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgbmV1ZS5fcGFyZW50ID0gdGhpcy5fcGFyZW50O1xuICAgIHJldHVybiBuZXVlO1xuICB9XG4gIGNoYW5nZXNldChpeGVyOkluZGV4ZXIpIHtcbiAgICBsZXQgY2hhbmdlc2V0ID0gaXhlci5kaWZmKCk7XG5cbiAgICBsZXQgcGFyZW50ID0gdGhpcy5fYXR0cmlidXRlc1tcInBhcmVudFwiXSB8fCAodGhpcy5fcGFyZW50ICYmIHRoaXMuX3BhcmVudC5pZCkgfHwgXCJcIjtcbiAgICBsZXQgaXggPSB0aGlzLl9hdHRyaWJ1dGVzW1wiaXhcIl07XG4gICAgaWYoaXggPT09IHVuZGVmaW5lZCkgaXggPSAodGhpcy5fcGFyZW50ICYmIHRoaXMuX3BhcmVudC5fY2hpbGRyZW4uaW5kZXhPZih0aGlzKSk7XG4gICAgaWYoaXggPT09IC0xIHx8IGl4ID09PSB1bmRlZmluZWQpIGl4ID0gXCJcIjtcbiAgICBpZih0aGlzLl9lbWJlZGRlZCkgcGFyZW50ID0gXCJcIjtcblxuICAgIHJlc29sdmVkQWRkKGNoYW5nZXNldCwgXCJ1aSB0ZW1wbGF0ZVwiLCB7dGVtcGxhdGU6IHRoaXMuaWQsIHBhcmVudCwgaXh9KTtcbiAgICBpZih0aGlzLl9iaW5kaW5nKSB7XG4gICAgICBpZighdGhpcy5fYmluZGluZy5uYW1lIHx8IHRoaXMuX2JpbmRpbmcubmFtZSA9PT0gXCJ1bmtub3duXCIpIHRoaXMuX2JpbmRpbmcubmFtZSA9IGBib3VuZCB2aWV3ICR7dGhpcy5pZH1gO1xuICAgICAgY2hhbmdlc2V0Lm1lcmdlKHRoaXMuX2JpbmRpbmcuY2hhbmdlc2V0KGl4ZXIpKTtcbiAgICAgIHJlc29sdmVkQWRkKGNoYW5nZXNldCwgXCJ1aSB0ZW1wbGF0ZSBiaW5kaW5nXCIsIHt0ZW1wbGF0ZTogdGhpcy5pZCwgYmluZGluZzogdGhpcy5fYmluZGluZy5uYW1lfSk7XG4gICAgfVxuICAgIGlmKHRoaXMuX2VtYmVkZGVkKSB7XG4gICAgICBsZXQgZW1iZWQgPSB1dWlkKCk7XG4gICAgICByZXNvbHZlZEFkZChjaGFuZ2VzZXQsIFwidWkgZW1iZWRcIiwge2VtYmVkLCB0ZW1wbGF0ZTogdGhpcy5pZCwgcGFyZW50OiAodGhpcy5fcGFyZW50IHx8IDxhbnk+e30pLmlkLCBpeH0pO1xuICAgICAgZm9yKGxldCBrZXkgaW4gdGhpcy5fZW1iZWRkZWQpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5fYXR0cmlidXRlc1trZXldO1xuICAgICAgICBpZih2YWx1ZSBpbnN0YW5jZW9mIEFycmF5KSByZXNvbHZlZEFkZChjaGFuZ2VzZXQsIFwidWkgZW1iZWQgc2NvcGUgYmluZGluZ1wiLCB7ZW1iZWQsIGtleSwgc291cmNlOiB2YWx1ZVswXSwgYWxpYXM6IHZhbHVlWzFdfSk7XG4gICAgICAgIGVsc2UgcmVzb2x2ZWRBZGQoY2hhbmdlc2V0LCBcInVpIGVtYmVkIHNjb3BlXCIsIHtlbWJlZCwga2V5LCB2YWx1ZX0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvcihsZXQgcHJvcGVydHkgaW4gdGhpcy5fYXR0cmlidXRlcykge1xuICAgICAgbGV0IHZhbHVlID0gdGhpcy5fYXR0cmlidXRlc1twcm9wZXJ0eV07XG4gICAgICBpZih2YWx1ZSBpbnN0YW5jZW9mIEFycmF5KSByZXNvbHZlZEFkZChjaGFuZ2VzZXQsIFwidWkgYXR0cmlidXRlIGJpbmRpbmdcIiwge3RlbXBsYXRlOiB0aGlzLmlkLCBwcm9wZXJ0eSwgc291cmNlOiB2YWx1ZVswXSwgYWxpYXM6IHZhbHVlWzFdfSk7XG4gICAgICBlbHNlIHJlc29sdmVkQWRkKGNoYW5nZXNldCwgXCJ1aSBhdHRyaWJ1dGVcIiwge3RlbXBsYXRlOiB0aGlzLmlkLCBwcm9wZXJ0eSwgdmFsdWV9KTtcbiAgICB9XG5cbiAgICBmb3IobGV0IGV2ZW50IGluIHRoaXMuX2V2ZW50cykge1xuICAgICAgcmVzb2x2ZWRBZGQoY2hhbmdlc2V0LCBcInVpIGV2ZW50XCIsIHt0ZW1wbGF0ZTogdGhpcy5pZCwgZXZlbnR9KTtcbiAgICAgIGxldCBzdGF0ZSA9IHRoaXMuX2V2ZW50c1tldmVudF07XG4gICAgICBmb3IobGV0IGtleSBpbiBzdGF0ZSkge1xuICAgICAgICBsZXQgdmFsdWUgPSBzdGF0ZVtrZXldO1xuICAgICAgICBpZih2YWx1ZSBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgICAgIHJlc29sdmVkQWRkKGNoYW5nZXNldCwgXCJ1aSBldmVudCBzdGF0ZSBiaW5kaW5nXCIsIHt0ZW1wbGF0ZTogdGhpcy5pZCwgZXZlbnQsIGtleSwgc291cmNlOiB2YWx1ZVswXSwgYWxpYXM6IHZhbHVlWzFdfSk7XG4gICAgICAgIGVsc2UgcmVzb2x2ZWRBZGQoY2hhbmdlc2V0LCBcInVpIGV2ZW50IHN0YXRlXCIsIHt0ZW1wbGF0ZTogdGhpcy5pZCwgZXZlbnQsIGtleSwgdmFsdWV9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IobGV0IGNoaWxkIG9mIHRoaXMuX2NoaWxkcmVuKSBjaGFuZ2VzZXQubWVyZ2UoY2hpbGQuY2hhbmdlc2V0KGl4ZXIpKTtcblxuICAgIHJldHVybiBjaGFuZ2VzZXQ7XG4gIH1cbiAgbG9hZCh0ZW1wbGF0ZTpzdHJpbmcsIGl4ZXI6SW5kZXhlciwgcGFyZW50PzpVSSkge1xuICAgIGxldCBmYWN0ID0gaHVtYW5pemVkRmluZChpeGVyLCBcInVpIHRlbXBsYXRlXCIsIHt0ZW1wbGF0ZX0pWzBdO1xuICAgIGlmKCFmYWN0KSByZXR1cm4gdGhpcztcbiAgICBpZihwYXJlbnQgfHwgZmFjdC5wYXJlbnQpIHRoaXMuX3BhcmVudCA9IHBhcmVudCB8fCBuZXcgVUkodGhpcy5fcGFyZW50KTtcbiAgICBsZXQgYmluZGluZyA9IGh1bWFuaXplZEZpbmQoaXhlciwgXCJ1aSB0ZW1wbGF0ZSBiaW5kaW5nXCIsIHt0ZW1wbGF0ZX0pWzBdO1xuICAgIGlmKGJpbmRpbmcpIHRoaXMuYmluZCgobmV3IFF1ZXJ5KGl4ZXIsIGJpbmRpbmcuYmluZGluZykpKTtcbiAgICBsZXQgZW1iZWQgPSBodW1hbml6ZWRGaW5kKGl4ZXIsIFwidWkgZW1iZWRcIiwge3RlbXBsYXRlLCBwYXJlbnQ6IHRoaXMuX3BhcmVudCA/IHRoaXMuX3BhcmVudC5pZCA6IFwiXCJ9KVswXTtcbiAgICBpZihlbWJlZCkge1xuICAgICAgbGV0IHNjb3BlID0ge307XG4gICAgICBmb3IobGV0IGF0dHIgb2YgaHVtYW5pemVkRmluZChpeGVyLCBcInVpIGVtYmVkIHNjb3BlXCIsIHtlbWJlZDogZW1iZWQuZW1iZWR9KSkgc2NvcGVbYXR0ci5rZXldID0gYXR0ci52YWx1ZTtcbiAgICAgIGZvcihsZXQgYXR0ciBvZiBodW1hbml6ZWRGaW5kKGl4ZXIsIFwidWkgZW1iZWQgc2NvcGUgYmluZGluZ1wiLCB7ZW1iZWQ6IGVtYmVkLmVtYmVkfSkpIHNjb3BlW2F0dHIua2V5XSA9IFthdHRyLnNvdXJjZSwgYXR0ci5hbGlhc107XG4gICAgICB0aGlzLmVtYmVkKHNjb3BlKTtcbiAgICB9XG5cbiAgICBmb3IobGV0IGF0dHIgb2YgaHVtYW5pemVkRmluZChpeGVyLCBcInVpIGF0dHJpYnV0ZVwiLCB7dGVtcGxhdGV9KSkgdGhpcy5hdHRyaWJ1dGUoYXR0ci5wcm9wZXJ0eSwgYXR0ci52YWx1ZSk7XG4gICAgZm9yKGxldCBhdHRyIG9mIGh1bWFuaXplZEZpbmQoaXhlciwgXCJ1aSBhdHRyaWJ1dGUgYmluZGluZ1wiLCB7dGVtcGxhdGV9KSkgdGhpcy5hdHRyaWJ1dGUoYXR0ci5wcm9wZXJ0eSwgW2F0dHIuc291cmNlLCBhdHRyLmFsaWFzXSk7XG5cbiAgICBmb3IobGV0IGV2ZW50IG9mIGh1bWFuaXplZEZpbmQoaXhlciwgXCJ1aSBldmVudFwiLCB7dGVtcGxhdGV9KSkge1xuICAgICAgbGV0IHN0YXRlID0ge307XG4gICAgICBmb3IobGV0IGF0dHIgb2YgaHVtYW5pemVkRmluZChpeGVyLCBcInVpIGV2ZW50IHN0YXRlXCIsIHt0ZW1wbGF0ZSwgZXZlbnQ6IGV2ZW50LmV2ZW50fSkpIHN0YXRlW2V2ZW50LmtleV0gPSBldmVudC52YWx1ZTtcbiAgICAgIGZvcihsZXQgYXR0ciBvZiBodW1hbml6ZWRGaW5kKGl4ZXIsIFwidWkgZXZlbnQgc3RhdGUgYmluZGluZ1wiLCB7dGVtcGxhdGUsIGV2ZW50OiBldmVudC5ldmVudH0pKSBzdGF0ZVtldmVudC5rZXldID0gW2V2ZW50LnNvdXJjZSwgZXZlbnQuYWxpYXNdXG4gICAgICB0aGlzLmV2ZW50KGV2ZW50LmV2ZW50LCBzdGF0ZSk7XG4gICAgfVxuXG4gICAgZm9yKGxldCBjaGlsZCBvZiBodW1hbml6ZWRGaW5kKGl4ZXIsIFwidWkgdGVtcGxhdGVcIiwge3BhcmVudDogdGVtcGxhdGV9KSlcbiAgICAgIHRoaXMuY2hpbGQoKG5ldyBVSShjaGlsZC50ZW1wbGF0ZSkpLmxvYWQoY2hpbGQudGVtcGxhdGUsIGl4ZXIsIHRoaXMpKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgY2hpbGRyZW4obmV1ZT86VUlbXSwgYXBwZW5kID0gZmFsc2UpIHtcbiAgICBpZighbmV1ZSkgcmV0dXJuIHRoaXMuX2NoaWxkcmVuO1xuICAgIGlmKCFhcHBlbmQpIHRoaXMuX2NoaWxkcmVuLmxlbmd0aCA9IDA7XG4gICAgZm9yKGxldCBjaGlsZCBvZiBuZXVlKSB7XG4gICAgICBsZXQgY29waWVkID0gY2hpbGQuY29weSgpO1xuICAgICAgY29waWVkLl9wYXJlbnQgPSB0aGlzO1xuICAgICAgdGhpcy5fY2hpbGRyZW4ucHVzaChjb3BpZWQpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW47XG4gIH1cbiAgY2hpbGQoY2hpbGQ6VUksIGl4PzogbnVtYmVyLCBlbWJlZD86e30pIHtcbiAgICBjaGlsZCA9IGNoaWxkLmNvcHkoKTtcbiAgICBjaGlsZC5fcGFyZW50ID0gdGhpcztcbiAgICBpZihlbWJlZCkgY2hpbGQuZW1iZWQoZW1iZWQpO1xuICAgIGlmKCFpeCkgdGhpcy5fY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgZWxzZSB0aGlzLl9jaGlsZHJlbi5zcGxpY2UoaXgsIDAsIGNoaWxkKTtcbiAgICByZXR1cm4gY2hpbGQ7XG4gIH1cbiAgcmVtb3ZlQ2hpbGQoaXg6IG51bWJlcikge1xuICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbi5zcGxpY2UoaXgsIDEpO1xuICB9XG5cbiAgYXR0cmlidXRlcyhwcm9wZXJ0aWVzPzoge30sIG1lcmdlID0gZmFsc2UpIHtcbiAgICBpZighcHJvcGVydGllcykgcmV0dXJuIHRoaXMuX2F0dHJpYnV0ZXM7XG4gICAgaWYoIW1lcmdlKSB7XG4gICAgICBmb3IobGV0IHByb3AgaW4gdGhpcy5fYXR0cmlidXRlcykgZGVsZXRlIHRoaXMuX2F0dHJpYnV0ZXNbcHJvcF07XG4gICAgfVxuICAgIGZvcihsZXQgcHJvcCBpbiBwcm9wZXJ0aWVzKSB0aGlzLl9hdHRyaWJ1dGVzW3Byb3BdID0gcHJvcGVydGllc1twcm9wXTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBhdHRyaWJ1dGUocHJvcGVydHk6IHN0cmluZywgdmFsdWU/OiBhbnkpIHtcbiAgICBpZih2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdGhpcy5fYXR0cmlidXRlc1twcm9wZXJ0eV07XG4gICAgdGhpcy5fYXR0cmlidXRlc1twcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICByZW1vdmVBdHRyaWJ1dGUocHJvcGVydHk6IHN0cmluZykge1xuICAgIGRlbGV0ZSB0aGlzLl9hdHRyaWJ1dGVzW3Byb3BlcnR5XTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGV2ZW50cyhldmVudHM/OiB7fSwgbWVyZ2UgPSBmYWxzZSkge1xuICAgIGlmKCFldmVudHMpIHJldHVybiB0aGlzLl9ldmVudHM7XG4gICAgaWYoIW1lcmdlKSB7XG4gICAgICBmb3IobGV0IGV2ZW50IGluIHRoaXMuX2V2ZW50cykgZGVsZXRlIHRoaXMuX2V2ZW50c1tldmVudF07XG4gICAgfVxuICAgIGZvcihsZXQgZXZlbnQgaW4gZXZlbnRzKSB0aGlzLl9ldmVudHNbZXZlbnRdID0gZXZlbnRzW2V2ZW50XTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBldmVudChldmVudDogc3RyaW5nLCBzdGF0ZT86IGFueSkge1xuICAgIGlmKHN0YXRlID09PSB1bmRlZmluZWQpIHJldHVybiB0aGlzLl9ldmVudHNbZXZlbnRdO1xuICAgIHRoaXMuX2F0dHJpYnV0ZXNbZXZlbnRdID0gc3RhdGU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcmVtb3ZlRXZlbnQoZXZlbnQ6IHN0cmluZykge1xuICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZW1iZWQoc2NvcGU6e318Ym9vbGVhbiA9IHt9KSB7XG4gICAgaWYoIXNjb3BlKSB7XG4gICAgICB0aGlzLl9lbWJlZGRlZCA9IHVuZGVmaW5lZDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBpZihzY29wZSA9PT0gdHJ1ZSkgc2NvcGUgPSB7fTtcbiAgICB0aGlzLl9lbWJlZGRlZCA9IHNjb3BlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgYmluZChiaW5kaW5nOlF1ZXJ5KSB7XG4gICAgdGhpcy5fYmluZGluZyA9IGJpbmRpbmc7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cblxuaW50ZXJmYWNlIFVpV2FybmluZyB7XG4gIFwidWkgd2FybmluZzogdGVtcGxhdGVcIjogc3RyaW5nXG4gIFwidWkgd2FybmluZzogd2FybmluZ1wiOiBzdHJpbmdcbn1cblxuLy8gQFRPRE86IEZpbmlzaCByZWZlcmVuY2UgaW1wbC5cbi8vIEBUT0RPOiBUaGVuIGJ1aWxkIGJpdC1nZW5lcmF0aW5nIHZlcnNpb25cbmV4cG9ydCBjbGFzcyBVSVJlbmRlcmVyIHtcbiAgcHVibGljIGNvbXBpbGVkID0gMDtcbiAgcHJvdGVjdGVkIF90YWdDb21waWxlcnM6e1t0YWc6IHN0cmluZ106IChlbGVtOkVsZW1lbnQpID0+IHZvaWR9ID0ge307XG4gIHByb3RlY3RlZCBfaGFuZGxlcnM6SGFuZGxlcjxFdmVudD5bXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBpeGVyOkluZGV4ZXIpIHt9XG5cbiAgY29tcGlsZShyb290czooc3RyaW5nfEVsZW1lbnQpW10pOkVsZW1lbnRbXSB7XG4gICAgaWYoREVCVUcuUkVOREVSRVIpIGNvbnNvbGUuZ3JvdXAoXCJ1aSBjb21waWxlXCIpO1xuICAgIGxldCBjb21waWxlZEVsZW1zOkVsZW1lbnRbXSA9IFtdO1xuICAgIGZvcihsZXQgcm9vdCBvZiByb290cykge1xuICAgICAgLy8gQFRPRE86IHJlcGFyZW50IGR5bmFtaWMgcm9vdHMgaWYgbmVlZGVkLlxuICAgICAgaWYodHlwZW9mIHJvb3QgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgbGV0IGVsZW1zID0gdGhpcy5fY29tcGlsZVdyYXBwZXIocm9vdCwgY29tcGlsZWRFbGVtcy5sZW5ndGgpO1xuICAgICAgICBjb21waWxlZEVsZW1zLnB1c2guYXBwbHkoY29tcGlsZWRFbGVtcywgZWxlbXMpO1xuICAgICAgICBsZXQgYmFzZSA9IHRoaXMuaXhlci5maW5kT25lKFwidWkgdGVtcGxhdGVcIiwge1widWkgdGVtcGxhdGU6IHRlbXBsYXRlXCI6IHJvb3R9KTtcbiAgICAgICAgaWYoIWJhc2UpIGNvbnRpbnVlO1xuICAgICAgICBsZXQgcGFyZW50ID0gYmFzZVtcInVpIHRlbXBsYXRlOiBwYXJlbnRcIl07XG4gICAgICAgIGlmKHBhcmVudCkge1xuICAgICAgICAgIGZvcihsZXQgZWxlbSBvZiBlbGVtcykgZWxlbS5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBpZighcm9vdC5peCkgcm9vdC5peCA9IGNvbXBpbGVkRWxlbXMubGVuZ3RoO1xuICAgICAgICBjb21waWxlZEVsZW1zLnB1c2gocm9vdCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmKERFQlVHLlJFTkRFUkVSKSBjb25zb2xlLmdyb3VwRW5kKCk7XG4gICAgcmV0dXJuIGNvbXBpbGVkRWxlbXM7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2NvbXBpbGVXcmFwcGVyKHRlbXBsYXRlOnN0cmluZywgYmFzZUl4OiBudW1iZXIsIGNvbnN0cmFpbnRzOnt9ID0ge30sIGJpbmRpbmdTdGFjazphbnlbXSA9IFtdLCBkZXB0aDpudW1iZXIgPSAwKTpFbGVtZW50W10ge1xuICAgIGxldCBlbGVtcyA9IFtdO1xuICAgIGxldCBiaW5kaW5nID0gdGhpcy5peGVyLmZpbmRPbmUoXCJ1aSB0ZW1wbGF0ZSBiaW5kaW5nXCIsIHtcInVpIHRlbXBsYXRlIGJpbmRpbmc6IHRlbXBsYXRlXCI6IHRlbXBsYXRlfSk7XG4gICAgaWYoIWJpbmRpbmcpIHtcbiAgICAgIGxldCBlbGVtID0gdGhpcy5fY29tcGlsZUVsZW1lbnQodGVtcGxhdGUsIGJpbmRpbmdTdGFjaywgZGVwdGgpO1xuICAgICAgaWYoZWxlbSkgZWxlbXNbMF0gPSBlbGVtO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgYm91bmRRdWVyeSA9IGJpbmRpbmdbXCJ1aSB0ZW1wbGF0ZSBiaW5kaW5nOiBiaW5kaW5nXCJdO1xuICAgICAgbGV0IGZhY3RzID0gdGhpcy5nZXRCb3VuZEZhY3RzKGJvdW5kUXVlcnksIGNvbnN0cmFpbnRzKTtcbiAgICAgIGxldCBpeCA9IDA7XG4gICAgICBmb3IobGV0IGZhY3Qgb2YgZmFjdHMpIHtcbiAgICAgICAgYmluZGluZ1N0YWNrLnB1c2goZmFjdCk7XG4gICAgICAgIGxldCBlbGVtID0gdGhpcy5fY29tcGlsZUVsZW1lbnQodGVtcGxhdGUsIGJpbmRpbmdTdGFjaywgZGVwdGgpO1xuICAgICAgICBiaW5kaW5nU3RhY2sucG9wKCk7XG4gICAgICAgIGlmKGVsZW0pIGVsZW1zLnB1c2goZWxlbSk7XG4gICAgICB9XG4gICAgfVxuICAgIGVsZW1zLnNvcnQoKGEsIGIpID0+IGEuaXggLSBiLml4KTtcbiAgICBsZXQgcHJldkl4ID0gdW5kZWZpbmVkO1xuICAgIGZvcihsZXQgZWxlbSBvZiBlbGVtcykge1xuICAgICAgZWxlbS5peCA9IGVsZW0uaXggPyBlbGVtLml4ICsgYmFzZUl4IDogYmFzZUl4O1xuICAgICAgaWYoZWxlbS5peCA9PT0gcHJldkl4KSBlbGVtLml4Kys7XG4gICAgICBwcmV2SXggPSBlbGVtLml4O1xuICAgIH1cbiAgICByZXR1cm4gZWxlbXM7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2NvbXBpbGVFbGVtZW50KHRlbXBsYXRlOnN0cmluZywgYmluZGluZ1N0YWNrOmFueVtdLCBkZXB0aDpudW1iZXIpOkVsZW1lbnQge1xuICAgIGlmKERFQlVHLlJFTkRFUkVSKSBjb25zb2xlLmxvZyhyZXBlYXQoXCIgIFwiLCBkZXB0aCkgKyBcIiogY29tcGlsZVwiLCB0ZW1wbGF0ZSk7XG4gICAgbGV0IGVsZW1lbnRUb0NoaWxkcmVuID0gdGhpcy5peGVyLmluZGV4KFwidWkgdGVtcGxhdGVcIiwgW1widWkgdGVtcGxhdGU6IHBhcmVudFwiXSk7XG4gICAgbGV0IGVsZW1lbnRUb0VtYmVkcyA9IHRoaXMuaXhlci5pbmRleChcInVpIGVtYmVkXCIsIFtcInVpIGVtYmVkOiBwYXJlbnRcIl0pO1xuICAgIGxldCBlbWJlZFRvU2NvcGUgPSB0aGlzLml4ZXIuaW5kZXgoXCJ1aSBlbWJlZCBzY29wZVwiLCBbXCJ1aSBlbWJlZCBzY29wZTogZW1iZWRcIl0pO1xuICAgIGxldCBlbWJlZFRvU2NvcGVCaW5kaW5nID0gdGhpcy5peGVyLmluZGV4KFwidWkgZW1iZWQgc2NvcGUgYmluZGluZ1wiLCBbXCJ1aSBlbWJlZCBzY29wZSBiaW5kaW5nOiBlbWJlZFwiXSk7XG4gICAgbGV0IGVsZW1lbnRUb0F0dHJzID0gdGhpcy5peGVyLmluZGV4KFwidWkgYXR0cmlidXRlXCIsIFtcInVpIGF0dHJpYnV0ZTogdGVtcGxhdGVcIl0pO1xuICAgIGxldCBlbGVtZW50VG9BdHRyQmluZGluZ3MgPSB0aGlzLml4ZXIuaW5kZXgoXCJ1aSBhdHRyaWJ1dGUgYmluZGluZ1wiLCBbXCJ1aSBhdHRyaWJ1dGUgYmluZGluZzogdGVtcGxhdGVcIl0pO1xuICAgIGxldCBlbGVtZW50VG9FdmVudHMgPSB0aGlzLml4ZXIuaW5kZXgoXCJ1aSBldmVudFwiLCBbXCJ1aSBldmVudDogdGVtcGxhdGVcIl0pO1xuICAgIHRoaXMuY29tcGlsZWQrKztcbiAgICBsZXQgYmFzZSA9IHRoaXMuaXhlci5maW5kT25lKFwidWkgdGVtcGxhdGVcIiwge1widWkgdGVtcGxhdGU6IHRlbXBsYXRlXCI6IHRlbXBsYXRlfSk7XG4gICAgaWYoIWJhc2UpIHtcbiAgICAgIGNvbnNvbGUud2FybihgdWkgdGVtcGxhdGUgJHt0ZW1wbGF0ZX0gZG9lcyBub3QgZXhpc3QuIElnbm9yaW5nLmApO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBsZXQgYXR0cnMgPSBlbGVtZW50VG9BdHRyc1t0ZW1wbGF0ZV07XG4gICAgbGV0IGJvdW5kQXR0cnMgPSBlbGVtZW50VG9BdHRyQmluZGluZ3NbdGVtcGxhdGVdO1xuICAgIGxldCBldmVudHMgPSBlbGVtZW50VG9FdmVudHNbdGVtcGxhdGVdO1xuXG4gICAgLy8gSGFuZGxlIG1ldGEgcHJvcGVydGllc1xuICAgIGxldCBlbGVtOkVsZW1lbnQgPSB7X3RlbXBsYXRlOiB0ZW1wbGF0ZSwgaXg6IGJhc2VbXCJ1aSB0ZW1wbGF0ZTogaXhcIl19O1xuXG4gICAgLy8gSGFuZGxlIHN0YXRpYyBwcm9wZXJ0aWVzXG4gICAgaWYoYXR0cnMpIHtcbiAgICAgIGZvcihsZXQge1widWkgYXR0cmlidXRlOiBwcm9wZXJ0eVwiOiBwcm9wLCBcInVpIGF0dHJpYnV0ZTogdmFsdWVcIjogdmFsfSBvZiBhdHRycykgZWxlbVtwcm9wXSA9IHZhbDtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgYm91bmQgcHJvcGVydGllc1xuICAgIGlmKGJvdW5kQXR0cnMpIHtcbiAgICAgIC8vIEBGSVhNRTogV2hhdCBkbyB3aXRoIHNvdXJjZT9cbiAgICAgIGZvcihsZXQge1widWkgYXR0cmlidXRlIGJpbmRpbmc6IHByb3BlcnR5XCI6IHByb3AsIFwidWkgYXR0cmlidXRlIGJpbmRpbmc6IHNvdXJjZVwiOiBzb3VyY2UsIFwidWkgYXR0cmlidXRlIGJpbmRpbmc6IGFsaWFzXCI6IGFsaWFzfSBvZiBib3VuZEF0dHJzKVxuICAgICAgICBlbGVtW3Byb3BdID0gdGhpcy5nZXRCb3VuZFZhbHVlKHNvdXJjZSwgYWxpYXMsIGJpbmRpbmdTdGFjayk7XG4gICAgfVxuXG4gICAgLy8gQXR0YWNoIGV2ZW50IGhhbmRsZXJzXG4gICAgaWYoZXZlbnRzKSB7XG4gICAgICBmb3IobGV0IHtcInVpIGV2ZW50OiBldmVudFwiOiBldmVudH0gb2YgZXZlbnRzKSBlbGVtW2V2ZW50XSA9IHRoaXMuZ2VuZXJhdGVFdmVudEhhbmRsZXIoZWxlbSwgZXZlbnQsIGJpbmRpbmdTdGFjayk7XG4gICAgfVxuXG4gICAgLy8gQ29tcGlsZSBjaGlsZHJlblxuICAgIGxldCBjaGlsZHJlbiA9IGVsZW1lbnRUb0NoaWxkcmVuW3RlbXBsYXRlXSB8fCBbXTtcbiAgICBsZXQgZW1iZWRzID0gZWxlbWVudFRvRW1iZWRzW3RlbXBsYXRlXSB8fCBbXTtcbiAgICBpZihjaGlsZHJlbi5sZW5ndGggfHwgZW1iZWRzLmxlbmd0aCkge1xuICAgICAgZWxlbS5jaGlsZHJlbiA9IFtdO1xuICAgICAgbGV0IGNoaWxkSXggPSAwLCBlbWJlZEl4ID0gMDtcbiAgICAgIHdoaWxlKGNoaWxkSXggPCBjaGlsZHJlbi5sZW5ndGggfHwgZW1iZWRJeCA8IGVtYmVkcy5sZW5ndGgpIHtcbiAgICAgICAgbGV0IGNoaWxkID0gY2hpbGRyZW5bY2hpbGRJeF07XG4gICAgICAgIGxldCBlbWJlZCA9IGVtYmVkc1tlbWJlZEl4XTtcbiAgICAgICAgbGV0IGFkZCwgY29uc3RyYWludHMgPSB7fSwgY2hpbGRCaW5kaW5nU3RhY2sgPSBiaW5kaW5nU3RhY2s7XG4gICAgICAgIGlmKCFlbWJlZCB8fCBjaGlsZCAmJiBjaGlsZC5peCA8PSBlbWJlZC5peCkge1xuICAgICAgICAgIGFkZCA9IGNoaWxkcmVuW2NoaWxkSXgrK11bXCJ1aSB0ZW1wbGF0ZTogdGVtcGxhdGVcIl07XG4gICAgICAgICAgLy8gUmVzb2x2ZSBib3VuZCBhbGlhc2VzIGludG8gY29uc3RyYWludHNcbiAgICAgICAgICBjb25zdHJhaW50cyA9IHRoaXMuZ2V0Qm91bmRTY29wZShiaW5kaW5nU3RhY2spO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWRkID0gZW1iZWRzW2VtYmVkSXgrK11bXCJ1aSBlbWJlZDogdGVtcGxhdGVcIl07XG4gICAgICAgICAgZm9yKGxldCBzY29wZSBvZiBlbWJlZFRvU2NvcGVbZW1iZWRbXCJ1aSBlbWJlZDogZW1iZWRcIl1dIHx8IFtdKVxuICAgICAgICAgICAgY29uc3RyYWludHNbc2NvcGVbXCJ1aSBlbWJlZCBzY29wZToga2V5XCJdXSA9IHNjb3BlW1widWkgZW1iZWQgc2NvcGU6IHZhbHVlXCJdO1xuXG4gICAgICAgICAgZm9yKGxldCBzY29wZSBvZiBlbWJlZFRvU2NvcGVCaW5kaW5nW2VtYmVkW1widWkgZW1iZWQ6IGVtYmVkXCJdXSB8fCBbXSkge1xuICAgICAgICAgICAgLy8gQEZJWE1FOiBXaGF0IGRvIGFib3V0IHNvdXJjZT9cbiAgICAgICAgICAgIGxldCB7XCJ1aSBlbWJlZCBzY29wZSBiaW5kaW5nOiBrZXlcIjoga2V5LCBcInVpIGVtYmVkIHNjb3BlIGJpbmRpbmc6IHNvdXJjZVwiOiBzb3VyY2UsIFwidWkgZW1iZWQgc2NvcGUgYmluZGluZzogYWxpYXNcIjogYWxpYXN9ID0gc2NvcGU7XG4gICAgICAgICAgICBjb25zdHJhaW50c1trZXldID0gdGhpcy5nZXRCb3VuZFZhbHVlKHNvdXJjZSwgYWxpYXMsIGJpbmRpbmdTdGFjayk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNoaWxkQmluZGluZ1N0YWNrID0gW2NvbnN0cmFpbnRzXTtcbiAgICAgICAgfVxuICAgICAgICBlbGVtLmNoaWxkcmVuLnB1c2guYXBwbHkoZWxlbS5jaGlsZHJlbiwgdGhpcy5fY29tcGlsZVdyYXBwZXIoYWRkLCBlbGVtLmNoaWxkcmVuLmxlbmd0aCwgY29uc3RyYWludHMsIGNoaWxkQmluZGluZ1N0YWNrLCBkZXB0aCArIDEpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZih0aGlzLl90YWdDb21waWxlcnNbZWxlbS50XSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5fdGFnQ29tcGlsZXJzW2VsZW0udF0oZWxlbSk7XG4gICAgICB9IGNhdGNoKGVycikge1xuICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBjb21waWxlIHRlbXBsYXRlOiAnJHt0ZW1wbGF0ZX0nIGR1ZSB0byAnJHtlcnJ9JyBmb3IgZWxlbWVudCAnJHtKU09OLnN0cmluZ2lmeShlbGVtKX0nYCk7XG4gICAgICAgIGVsZW0udCA9IFwidWktZXJyb3JcIjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZWxlbTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXRCb3VuZEZhY3RzKHF1ZXJ5LCBjb25zdHJhaW50cyk6c3RyaW5nW10ge1xuICAgIHJldHVybiB0aGlzLml4ZXIuZmluZChxdWVyeSwgY29uc3RyYWludHMpO1xuICB9XG4gIHByb3RlY3RlZCBnZXRCb3VuZFNjb3BlKGJpbmRpbmdTdGFjazphbnlbXSk6e30ge1xuICAgIGxldCBzY29wZSA9IHt9O1xuICAgIGZvcihsZXQgZmFjdCBvZiBiaW5kaW5nU3RhY2spIHtcbiAgICAgIGZvcihsZXQgYWxpYXMgaW4gZmFjdCkgc2NvcGVbYWxpYXNdID0gZmFjdFthbGlhc107XG4gICAgfVxuICAgIHJldHVybiBzY29wZTtcbiAgfVxuXG4gIC8vQEZJWE1FOiBXaGF0IGRvIGFib3V0IHNvdXJjZT9cbiAgcHJvdGVjdGVkIGdldEJvdW5kVmFsdWUoc291cmNlOnN0cmluZywgYWxpYXM6c3RyaW5nLCBiaW5kaW5nU3RhY2s6YW55W10pOmFueSB7IC8vIEBGSVhNRTogRmluZHMgZG9uJ3QgY3JlYXRlIGEgc291cmNlIGZpZWxkIG9uIHRoZSByZXN1bHQuXG4gICAgZm9yKGxldCBpeCA9IGJpbmRpbmdTdGFjay5sZW5ndGggLSAxOyBpeCA+PSAwOyBpeC0tKSB7XG4gICAgICBsZXQgZmFjdCA9IGJpbmRpbmdTdGFja1tpeF07XG4gICAgICBpZihzb3VyY2UgaW4gZmFjdCAmJiBmYWN0W2FsaWFzXSkgcmV0dXJuIGZhY3RbYWxpYXNdO1xuICAgIH1cbiAgfVxuICBwcm90ZWN0ZWQgZ2VuZXJhdGVFdmVudEhhbmRsZXIoZWxlbTpFbGVtZW50LCBldmVudDpzdHJpbmcsIGJpbmRpbmdTdGFjazphbnlbXSk6SGFuZGxlcjxFdmVudD4ge1xuICAgIGxldCB0ZW1wbGF0ZSA9IGVsZW1bXCJfdGVtcGxhdGVcIl07XG4gICAgbGV0IG1lbW9LZXkgPSBgJHt0ZW1wbGF0ZX06OiR7ZXZlbnR9YDtcbiAgICBsZXQgYXR0cktleSA9IGAke2V2ZW50fTo6c3RhdGVgO1xuICAgIGVsZW1bYXR0cktleV0gPSB0aGlzLmdldEV2ZW50U3RhdGUodGVtcGxhdGUsIGV2ZW50LCBiaW5kaW5nU3RhY2spO1xuICAgIGlmKHRoaXMuX2hhbmRsZXJzW21lbW9LZXldKSByZXR1cm4gdGhpcy5faGFuZGxlcnNbbWVtb0tleV07XG5cbiAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgaWYoZXZlbnQgPT09IFwiY2hhbmdlXCIgfHwgZXZlbnQgPT09IFwiaW5wdXRcIikge1xuICAgICAgdGhpcy5faGFuZGxlcnNbbWVtb0tleV0gPSAoZXZ0OkV2ZW50LCBlbGVtOkVsZW1lbnQpID0+IHtcbiAgICAgICAgbGV0IHByb3BzOmFueSA9IHt9O1xuICAgICAgICBpZihlbGVtLnQgPT09IFwic2VsZWN0XCIgfHwgZWxlbS50ID09PSBcImlucHV0XCIgfHwgZWxlbS50ID09PSBcInRleHRhcmVhXCIpIHByb3BzLnZhbHVlID0gKDxIVE1MU2VsZWN0RWxlbWVudHxIVE1MSW5wdXRFbGVtZW50PmV2dC50YXJnZXQpLnZhbHVlO1xuICAgICAgICBpZihlbGVtLnR5cGUgPT09IFwiY2hlY2tib3hcIikgcHJvcHMudmFsdWUgPSAoPEhUTUxJbnB1dEVsZW1lbnQ+ZXZ0LnRhcmdldCkuY2hlY2tlZDtcbiAgICAgICAgc2VsZi5oYW5kbGVFdmVudCh0ZW1wbGF0ZSwgZXZlbnQsIGV2dCwgZWxlbSwgcHJvcHMpO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGFuZGxlcnNbbWVtb0tleV0gPSAoZXZ0OkV2ZW50LCBlbGVtOkVsZW1lbnQpID0+IHtcbiAgICAgICAgc2VsZi5oYW5kbGVFdmVudCh0ZW1wbGF0ZSwgZXZlbnQsIGV2dCwgZWxlbSwge30pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9oYW5kbGVyc1ttZW1vS2V5XTtcbiAgfVxuICBwcm90ZWN0ZWQgaGFuZGxlRXZlbnQodGVtcGxhdGU6c3RyaW5nLCBldmVudE5hbWU6c3RyaW5nLCBldmVudDpFdmVudCwgZWxlbTpFbGVtZW50LCBldmVudFByb3BzOnt9KSB7XG4gICAgbGV0IGF0dHJLZXkgPSBgJHtldmVudE5hbWV9OjpzdGF0ZWA7XG4gICAgbGV0IHN0YXRlID0gZWxlbVthdHRyS2V5XTtcbiAgICBsZXQgY29udGVudCA9IHVucGFkKDYpIGBcbiAgICAgICMgJHtldmVudE5hbWV9ICh7aXMgYTogZXZlbnR9KVxuICAgICAgIyMgTWV0YVxuICAgICAgZXZlbnQgdGFyZ2V0OiB7ZXZlbnQgdGFyZ2V0OiAke2VsZW0uaWR9fVxuICAgICAgZXZlbnQgdGVtcGxhdGU6IHtldmVudCB0ZW1wbGF0ZTogJHt0ZW1wbGF0ZX19XG4gICAgICBldmVudCB0eXBlOiB7ZXZlbnQgdHlwZTogJHtldmVudE5hbWV9fVxuXG4gICAgICAjIyBTdGF0ZVxuICAgIGA7XG4gICAgaWYoc3RhdGVbXCIqZXZlbnQqXCJdKSB7XG4gICAgICBmb3IobGV0IHByb3AgaW4gc3RhdGVbXCIqZXZlbnQqXCJdKVxuICAgICAgICBjb250ZW50ICs9IGAke3Byb3B9OiB7JHtwcm9wfTogJHtldmVudFByb3BzW3N0YXRlW1wiKmV2ZW50KlwiXVtwcm9wXV19fVxcbmA7XG4gICAgfVxuICAgIGZvcihsZXQgcHJvcCBpbiBzdGF0ZSkge1xuICAgICAgaWYocHJvcCA9PT0gXCIqZXZlbnQqXCIpIGNvbnRpbnVlO1xuICAgICAgY29udGVudCArPSBgJHtwcm9wfTogeyR7cHJvcH06ICR7c3RhdGVbcHJvcF19fVxcbmBcbiAgICB9XG5cbiAgICBsZXQgY2hhbmdlc2V0ID0gdGhpcy5peGVyLmRpZmYoKTtcbiAgICBsZXQgcmF3ID0gdXVpZCgpO1xuICAgIGxldCBlbnRpdHkgPSBgJHtldmVudE5hbWV9IGV2ZW50ICR7cmF3LnNsaWNlKC0xMil9YDtcbiAgICBjaGFuZ2VzZXQuYWRkKFwiYnVpbHRpbiBlbnRpdHlcIiwge2VudGl0eSwgY29udGVudH0pO1xuICAgIHRoaXMuaXhlci5hcHBseURpZmYoY2hhbmdlc2V0KTtcbiAgICBjb25zb2xlLmxvZyhlbnRpdHkpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldEV2ZW50U3RhdGUodGVtcGxhdGU6c3RyaW5nLCBldmVudDpzdHJpbmcsIGJpbmRpbmdTdGFjazphbnlbXSk6e30ge1xuICAgIGxldCBzdGF0ZSA9IHt9O1xuICAgIGxldCBzdGF0aWNBdHRycyA9IHRoaXMuaXhlci5maW5kKFwidWkgZXZlbnQgc3RhdGVcIiwge1widWkgZXZlbnQgc3RhdGU6IHRlbXBsYXRlXCI6IHRlbXBsYXRlLCBcInVpIGV2ZW50IHN0YXRlOiBldmVudFwiOiBldmVudH0pO1xuICAgIGZvcihsZXQge1widWkgZXZlbnQgc3RhdGU6IGtleVwiOiBrZXksIFwidWkgZXZlbnQgc3RhdGU6IHZhbHVlXCI6IHZhbH0gb2Ygc3RhdGljQXR0cnMpIHN0YXRlW2tleV0gPSB2YWw7XG5cbiAgICBsZXQgYm91bmRBdHRycyA9IHRoaXMuaXhlci5maW5kKFwidWkgZXZlbnQgc3RhdGUgYmluZGluZ1wiLCB7XCJ1aSBldmVudCBzdGF0ZSBiaW5kaW5nOiB0ZW1wbGF0ZVwiOiB0ZW1wbGF0ZSwgXCJ1aSBldmVudCBzdGF0ZSBiaW5kaW5nOiBldmVudFwiOiBldmVudH0pO1xuICAgIGZvcihsZXQge1widWkgZXZlbnQgc3RhdGUgYmluZGluZzoga2V5XCI6IGtleSwgXCJ1aSBldmVudCBzdGF0ZSBiaW5kaW5nOiBzb3VyY2VcIjogc291cmNlLCBcInVpIGV2ZW50IHN0YXRlIGJpbmRpbmc6IGFsaWFzXCI6IGFsaWFzfSBvZiBib3VuZEF0dHJzKSB7XG4gICAgICBpZihzb3VyY2UgPT09IFwiKmV2ZW50KlwiKSB7XG4gICAgICAgIHN0YXRlW1wiKmV2ZW50KlwiXSA9IHN0YXRlW1wiKmV2ZW50KlwiXSB8fCB7fTtcbiAgICAgICAgc3RhdGVbXCIqZXZlbnQqXCJdW2tleV0gPSBhbGlhcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlW2tleV0gPSB0aGlzLmdldEJvdW5kVmFsdWUoc291cmNlLCBhbGlhcywgYmluZGluZ1N0YWNrKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cbn1cblxuZGVjbGFyZSB2YXIgZXhwb3J0cztcbmlmKHRoaXMud2luZG93KSB3aW5kb3dbXCJ1aVJlbmRlcmVyXCJdID0gZXhwb3J0czsiLCJpbXBvcnQge3Y0IGFzIF91dWlkfSBmcm9tIFwiLi4vdmVuZG9yL3V1aWRcIjtcbmV4cG9ydCB2YXIgdXVpZCA9IF91dWlkO1xuXG5leHBvcnQgdmFyIEVOViA9IFwiYnJvd3NlclwiO1xudHJ5IHtcbiAgd2luZG93XG4gIHdpbmRvd1tcInV0aWxzXCJdID0gZXhwb3J0cztcbn0gY2F0Y2goZXJyKSB7XG4gIEVOViA9IFwibm9kZVwiO1xufVxuXG5leHBvcnQgdmFyIERFQlVHOmFueSA9IHtcblxufTtcblxuaWYoRU5WID09PSBcImJyb3dzZXJcIikgd2luZG93W1wiREVCVUdcIl0gPSBERUJVRztcblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWx0aW5JZChuYW1lOnN0cmluZyk6c3RyaW5nIHtcbiAgcmV0dXJuIGBBVVRPR0VORVJBVEVEICR7bmFtZX0gVEhJUyBTSE9VTEROJ1QgU0hPVyBVUCBBTllXSEVSRWA7XG59XG5cbnR5cGUgVGVtcGxhdGVTdHJpbmdUYWcgPSAoc3RyaW5nczpzdHJpbmdbXSwgLi4udmFsdWVzOmFueVtdKSA9PiBzdHJpbmdcbmludGVyZmFjZSB1bnBhZCB7XG4gIChpbmRlbnQ6bnVtYmVyKTogVGVtcGxhdGVTdHJpbmdUYWdcbiAgbWVtbzoge1tpbmRlbnQ6bnVtYmVyXTogVGVtcGxhdGVTdHJpbmdUYWd9XG59XG5leHBvcnQgdmFyIHVucGFkOnVucGFkID0gPGFueT5mdW5jdGlvbihpbmRlbnQpIHtcbiAgaWYodW5wYWQubWVtb1tpbmRlbnRdKSByZXR1cm4gdW5wYWQubWVtb1tpbmRlbnRdO1xuICByZXR1cm4gdW5wYWQubWVtb1tpbmRlbnRdID0gZnVuY3Rpb24oc3RyaW5ncywgLi4udmFsdWVzKSB7XG4gICAgaWYoIXN0cmluZ3MubGVuZ3RoKSByZXR1cm47XG4gICAgbGV0IHJlcyA9IFwiXCI7XG4gICAgbGV0IGl4ID0gMDtcbiAgICBmb3IobGV0IHN0ciBvZiBzdHJpbmdzKSByZXMgKz0gc3RyICsgKHZhbHVlcy5sZW5ndGggPiBpeCA/IHZhbHVlc1tpeCsrXSA6IFwiXCIpO1xuXG4gICAgaWYocmVzWzBdID09PSBcIlxcblwiKSByZXMgPSByZXMuc2xpY2UoMSk7XG4gICAgbGV0IGNoYXJJeCA9IDA7XG4gICAgd2hpbGUodHJ1ZSkge1xuICAgICAgcmVzID0gcmVzLnNsaWNlKDAsIGNoYXJJeCkgKyByZXMuc2xpY2UoY2hhckl4ICsgaW5kZW50KTtcbiAgICAgIGNoYXJJeCA9IHJlcy5pbmRleE9mKFwiXFxuXCIsIGNoYXJJeCkgKyAxO1xuICAgICAgaWYoIWNoYXJJeCkgYnJlYWs7XG4gICAgfVxuICByZXR1cm4gcmVzO1xuICB9XG59O1xudW5wYWQubWVtbyA9IHt9O1xuXG5leHBvcnQgZnVuY3Rpb24gcmVwZWF0KHN0cjpzdHJpbmcsIGxlbmd0aDpudW1iZXIpIHtcbiAgbGV0IGxlbiA9IGxlbmd0aCAvIHN0ci5sZW5ndGg7XG4gIGxldCByZXMgPSBcIlwiO1xuICBmb3IobGV0IGl4ID0gMDsgaXggPCBsZW47IGl4KyspICByZXMgKz0gc3RyO1xuICByZXR1cm4gKHJlcy5sZW5ndGggPiBsZW5ndGgpID8gcmVzLnNsaWNlKDAsIGxlbmd0aCkgOiByZXM7XG59XG5leHBvcnQgZnVuY3Rpb24gdW5kZXJsaW5lKHN0YXJ0SXgsIGxlbmd0aCkge1xuICByZXR1cm4gcmVwZWF0KFwiIFwiLCBzdGFydEl4KSArIFwiXlwiICsgcmVwZWF0KFwiflwiLCBsZW5ndGggLSAxKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhcGl0YWxpemUod29yZDpzdHJpbmcpOnN0cmluZyB7XG4gIHJldHVybiB3b3JkWzBdLnRvVXBwZXJDYXNlKCkgKyB3b3JkLnNsaWNlKDEpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aXRsZWNhc2UobmFtZTpzdHJpbmcpOnN0cmluZyB7XG4gIHJldHVybiBuYW1lLnNwbGl0KFwiIFwiKS5tYXAoY2FwaXRhbGl6ZSkuam9pbihcIiBcIik7XG59XG5cbmV4cG9ydCB2YXIgc3RyaW5nID0ge1xuICB1bnBhZCxcbiAgcmVwZWF0LFxuICB1bmRlcmxpbmUsXG4gIGNhcGl0YWxpemUsXG4gIHRpdGxlY2FzZVxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHRhaWwoYXJyKSB7XG4gIHJldHVybiBhcnJbYXJyLmxlbmd0aCAtIDFdO1xufVxuXG5leHBvcnQgdmFyIGFycmF5ID0ge1xuICB0YWlsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gY29lcmNlSW5wdXQoaW5wdXQpIHtcbiAgLy8gaHR0cDovL2pzcGVyZi5jb20vcmVnZXgtdnMtcGx1cy1jb2VyY2lvblxuICBpZiAoIWlzTmFOKCtpbnB1dCkpIHJldHVybiAraW5wdXQ7XG4gIGVsc2UgaWYgKGlucHV0ID09PSBcInRydWVcIikgcmV0dXJuIHRydWU7XG4gIGVsc2UgaWYgKGlucHV0ID09PSBcImZhbHNlXCIpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIGlucHV0O1xufVxuXG4vLyBTaGFsbG93IGNvcHkgdGhlIGdpdmVuIG9iamVjdC5cbmV4cG9ydCBmdW5jdGlvbiBjb3B5KG9iaikge1xuICBpZighb2JqIHx8IHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIpIHJldHVybiBvYmo7XG4gIGlmKG9iaiBpbnN0YW5jZW9mIEFycmF5KSByZXR1cm4gb2JqLnNsaWNlKCk7XG4gIGxldCByZXMgPSB7fTtcbiAgZm9yKGxldCBrZXkgaW4gb2JqKSByZXNba2V5XSA9IG9ialtrZXldO1xuICByZXR1cm4gcmVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VPYmplY3Qocm9vdCwgb2JqKSB7XG4gIGZvcihsZXQga2V5IGluIG9iaikge1xuICAgIHJvb3Rba2V5XSA9IG9ialtrZXldO1xuICB9XG4gIHJldHVybiByb290O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXV0b0ZvY3VzKG5vZGUsIGVsZW0pIHtcbiAgaWYoIW5vZGUuZm9jdXNlZCkge1xuICAgIG5vZGUuZm9jdXNlZCA9IHRydWU7XG4gICAgbm9kZS5mb2N1cygpO1xuICB9XG59XG5cbmV4cG9ydCB2YXIgS0VZUyA9IHtcbiAgRVNDOiAyNyxcbiAgRU5URVI6IDEzLFxuICBVUDogMzgsXG4gIERPV046IDQwLFxuICBCQUNLU1BBQ0U6IDgsXG4gIFwiXVwiOiAyMjEsXG59XG5cbi8vIEZST006IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTEyNTI5Mi9ob3ctdG8tbW92ZS1jdXJzb3ItdG8tZW5kLW9mLWNvbnRlbnRlZGl0YWJsZS1lbnRpdHkvMzg2NjQ0MiMzODY2NDQyXG5leHBvcnQgZnVuY3Rpb24gc2V0RW5kT2ZDb250ZW50RWRpdGFibGUoY29udGVudEVkaXRhYmxlRWxlbWVudCkge1xuICB2YXIgcmFuZ2Usc2VsZWN0aW9uO1xuICBpZihkb2N1bWVudC5jcmVhdGVSYW5nZSkvL0ZpcmVmb3gsIENocm9tZSwgT3BlcmEsIFNhZmFyaSwgSUUgOStcbiAge1xuICAgIHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTsvL0NyZWF0ZSBhIHJhbmdlIChhIHJhbmdlIGlzIGEgbGlrZSB0aGUgc2VsZWN0aW9uIGJ1dCBpbnZpc2libGUpXG4gICAgcmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKGNvbnRlbnRFZGl0YWJsZUVsZW1lbnQpOy8vU2VsZWN0IHRoZSBlbnRpcmUgY29udGVudHMgb2YgdGhlIGVsZW1lbnQgd2l0aCB0aGUgcmFuZ2VcbiAgICByYW5nZS5jb2xsYXBzZShmYWxzZSk7Ly9jb2xsYXBzZSB0aGUgcmFuZ2UgdG8gdGhlIGVuZCBwb2ludC4gZmFsc2UgbWVhbnMgY29sbGFwc2UgdG8gZW5kIHJhdGhlciB0aGFuIHRoZSBzdGFydFxuICAgIHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTsvL2dldCB0aGUgc2VsZWN0aW9uIG9iamVjdCAoYWxsb3dzIHlvdSB0byBjaGFuZ2Ugc2VsZWN0aW9uKVxuICAgIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTsvL3JlbW92ZSBhbnkgc2VsZWN0aW9ucyBhbHJlYWR5IG1hZGVcbiAgICBzZWxlY3Rpb24uYWRkUmFuZ2UocmFuZ2UpOy8vbWFrZSB0aGUgcmFuZ2UgeW91IGhhdmUganVzdCBjcmVhdGVkIHRoZSB2aXNpYmxlIHNlbGVjdGlvblxuICB9XG59XG5cbi8vIExDRyBjb3VydGVzeSBvZiA8aHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vUHJvdG9uay81Mzg5Mzg0PlxuZXhwb3J0IGZ1bmN0aW9uIHNyYW5kKHopIHtcbiAgbGV0IG0gPSBNYXRoLnBvdygyLCAyNCksIGEgPSAxNjU5ODAxMywgYyA9IDEyODIwMTYzO1xuICByZXR1cm4gKCkgPT4geiA9IChhICogeiArIGMpICUgbSAvIG07XG59XG4vLyBTaHVmZmxlIGNvdXJ0ZXN5IG9mIDxodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS82Mjc0MzgxPlxuZXhwb3J0IGZ1bmN0aW9uIHNodWZmbGUobzphbnlbXSwgcmFuZCA9IE1hdGgucmFuZG9tKSB7XG4gIGZvcih2YXIgaiwgeCwgaSA9IG8ubGVuZ3RoOyBpOyBqID0gTWF0aC5mbG9vcihyYW5kKCkgKiBpKSwgeCA9IG9bLS1pXSwgb1tpXSA9IG9bal0sIG9bal0gPSB4KTtcbiAgcmV0dXJuIG87XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzb3J0QnlGaWVsZChmaWVsZCk6KGEsIGIpID0+IG51bWJlciB7XG4gIHJldHVybiAoYSwgYikgPT5cbiAgICAoYVtmaWVsZF0gPT09IGJbZmllbGRdKSA/IDAgOlxuICAgIChhW2ZpZWxkXSA+IGJbZmllbGRdKSA/IC0xIDpcbiAgICAoYVtmaWVsZF0gPCBiW2ZpZWxkXSkgPyAxIDpcbiAgICAoYVtmaWVsZF0gPT09IHVuZGVmaW5lZCkgPyAxIDogLTE7XG59XG5leHBvcnQgZnVuY3Rpb24gc29ydEJ5TG9va3VwKGxvb2t1cDp7fSk6KGEsIGIpID0+IG51bWJlciB7XG4gIHJldHVybiAoYSwgYikgPT5cbiAgICAobG9va3VwW2FdID09PSBsb29rdXBbYl0pID8gMCA6XG4gICAgKGxvb2t1cFthXSA+IGxvb2t1cFtiXSkgPyAtMSA6XG4gICAgKGxvb2t1cFthXSA8IGxvb2t1cFtiXSkgPyAxIDpcbiAgICAobG9va3VwW2FdID09PSB1bmRlZmluZWQpID8gMSA6IC0xO1xufVxuIiwiaW1wb3J0ICogYXMgYXBwIGZyb20gXCIuLi9zcmMvYXBwXCI7XG5pbXBvcnQgKiBhcyBubHFwIGZyb20gIFwiLi4vc3JjL05MUXVlcnlQYXJzZXJcIjtcbmltcG9ydCAqIGFzIGJvb3RzdHJhcCBmcm9tIFwiLi4vc3JjL2Jvb3RzdHJhcFwiO1xuaW1wb3J0ICogYXMgZHNscGFyc2VyIGZyb20gXCIuLi9zcmMvcGFyc2VyXCI7XG5pbXBvcnQge2V2ZX0gZnJvbSBcIi4uL3NyYy9hcHBcIjtcblxuLy8gQEhBQ0sgbmVlZGVkIGJlY2F1c2UgYnJvd3NlcmlmeSBpcyBiZWluZyB0b28gY2xldmVyIGJ5XG4vLyBvcHRpbWl6aW5nIGF3YXkgdW51c2VkIGNvZGVcbnZhciBib29zdHJhcEl4ZXIgPSBib290c3RyYXAuaXhlcjtcblxuYXBwLnJlbmRlclJvb3RzW1wibmxxcFwiXTtcblxubmxxcC5kZWJ1ZyA9IHRydWU7XG5cbmZ1bmN0aW9uIHBhcnNlVGVzdChxdWVyeVN0cmluZzogc3RyaW5nLCBuOiBudW1iZXIpOiBubHFwLlN0YXRlRmxhZ3Mge1xuICBsZXQgcGFyc2VSZXN1bHQ6IG5scXAuUGFyc2VSZXN1bHQ7XG4gIGxldCBhdmdUaW1lID0gMDtcbiAgbGV0IG1heFRpbWUgPSAwO1xuICBsZXQgbWluVGltZTtcbiAgXG4gIGxldCBwcmVUYWdzID0gbmxxcC5wcmVwcm9jZXNzUXVlcnlTdHJpbmcocXVlcnlTdHJpbmcpXG4gIGxldCBwcmV0YWdzVG9TdHJpbmcgPSBwcmVUYWdzLm1hcCgocHQpID0+IGAoJHtwdC50ZXh0fXwke3B0LnRhZ30pYCkuam9pbihcIlwiKTtcbiAgXG4gIC8vIFBhcnNlIHN0cmluZyBhbmQgbWVhc3VyZSBob3cgbG9uZyBpdCB0YWtlc1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xuICAgIGxldCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIHBhcnNlUmVzdWx0ID0gbmxxcC5wYXJzZShxdWVyeVN0cmluZylbMF07XG4gICAgbGV0IHN0b3AgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBhdmdUaW1lICs9IHN0b3Atc3RhcnQ7XG4gICAgaWYgKHN0b3Atc3RhcnQgPiBtYXhUaW1lKSB7XG4gICAgICBtYXhUaW1lID0gc3RvcC1zdGFydDtcbiAgICB9ICBcbiAgICBpZiAobWluVGltZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBtaW5UaW1lID0gc3RvcC1zdGFydDtcbiAgICB9XG4gICAgZWxzZSBpZiAoc3RvcC1zdGFydCA8IG1pblRpbWUpIHtcbiAgICAgIG1pblRpbWUgPSBzdG9wLXN0YXJ0O1xuICAgIH0gIFxuICB9XG4gIC8vIERpc3BsYXkgcmVzdWx0XG4gIGxldCB0b2tlblN0cmluZ3MgPSBubHFwLnRva2VuQXJyYXlUb1N0cmluZyhwYXJzZVJlc3VsdC50b2tlbnMpO1xuICBsZXQgdGltaW5nRGlzcGxheSA9IGBUaW1pbmcgKGF2ZywgbWF4LCBtaW4pOiAkeyhhdmdUaW1lL24pLnRvRml4ZWQoMil9IHwgJHttYXhUaW1lLnRvRml4ZWQoMil9IHwgJHttaW5UaW1lLnRvRml4ZWQoMil9IGA7XG4gIGNvbnNvbGUubG9nKHF1ZXJ5U3RyaW5nKTtcbiAgY29uc29sZS5sb2cocHJldGFnc1RvU3RyaW5nKTtcbiAgY29uc29sZS5sb2coYFN0YXRlOiAke25scXAuU3RhdGVGbGFnc1twYXJzZVJlc3VsdC5zdGF0ZV19YCk7XG4gIGNvbnNvbGUubG9nKHBhcnNlUmVzdWx0LmNvbnRleHQpO1xuICBjb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIik7XG4gIGNvbnNvbGUubG9nKFwiVG9rZW5zXCIpOyAgXG4gIGNvbnNvbGUubG9nKHRva2VuU3RyaW5ncyk7XG4gIGNvbnNvbGUubG9nKFwiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiKTtcbiAgY29uc29sZS5sb2coXCJUcmVlXCIpO1xuICBjb25zb2xlLmxvZyhwYXJzZVJlc3VsdC50cmVlLnRvU3RyaW5nKCkpO1xuICBjb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIik7XG4gIGNvbnNvbGUubG9nKFwiUXVlcnlcIik7ICBcbiAgY29uc29sZS5sb2coXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIpO1xuICBjb25zb2xlLmxvZyhcIlJlc3VsdFwiKTtcbiAgY29uc29sZS5sb2cocXVlcnlTdHJpbmcpO1xuICBjb25zb2xlLmxvZyhleGVjdXRlUXVlcnkocGFyc2VSZXN1bHQucXVlcnkpLmpvaW4oXCJcXG5cIikpO1xuICBjb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIik7XG4gIGNvbnNvbGUubG9nKHRpbWluZ0Rpc3BsYXkpO1xuICBjb25zb2xlLmxvZyhcIj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cIik7XG4gIHJldHVybiBwYXJzZVJlc3VsdC5zdGF0ZTtcbn1cblxuZnVuY3Rpb24gZXhlY3V0ZVF1ZXJ5KHF1ZXJ5OiBubHFwLlF1ZXJ5KTogQXJyYXk8c3RyaW5nPiB7XG4gIGxldCByZXN1bHRzU3RyaW5nOiBBcnJheTxzdHJpbmc+ID0gW107XG4gIGlmIChxdWVyeS5wcm9qZWN0cy5sZW5ndGggIT09IDApIHtcbiAgICBsZXQgcXVlcnlTdHJpbmcgPSBxdWVyeS50b1N0cmluZygpO1xuICAgIGNvbnNvbGUubG9nKHF1ZXJ5U3RyaW5nKSAgICAgXG4gICAgbGV0IGFydGlmYWN0cyA9IGRzbHBhcnNlci5wYXJzZURTTChxdWVyeVN0cmluZyk7XG4gICAgbGV0IGNoYW5nZXNldCA9IGV2ZS5kaWZmKCk7XG4gICAgbGV0IHJlc3VsdHMgPSBbXTtcbiAgICBmb3IgKGxldCBpZCBpbiBhcnRpZmFjdHMudmlld3MpIHtcbiAgICAgIGV2ZS5hc1ZpZXcoYXJ0aWZhY3RzLnZpZXdzW2lkXSk7IFxuICAgIH1cbiAgICBmb3IgKGxldCBpZCBpbiBhcnRpZmFjdHMudmlld3MpIHtcbiAgICAgIHJlc3VsdHMucHVzaChhcnRpZmFjdHMudmlld3NbaWRdLmV4ZWMoKSk7IFxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhyZXN1bHRzKTtcbiAgICByZXN1bHRzLmZvckVhY2goKHJlc3VsdCkgPT4ge1xuICAgICAgbGV0IHByb2plY3RlZCA9IHJlc3VsdC5yZXN1bHRzO1xuICAgICAgaWYgKHByb2plY3RlZC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gR2V0IGVhY2ggY2VsbCBhcyBhIHN0cmluZ1xuICAgICAgbGV0IGNvbFdpZHRocyA9IFtdO1xuICAgICAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9qZWN0ZWRbMF0pO1xuICAgICAga2V5cy5mb3JFYWNoKChrZXkpID0+IHtjb2xXaWR0aHMucHVzaChrZXkubGVuZ3RoKX0pO1xuICAgICAgbGV0IHJvd3M6IEFycmF5PEFycmF5PHN0cmluZz4+ID0gcHJvamVjdGVkLm1hcCgocm93KSA9PiB7XG4gICAgICAgIGxldCByb3dzdHJpbmcgPSBrZXlzLm1hcCgoa2V5LGkpID0+IHtcbiAgICAgICAgICBpZiAoa2V5ID09PSBcIl9faWRcIikge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCB2YWx1ZSA9IGAke3Jvd1trZXldfWA7XG4gICAgICAgICAgbGV0IGRpc3BsYXkgPSBldmUuZmluZE9uZShcImRpc3BsYXkgbmFtZVwiLHtpZDogdmFsdWV9KTtcbiAgICAgICAgICBpZiAoZGlzcGxheSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IGRpc3BsYXkubmFtZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gR2V0IHRoZSB3aWR0aCBvZiBlYWNoIHJvd1xuICAgICAgICAgIGlmIChjb2xXaWR0aHNbaV0gPCB2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbFdpZHRoc1tpXSA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJvd3N0cmluZztcbiAgICAgIH0pO1xuICAgICAgLy8gVHVybiByb3dzIGludG8gcm93IHN0cmluZ3NcbiAgICAgIGxldCByb3dTdHJpbmdzID0gcm93cy5tYXAoKHJvdykgPT4ge1xuICAgICAgICByb3cgPSByb3cubWFwKChjZWxsLGkpID0+IHtcbiAgICAgICAgICBsZXQgd2hpdGVzcGFjZSA9IEFycmF5KGNvbFdpZHRoc1tpXSAtIGNlbGwubGVuZ3RoICsgMSkuam9pbihcIiBcIik7XG4gICAgICAgICAgY2VsbCArPSB3aGl0ZXNwYWNlO1xuICAgICAgICAgIHJldHVybiBjZWxsO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFwifCBcIiArIHJvdy5qb2luKFwiIHwgXCIpO1xuICAgICAgfSk7XG4gICAgICAvLyBBZGQgYSB0YWJsZSBoZWFkZXJcbiAgICAgIGxldCB0YWJsZUhlYWRlciA9IFwifCBcIiArIGtleXMubWFwKChrZXksaSkgPT4ge1xuICAgICAgICBpZiAoa2V5ID09PSBcIl9faWRcIikge1xuICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGxldCB3aGl0ZXNwYWNlID0gQXJyYXkoY29sV2lkdGhzW2ldIC0ga2V5Lmxlbmd0aCArIDEpLmpvaW4oXCIgXCIpO1xuICAgICAgICByZXR1cm4ga2V5LnRvVXBwZXJDYXNlKCkgKyB3aGl0ZXNwYWNlOyBcbiAgICAgIH0pLmpvaW4oXCIgfCBcIik7XG4gICAgICBsZXQgZGl2aWRlciA9IEFycmF5KHRhYmxlSGVhZGVyLmxlbmd0aCkuam9pbihcIi1cIik7XG4gICAgICBsZXQgcmVzdWx0VGFibGUgPSBkaXZpZGVyICs9IFwiXFxuXCIgKyB0YWJsZUhlYWRlciArIFwiXFxuXCIgKyBkaXZpZGVyICsgXCJcXG5cIiArIHJvd1N0cmluZ3Muam9pbihcIlxcblwiKSArIFwiXFxuXCIgKyBkaXZpZGVyOyBcbiAgICAgIHJlc3VsdHNTdHJpbmcucHVzaChyZXN1bHRUYWJsZSk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdHNTdHJpbmc7XG59XG5cblxubGV0IG4gPSAxO1xubGV0IHBocmFzZXMgPSBbIFxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIFRoZXNlIGFyZSBxdWVyaWVzIHRoYXQgd2UgaGFkIHByb2JsZW1zIHdpdGggaW4gdGhlIHBhc3RcbiAgLy8gbWFrZSBzdXJlIHRoZXkgYWx3YXlzIHdvcmtcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1wic3VtIG9mIGVtcGxveWVlIHNhbGFyaWVzXCIsXG4gIFwiKyAxIDNcIlxuICAvL1wic3VtIHBldCBsZW5ndGhcIlxuICAvL1wic3VtIGVtcGxveWVlIHNhbGFyaWVzXCIsXG4gIC8vXCJlbXBsb3llZSBzYWxhcmllc1wiXG4gIC8vXCJzYWxhcmllcyBpbiBlbmdpbmVlcmluZ1wiXG4gIC8vXCJQZXQgc2hvcnRlciB0aGFuIGtvYWxhc1wiLFxuICAvL1wiUGV0IG5vdCBzaG9ydGVyIHRoYW4ga29hbGFzXCIsXG4gIC8vXCJleG90aWMgbGVuZ3Roc1wiLFxuICAvL1wiQ29yZXkgYWdlLCBoZWlnaHQsIGdlbmRlciBhbmQgaGFpciBjb2xvclwiLFxuICAvL1wiQ29yZXkncyB3aWZlJ3MgYWdlLCBnZW5kZXIsIGFuZCBoZWlnaHRcIixcbiAgLy9cImVtcGxveWVlIHNhbGFyaWVzXCIsXG4gIC8vXCJlbXBsb3llZXMgd2l0aCB0aGVpciBkZXBhcnRtZW50cyBhbmQgc2FsYXJpZXNcIiwgXG4gIC8vXCJlbXBsb3llZXMgd2l0aCB0aGVpciBzYWxhcmllc1wiLCBcbiAgLy9cImVtcGxveWVlcyBhbmQgdGhlaXIgc2FsYXJpZXNcIixcbiAgLy9cIlBldHMgZXhjZXB0IHRob3NlIGxvbmdlciB0aGFuIGEga29hbGFcIiwvL1xuICAvL1wic3VtIHNhbGFyaWVzIHBlciBkZXBhcnRtZW50XCIsXG4gIC8vXCJzdW0gc2FsYXJ5IHBlciBkZXBhcnRtZW50XCIsXG4gIC8vXCJleG90aWMgdGhhdCBhcmUgbm90IHBldHNcIixcbiAgLy9cInBldHMgbm90IGV4b3RpY3NcIixcbiAgLy9gQ29yZXkncyBhZ2UgbWludXMgam9zaCdzIHNhbGFyeWAsICBcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL2BQZXRzIGV4Y2VwdCB0aG9zZSBzaG9ydGVyIHRoYW4gYSBrb2FsYWAsXG4gIC8vYHNhbGFyaWVzIHBlciBkZXBhcnRtZW50YCxcbiAgLy9gRW1wbG95ZWVzIG5vdCBuYW1lZCBDb3JleWAsXG4gIC8vYFBldHMga29hbGFzYCxcbiAgLy9gRW1wbG95ZWVzIHdobyBhcmUgbm90IENvcmV5YCxcbiAgLy9gUGV0cyB0aGF0IGFyZSBub3QgbG9uZ2VyIHRoYW4ga29hbGFzYCxcbiAgLy9cImV4b3RpYyBwZXRzXCJcbiAgLy9cIkNvcmV5IE1vbnRlbGxhJ3MgYWdlLCBoZWlnaHQsIGFuZCBnZW5kZXJcIixcbiAgLy9cInBldHMgbG9uZ2VyIHRoYW4gZG9nc1wiLFxuICAvL1wiZGVwYXJ0bWVudCBzYWxhcmllc1wiLFxuICAvL1wiUGV0cyBzaG9ydGVyIHRoYW4gZG9nc1wiLFxuICAvL1wiQ29yZXkgTW9udGVsbGEncyB3aWZlJ3MgYWdlXCIsXG4gIC8vXCJzYWxhcmllcyBwZXIgZGVwYXJ0bWVudFwiXG4gIC8vXCJDb3JleSBNb250ZWxsYSdzIGFnZSBoZWlnaHRcIixcbiAgLy9cIkNvcmV5IE1vbnRlbGxhJ3Mgd2lmZSdzIGFnZSBhbmQgaGVpZ2h0XCIsXG4gIC8vXCJDb3JleSBNb250ZWxsYSdzIGFnZSwgaGVpZ2h0XCIsXG4gIC8vXCJTdGV2ZSdzIGFnZSBhbmQgc2FsYXJ5XCIsXG4gIC8vYGFnZSwgaGVpZ2h0LCBhbmQgZ2VuZGVyIG9mIFwiQ29yZXkgTW9udGVsbGFcIiBhbmQgaGlzIG5hdGlvbmFsaXR5IGFuZCBhZ2U7IGFuZCBhZ2UgYW5kIGdlbmRlciBvZiBcIlJhY2hlbCBSb21haW4gRmF5IE1vbnRlbGxhXCIgYW5kIGhlciBodXNiYW5kJ3Mgd2lmZSdzIHNpc3RlcidzIGhlaWdodDsgYW5kIENvcmV5J3MgYWdlYCxcbiAgLy9gXCJDb3JleSBNb250ZWxsYSdzXCIgV2lmZSdzIHNpc3RlcidzIGFnZTsgYW5kIGFnZSBhbmQgZ2VuZGVyIG9mIFwiUmFjaGVsIFJvbWFpbiBGYXkgTW9udGVsbGFcIiBhbmQgaGVyIGhlaWdodDsgYW5kIE9saXZpYSBGYXkgYWdlLCBoZWlnaHQsIGFuZCBnZW5kZXI7IGFuZCBwZXRzIHNob3J0ZXIgdGhhbiBzbmFrZXM7IGFuZCBzdW0gb2Ygc2FsYXJpZXMgcGVyIGRlcGFydG1lbnRgLFxuICAvL1wiQ29yZXkgTW9udGVsbGEncyBhZ2UsIGhlaWdodCwgYW5kIGdlbmRlcjsgYW5kIGFnZSBhbmQgZ2VuZGVyIG9mIFJhY2hlbCBNb250ZWxsYSBhbmQgaGVyIHNpc3RlcidzIGFnZTsgYW5kIE9saXZpYSBGYXkgYWdlXCIsXG4gIC8vXCJXaGF0IGlzIENvcmV5IE1vbnRlbGxhJ3Mgd2lmZSdzIGFnZSFcIixcbiAgLy9cInN1bSBvZiB0aGUgbGVuZ3RocyBvZiB0aGUgcGV0c1wiLFxuICAvL1wic3VtIG9mIHRoZSBsZW5ndGggb2YgcGV0c1wiLFxuICAvL1wiQ29yZXkgTW9udGVsbGEncyBIZWlnaHRcIixcbiAgLy9cIlBlb3BsZSB0YWxsZXIgdGhhbiBDb3JleSBNb250ZWxsYVwiLFxuICAvL1wiUGVvcGxlIHlvdW5nZXIgdGhhbiBDb3JleSBNb250ZWxsYVwiXG4gIC8vXCJzdW0gb2YgdGhlIGxlbmd0aHMgb2YgdGhlIHBldHMgYW5kIHRoZSBjb3VudCBvZiBmcmllbmRzIG9sZGVyIHRoYW4gMzBcIixcbiAgLy9cInN1bSBvZiB0aGUgbGVuZ3RocyBvZiB0aGUgcGV0cyBkaXZpZGVkIGJ5IHRoZWlyIGF2ZXJhZ2UgYWdlXCIsXG4gIC8vXCJDb3JleSBNb250ZWxsYSdzIHdpZmUsIFJhY2hlbCBNb250ZWxsYSdzIGh1c2JhbmQncyBhZ2UsIGFuZCBKb3NoJ3MgcGV0IHR1cnRsZSBvciBDaHJpcyBTdGV2ZSBHcmFuZ2VyJ3MgcGV0IGRvZ1wiLFxuICAvL1wiQ29yZXkgSmFtZXMgTW9udGVsbGEncyBhZ2Ugb3IgaGlzIHdpZmUncyBoZWlnaHRcIixcbiAgLy9cIlBlb3BsZSB5b3VuZ2VyIHRoYW4gQ29yZXkgTW9udGVsbGFcIlxuICAvKlxuICBcIkNvcmV5IE1vbnRlbGxhJ3MgYWdlXCIsXG4gIFwiQ29yZXkgTW9udGVsbGEncyBoYWlyIGNvbG9yXCIsXG4gIFwiV2hhdCB3YXMgQ29yZXkgTW9udGVsbGEncyBsb3dlc3Qgc2FsYXJ5XCIsXG4gIFwiV2hhdCB3YXMgQ29yZXkncyBmaXJzdCBjYXJcIixcbiAgLypcbiAgXCJDb3JleSBNb250ZWxsYSdzIGFnZVwiLFxuICBcIkNvcmV5J3MgYWdlXCIsXG4gIFwiUGVvcGxlIHlvdW5nZXIgdGhhbiBDb3JleSBNb250ZWxsYVwiLFxuICBcIk1vZGVybiBGYW1pbHkgZXBpc29kZSB3aXRoIEVkd2FyZCBOb3J0b25cIixcbiAgXCJTdW0gb2YgdGhlIGxlbmd0aHMgb2YgdGhlIHBldHNcIixcbiAgXCJXaG8gbG92ZXMgQ29yZXk/XCIsXG4gIFwiV2hvIGRvZXMgQ29yZXkgbG92ZT9cIixcbiAgXCJEaWQgdGhlIGdyb3VuZGhvZyBzZWUgaXRzIHNoYWRvdz9cIixcbiAgXCJXaGVuIGRpZCBDb3JleSBnbyBvdXQgd2l0aCBoaXMgd2lmZSBvciBoZXIgZnJpZW5kcz9cIixcbiAgXCJQZW9wbGUgeW91bmdlciB0aGFuIENvcmV5IE1vbnRlbGxhXCIsXG4gIFwiaG93IG9mdGVuIGRvZXMgY2hhc2UgaGF2ZSBsdW5jaCB3aXRoIGhpcyB3aWZlIG9yIGhlciBmcmllbmRzXCIsXG4gIFwicGVvcGxlIHdobyBhcmUgdW5kZXIgMzAgeWVhcnMgb2xkXCIsXG4gIFwicGVvcGxlIHdobyBhcmUgdW5kZXIgMzAgcG91bmRzXCIsXG4gIFwicGVvcGxlIHdobyBhcmUgdW5kZXIgMzBcIixcbiAgXCJwZW9wbGUgd2hvc2UgYWdlIDwgQ2hyaXMgR3JhbmdlcidzXCIsXG4gIFwicGVvcGxlIHdob3NlIGFnZSA8IENocmlzIEdyYW5nZXIncyBhZ2VcIixcbiAgXCJwZW9wbGUgd2hvc2UgYWdlIGlzIGxlc3MgdGhhbiBDaHJpcyBHcmFuZ2VyJ3NcIixcbiAgXCJwZW9wbGUgd2hvIGFyZSB5b3VuZ2VyIHRoYW4gQ2hyaXMgR3JhbmdlclwiLFxuICBcInBlb3BsZSBvbGRlciB0aGFuIENvcmV5IE1vbnRlbGxhJ3Mgc3BvdXNlXCIsXG4gIFwicGVvcGxlIG9sZGVyIHRoYW4gdGhlaXIgc3BvdXNlXCIsXG4gIFwicGVvcGxlIHdobyBhcmUgZWl0aGVyIGhlYWRzIG9yIHNwb3VzZXMgb2YgaGVhZHNcIixcbiAgXCJwZW9wbGUgd2hvIGhhdmUgcmVkIG9yIGJsYWNrIGhhaXJcIixcbiAgXCJwZW9wbGUgd2hvIGhhdmUgYSBoYWlyIGNvbG9yIG9mIHJlZCBvciBibGFja1wiLFxuICBcInBlb3BsZSB3aG8gaGF2ZSBuZWl0aGVyIGF0dGVuZGVkIGEgbWVldGluZyBub3IgaGFkIGEgb25lLW9uLW9uZVwiLFxuICBcInNhbGFyaWVzIHBlciBkZXBhcnRtZW50XCIsXG4gIFwic2FsYXJpZXMgcGVyIGRlcGFydG1lbnQgYW5kIGFnZVwiLFxuICBcInNhbGFyaWVzIHBlciBkZXBhcnRtZW50LCBlbXBsb3llZSwgYW5kIGFnZVwiLFxuICBcInN1bSBvZiB0aGUgc2FsYXJpZXMgcGVyIGRlcGFydG1lbnRcIixcbiAgXCJhdmVyYWdlIG9mIHRoZSBzYWxhcmllcyBwZXIgZGVwYXJ0bWVudFwiLFxuICBcInRvcCAyIGVtcGxveWVlIHNhbGFyaWVzXCIsXG4gIFwidG9wIDIgc2FsYXJpZXMgcGVyIGRlcGFydG1lbnRcIixcbiAgXCJzdW0gb2YgdGhlIHRvcCAyIHNhbGFyaWVzIHBlciBkZXBhcnRtZW50XCIsXG4gIFwiZGVwYXJ0bWVudHMgd2hlcmUgYWxsIHRoZSBlbXBsb3llZXMgYXJlIG92ZXItNDAgbWFsZXNcIixcbiAgXCJlbXBsb3llZXMgd2hvc2Ugc2FsZXMgYXJlIGdyZWF0ZXIgdGhhbiB0aGVpciBzYWxhcnlcIixcbiAgXCJjb3VudCBlbXBsb3llZXMgYW5kIHRoZWlyIHNwb3VzZXNcIixcbiAgXCJkaXNoZXMgd2l0aCBlZ2dzIGFuZCBjaGlja2VuXCIsXG4gIFwiZGlzaGVzIHdpdGhvdXQgZWdncyBhbmQgY2hpY2tlblwiLFxuICBcImRpc2hlcyB3aXRob3V0IGVnZ3Mgb3IgY2hpY2tlblwiLFxuICBcImRpc2hlcyB3aXRoIGVnZ3MgdGhhdCBhcmVuJ3QgZGVzc2VydHNcIixcbiAgXCJkaXNoZXMgdGhhdCB0YWtlIDMwIG1pbnV0ZXMgdG8gYW4gaG91clwiLFxuICBcInBlb3BsZSB3aG8gbGl2ZSBhbG9uZVwiLFxuICBcImV2ZXJ5b25lIGluIHRoaXMgcm9vbSBzcGVha3MgYXQgbGVhc3QgdHdvIGxhbmd1YWdlc1wiLFxuICBcIkJpcmRzIGNhbiBmbHksIGJ1dCBwZW5ndWlucyBjYW4gbm90LCBidXQgSGFycnkgdGhlIFJvY2tldCBQZW5ndWluIGNhbi5cIixcbiAgXCJhdCBsZWFzdCB0d28gbGFuZ3VhZ2VzIGFyZSBzcG9rZW4gYnkgZXZlcnlvbmUgaW4gdGhpcyByb29tXCIsXG4gIFwiZnJpZW5kcyBvbGRlciB0aGFuIHRoZSBhdmVyYWdlIGFnZSBvZiBwZW9wbGUgd2l0aCBwZXRzXCIsXG4gIFwibWVldGluZ3Mgam9obiB3YXMgaW4gaW4gdGhlIGxhc3QgMTAgZGF5c1wiLFxuICBcInBhcnRzIHRoYXQgaGF2ZSBhIGNvbG9yIG9mIHJlZCwgZ3JlZW4sIGJsdWUsIG9yIHllbGxvd1wiLFxuICBcImVtcGxveWVlIHNhbGFyeSAvIGVtcGxveWVlJ3MgZGVwYXJ0bWVudCB0b3RhbCBjb3N0XCIsXG4gIFwiUmV0dXJuIHRoZSBhdmVyYWdlIG51bWJlciBvZiBwdWJsaWNhdGlvbnMgYnkgQm9iIGluIGVhY2ggeWVhclwiLFxuICBcIlJldHVybiB0aGUgY29uZmVyZW5jZSBpbiBlYWNoIGFyZWEgd2hvc2UgcGFwZXJzIGhhdmUgdGhlIG1vc3QgdG90YWwgY2l0YXRpb25zXCIsXG4gIFwicmV0dXJuIGFsbCBjb25mZXJlbmNlcyBpbiB0aGUgZGF0YWJhc2UgYXJlYVwiLFxuICBcInJldHVybiBhbGwgdGhlIG9yZ2FuaXphdGlvbnMsIHdoZXJlIHRoZSBudW1iZXIgb2YgcGFwZXJzIGJ5IHRoZSBvcmdhbml6YXRpb24gaXMgbW9yZSB0aGFuIHRoZSBudW1iZXIgb2YgYXV0aG9ycyBpbiBJQk1cIixcbiAgXCJyZXR1cm4gdGhlIGF1dGhvcnMsIHdoZXJlIHRoZSBudW1iZXIgb2YgcGFwZXJzIGJ5IGVhY2ggYXV0aG9yIGluIFZMREIgaXMgbW9yZSB0aGFuIHRoZSBudW1iZXIgb2YgcGFwZXJzIGluIElDREVcIixcbiAgXCJXaGF0IGFyZSB0aGUgcG9wdWxhdGlvbnMgb2YgY2l0aWVzIHRoYXQgYXJlIGxvY2F0ZWQgaW4gQ2FsaWZvcm5pYT9cIixcbiAgXCJXaGF0IGpvYnMgYXMgYSBzZW5pb3Igc29mdHdhcmUgZGV2ZWxvcGVyIGFyZSBhdmFpbGFibGUgaW4gSG91c3RvbiBidXQgbm90IFNhbiBBbnRvbmlvP1wiLFxuICBcIk5laXRoZXIgb2YgdGhlc2UgYm95cyB3YW50cyB0byB0cnkgYSBwaWVjZSBvZiBwaW5lYXBwbGUgcGl6emEuXCIsXG4gIFwiU2hvcnRlc3QgZmxpZ2h0IGJldHdlZW4gTmV3IFlvcmsgYW5kIFNhbiBGcmFuY2lzY29cIixcbiAgXCJXaGVuIGRpZCBDb3JleSBNb250ZWxsYSBtYXJyeSBoaXMgc3BvdXNlP1wiLFxuICBcIkFnZXMgb2YgQ2hyaXMgU3RldmUgR3JhbmdlciwgQ29yZXkgSmFtZXMgSXJ2aW5lIE1vbnRlbGxhLCBhbmQgSm9zaCBDb2xlXCIsICBcbiAgXCJUaGUgc3dlZXQgcG90YXRvZXMgaW4gdGhlIHZlZ2V0YWJsZSBiaW4gYXJlIGdyZWVuIHdpdGggbW9sZC5cIixcbiAgXCJTdGF0ZXMgaW4gdGhlIFVuaXRlZCBTdGF0ZXMgb2YgQW1lcmljYVwiLFxuICBcIlBlb3BsZSBvbGRlciB0aGFuIENocmlzIEdyYW5nZXIgYW5kIHlvdW5nZXIgdGhhbiBFZHdhcmQgTm9ydG9uXCIsXG4gIFwiU3VtIG9mIHRoZSBzYWxhcmllcyBwZXIgZGVwYXJ0bWVudFwiLFxuICBcIkRpc2hlcyB3aXRoIGVnZ3MgYW5kIGNoaWNrZW5cIixcbiAgXCJQZW9wbGUgd2hvc2UgYWdlIDwgMzBcIixcbiAgXCJQZW9wbGUgYmV0d2VlbiA1MCBhbmQgNjAgeWVhcnMgb2xkXCIsXG4gIFwiU3RldmUgaXMgMTAgeWVhcnMgb2xkIGFuZCBTdmVuIGlzIDEyIHllYXJzIG9sZFwiLFxuICBcInNhbGFyaWVzIHBlciBkZXBhcnRtZW50LCBlbXBsb3llZSwgYW5kIGFnZVwiLFxuICBcIldoZXJlIGFyZSB0aGUgcmVzdGF1cmFudHMgaW4gU2FuIEZyYW5jaXNjbyB0aGF0IHNlcnZlIGdvb2QgRnJlbmNoIGZvb2Q/XCIsXG4gIFwiRGlzaGVzIHRoYXQgZG8gbm90IGhhdmUgZWdncyBvciBjaGlja2VuXCIsXG4gIFwiV2hvIGhhZCB0aGUgbW9zdCBzYWxlcyBsYXN0IHllYXI/XCIsXG4gIFwiV2hpY2ggc2FsZXNtYW4gaGFkIHRoZSBoaWdoZXN0IHRvdGFsIHNhbGVzIGxhc3QgeWVhcj9cIixcbiAgXCJkZXBhcnRtZW50cyB3aGVyZSBhbGwgb2YgdGhlIGVtcGxveWVlcyBhcmUgbWFsZVwiLFxuICBcInN1bSBvZiB0aGUgdG9wIDIgc2FsYXJpZXMgcGVyIGRlcGFydG1lbnRcIixcbiAgXCJXaGF0IGlzIENvcmV5IE1vbnRlbGxhJ3MgYWdlP1wiLFxuICBcIlBlb3BsZSBvbGRlciB0aGFuIENvcmV5IE1vbnRlbGxhXCIsXG4gIFwiSG93IG1hbnkgNCBzdGFyIHJlc3RhdXJhbnRzIGFyZSBpbiBTYW4gRnJhbmNpc2NvP1wiLFxuICBcIldoYXQgaXMgdGhlIGF2ZXJhZ2UgZWxldmF0aW9uIG9mIHRoZSBoaWdoZXN0IHBvaW50cyBpbiBlYWNoIHN0YXRlP1wiLFxuICBcIldoYXQgaXMgdGhlIG5hbWUgb2YgdGhlIGxvbmdlc3Qgcml2ZXIgaW4gdGhlIHN0YXRlIHRoYXQgaGFzIHRoZSBsYXJnZXN0IGNpdHkgaW4gdGhlIFVuaXRlZCBTdGF0ZXMgb2YgQW1lcmljYT9cIixcbiAgKi9cbl07XG5cbi8qXG5sZXQgc2lyaXBocmFzZXMgPSBbXG4gIFwiRmluZCB2aWRlb3MgSSB0b29rIGF0IEl2YSdzIGJpcnRoZGF5IHBhcnR5XCIsXG4gIFwiRmluZCBwaWNzIGZyb20gbXkgdHJpcCB0byBBc3BlbiBpbiAyMDE0XCIsXG4gIFwiRmluZCBhIHRhYmxlIGZvciBmb3VyIHBlb3BsZSB0b25pZ2h0IGluIENoaWNhZ29cIixcbiAgXCJGaW5kIGEgdGFibGUgZm9yIGZvdXIgdG9uaWdodCBpbiBDaGljYWdvXCIsXG4gIFwiSG93IGlzIHRoZSB3ZWF0aGVyIHRvbW9ycm93P1wiLFxuICBcIldha2UgbWUgdXAgYXQgN0FNIHRvbW9ycm93XCIsXG4gIFwiTW92ZSBteSAyUE0gbWVldGluZyB0byAyOjMwXCIsXG4gIFwiRG8gSSBoYXZlIGFueSBuZXcgdGV4dHMgZnJvbSBSaWNrP1wiLFxuICBcIlNob3cgbXkgc2VsZmllcyBmcm9tIE5ldyBZZWFyJ3MgRXZlXCIsXG4gIFwiQ2FsbCBEYWQgYXQgd29ya1wiLFxuICBcIkFpZXNoYSBUdXJuZXIgaXMgbXkgbW9tXCIsXG4gIFwiUmVhZCBteSBsYXRlc3QgZW1haWxcIixcbiAgXCJUZXh0IHBlZXQgJ1NlZSB5b3Ugc29vbiBzbWlsZXkgZXhsYW1hdGlvbiBwb2ludCdcIixcbiAgXCJXaGF0IGlzIHRyZW5kaW5nIG9uIFR3aXR0ZXI/XCIsXG4gIFwiQ2FsbCBiYWNrIG15IGxhc3QgbWlzc2VkIGNhbGwuXCIsXG4gIFwiV2hlcmUgaXMgQnJpYW4/XCIsXG4gIFwiRmluZCB0d2VldHMgd2l0aCB0aGUgaGFzaHRhZyBCYXlCcmlkZ2VcIixcbiAgXCJSZWFkIG15IGxhc3QgbWVzc2FnZSBmcm9tIEFuZHJld1wiLFxuICBcIkRvIEkgaGF2ZSBhbnkgbmV3IHZvaWNlbWFpbD9cIixcbiAgXCJGYWNlVGltZSBTYXJhaFwiLFxuICBcIlJlZGlhbCB0aGF0IGxhc3QgbnVtYmVyXCIsXG4gIFwiUGxheSB0aGUgbGFzdCB2b2ljZW1haWwgZnJvbSBBYXJvblwiLFxuICBcIldoZW4gZGlkIEluZ3JpZCBjYWxsIG1lP1wiLFxuICBcIkdldCBteSBjYWxsIGhpc3RvcnlcIixcbiAgXCJNYXJrIHRoZSB0aGlyZCBvbmUgY29tcGxldGVcIixcbiAgXCJBZGQgR3JlZyB0byBteSAyOjMwIG1lZXRpbmcgb24gVGh1cnNkYXlcIixcbiAgXCJSZW1pbmQgbWUgYWJvdXQgdGhpcyBlbWFpbCBGcmlkYXkgYXQgbm9vblwiLCAvLyBub29uIHNob3VsZCBiZSBhIHF1YW50aXR5XG4gIFwiQ3JlYXRlIGEgbmV3IGxpc3QgY2FsbGVkIEdyb2Nlcmllc1wiLCAvLyB3aHkgaXNuJ3QgYXxEVCBpbmNsdWRlZGVkIGluIFwiYSBuZXcgbGlzdFwiXG4gIFwiV2hlcmUgaXMgbXkgbmV4dCBtZWV0aW5nP1wiLCAvLyBIb3cgY2FuIHdlIG1ha2UgbWVldGluZyBhIG5vdW4/XG4gIFwiU2V0IGFuIGFsYXJtIGZvciA5IEFNIGV2ZXJ5IEZyaWRheVwiLCAvLyBBTSBuZWVkcyB0byBiZSBzcGVjaWFsIGNhc2VkIHRvIGF0dGFjaCB0byA5XG4gIFwiQ2FuY2VsIG15IG1lZXRpbmdzIG9uIEZyaWRheVwiLCAvLyBDYW5jZWwgbmVlZHMgdG8gYmUgYSB2ZXJiXG4gIFwiVHVybiBvZmYgYWxsIG15IGFsYXJtc1wiLFxuICBcIkFkZCBicnVzc2VscyBzcHJvdXRzIHRvIG15IGdyb2NlcnkgbGlzdFwiLFxuICBcIlJlbWluZCBtZSB0byBwYXkgTm9haCBiYWNrIHRvbW9ycm93IG1vcm5pbmdcIixcbiAgLy8gU3BvcnRzXG4gIFwiV2hlbiBpcyB0aGUgbmV4dCBNYXZlcmlja3MgaG9tZSBnYW1lP1wiLFxuICBcIldobyBpcyB0aGUgcXVhcnRlcmJhY2sgZm9yIERhbGxhcz9cIixcbiAgXCJXaG8gaGFzIHRoZSBtb3N0IFJCSXNcIixcbiAgXCJXaG8gd29uIHRoZSBOQkEgZmluYWxzP1wiLFxuICBcIldoZXJlIGlzIFdyaWdsZXkgRmllbGQ/XCIsXG4gIFwiSG93IG1hbnkgcmVndWxhci1zZWFzb24gZ2FtZXMgZG9lcyBlYWNoIE5CQSB0ZWFtIHBsYXk/XCIsXG4gIFwiV2hlbiBpcyB0aGUgTEEgR2FsYXh5J3MgbmV4dCBob21lIGdhbWU/XCIsXG4gIFwiV2hvIGRvIHRoZSBDaGljYWdvIEN1YnMgcGxheSBvbiBTZXB0ZW1iZXIgMjE/XCIsIC8vIDIxIG5lZWRzIHRvIG1lcmdlIHdpdGggU2VwdGVtYmVyXG4gIFwiV2hlbiBkb2VzIHRoZSBmb290YmFsbCBzZWFzb24gc3RhcnQ/XCIsXG4gIFwiV2hhdCBob2NrZXkgdGVhbXMgcGxheSB0b2RheT9cIixcbiAgXCJEaWQgdGhlIENoaWNhZ28gY3VicyB3aW4gb24gVGh1cnNkYXk/XCIsXG4gIC8vIEVudGVydGFpbm1lbnRcbiAgXCJQbGF5IFRoaXJkIEV5ZSBCbGluZCdzIG5ldyBhbGJ1bVwiLFxuICBcIlBsYXkgbW9yZSBsaWtlIHRoaXNcIixcbiAgXCJQbGF5IHRoZSBudW1iZXIgb25lIHNvbmcgcmlnaHQgbm93XCIsIC8vIE5lZWRzIGhlbHAgd2l0aCBub3VuIGdyb3VwaW5nIHRhZyBhY2N1cmFjeVxuICBcIldoYXQgc29uZyBpcyBwbGF5aW5nIHJpZ2h0IG5vdz9cIiwgLy8gcmlnaHQgbm93IGlzIHByb2JsZW1hdGljXG4gIFwiV2hhdCBtb3ZpZXMgYXJlIHBsYXlpbmcgdG9kYXk/XCIsXG4gIFwiV2hlcmUgaXMgVW5icm9rZW4gcGxheWluZyBhcm91bmQgaGVyZT9cIiwgLy8gcGxheWluZyBhcm91bmQgaGVyZSBpcyBwcm9ibGVtYXRpY1xuICBcIkkgbGlrZSB0aGlzIHNvbmdcIixcbiAgXCJXaGF0IGFyZSBzb21lIFBHIG1vdmllcyBwbGF5aW5nIHRoaXMgYWZ0ZXJub29uXCIsXG4gIFwiV2hvIHNpbmdzIHRoaXM/XCIsIC8vIHRhZ3MgYXJlIGFsbCB3cm9uZywgaGV1cmlzdGljcyBkb24ndCBoZWxwIGl0XG4gIFwiSSB3YW50IHRvIGhlYXIgdGhlIGxpdmUgdmVyc2lvbiBvZiB0aGlzIHNvbmdcIixcbiAgXCJQbGF5IG9ubHkgc29uZ3MgYnkgTmlja2kgTWluYWpcIixcbiAgXCJXaGF0IHdvbiBiZXN0IHBpY3R1cmUgaW4gMjAwMD9cIixcbiAgXCJIb3cgYXJlIHRoZSByYXRpbmdzIGZvciBUaGUgQm94dHJvbGxzP1wiLFxuICBcIldobyBkaXJlY3RlZCBBIFBlcmZlY3QgV29ybGQ/XCIsXG4gIFwiRG8gcGVvcGxlIGxpa2UgVGhlIFRoZW9yeSBvZiBFdmVyeXRoaW5nP1wiLFxuICAvLyBPdXQgYW5kIGFib3V0IChha2EgRm91cnNxdWFyZSBxdWVyaWVzKVxuICBcIldoZXJlIGlzIGEgZ29vZCBJbmRpYW4gcGxhY2UgYXJvdW5kIGhlcmU/XCIsIC8vIFwicGxhY2UgYXJvdW5kIGhlcmVcIiBpcyB0YWdnZWQgd3JvbmcsIGhldXJpc3RpY3MgZG9uJ3QgaGVscFxuICBcIkkgYW0gcnVubmluZyBsb3cgb24gZ2FzXCIsXG4gIFwiV2hhdCB0aW1lIGRvZXMgV2hvbGUgRm9vZHMgY2xvc2U/XCIsXG4gIFwiR2l2ZSBtZSBwdWJsaWMgdHJhbnNpdCBkaXJlY3Rpb24gdG8gdGhlIERlIFlvdW5nIE11c2V1bVwiLCAvLyBQdWJsaWMgaXMgdGFnZ2VkIGEgdmVyYlxuICBcIldoZXJlIGlzIGEgZ29vZCBpbmV4cGVuc2l2ZSBwbGFjZSB0byBlYXQgYXJvdW5kIGhlcmU/XCIsIC8vIFwiVG8gZWF0IGFyb3VuZyBoZXJlXCIgaXMgbm90IHJlY29nbml6ZWRcbiAgXCJNYWtlIGEgcmVzZXJ2YXRpb24gYXQgYSByb21hbnRpYyByZXN0YXVyYW50IHRvbmlnaHQgYXQgN1BNXCIsXG4gIFwiRmluZCBhIGhhcHB5IGhvdXIgbmVhcmJ5XCIsIC8vIG5lYXJieSBzaG91bGQgYmUgYW4gYWR2ZXJiP1xuICBcIkZpbmQgY29mZmVlIG5lYXIgbWVcIixcbiAgXCJXaGF0IHBsYW5lcyBhcmUgZmx5aW5nIGFib3ZlIG1lP1wiLCAvLyBUYWdzIGFyZSBhbGwgd3Jvbmc6IHBsYW5lcyBpcyBhIHZlcmIsIGZseWluZyBpcyBhbiBhZHZlcmJcbiAgXCJJIG5lZWQgc29tZSBhc3BpcmluXCIsXG4gIFwiSG93IGFyZSB0aGUgcmV2aWV3cyBmb3IgTG9uZyBCcmlkZ2UgUGl6emEgaW4gU2FuIEZyYW5jaXNjbz9cIixcbiAgXCJXaGVyZSBpcyBhIGdvb2QgaGFpciBzYWxvbj9cIixcbiAgXCJXaGF0J3MgdGhlIGJlc3QgcmV0YXVyYW50IGluIFNhbiBGcmFuY2lzY28/XCIsXG4gIFwiSSBuZWVkIGEgZ29vZCBlbGVjdHJpY2lhblwiLFxuICBcIldoZXJlIGFtIEk/XCIsXG4gIFwiV2hhdCBpcyBteSBFVEE/XCIsXG4gIC8vIEhvbWVraXRcbiAgXCJUdXJuIHRoZSBsaWdodHMgYmx1ZVwiLFxuICBcIlR1cm4gb2ZmIHRoZSByYWRpb1wiLCAvLyBcIm9mZlwiIHNob3VsZCBiZSBhIHBhcnRpY2xlXG4gIFwiVHVybiBvZmYgdGhlIHByaW50ZXIgaW4gdGhlIG9mZmljZVwiLCAvLyBcIm9mZlwiIHNob3VsZCBiZSBhIHBhcnRpY2xlXG4gIFwiTG9jayB0aGUgZnJvbnQgZG9vclwiLCAvLyBmcm9udCBpcyBjbGFzc2lmaWVkIGEgbm91biwgc2hvdWxkIGJlIGFuIGFkaGVjdGl2ZVxuICBcIlNldCB0aGUgYnJpZ2h0bmVzcyBvZiB0aGUgZG93bnN0YWlycyBsaWdodHMgdG8gNTAlXCIsXG4gIFwiU2V0IHRoZSBUYWhvZSBob3VzZSB0byA3MiBkZWdyZWVzXCIsIC8vIGhvdXNlIGlzIGEgdmVyYlxuICBcIlR1cm4gb2ZmIENobG9lJ3MgbGlnaHRcIiwgLy8gXCJvZmZcIiBzaG91bGQgYmUgYSBwYXJ0aWNsZSBcbiAgXCJUdXJuIHRoZSBsaXZpbmcgcm9vbSBsaWdodHMgYWxsIHRoZSB3YXkgdXBcIiwgLy8gbGlnaHRzIGlzIGEgdmVyYlxuICBcIlR1cm4gb24gdGhlIGJhdGhyb29tIGhlYXRlclwiLFxuICAvLyBHZXR0aW5nIGFuc3dlcnNcbiAgXCJEbyBJIG5lZWQgYW4gdW1icmVsbGEgdG9kYXk/XCIsXG4gIFwiSG93IGlzIHRoZSBOaWtrZWkgZG9pbmc/XCIsXG4gIFwiV2hlbiBpcyBkYXlsaWdodCBzYXZpbmcgdGltZT9cIixcbiAgXCJXaGF0IGlzIHRoZSBkZWZpbml0aW9uIG9mIHByYWdtYXRpYz9cIiwgLy8gXCJwcmFnbWF0aWMgaXMgYW4gYWRqZWN0aXZlXCJcbiAgXCJXaGF0J3MgdGhlIGxhdGVzdCBpbiBTYW4gRnJhbmNpc2NvP1wiLFxuICBcIkRpZCB0aGUgZ3JvdW5kaG9nIHNlZSBpdHMgc2hhZG93P1wiLFxuICBcIldoZW4gaXMgc3Vuc2V0IGluIFBhcmlzXCIsIC8vIHN1bnNldCBzaG91bGQgYmUgYSBub3VuXG4gIFwiV2hhdCBpcyB0aGUgcG9wdWxhdGlvbiBvZiBKYW1haWNhP1wiLFxuICBcIldoYXQgaXMgdGhlIHNxdWFyZSByb290IG9mIDEyOD9cIixcbiAgXCJXaGF0IGlzIDQwIGRlZ3JlZXMgRmFyZW5oZWl0IGluIENlbHNpdXNcIiwgLy8gSGVyZSBpcyBhbiBleGFtcGxlIHdoZXJlIHRoZSBwcm9wZXIgbm91biBjb21iaW5pbmcgaGV1cmlzdGljIGZhaWxzXG4gIFwiV2hhdCBpcyB0aGUgdGVtcGVyYXR1cmUgb3V0c2lkZT9cIiwgLy8gb3V0c2lkZSBpcyBhIHByZXBvc2l0aW9uXG4gIFwiV2hhdCB0aW1lIGlzIGl0IGluIEJlcmxpblwiLFxuICBcIldoZW4gd2FzIEFicmFoYW0gTGluY29sbiBib3JuP1wiLCAvLyBUaGlzIHdpbGwgZ2V0IEFicmFoYW0gTGluY29sbiwgYnV0IHdlIG5lZWQgdG8gdXNlIFwid2hlblwiIGFuZCBcImJvcm5cIiB0byBmaWd1cmUgb3V0IGEgZGF0ZSBpcyBleHBlY3RlZFxuICBcIlNob3cgbWUgdGhlIE9yaW9uIGNvbnN0ZWxsYXRpb25cIixcbiAgXCJXaGF0J3MgdGhlIGhpZ2ggZm9yIEFuY2hvcmFnZSBvbiBUaHVyc2RheT9cIiwgLy8gVGhpcyBicmVha3Mgbm91biBjb21iaW5pbmcgaGV1cmlzdGljIFxuICBcIkhvdyBtYW55IGRvbGxhcnMgaXMgNDUgRXVyb3NcIixcbiAgXCJXaGF0IGRheSBpcyBpdD9cIixcbiAgXCJIb3cgbWFueSBjYWxvcmllcyBpbiBhIGJhZ2VsP1wiLFxuICBcIldoYXQgaXMgQXBwbGUncyBQL0UgcmF0aW8/XCIsXG4gIFwiQ29tcGFyZSBBQVBMIGFuZCBOQVNEQVFcIixcbiAgXCJIb3cgaHVtaWQgaXMgaXQgaW4gTmV3IFlvcmsgcmlnaHQgbm93XCIsIC8vIEhldXJpc3RpY3MgbWVzcyB1cCB0YWdnaW5nLCBcImlzXCIgaXMgYSBub3VuIGluIG9yZGVyIHRvIHVzZSBcImh1bWlkXCIgYXMgYW4gYWRqZWN0aXZlXG4gIFwiV2hhdCdzIGFuIDE4JSB0aXAgb24gJDg1P1wiLFxuICBcIldoYXQgaXMgdGhlIFVWIGluZGV4IG91dHNpZGU/XCIsXG4gIFwiSG93IG1hbnkgY3VwcyBpbiBhIGxpdGVyXCIsXG4gIFwiSXMgaXQgZ29pbmcgdG8gc25vdyBuZXh0IHdlZWs/XCIsXG5dO1xuKi9cblxuYXBwLmluaXQoXCJubHFwXCIsIGZ1bmN0aW9uICgpIHtcbiAgY29uc29sZS5sb2coYFJ1bm5pbmcgJHtwaHJhc2VzLmxlbmd0aH0gdGVzdHMuLi5gKTtcbiAgY29uc29sZS5sb2coXCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XCIpO1xuICBsZXQgcXVlcnlTdGF0ZXMgPSBwaHJhc2VzLm1hcCgocGhyYXNlKSA9PiB7cmV0dXJuIHBhcnNlVGVzdChwaHJhc2Usbil9KTtcbiAgbGV0IGNvbXBsZXRlID0gcXVlcnlTdGF0ZXMuZmlsdGVyKChzdGF0ZSkgPT4gc3RhdGUgPT09IG5scXAuU3RhdGVGbGFncy5DT01QTEVURSkubGVuZ3RoO1xuICBsZXQgbW9yZWluZm8gPSBxdWVyeVN0YXRlcy5maWx0ZXIoKHN0YXRlKSA9PiBzdGF0ZSA9PT0gbmxxcC5TdGF0ZUZsYWdzLk1PUkVJTkZPKS5sZW5ndGg7XG4gIGxldCBub3Jlc3VsdCA9IHF1ZXJ5U3RhdGVzLmZpbHRlcigoc3RhdGUpID0+IHN0YXRlID09PSBubHFwLlN0YXRlRmxhZ3MuTk9SRVNVTFQpLmxlbmd0aDtcbiAgY29uc29sZS5sb2coXCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XCIpO1xuICBjb25zb2xlLmxvZyhgVG90YWwgUXVlcmllczogJHtwaHJhc2VzLmxlbmd0aH0gfCBDb21wbGV0ZTogJHtjb21wbGV0ZX0gfCBNb3JlSW5mbzogJHttb3JlaW5mb30gfCBOb1Jlc3VsdDogJHtub3Jlc3VsdH1gKTtcbiAgY29uc29sZS5sb2coXCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XCIpO1xuICBcbn0pOyIsIiIsIi8vICAgICB1dWlkLmpzXG4vL1xuLy8gICAgIENvcHlyaWdodCAoYykgMjAxMC0yMDEyIFJvYmVydCBLaWVmZmVyXG4vLyAgICAgTUlUIExpY2Vuc2UgLSBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIF9nbG9iYWwgPSB0aGlzO1xuXG4gIC8vIFVuaXF1ZSBJRCBjcmVhdGlvbiByZXF1aXJlcyBhIGhpZ2ggcXVhbGl0eSByYW5kb20gIyBnZW5lcmF0b3IuICBXZSBmZWF0dXJlXG4gIC8vIGRldGVjdCB0byBkZXRlcm1pbmUgdGhlIGJlc3QgUk5HIHNvdXJjZSwgbm9ybWFsaXppbmcgdG8gYSBmdW5jdGlvbiB0aGF0XG4gIC8vIHJldHVybnMgMTI4LWJpdHMgb2YgcmFuZG9tbmVzcywgc2luY2UgdGhhdCdzIHdoYXQncyB1c3VhbGx5IHJlcXVpcmVkXG4gIHZhciBfcm5nO1xuXG4gIC8vIE5vZGUuanMgY3J5cHRvLWJhc2VkIFJORyAtIGh0dHA6Ly9ub2RlanMub3JnL2RvY3MvdjAuNi4yL2FwaS9jcnlwdG8uaHRtbFxuICAvL1xuICAvLyBNb2RlcmF0ZWx5IGZhc3QsIGhpZ2ggcXVhbGl0eVxuICBpZiAodHlwZW9mKF9nbG9iYWwucmVxdWlyZSkgPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRyeSB7XG4gICAgICB2YXIgX3JiID0gX2dsb2JhbC5yZXF1aXJlKCdjcnlwdG8nKS5yYW5kb21CeXRlcztcbiAgICAgIF9ybmcgPSBfcmIgJiYgZnVuY3Rpb24oKSB7cmV0dXJuIF9yYigxNik7fTtcbiAgICB9IGNhdGNoKGUpIHt9XG4gIH1cblxuICBpZiAoIV9ybmcgJiYgX2dsb2JhbC5jcnlwdG8gJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcykge1xuICAgIC8vIFdIQVRXRyBjcnlwdG8tYmFzZWQgUk5HIC0gaHR0cDovL3dpa2kud2hhdHdnLm9yZy93aWtpL0NyeXB0b1xuICAgIC8vXG4gICAgLy8gTW9kZXJhdGVseSBmYXN0LCBoaWdoIHF1YWxpdHlcbiAgICB2YXIgX3JuZHM4ID0gbmV3IFVpbnQ4QXJyYXkoMTYpO1xuICAgIF9ybmcgPSBmdW5jdGlvbiB3aGF0d2dSTkcoKSB7XG4gICAgICBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKF9ybmRzOCk7XG4gICAgICByZXR1cm4gX3JuZHM4O1xuICAgIH07XG4gIH1cblxuICBpZiAoIV9ybmcpIHtcbiAgICAvLyBNYXRoLnJhbmRvbSgpLWJhc2VkIChSTkcpXG4gICAgLy9cbiAgICAvLyBJZiBhbGwgZWxzZSBmYWlscywgdXNlIE1hdGgucmFuZG9tKCkuICBJdCdzIGZhc3QsIGJ1dCBpcyBvZiB1bnNwZWNpZmllZFxuICAgIC8vIHF1YWxpdHkuXG4gICAgdmFyICBfcm5kcyA9IG5ldyBBcnJheSgxNik7XG4gICAgX3JuZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIHI7IGkgPCAxNjsgaSsrKSB7XG4gICAgICAgIGlmICgoaSAmIDB4MDMpID09PSAwKSByID0gTWF0aC5yYW5kb20oKSAqIDB4MTAwMDAwMDAwO1xuICAgICAgICBfcm5kc1tpXSA9IHIgPj4+ICgoaSAmIDB4MDMpIDw8IDMpICYgMHhmZjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9ybmRzO1xuICAgIH07XG4gIH1cblxuICAvLyBCdWZmZXIgY2xhc3MgdG8gdXNlXG4gIHZhciBCdWZmZXJDbGFzcyA9IHR5cGVvZihfZ2xvYmFsLkJ1ZmZlcikgPT0gJ2Z1bmN0aW9uJyA/IF9nbG9iYWwuQnVmZmVyIDogQXJyYXk7XG5cbiAgLy8gTWFwcyBmb3IgbnVtYmVyIDwtPiBoZXggc3RyaW5nIGNvbnZlcnNpb25cbiAgdmFyIF9ieXRlVG9IZXggPSBbXTtcbiAgdmFyIF9oZXhUb0J5dGUgPSB7fTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICAgIF9ieXRlVG9IZXhbaV0gPSAoaSArIDB4MTAwKS50b1N0cmluZygxNikuc3Vic3RyKDEpO1xuICAgIF9oZXhUb0J5dGVbX2J5dGVUb0hleFtpXV0gPSBpO1xuICB9XG5cbiAgLy8gKipgcGFyc2UoKWAgLSBQYXJzZSBhIFVVSUQgaW50byBpdCdzIGNvbXBvbmVudCBieXRlcyoqXG4gIGZ1bmN0aW9uIHBhcnNlKHMsIGJ1Ziwgb2Zmc2V0KSB7XG4gICAgdmFyIGkgPSAoYnVmICYmIG9mZnNldCkgfHwgMCwgaWkgPSAwO1xuXG4gICAgYnVmID0gYnVmIHx8IFtdO1xuICAgIHMudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bMC05YS1mXXsyfS9nLCBmdW5jdGlvbihvY3QpIHtcbiAgICAgIGlmIChpaSA8IDE2KSB7IC8vIERvbid0IG92ZXJmbG93IVxuICAgICAgICBidWZbaSArIGlpKytdID0gX2hleFRvQnl0ZVtvY3RdO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gWmVybyBvdXQgcmVtYWluaW5nIGJ5dGVzIGlmIHN0cmluZyB3YXMgc2hvcnRcbiAgICB3aGlsZSAoaWkgPCAxNikge1xuICAgICAgYnVmW2kgKyBpaSsrXSA9IDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1ZjtcbiAgfVxuXG4gIC8vICoqYHVucGFyc2UoKWAgLSBDb252ZXJ0IFVVSUQgYnl0ZSBhcnJheSAoYWxhIHBhcnNlKCkpIGludG8gYSBzdHJpbmcqKlxuICBmdW5jdGlvbiB1bnBhcnNlKGJ1Ziwgb2Zmc2V0KSB7XG4gICAgdmFyIGkgPSBvZmZzZXQgfHwgMCwgYnRoID0gX2J5dGVUb0hleDtcbiAgICByZXR1cm4gIGJ0aFtidWZbaSsrXV0gKyBidGhbYnVmW2krK11dICtcbiAgICAgICAgICAgIGJ0aFtidWZbaSsrXV0gKyBidGhbYnVmW2krK11dICsgJy0nICtcbiAgICAgICAgICAgIGJ0aFtidWZbaSsrXV0gKyBidGhbYnVmW2krK11dICsgJy0nICtcbiAgICAgICAgICAgIGJ0aFtidWZbaSsrXV0gKyBidGhbYnVmW2krK11dICsgJy0nICtcbiAgICAgICAgICAgIGJ0aFtidWZbaSsrXV0gKyBidGhbYnVmW2krK11dICsgJy0nICtcbiAgICAgICAgICAgIGJ0aFtidWZbaSsrXV0gKyBidGhbYnVmW2krK11dICtcbiAgICAgICAgICAgIGJ0aFtidWZbaSsrXV0gKyBidGhbYnVmW2krK11dICtcbiAgICAgICAgICAgIGJ0aFtidWZbaSsrXV0gKyBidGhbYnVmW2krK11dO1xuICB9XG5cbiAgLy8gKipgdjEoKWAgLSBHZW5lcmF0ZSB0aW1lLWJhc2VkIFVVSUQqKlxuICAvL1xuICAvLyBJbnNwaXJlZCBieSBodHRwczovL2dpdGh1Yi5jb20vTGlvc0svVVVJRC5qc1xuICAvLyBhbmQgaHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L3V1aWQuaHRtbFxuXG4gIC8vIHJhbmRvbSAjJ3Mgd2UgbmVlZCB0byBpbml0IG5vZGUgYW5kIGNsb2Nrc2VxXG4gIHZhciBfc2VlZEJ5dGVzID0gX3JuZygpO1xuXG4gIC8vIFBlciA0LjUsIGNyZWF0ZSBhbmQgNDgtYml0IG5vZGUgaWQsICg0NyByYW5kb20gYml0cyArIG11bHRpY2FzdCBiaXQgPSAxKVxuICB2YXIgX25vZGVJZCA9IFtcbiAgICBfc2VlZEJ5dGVzWzBdIHwgMHgwMSxcbiAgICBfc2VlZEJ5dGVzWzFdLCBfc2VlZEJ5dGVzWzJdLCBfc2VlZEJ5dGVzWzNdLCBfc2VlZEJ5dGVzWzRdLCBfc2VlZEJ5dGVzWzVdXG4gIF07XG5cbiAgLy8gUGVyIDQuMi4yLCByYW5kb21pemUgKDE0IGJpdCkgY2xvY2tzZXFcbiAgdmFyIF9jbG9ja3NlcSA9IChfc2VlZEJ5dGVzWzZdIDw8IDggfCBfc2VlZEJ5dGVzWzddKSAmIDB4M2ZmZjtcblxuICAvLyBQcmV2aW91cyB1dWlkIGNyZWF0aW9uIHRpbWVcbiAgdmFyIF9sYXN0TVNlY3MgPSAwLCBfbGFzdE5TZWNzID0gMDtcblxuICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2Jyb29mYS9ub2RlLXV1aWQgZm9yIEFQSSBkZXRhaWxzXG4gIGZ1bmN0aW9uIHYxKG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gICAgdmFyIGkgPSBidWYgJiYgb2Zmc2V0IHx8IDA7XG4gICAgdmFyIGIgPSBidWYgfHwgW107XG5cbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIHZhciBjbG9ja3NlcSA9IG9wdGlvbnMuY2xvY2tzZXEgIT0gbnVsbCA/IG9wdGlvbnMuY2xvY2tzZXEgOiBfY2xvY2tzZXE7XG5cbiAgICAvLyBVVUlEIHRpbWVzdGFtcHMgYXJlIDEwMCBuYW5vLXNlY29uZCB1bml0cyBzaW5jZSB0aGUgR3JlZ29yaWFuIGVwb2NoLFxuICAgIC8vICgxNTgyLTEwLTE1IDAwOjAwKS4gIEpTTnVtYmVycyBhcmVuJ3QgcHJlY2lzZSBlbm91Z2ggZm9yIHRoaXMsIHNvXG4gICAgLy8gdGltZSBpcyBoYW5kbGVkIGludGVybmFsbHkgYXMgJ21zZWNzJyAoaW50ZWdlciBtaWxsaXNlY29uZHMpIGFuZCAnbnNlY3MnXG4gICAgLy8gKDEwMC1uYW5vc2Vjb25kcyBvZmZzZXQgZnJvbSBtc2Vjcykgc2luY2UgdW5peCBlcG9jaCwgMTk3MC0wMS0wMSAwMDowMC5cbiAgICB2YXIgbXNlY3MgPSBvcHRpb25zLm1zZWNzICE9IG51bGwgPyBvcHRpb25zLm1zZWNzIDogbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgICAvLyBQZXIgNC4yLjEuMiwgdXNlIGNvdW50IG9mIHV1aWQncyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBjdXJyZW50IGNsb2NrXG4gICAgLy8gY3ljbGUgdG8gc2ltdWxhdGUgaGlnaGVyIHJlc29sdXRpb24gY2xvY2tcbiAgICB2YXIgbnNlY3MgPSBvcHRpb25zLm5zZWNzICE9IG51bGwgPyBvcHRpb25zLm5zZWNzIDogX2xhc3ROU2VjcyArIDE7XG5cbiAgICAvLyBUaW1lIHNpbmNlIGxhc3QgdXVpZCBjcmVhdGlvbiAoaW4gbXNlY3MpXG4gICAgdmFyIGR0ID0gKG1zZWNzIC0gX2xhc3RNU2VjcykgKyAobnNlY3MgLSBfbGFzdE5TZWNzKS8xMDAwMDtcblxuICAgIC8vIFBlciA0LjIuMS4yLCBCdW1wIGNsb2Nrc2VxIG9uIGNsb2NrIHJlZ3Jlc3Npb25cbiAgICBpZiAoZHQgPCAwICYmIG9wdGlvbnMuY2xvY2tzZXEgPT0gbnVsbCkge1xuICAgICAgY2xvY2tzZXEgPSBjbG9ja3NlcSArIDEgJiAweDNmZmY7XG4gICAgfVxuXG4gICAgLy8gUmVzZXQgbnNlY3MgaWYgY2xvY2sgcmVncmVzc2VzIChuZXcgY2xvY2tzZXEpIG9yIHdlJ3ZlIG1vdmVkIG9udG8gYSBuZXdcbiAgICAvLyB0aW1lIGludGVydmFsXG4gICAgaWYgKChkdCA8IDAgfHwgbXNlY3MgPiBfbGFzdE1TZWNzKSAmJiBvcHRpb25zLm5zZWNzID09IG51bGwpIHtcbiAgICAgIG5zZWNzID0gMDtcbiAgICB9XG5cbiAgICAvLyBQZXIgNC4yLjEuMiBUaHJvdyBlcnJvciBpZiB0b28gbWFueSB1dWlkcyBhcmUgcmVxdWVzdGVkXG4gICAgaWYgKG5zZWNzID49IDEwMDAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3V1aWQudjEoKTogQ2FuXFwndCBjcmVhdGUgbW9yZSB0aGFuIDEwTSB1dWlkcy9zZWMnKTtcbiAgICB9XG5cbiAgICBfbGFzdE1TZWNzID0gbXNlY3M7XG4gICAgX2xhc3ROU2VjcyA9IG5zZWNzO1xuICAgIF9jbG9ja3NlcSA9IGNsb2Nrc2VxO1xuXG4gICAgLy8gUGVyIDQuMS40IC0gQ29udmVydCBmcm9tIHVuaXggZXBvY2ggdG8gR3JlZ29yaWFuIGVwb2NoXG4gICAgbXNlY3MgKz0gMTIyMTkyOTI4MDAwMDA7XG5cbiAgICAvLyBgdGltZV9sb3dgXG4gICAgdmFyIHRsID0gKChtc2VjcyAmIDB4ZmZmZmZmZikgKiAxMDAwMCArIG5zZWNzKSAlIDB4MTAwMDAwMDAwO1xuICAgIGJbaSsrXSA9IHRsID4+PiAyNCAmIDB4ZmY7XG4gICAgYltpKytdID0gdGwgPj4+IDE2ICYgMHhmZjtcbiAgICBiW2krK10gPSB0bCA+Pj4gOCAmIDB4ZmY7XG4gICAgYltpKytdID0gdGwgJiAweGZmO1xuXG4gICAgLy8gYHRpbWVfbWlkYFxuICAgIHZhciB0bWggPSAobXNlY3MgLyAweDEwMDAwMDAwMCAqIDEwMDAwKSAmIDB4ZmZmZmZmZjtcbiAgICBiW2krK10gPSB0bWggPj4+IDggJiAweGZmO1xuICAgIGJbaSsrXSA9IHRtaCAmIDB4ZmY7XG5cbiAgICAvLyBgdGltZV9oaWdoX2FuZF92ZXJzaW9uYFxuICAgIGJbaSsrXSA9IHRtaCA+Pj4gMjQgJiAweGYgfCAweDEwOyAvLyBpbmNsdWRlIHZlcnNpb25cbiAgICBiW2krK10gPSB0bWggPj4+IDE2ICYgMHhmZjtcblxuICAgIC8vIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYCAoUGVyIDQuMi4yIC0gaW5jbHVkZSB2YXJpYW50KVxuICAgIGJbaSsrXSA9IGNsb2Nrc2VxID4+PiA4IHwgMHg4MDtcblxuICAgIC8vIGBjbG9ja19zZXFfbG93YFxuICAgIGJbaSsrXSA9IGNsb2Nrc2VxICYgMHhmZjtcblxuICAgIC8vIGBub2RlYFxuICAgIHZhciBub2RlID0gb3B0aW9ucy5ub2RlIHx8IF9ub2RlSWQ7XG4gICAgZm9yICh2YXIgbiA9IDA7IG4gPCA2OyBuKyspIHtcbiAgICAgIGJbaSArIG5dID0gbm9kZVtuXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnVmID8gYnVmIDogdW5wYXJzZShiKTtcbiAgfVxuXG4gIC8vICoqYHY0KClgIC0gR2VuZXJhdGUgcmFuZG9tIFVVSUQqKlxuXG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYnJvb2ZhL25vZGUtdXVpZCBmb3IgQVBJIGRldGFpbHNcbiAgZnVuY3Rpb24gdjQob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgICAvLyBEZXByZWNhdGVkIC0gJ2Zvcm1hdCcgYXJndW1lbnQsIGFzIHN1cHBvcnRlZCBpbiB2MS4yXG4gICAgdmFyIGkgPSBidWYgJiYgb2Zmc2V0IHx8IDA7XG5cbiAgICBpZiAodHlwZW9mKG9wdGlvbnMpID09ICdzdHJpbmcnKSB7XG4gICAgICBidWYgPSBvcHRpb25zID09ICdiaW5hcnknID8gbmV3IEJ1ZmZlckNsYXNzKDE2KSA6IG51bGw7XG4gICAgICBvcHRpb25zID0gbnVsbDtcbiAgICB9XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICB2YXIgcm5kcyA9IG9wdGlvbnMucmFuZG9tIHx8IChvcHRpb25zLnJuZyB8fCBfcm5nKSgpO1xuXG4gICAgLy8gUGVyIDQuNCwgc2V0IGJpdHMgZm9yIHZlcnNpb24gYW5kIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYFxuICAgIHJuZHNbNl0gPSAocm5kc1s2XSAmIDB4MGYpIHwgMHg0MDtcbiAgICBybmRzWzhdID0gKHJuZHNbOF0gJiAweDNmKSB8IDB4ODA7XG5cbiAgICAvLyBDb3B5IGJ5dGVzIHRvIGJ1ZmZlciwgaWYgcHJvdmlkZWRcbiAgICBpZiAoYnVmKSB7XG4gICAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgMTY7IGlpKyspIHtcbiAgICAgICAgYnVmW2kgKyBpaV0gPSBybmRzW2lpXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYnVmIHx8IHVucGFyc2Uocm5kcyk7XG4gIH1cblxuICAvLyBFeHBvcnQgcHVibGljIEFQSVxuICB2YXIgdXVpZCA9IHY0O1xuICB1dWlkLnYxID0gdjE7XG4gIHV1aWQudjQgPSB2NDtcbiAgdXVpZC5wYXJzZSA9IHBhcnNlO1xuICB1dWlkLnVucGFyc2UgPSB1bnBhcnNlO1xuICB1dWlkLkJ1ZmZlckNsYXNzID0gQnVmZmVyQ2xhc3M7XG5cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIC8vIFB1Ymxpc2ggYXMgQU1EIG1vZHVsZVxuICAgIGRlZmluZShmdW5jdGlvbigpIHtyZXR1cm4gdXVpZDt9KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YobW9kdWxlKSAhPSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIC8vIFB1Ymxpc2ggYXMgbm9kZS5qcyBtb2R1bGVcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHV1aWQ7XG4gIH0gZWxzZSB7XG4gICAgLy8gUHVibGlzaCBhcyBnbG9iYWwgKGluIGJyb3dzZXJzKVxuICAgIHZhciBfcHJldmlvdXNSb290ID0gX2dsb2JhbC51dWlkO1xuXG4gICAgLy8gKipgbm9Db25mbGljdCgpYCAtIChicm93c2VyIG9ubHkpIHRvIHJlc2V0IGdsb2JhbCAndXVpZCcgdmFyKipcbiAgICB1dWlkLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgIF9nbG9iYWwudXVpZCA9IF9wcmV2aW91c1Jvb3Q7XG4gICAgICByZXR1cm4gdXVpZDtcbiAgICB9O1xuXG4gICAgX2dsb2JhbC51dWlkID0gdXVpZDtcbiAgfVxufSkuY2FsbCh0aGlzKTtcbiJdfQ==
